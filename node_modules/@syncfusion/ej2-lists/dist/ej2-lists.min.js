/*!
*  filename: ej2-lists.min.js
*  version : 24.2.8
*  Copyright Syncfusion Inc. 2001 - 2023. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("SyncfusionBase"),require("SyncfusionData"),require("SyncfusionButtons")):"function"==typeof define&&define.amd?define(["SyncfusionBase","SyncfusionData","SyncfusionButtons"],t):"object"==typeof exports?exports.SyncfusionLists=t(require("SyncfusionBase"),require("SyncfusionData"),require("SyncfusionButtons")):e.SyncfusionLists=t(e.SyncfusionBase,e.SyncfusionData,e.SyncfusionButtons)}(this,function(e,t,i){return function(e){function t(s){if(i[s])return i[s].exports;var n=i[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var i={};return t.m=e,t.c=i,t.i=function(e){return e},t.d=function(e,i,s){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:s})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=7)}([function(t,i){t.exports=e},function(e,t,i){"use strict";function s(e,t){var s={};if(i.i(r.isNullOrUndefined)(e)||"string"==typeof e||"number"==typeof e||!i.i(r.isNullOrUndefined)(e.isHeader))return e;for(var n=0,l=Object.keys(t);n<l.length;n++){var a=l[n],o=t[""+a],c=i.i(r.isNullOrUndefined)(o)||"string"!=typeof o?void 0:i.i(r.getValue)(o,e);i.i(r.isNullOrUndefined)(c)||(s[""+o]=c)}return s}function n(e){if(e)try{return"function"!=typeof e&&document.querySelector(e)?i.i(r.compile)(document.querySelector(e).innerHTML.trim()):i.i(r.compile)(e)}catch(t){return i.i(r.compile)(e)}}i.d(t,"a",function(){return o}),i.d(t,"b",function(){return l}),t.c=s;var l,r=i(0),a=(i.n(r),i(2)),o=(i.n(a),{li:"e-list-item",ul:"e-list-parent e-ul",group:"e-list-group-item",icon:"e-list-icon",text:"e-list-text",check:"e-list-check",checked:"e-checked",selected:"e-selected",expanded:"e-expanded",textContent:"e-text-content",hasChild:"e-has-child",level:"e-level",url:"e-list-url",collapsible:"e-icon-collapsible",disabled:"e-disabled",image:"e-list-img",iconWrapper:"e-icon-wrapper",anchorWrap:"e-anchor-wrap",navigable:"e-navigable"});!function(e){function t(e,t,s,n,a){var o=i.i(r.extend)({},N,s),c=i.i(r.extend)({},H,o.ariaAttributes),h=v(t).typeof;return"string"===h||"number"===h?l(e,t,n,s,a):d(e,t,s,c.level,n,a)}function l(e,t,i,s,n){return k(e,c(e,t,i,s,n),null,s)}function c(e,t,s,n,l){var a=[],c=i.i(r.extend)({},N,n);o=V(c.moduleName);for(var h=x(),d=0;d<t.length;d++)if(!i.i(r.isNullOrUndefined)(t[d])){var u=void 0;if(c.itemCreating&&"function"==typeof c.itemCreating){var p={dataSource:t,curData:t[d],text:t[d],options:c};c.itemCreating(p)}if(u=s?C(e,t[d],void 0,null,null,[],null,h,d,n):O(e,t[d],void 0,null,null,n,l),c.itemCreated&&"function"==typeof c.itemCreated){var p={dataSource:t,curData:t[d],text:t[d],item:u,options:c};c.itemCreated(p)}a.push(u)}return a}function h(t,n,l,a,c,h){var d=i.i(r.extend)({},N,l);o=V(d.moduleName);var u,p=!h||"listview"!==h.getModuleName()&&"multiselect"!==h.getModuleName()?i.i(r.extend)({},e.defaultMappedFields,d.fields):d.fields,m=i.i(r.extend)({},H,d.ariaAttributes),f=[];a&&(m.level=a);var I,g,b=[];n&&n.length&&!i.i(r.isNullOrUndefined)(v(n).item)&&!v(n).item.hasOwnProperty(p.id)&&(u=x());for(var w=0;w<n.length;w++){var S=s(n[w],p);if(!i.i(r.isNullOrUndefined)(n[w])){if(d.itemCreating&&"function"==typeof d.itemCreating){var E={dataSource:n,curData:n[w],text:S[p.text],options:d,fields:p};d.itemCreating(E)}var k=n[w];d.itemCreating&&"function"==typeof d.itemCreating&&(S=s(n[w],p)),S.hasOwnProperty(p.id)&&!i.i(r.isNullOrUndefined)(S[p.id])&&(u=S[p.id]);var D=[];if(d.showCheckBox&&(d.itemNavigable&&(S[p.url]||S[p.urlAttributes])?f.push(t("input",{className:o.check,attrs:{type:"checkbox"}})):D.push(t("input",{className:o.check,attrs:{type:"checkbox"}}))),!0===c)d.showIcon&&S.hasOwnProperty(p.iconCss)&&!i.i(r.isNullOrUndefined)(S[p.iconCss])&&D.push(t("span",{className:o.icon+" "+S[p.iconCss]})),I=C(t,k,S,p,d.itemClass,D,!(!k.hasOwnProperty("isHeader")||!k.isHeader),u,w,l),g=I.querySelector("."+o.anchorWrap),d.itemNavigable&&f.length&&i.i(r.prepend)(f,I.firstElementChild);else{if(I=O(t,k,S,p,d.itemClass,l,h),I.classList.add(o.level+"-"+m.level),I.setAttribute("aria-level",m.level.toString()),"presentation"!==m.groupItemRole&&"presentation"!==m.itemRole||I.removeAttribute("aria-level"),g=I.querySelector("."+o.anchorWrap),S.hasOwnProperty(p.tooltip)){var T=S[p.tooltip];if(l&&l.enableHtmlSanitizer)T=r.SanitizeHtmlHelper.sanitize(T);else{var U=t("span",{innerHTML:T});T=U.innerText,U=null}I.setAttribute("title",T)}if(S.hasOwnProperty(p.htmlAttributes)&&S[p.htmlAttributes]){var B=S[p.htmlAttributes];B.hasOwnProperty("class")&&"string"==typeof B.class&&""===B.class.trim()&&delete B.class,y(I,B)}if(S.hasOwnProperty(p.enabled)&&!1===S[p.enabled]&&I.classList.add(o.disabled),S.hasOwnProperty(p.isVisible)&&!1===S[p.isVisible]&&(I.style.display="none"),S.hasOwnProperty(p.imageUrl)&&!i.i(r.isNullOrUndefined)(S[p.imageUrl])&&!d.template){var A={src:S[p.imageUrl]};i.i(r.merge)(A,S[p.imageAttributes]);var F=t("img",{className:o.image,attrs:A});g?g.insertAdjacentElement("afterbegin",F):i.i(r.prepend)([F],I.firstElementChild)}if(d.showIcon&&S.hasOwnProperty(p.iconCss)&&!i.i(r.isNullOrUndefined)(S[p.iconCss])&&!d.template){var q=t("div",{className:o.icon+" "+S[p.iconCss]});g?g.insertAdjacentElement("afterbegin",q):i.i(r.prepend)([q],I.firstElementChild)}D.length&&i.i(r.prepend)(D,I.firstElementChild),d.itemNavigable&&f.length&&i.i(r.prepend)(f,I.firstElementChild),L(t,S,p,n,d,I,m.level)}if(g&&i.i(r.addClass)([I],[o.navigable]),d.itemCreated&&"function"==typeof d.itemCreated){var E={dataSource:n,curData:n[w],text:S[p.text],item:I,options:d,fields:p};d.itemCreated(E)}f=[],b.push(I)}}return b}function d(e,t,s,n,l,a){var o=i.i(r.extend)({},N,s);return k(e,h(e,t,s,n,l,a),o.listClass,s)}function u(e,t,s){if(o=V(N.moduleName),e&&e.length){var n,l,a=Array.prototype.slice.call(e);for(l=t?p(t,a):!0===s?a.length:-1,n=a[l+(!0===s?-1:1)];n&&(!i.i(r.isVisible)(n)||n.classList.contains(o.disabled));)l+=!0===s?-1:1,n=a[l];return n}}function p(e,t){if(t&&e){var i=t;return i=Array.prototype.slice.call(t),i.indexOf(e)}}function m(t,s,n){void 0===n&&(n="None");var l=i.i(r.extend)({},e.defaultMappedFields,s),o=(new a.Query).group(l.groupBy);o=f(n,"key",o);var c=I(t,o);t=[];for(var h=0;h<c.length;h++){var d=c[h].items,u={};u[l.text]=c[h].key,u.isHeader=!0;var p=l.text;"id"===p&&(p="text",u[""+p]=c[h].key),u._id="group-list-item-"+(c[h].key?c[h].key.toString().trim():"undefined"),u.items=d,t.push(u);for(var m=0;m<d.length;m++)t.push(d[m])}return t}function f(e,t,i){if(void 0===i&&(i=new a.Query),"Ascending"===e)i.sortBy(t,"ascending",!0);else if("Descending"===e)i.sortBy(t,"descending",!0);else for(var s=0;s<i.queries.length;s++)"onSortBy"===i.queries[s].fn&&i.queries.splice(s,1);return i}function I(e,t){return new a.DataManager(e).executeLocal(t)}function g(t,s){var n=i.i(r.extend)({},N,s),l=i.i(r.extend)({},e.defaultMappedFields,n.fields),a=t.cloneNode(!0),o=[];a.classList.add("json-parent");var c=a.querySelectorAll(".json-parent>li");a.classList.remove("json-parent");for(var h=0;h<c.length;h++){for(var d=c[h],u=d.querySelector("a"),p=d.querySelector("ul"),m={},f=u?u.childNodes:d.childNodes,I=Object.keys(f),v=0;v<f.length;v++)f[Number(I[v])].hasChildNodes()||(m[l.text]=f[Number(I[v])].textContent);var y=b(d);y.id?(m[l.id]=y.id,delete y.id):m[l.id]=x(),Object.keys(y).length&&(m[l.htmlAttributes]=y),u&&(y=b(u),Object.keys(y).length&&(m[l.urlAttributes]=y)),p&&(m[l.child]=g(p,s)),o.push(m)}return o}function v(e){for(var t={typeof:null,item:null},s=0;s<e.length;s++)if(!i.i(r.isNullOrUndefined)(e[s]))return t={typeof:typeof e[s],item:e[s]};return t}function y(e,t){var s={};i.i(r.merge)(s,t),s.class&&(i.i(r.addClass)([e],s.class.split(" ")),delete s.class),i.i(r.attributes)(e,s)}function b(e){for(var t={},i=e.attributes,s=0;s<i.length;s++)t[i[s].nodeName]=i[s].nodeValue;return t}function w(t,l,a,c,h,d){o=V(N.moduleName);for(var u,p=t("ul",{className:o.ul,attrs:{role:"presentation"}}),m=i.i(r.extend)({},N,h),f=i.i(r.extend)({},e.defaultMappedFields,c),I=n(l),g=[],v=x(),y=0;y<a.length;y++){var b=s(a[y],f),w=a[y],S=w.isHeader;if(u="string"==typeof a[y]||"number"==typeof a[y]?w:b[f.value],m.itemCreating&&"function"==typeof m.itemCreating){var L={dataSource:a,curData:w,text:u,options:m,fields:f};m.itemCreating(L)}m.itemCreating&&"function"==typeof m.itemCreating&&(b=s(a[y],f),u="string"==typeof a[y]||"number"==typeof a[y]?w:b[f.value]);var C=t("li",{id:v+"-"+y,className:S?o.group:o.li,attrs:{role:"presentation"}});if(S)"string"==typeof a[y]||"number"==typeof a[y]?C.innerText=w:C.innerText=b[f.text];else{var E=S?m.groupTemplateID:m.templateID;if(S)if(d&&"listview"!==d.getModuleName()){var O=I(w,d,"headerTemplate",E,!!m.isStringTemplate,null,C);O&&i.i(r.append)(O,C)}else i.i(r.append)(I(w,d,"headerTemplate",E,!!m.isStringTemplate),C);else if(d&&"listview"!==d.getModuleName()){var O=I(w,d,"template",E,!!m.isStringTemplate,null,C);O&&i.i(r.append)(O,C)}else i.i(r.append)(I(w,d,"template",E,!!m.isStringTemplate),C);C.setAttribute("data-value",i.i(r.isNullOrUndefined)(u)?"null":u),C.setAttribute("role","option")}if(m.itemCreated&&"function"==typeof m.itemCreated){var L={dataSource:a,curData:w,text:u,item:C,options:m,fields:f};m.itemCreated(L)}g.push(C)}return i.i(r.append)(g,p),p}function S(t,s,l,a,o,c){for(var h=n(t),d=i.i(r.extend)({},e.defaultMappedFields,l),u=i.i(r.extend)({},N,o),p=d.groupBy,m=0,f=a;m<f.length;m++){var I=f[m],g={};if(g[""+p]=I.textContent,I.innerHTML="",c&&"listview"!==c.getModuleName()){var v=h(g,c,"groupTemplate",u.groupTemplateID,!!u.isStringTemplate,null,I);v&&i.i(r.append)(v,I)}else i.i(r.append)(h(g,c,"groupTemplate",u.groupTemplateID,!!u.isStringTemplate),I)}return a}function x(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}function L(e,t,i,s,n,l,a){var c=t[i.child]||[],h=t[i.hasChildren];if(c.length&&(h=!0,l.classList.add(o.hasChild),n.processSubChild)){var u=d(e,c,n,++a);l.appendChild(u)}if(n.expandCollapse&&h&&!n.template){l.firstElementChild.classList.add(o.iconWrapper);("Left"===n.expandIconPosition?r.prepend:r.append)([e("div",{className:"e-icons "+n.expandIconClass})],l.querySelector("."+o.textContent))}}function C(e,t,s,n,l,a,c,h,d,u){var p,m=i.i(r.extend)({},N,u),f=i.i(r.extend)({},H,m.ariaAttributes),I=t,g=t;"string"!=typeof t&&"number"!=typeof t&&"boolean"!=typeof t&&(p=t,I="boolean"==typeof s[n.text]||"number"==typeof s[n.text]?s[n.text]:s[n.text]||"",g=s[n.value]);var v;v=i.i(r.isNullOrUndefined)(p)||i.i(r.isNullOrUndefined)(s[n.id])||""===s[n.id]?h+"-"+d:h;var b=e("li",{className:(!0===c?o.group:o.li)+" "+(i.i(r.isNullOrUndefined)(l)?"":l),id:v,attrs:""!==f.groupItemRole&&""!==f.itemRole?{role:!0===c?f.groupItemRole:f.itemRole}:{}});return p&&s.hasOwnProperty(n.enabled)&&"false"===s[n.enabled].toString()&&b.classList.add(o.disabled),c?b.innerText=I:(b.setAttribute("data-value",i.i(r.isNullOrUndefined)(g)?"null":g),b.setAttribute("role","option"),p&&s.hasOwnProperty(n.htmlAttributes)&&s[n.htmlAttributes]&&y(b,s[n.htmlAttributes]),a.length&&!m.itemNavigable&&i.i(r.append)(a,b),p&&(s[n.url]||s[n.urlAttributes]&&s[n.urlAttributes].href)?b.appendChild(E(e,p,n,I,a,m.itemNavigable)):(a.length&&m.itemNavigable&&i.i(r.append)(a,b),b.appendChild(document.createTextNode(I)))),b}function V(e){return{li:"e-"+e+"-item",ul:"e-"+e+"-parent e-ul",group:"e-"+e+"-group-item",icon:"e-"+e+"-icon",text:"e-"+e+"-text",check:"e-"+e+"-check",checked:"e-checked",selected:"e-selected",expanded:"e-expanded",textContent:"e-text-content",hasChild:"e-has-child",level:"e-level",url:"e-"+e+"-url",collapsible:"e-icon-collapsible",disabled:"e-disabled",image:"e-"+e+"-img",iconWrapper:"e-icon-wrapper",anchorWrap:"e-anchor-wrap",navigable:"e-navigable"}}function E(e,t,n,l,a,c){var h=s(t,n),d={href:h[n.url]};h.hasOwnProperty(n.urlAttributes)&&h[n.urlAttributes]&&(i.i(r.merge)(d,h[n.urlAttributes]),d.href=h[n.url]?h[n.url]:h[n.urlAttributes].href);var u;if(c){u=e("a",{className:o.text+" "+o.url});var p=e("div",{className:o.anchorWrap});a&&a.length&&i.i(r.append)(a,p),p.appendChild(document.createTextNode(l)),i.i(r.append)([p],u)}else u=e("a",{className:o.text+" "+o.url,innerHTML:l});return y(u,d),u}function O(e,t,s,l,a,c,h){var d,u,p,m=i.i(r.extend)({},N,c),f=i.i(r.extend)({},H,m.ariaAttributes),I=t;"string"!=typeof t&&"number"!=typeof t&&(p=t,I=s[l.text]||"",d=i.i(r.isNullOrUndefined)(s._id)?s[l.id]:s._id,u=!(!t.hasOwnProperty("isHeader")||!t.isHeader)),c&&c.enableHtmlSanitizer&&(I=I);var g=e("li",{className:(!0===u?o.group:o.li)+" "+(i.i(r.isNullOrUndefined)(a)?"":a),attrs:""!==f.groupItemRole&&""!==f.itemRole?{role:!0===u?f.groupItemRole:f.itemRole}:{}});if(!0==!i.i(r.isNullOrUndefined)(d)?g.setAttribute("data-uid",d):g.setAttribute("data-uid",x()),u&&c&&c.groupTemplate){var v=n(c.groupTemplate);if(h&&"listview"!==h.getModuleName()){var y=v(t,h,"groupTemplate",m.groupTemplateID,!!m.isStringTemplate,null,g);y&&i.i(r.append)(y,g)}else i.i(r.append)(v(t,h,"groupTemplate",m.groupTemplateID,!!m.isStringTemplate),g)}else if(!u&&c&&c.template){var v=n(c.template);if(h&&"listview"!==h.getModuleName()){var y=v(t,h,"template",m.templateID,!!m.isStringTemplate,null,g);y&&i.i(r.append)(y,g)}else i.i(r.append)(v(t,h,"template",m.templateID,!!m.isStringTemplate),g)}else{var b=e("div",{className:o.textContent,attrs:""!==f.wrapperRole?{role:f.wrapperRole}:{}});if(p&&(s[l.url]||s[l.urlAttributes]&&s[l.urlAttributes].href))b.appendChild(E(e,p,l,I,null,m.itemNavigable));else{var w=e("span",{className:o.text,attrs:""!==f.itemText?{role:f.itemText}:{}});c&&c.enableHtmlSanitizer?w.innerText=r.SanitizeHtmlHelper.sanitize(I):w.innerHTML=I,b.appendChild(w)}g.appendChild(b)}return g}function k(e,t,s,n){var l=i.i(r.extend)({},N,n),a=i.i(r.extend)({},H,l.ariaAttributes);o=V(l.moduleName);var c=e("ul",{className:o.ul+" "+(i.i(r.isNullOrUndefined)(s)?"":s),attrs:""!==a.listRole?{role:a.listRole}:{}});return i.i(r.append)(t,c),c}function D(e,t,s,n){var l=i.i(r.extend)({},N,n);return o=V(l.moduleName),("Left"===l.expandIconPosition?r.prepend:r.append)([e("div",{className:"e-icons "+l.expandIconClass+" "+(i.i(r.isNullOrUndefined)(s)?"":s)})],t.querySelector("."+o.textContent)),t}e.defaultMappedFields={id:"id",text:"text",url:"url",value:"value",isChecked:"isChecked",enabled:"enabled",expanded:"expanded",selected:"selected",iconCss:"iconCss",child:"child",isVisible:"isVisible",hasChildren:"hasChildren",tooltip:"tooltip",htmlAttributes:"htmlAttributes",urlAttributes:"urlAttributes",imageAttributes:"imageAttributes",imageUrl:"imageUrl",groupBy:null,sortBy:null};var H={level:1,listRole:"presentation",itemRole:"presentation",groupItemRole:"group",itemText:"list-item",wrapperRole:"presentation"},N={showCheckBox:!1,showIcon:!1,enableHtmlSanitizer:!1,expandCollapse:!1,fields:e.defaultMappedFields,ariaAttributes:H,listClass:"",itemClass:"",processSubChild:!1,sortOrder:"None",template:null,groupTemplate:null,headerTemplate:null,expandIconClass:"e-icon-collapsible",moduleName:"list",expandIconPosition:"Right",itemNavigable:!1};e.createList=t,e.createListFromArray=l,e.createListItemFromArray=c,e.createListItemFromJson=h,e.createListFromJson=d,e.getSiblingLI=u,e.indexOf=p,e.groupDataSource=m,e.addSorting=f,e.getDataSource=I,e.createJsonFromElement=g,e.renderContentTemplate=w,e.renderGroupTemplate=S,e.generateId=x,e.generateUL=k,e.generateIcon=D}(l||(l={}))},function(e,i){e.exports=t},function(e,t,i){"use strict";i.d(t,"a",function(){return d}),i.d(t,"b",function(){return u}),i.d(t,"c",function(){return p});var s=i(0),n=(i.n(s),i(2)),l=(i.n(n),i(10)),r=(i.n(l),i(1)),a=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),o=this&&this.__decorate||function(e,t,i,s){var n,l=arguments.length,r=l<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(l<3?n(r):l>3?n(t,i,r):n(t,i))||r);return l>3&&r&&Object.defineProperty(t,i,r),r},c={None:[],SlideLeft:["SlideRightOut","SlideLeftOut","SlideLeftIn","SlideRightIn"],SlideDown:["SlideTopOut","SlideBottomOut","SlideBottomIn","SlideTopIn"],Zoom:["FadeOut","FadeZoomOut","FadeZoomIn","FadeIn"],Fade:["FadeOut","FadeOut","FadeIn","FadeIn"]},h={None:[],SlideLeft:["SlideLeftOut","SlideRightOut","SlideRightIn","SlideLeftIn"],SlideDown:["SlideBottomOut","SlideTopOut","SlideTopIn","SlideBottomIn"],Zoom:["FadeZoomOut","FadeOut","FadeIn","FadeZoomIn"],Fade:["FadeOut","FadeOut","FadeIn","FadeIn"]},d={root:"e-listview",hover:"e-hover",selected:"e-active",focused:"e-focused",parentItem:"e-list-parent",listItem:"e-list-item",listIcon:"e-list-icon",textContent:"e-text-content",listItemText:"e-list-text",groupListItem:"e-list-group-item",hasChild:"e-has-child",view:"e-view",header:"e-list-header",headerText:"e-headertext",headerTemplateText:"e-headertemplate-text",text:"e-text",disable:"e-disabled",container:"e-list-container",icon:"e-icons",backIcon:"e-icon-back",backButton:"e-back-button",checkboxWrapper:"e-checkbox-wrapper",checkbox:"e-checkbox",checked:"e-check",checklist:"e-checklist",checkboxIcon:"e-frame",checkboxRight:"e-checkbox-right",checkboxLeft:"e-checkbox-left",listviewCheckbox:"e-listview-checkbox",itemCheckList:"e-checklist",virtualElementContainer:"e-list-virtualcontainer"},u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),o([i.i(s.Property)("id")],t.prototype,"id",void 0),o([i.i(s.Property)("text")],t.prototype,"text",void 0),o([i.i(s.Property)("isChecked")],t.prototype,"isChecked",void 0),o([i.i(s.Property)("isVisible")],t.prototype,"isVisible",void 0),o([i.i(s.Property)("enabled")],t.prototype,"enabled",void 0),o([i.i(s.Property)("iconCss")],t.prototype,"iconCss",void 0),o([i.i(s.Property)("child")],t.prototype,"child",void 0),o([i.i(s.Property)("tooltip")],t.prototype,"tooltip",void 0),o([i.i(s.Property)("groupBy")],t.prototype,"groupBy",void 0),o([i.i(s.Property)("text")],t.prototype,"sortBy",void 0),o([i.i(s.Property)("htmlAttributes")],t.prototype,"htmlAttributes",void 0),o([i.i(s.Property)("tableName")],t.prototype,"tableName",void 0),t}(s.ChildProperty),p=function(e){function t(t,i){var s=e.call(this,t,i)||this;return s.previousSelectedItems=[],s.hiddenItems=[],s.enabledItems=[],s.disabledItems=[],s}return a(t,e),t.prototype.onPropertyChanged=function(e,t){for(var n=0,l=Object.keys(e);n<l.length;n++){switch(l[n]){case"htmlAttributes":this.setHTMLAttribute();break;case"cssClass":this.setCSSClass(t.cssClass);break;case"enable":this.setEnable();break;case"width":case"height":this.setSize();break;case"enableRtl":this.setEnableRTL();break;case"fields":this.listBaseOption.fields=this.fields.properties,this.enableVirtualization?this.virtualizationModule.reRenderUiVirtualization():this.reRender();break;case"headerTitle":this.curDSLevel.length||this.header(this.headerTitle,!1,"header");break;case"query":this.enableVirtualization?this.virtualizationModule.reRenderUiVirtualization():this.reRender();break;case"showHeader":this.header(this.headerTitle,!1,"header");break;case"enableVirtualization":i.i(s.isNullOrUndefined)(this.contentContainer)||i.i(s.detach)(this.contentContainer),this.refresh();break;case"showCheckBox":case"checkBoxPosition":this.enableVirtualization?this.virtualizationModule.reRenderUiVirtualization():this.setCheckbox();break;case"dataSource":this.enableVirtualization?this.virtualizationModule.reRenderUiVirtualization():this.reRender();break;case"sortOrder":case"template":this.enableVirtualization||this.refresh();break;case"showIcon":this.enableVirtualization?this.virtualizationModule.reRenderUiVirtualization():(this.listBaseOption.showIcon=this.showIcon,this.curViewDS=this.getSubDS(),this.resetCurrentList())}}},t.prototype.setHTMLAttribute=function(){Object.keys(this.htmlAttributes).length&&i.i(s.attributes)(this.element,this.htmlAttributes)},t.prototype.setCSSClass=function(e){this.cssClass&&i.i(s.addClass)([this.element],this.cssClass.split(" ").filter(function(e){return e})),e&&i.i(s.removeClass)([this.element],e.split(" ").filter(function(e){return e}))},t.prototype.setSize=function(){this.element.style.height=i.i(s.formatUnit)(this.height),this.element.style.width=i.i(s.formatUnit)(this.width),this.isWindow=!this.element.clientHeight},t.prototype.setEnable=function(){this.enableElement(this.element,this.enable)},t.prototype.setEnableRTL=function(){this.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")},t.prototype.enableElement=function(e,t){t?e.classList.remove(d.disable):e.classList.add(d.disable)},t.prototype.header=function(e,t,n){if(void 0===this.headerEle&&this.showHeader){this.headerEle=this.createElement("div",{className:d.header});var l=this.createElement("span",{className:d.headerText});this.enableHtmlSanitizer?(this.setProperties({headerTitle:s.SanitizeHtmlHelper.sanitize(this.headerTitle)},!0),l.innerText=this.headerTitle):l.innerHTML=this.headerTitle;var r=this.createElement("div",{className:d.text,innerHTML:l.outerHTML}),a=this.createElement("div",{className:d.icon+" "+d.backIcon+" "+d.backButton,attrs:{style:"display:none;"}});if(this.headerEle.appendChild(a),this.headerEle.appendChild(r),this.headerTemplate){var o=i.i(s.compile)(this.headerTemplate),c=this.createElement("div",{className:d.headerTemplateText}),h=o({},this,n,this.LISTVIEW_HEADERTEMPLATE_ID,null,null,this.headerEle);h&&i.i(s.append)(h,c),i.i(s.append)([c],this.headerEle),this.isReact&&this.renderReactTemplates()}this.headerTemplate&&this.headerTitle&&r.classList.add("header"),this.element.classList.add("e-has-header"),i.i(s.prepend)([this.headerEle],this.element)}else if(this.headerEle)if(this.showHeader){this.headerEle.style.display="";var r=this.headerEle.querySelector("."+d.headerText),a=this.headerEle.querySelector("."+d.backIcon);this.enableHtmlSanitizer&&(e=s.SanitizeHtmlHelper.sanitize(e)),r.innerHTML=e,this.headerTemplate&&t&&(r.parentElement.classList.remove("header"),this.headerEle.querySelector("."+d.headerTemplateText).classList.add("nested-header")),this.headerTemplate&&!t&&(r.parentElement.classList.add("header"),this.headerEle.querySelector("."+d.headerTemplateText).classList.remove("nested-header"),this.headerEle.querySelector("."+d.headerTemplateText).classList.add("header")),a.style.display=!0===t?"":"none"}else this.headerEle.style.display="none"},t.prototype.switchView=function(e,t,i){var n=this;if(e&&t){var l=e.style.position,r="hidden"!==this.element.style.overflow?this.element.style.overflow:"";e.style.position="absolute",e.classList.add("e-view");var a=void 0,o=this.animation.duration;if(this.animation.effect)a=this.enableRtl?h[this.animation.effect]:c[this.animation.effect];else{a=c.SlideLeft,i=this.enableRtl,o=0}this.element.style.overflow="hidden",this.aniObj.animate(e,{name:!0===i?a[0]:a[1],duration:0===o&&"Enable"===s.animationMode?400:o,timingFunction:this.animation.easing,end:function(t){e.style.display="none",n.element.style.overflow=r,e.style.position=l,e.classList.remove("e-view")}}),t.style.display="",this.aniObj.animate(t,{name:!0===i?a[2]:a[3],duration:0===o&&"Enable"===s.animationMode?400:o,timingFunction:this.animation.easing,end:function(){n.trigger("actionComplete")}}),this.curUL=t}},t.prototype.preRender=function(){if(this.template)try{"function"!=typeof this.template&&document.querySelectorAll(this.template).length&&this.setProperties({template:document.querySelector(this.template).innerHTML.trim()},!0)}catch(e){i.i(s.compile)(this.template)}this.listBaseOption={template:this.template,headerTemplate:this.headerTemplate,groupTemplate:this.groupTemplate,expandCollapse:!0,listClass:"",ariaAttributes:{itemRole:"listitem",listRole:"list",itemText:"",groupItemRole:"presentation",wrapperRole:"presentation"},fields:this.fields.properties,sortOrder:this.sortOrder,showIcon:this.showIcon,itemCreated:this.renderCheckbox.bind(this),templateID:this.element.id+"Template",groupTemplateID:this.element.id+"GroupTemplate",enableHtmlSanitizer:this.enableHtmlSanitizer},this.initialization()},t.prototype.initialization=function(){this.curDSLevel=[],this.animateOptions={},this.curViewDS=[],this.currentLiElements=[],this.isNestedList=!1,this.selectedData=[],this.selectedId=this.enablePersistence?this.selectedId:[],this.LISTVIEW_TEMPLATE_ID=this.element.id+"Template",this.LISTVIEW_GROUPTEMPLATE_ID=this.element.id+"GroupTemplate",this.LISTVIEW_HEADERTEMPLATE_ID=this.element.id+"HeaderTemplate",this.aniObj=new s.Animation(this.animateOptions),this.removeElement(this.curUL),this.removeElement(this.ulElement),this.removeElement(this.headerEle),this.removeElement(this.contentContainer),this.curUL=this.ulElement=this.liCollection=this.headerEle=this.contentContainer=void 0},t.prototype.renderCheckbox=function(e){var t=this;if(e.item.classList.contains(d.hasChild)&&(this.isNestedList=!0),this.showCheckBox&&e.item.classList.contains(d.listItem)){var n,a=void 0;a=i.i(l.createCheckBox)(this.createElement,!1,{checked:!1,enableRtl:this.enableRtl,cssClass:d.listviewCheckbox}),a.setAttribute("role","checkbox");var o=a.querySelector("."+d.checkboxIcon);if(e.item.classList.add(d.itemCheckList),e.item.firstElementChild.classList.add(d.checkbox),"string"!=typeof this.dataSource[0]&&"number"!=typeof this.dataSource[0])if(n=i.i(r.c)(e.curData,this.listBaseOption.fields),this.enablePersistence&&!i.i(s.isNullOrUndefined)(this.selectedId)){var c=this.selectedId.findIndex(function(e){return e===n[t.listBaseOption.fields.id].toString()});-1!==c&&this.checkInternally(e,a)}else n[this.listBaseOption.fields.isChecked]&&this.checkInternally(e,a);else"string"!=typeof this.dataSource[0]&&"number"!=typeof this.dataSource[0]||-1===this.selectedData.indexOf(e.text)||this.checkInternally(e,a);a.setAttribute("aria-checked",o.classList.contains(d.checked)?"true":"false"),a.setAttribute("aria-label",e.text),"Left"===this.checkBoxPosition?(a.classList.add(d.checkboxLeft),e.item.firstElementChild.classList.add(d.checkboxLeft),e.item.firstElementChild.insertBefore(a,e.item.firstElementChild.childNodes[0])):(a.classList.add(d.checkboxRight),e.item.firstElementChild.classList.add(d.checkboxRight),e.item.firstElementChild.appendChild(a)),this.currentLiElements.push(e.item),"Left"===this.checkBoxPosition?this.virtualCheckBox=e.item.firstElementChild.children[0]:this.virtualCheckBox=e.item.firstElementChild.lastElementChild}},t.prototype.checkInternally=function(e,t){e.item.classList.add(d.selected),t.querySelector("."+d.checkboxIcon).classList.add(d.checked),t.setAttribute("aria-checked","true")},t.prototype.checkItem=function(e){this.toggleCheckBase(e,!0)},t.prototype.toggleCheckBase=function(e,t){if(this.showCheckBox){var n=e;if(e instanceof Object&&e.constructor!==HTMLLIElement&&(n=this.getLiFromObjOrElement(e)),!i.i(s.isNullOrUndefined)(n)){var l=n.querySelector("."+d.checkboxIcon);!0===t?n.classList.add(d.selected):n.classList.remove(d.selected),!0===t?l.classList.add(d.checked):l.classList.remove(d.checked),l.parentElement.setAttribute("aria-checked",t?"true":"false")}this.setSelectedItemData(n),this.updateSelectedId()}},t.prototype.uncheckItem=function(e){this.toggleCheckBase(e,!1)},t.prototype.checkAllItems=function(){this.toggleAllCheckBase(!0)},t.prototype.uncheckAllItems=function(){this.toggleAllCheckBase(!1)},t.prototype.toggleAllCheckBase=function(e){if(this.showCheckBox){for(var t=0;t<this.liCollection.length;t++){var i=this.liCollection[t].querySelector("."+d.checkboxIcon);i&&(e?i.classList.contains(d.checked)||this.checkItem(this.liCollection[t]):i.classList.contains(d.checked)&&this.uncheckItem(this.liCollection[t]))}this.enableVirtualization&&this.virtualizationModule.checkedItem(e),this.updateSelectedId()}},t.prototype.setCheckbox=function(){if(this.showCheckBox)for(var e=Array.prototype.slice.call(this.element.querySelectorAll("."+d.listItem)),t={item:void 0,curData:void 0,dataSource:void 0,fields:void 0,options:void 0,text:""},i=0;i<e.length;i++){var s=e[i];t.item=s,t.curData=this.getItemData(s),s.querySelector("."+d.checkboxWrapper)&&this.removeElement(s.querySelector("."+d.checkboxWrapper)),this.renderCheckbox(t),t.item.classList.contains(d.selected)&&this.checkInternally(t,t.item.querySelector("."+d.checkboxWrapper))}else{for(var e=Array.prototype.slice.call(this.element.querySelectorAll("."+d.itemCheckList)),i=0;i<e.length;i++){var s=e[i];s.classList.remove(d.selected),s.firstElementChild.classList.remove(d.checkbox),this.removeElement(s.querySelector("."+d.checkboxWrapper))}this.selectedItems&&this.selectedItems.item.classList.add(d.selected)}},t.prototype.refreshItemHeight=function(){this.virtualizationModule&&this.virtualizationModule.refreshItemHeight()},t.prototype.clickHandler=function(e){if(!Array.isArray(this.dataSource)||0!==this.dataSource.length){var t=e.target;this.targetElement=t;var n,l=t.classList;if(l.contains(d.backIcon)||l.contains(d.headerText))this.showCheckBox&&this.curDSLevel[this.curDSLevel.length-1]&&this.uncheckAllItems(),this.back();else{var r=i.i(s.closest)(t.parentNode,"."+d.listItem);if(null===r&&(r=t),this.removeFocus(),this.enable&&this.showCheckBox&&this.isValidLI(r))if(e.target.classList.contains(d.checkboxIcon)){if(r.classList.add(d.focused),i.i(s.isNullOrUndefined)(r.querySelector("."+d.checked))){var a={curData:void 0,dataSource:void 0,fields:void 0,options:void 0,text:void 0,item:r};this.checkInternally(a,a.item.querySelector("."+d.checkboxWrapper))}else this.uncheckItem(r),r.classList.add(d.focused);if(this.enableVirtualization&&this.virtualizationModule.setCheckboxLI(r,e),e){var o=this.selectEventData(r,e),c=r.querySelector("."+d.checkboxIcon);i.i(s.merge)(o,{isChecked:c.classList.contains(d.checked)}),this.trigger("select",o)}}else r.classList.contains(d.hasChild)?(this.removeHover(),this.removeSelect(),this.removeSelect(r),this.setSelectLI(r,e),r.classList.remove(d.selected)):(this.setCheckboxLI(r,e),"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||(t.classList.add("e-focused"),this.targetElement=t));else this.setSelectLI(r,e),"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||(t.classList.add("e-focused"),this.targetElement=t);n=i.i(s.closest)(e.target,"li"),i.i(s.isNullOrUndefined)(n)||n.classList.contains("e-has-child")&&!e.target.parentElement.classList.contains("e-listview-checkbox")&&n.classList.add(d.disable)}this.updateSelectedId()}},t.prototype.removeElement=function(e){return e&&e.parentNode&&e.parentNode.removeChild(e)},t.prototype.hoverHandler=function(e){var t=i.i(s.closest)(e.target.parentNode,"."+d.listItem);this.setHoverLI(t)},t.prototype.leaveHandler=function(e){this.removeHover()},t.prototype.homeKeyHandler=function(e,t){if(e.preventDefault(),Object.keys(this.dataSource).length&&this.curUL){var i=this.curUL.querySelectorAll("."+d.listItem),s=this.curUL.querySelector("."+d.focused)||this.curUL.querySelector("."+d.selected);s&&(s.classList.remove(d.focused),this.showCheckBox||s.classList.remove(d.selected));var n=t?i.length-1:0;i[n].classList.contains(d.hasChild)||this.showCheckBox?i[n].classList.add(d.focused):this.setSelectLI(i[n],e),i[n]?this.element.setAttribute("aria-activedescendant",i[n].id.toString()):this.element.removeAttribute("aria-activedescendant")}},t.prototype.onArrowKeyDown=function(e,t){var n,l;return!i.i(s.isNullOrUndefined)(this.curUL.querySelector("."+d.hasChild))||this.showCheckBox?(l=this.curUL.querySelector("."+d.focused)||this.curUL.querySelector("."+d.selected),n=r.b.getSiblingLI(this.curUL.querySelectorAll("."+d.listItem),l,t),i.i(s.isNullOrUndefined)(n)||(l&&(l.classList.remove(d.focused),this.showCheckBox||l.classList.remove(d.selected)),n.classList.contains(d.hasChild)||this.showCheckBox?n.classList.add(d.focused):this.setSelectLI(n,e))):(l=this.curUL.querySelector("."+d.selected),n=r.b.getSiblingLI(this.curUL.querySelectorAll("."+d.listItem),l,t),this.setSelectLI(n,e)),n?this.element.setAttribute("aria-activedescendant",n.id.toString()):this.element.removeAttribute("aria-activedescendant"),n},t.prototype.arrowKeyHandler=function(e,t){var i=this;if(e.preventDefault(),Object.keys(this.dataSource).length&&this.curUL){var s=this.onArrowKeyDown(e,t),n=this.element.getBoundingClientRect().top,l=this.element.getBoundingClientRect().height,r=this.curUL.querySelector("."+d.listItem).getBoundingClientRect(),a=void 0,o=void 0;if(this.fields.groupBy&&(o=this.curUL.querySelector("."+d.groupListItem).getBoundingClientRect()),s){var c=s.getBoundingClientRect().top,h=s.getBoundingClientRect().height;if(t)(a=this.isWindow?c:c-n)<0&&(!0===this.isWindow?window.scroll(0,pageYOffset+a):this.element.scrollTop=this.element.scrollTop+a);else{var u=this.isWindow?window.innerHeight:l;a=this.isWindow?c+h:c-n+h,a>u&&(!0===this.isWindow?window.scroll(0,pageYOffset+(a-u)):this.element.scrollTop=this.element.scrollTop+(a-u))}}else if(this.enableVirtualization&&t&&this.virtualizationModule.uiFirstIndex)this.onUIScrolled=function(){i.onArrowKeyDown(e,t),i.onUIScrolled=void 0},a=this.virtualizationModule.listItemHeight,!0===this.isWindow?window.scroll(0,pageYOffset-a):this.element.scrollTop=this.element.scrollTop-a;else if(t)if(this.showHeader&&this.headerEle){var p=o?o.top:r.top,m=this.headerEle.getBoundingClientRect();a=m.top<0?m.height-p:0,!0===this.isWindow?window.scroll(0,pageYOffset-a):this.element.scrollTop=0}else this.fields.groupBy&&(a=this.isWindow?o.top<0?o.top:0:n-r.top+o.height,!0===this.isWindow?window.scroll(0,pageYOffset+a):this.element.scrollTop=this.element.scrollTop-a)}},t.prototype.enterKeyHandler=function(e){if(Object.keys(this.dataSource).length&&this.curUL){var t=!i.i(s.isNullOrUndefined)(this.curUL.querySelector("."+d.hasChild)),n=this.curUL.querySelector("."+d.focused);t&&n&&(n.classList.remove(d.focused),this.showCheckBox&&(this.removeSelect(),this.removeSelect(n),this.removeHover()),this.setSelectLI(n,e))}},t.prototype.spaceKeyHandler=function(e){if(e.preventDefault(),this.enable&&this.showCheckBox&&Object.keys(this.dataSource).length&&this.curUL){var t=this.curUL.querySelector("."+d.focused),n=void 0,l=void 0;if(!i.i(s.isNullOrUndefined)(t)&&i.i(s.isNullOrUndefined)(t.querySelector("."+d.checked))){var r={curData:void 0,dataSource:void 0,fields:void 0,options:void 0,text:void 0,item:t};n=r.item.querySelector("."+d.checkboxWrapper),this.checkInternally(r,n),l=n.querySelector("."+d.checkboxIcon+"."+d.icon)}else this.uncheckItem(t);var a=this.selectEventData(t,e);i.i(s.merge)(a,{isChecked:!!l&&l.classList.contains(d.checked)}),this.trigger("select",a),this.updateSelectedId()}},t.prototype.keyActionHandler=function(e){switch(e.keyCode){case 36:this.homeKeyHandler(e);break;case 35:this.homeKeyHandler(e,!0);break;case 40:this.arrowKeyHandler(e);break;case 38:this.arrowKeyHandler(e,!0);break;case 13:this.enterKeyHandler(e);break;case 8:this.showCheckBox&&this.curDSLevel[this.curDSLevel.length-1]&&this.uncheckAllItems(),this.back();break;case 32:!i.i(s.isNullOrUndefined)(this.targetElement)&&this.targetElement.classList.contains("e-focused")||this.spaceKeyHandler(e)}},t.prototype.swipeActionHandler=function(e){"Right"===e.swipeDirection&&e.velocity>.5&&"touchend"===e.originalEvent.type&&(this.showCheckBox&&this.curDSLevel[this.curDSLevel.length-1]&&this.uncheckAllItems(),this.back())},t.prototype.focusout=function(){if(Object.keys(this.dataSource).length&&this.curUL){var e=this.curUL.querySelector("."+d.focused);e&&(e.classList.remove(d.focused),this.showCheckBox||i.i(s.isNullOrUndefined)(this.selectedLI)||this.selectedLI.classList.add(d.selected))}},t.prototype.wireEvents=function(){s.EventHandler.add(this.element,"keydown",this.keyActionHandler,this),s.EventHandler.add(this.element,"click",this.clickHandler,this),s.EventHandler.add(this.element,"mouseover",this.hoverHandler,this),s.EventHandler.add(this.element,"mouseout",this.leaveHandler,this),s.EventHandler.add(this.element,"focusout",this.focusout,this),this.touchModule=new s.Touch(this.element,{swipe:this.swipeActionHandler.bind(this)}),i.i(s.isNullOrUndefined)(this.scroll)||s.EventHandler.add(this.element,"scroll",this.onListScroll,this)},t.prototype.unWireEvents=function(){s.EventHandler.remove(this.element,"click",this.clickHandler),s.EventHandler.remove(this.element,"mouseover",this.hoverHandler),s.EventHandler.remove(this.element,"mouseout",this.leaveHandler),s.EventHandler.remove(this.element,"mouseover",this.hoverHandler),s.EventHandler.remove(this.element,"mouseout",this.leaveHandler),i.i(s.isNullOrUndefined)(this.scroll)||s.EventHandler.remove(this.element,"scroll",this.onListScroll),this.touchModule.destroy(),this.touchModule=null},t.prototype.removeFocus=function(){for(var e=this.element.querySelectorAll("."+d.focused),t=0,i=e;t<i.length;t++){i[t].classList.remove(d.focused)}},t.prototype.removeHover=function(){var e=this.element.querySelector("."+d.hover);e&&e.classList.remove(d.hover)},t.prototype.removeSelect=function(e){if(i.i(s.isNullOrUndefined)(e))for(var t=this.element.querySelectorAll("."+d.selected),n=0,l=t;n<l.length;n++){var r=l[n];this.showCheckBox&&r.querySelector("."+d.checked)||r.classList.remove(d.selected)}else e.classList.remove(d.selected)},t.prototype.isValidLI=function(e){return e&&e.classList.contains(d.listItem)&&!e.classList.contains(d.groupListItem)&&!e.classList.contains(d.disable)},t.prototype.setCheckboxLI=function(e,t){if(this.isValidLI(e)&&this.enable&&this.showCheckBox){this.curUL.querySelector("."+d.focused)&&this.curUL.querySelector("."+d.focused).classList.remove(d.focused);var n=e.querySelector("textarea")||e.querySelector("input");e.classList.add(d.focused),i.i(s.isNullOrUndefined)(t)||t.target===n&&n.classList.add("e-focused");var l=e.querySelector("."+d.checkboxWrapper),r=l.querySelector("."+d.checkboxIcon+"."+d.icon);this.removeHover(),r.classList.contains(d.checked)?(r.classList.remove(d.checked),e.classList.remove(d.selected)):(r.classList.add(d.checked),e.classList.add(d.selected)),l.setAttribute("aria-checked",r.classList.contains(d.checked)?"true":"false");var a=this.selectEventData(e,t);i.i(s.merge)(a,{isChecked:r.classList.contains(d.checked)}),this.enableVirtualization&&this.virtualizationModule.setCheckboxLI(e,t),this.trigger("select",a),this.setSelectedItemData(e),this.renderSubList(e)}},t.prototype.selectEventData=function(e,t){var n,l=this.getItemData(e),a=i.i(r.c)(l,this.listBaseOption.fields);n=!i.i(s.isNullOrUndefined)(l)&&"string"==typeof this.dataSource[0]||"number"==typeof this.dataSource[0]?{item:e,text:e&&e.innerText.trim(),data:this.dataSource}:{item:e,text:a&&a[this.listBaseOption.fields.text],data:l};var o={};return i.i(s.merge)(o,n),t&&i.i(s.merge)(o,{isInteracted:!0,event:t,cancel:!1,index:this.curUL&&Array.prototype.indexOf.call(this.curUL.children,e)}),o},t.prototype.setSelectedItemData=function(e){var t=this.getItemData(e),n=i.i(r.c)(t,this.listBaseOption.fields);i.i(s.isNullOrUndefined)(t)||"string"!=typeof this.dataSource[0]&&"number"!=typeof this.dataSource[0]?this.selectedItems={item:e,text:n&&n[this.listBaseOption.fields.text],data:t}:this.selectedItems={item:e,text:e&&e.innerText.trim(),data:this.dataSource}},t.prototype.setSelectLI=function(e,t){var i=this;if(this.isValidLI(e)&&!e.classList.contains(d.selected)&&this.enable){this.showCheckBox||this.removeSelect(),e.classList.add(d.selected),this.removeHover(),this.setSelectedItemData(e),this.enableVirtualization&&this.virtualizationModule.setSelectLI(e,t);var s=this.selectEventData(e,t);this.trigger("select",s,function(t){t.cancel||(i.selectedLI=e,i.renderSubList(e))})}},t.prototype.setHoverLI=function(e){if(this.isValidLI(e)&&!e.classList.contains(d.hover)&&this.enable){var t=this.element.querySelectorAll("."+d.hover);t&&t.length&&i.i(s.removeClass)(t,d.hover),e.classList.contains(d.selected)&&!this.showCheckBox||e.classList.add(d.hover)}},t.prototype.getSubDS=function(){var e=this.curDSLevel;if(e.length){for(var t=this.localData,s=0,n=e;s<n.length;s++){var l=n[s],a={};a[this.fields.id]=l,this.curDSJSON=this.findItemFromDS(t,a);var o=i.i(r.c)(this.curDSJSON,this.listBaseOption.fields);t=this.curDSJSON?o[this.fields.child]:t}return t}return this.localData},t.prototype.getItemData=function(e){var t,l=this.dataSource instanceof n.DataManager?this.localData:this.dataSource,r=this.getElementUID(e);return t=i.i(s.isNullOrUndefined)(this.element.querySelector("."+d.hasChild))&&this.fields.groupBy?this.curViewDS:l,this.findItemFromDS(t,r)},t.prototype.findItemFromDS=function(e,t,n){var l,a=this;return e&&e.length&&t?e.some(function(o){var c=i.i(r.c)(o,a.listBaseOption.fields);if(!t[a.fields.id]&&!t[a.fields.text]||t[a.fields.id]&&(!i.i(s.isNullOrUndefined)(c[a.fields.id])&&c[a.fields.id].toString())!==t[a.fields.id].toString()||t[a.fields.text]&&c[a.fields.text]!==t[a.fields.text])if("object"!=typeof o&&-1!==e.indexOf(o))l=n?e:o;else if(!i.i(s.isNullOrUndefined)(t[a.fields.id])&&i.i(s.isNullOrUndefined)(c[a.fields.id])){var h=a.element.querySelector('[data-uid="'+t[a.fields.id]+'"]');h&&h.innerText.trim()===c[a.fields.text]&&(l=o)}else c.hasOwnProperty(a.fields.child)&&c[a.fields.child].length&&(l=a.findItemFromDS(c[a.fields.child],t,n));else l=n?e:o;return!!l}):l=e,l},t.prototype.getQuery=function(){var e=[],t=this.query?this.query:new n.Query;if(!this.query){for(var i=0,s=Object.keys(this.fields.properties);i<s.length;i++){var l=s[i];"tableName"!==l&&this.fields[""+l]&&this.fields[""+l]!==r.b.defaultMappedFields[""+l]&&-1===e.indexOf(this.fields[""+l])&&e.push(this.fields[""+l])}t.select(e),this.fields.properties.hasOwnProperty("tableName")&&t.from(this.fields.tableName)}return t},t.prototype.setViewDataSource=function(e){void 0===e&&(e=this.localData);var t=i.i(s.isNullOrUndefined)(this.fields.sortBy)?this.fields.text:this.fields.sortBy,n=r.b.addSorting(this.sortOrder,t);e&&this.fields.groupBy?"None"!==this.sortOrder?this.curViewDS=r.b.groupDataSource(r.b.getDataSource(e,n),this.listBaseOption.fields,this.sortOrder):this.curViewDS=r.b.groupDataSource(e,this.listBaseOption.fields,this.sortOrder):e&&"None"!==this.sortOrder?this.curViewDS=r.b.getDataSource(e,n):this.curViewDS=e},t.prototype.isInAnimation=function(){return this.curUL.classList.contains(".e-animate")},t.prototype.renderRemoteLists=function(e,t){this.isDestroyed||(this.localData=e.result,t.removeElement(t.contentContainer),this.renderList(),this.trigger("actionComplete",e))},t.prototype.triggerActionFailure=function(e){this.isDestroyed||this.trigger("actionFailure",e)},t.prototype.setLocalData=function(){var e=this;this.trigger("actionBegin");var t=this;if(this.dataSource instanceof n.DataManager)this.dataSource.ready?this.dataSource.ready.then(function(i){e.isOffline=e.dataSource.dataSource.offline,e.dataSource instanceof n.DataManager&&e.isOffline&&e.renderRemoteLists(i,t)}).catch(function(t){e.triggerActionFailure(t)}):this.dataSource.executeQuery(this.getQuery()).then(function(i){e.renderRemoteLists(i,t)}).catch(function(t){e.triggerActionFailure(t)});else if(this.dataSource&&this.dataSource.length)this.localData=this.dataSource,this.renderList(),this.trigger("actionComplete",{data:this.localData});else{var l=this.element.querySelector("ul");l&&(i.i(s.remove)(l),this.setProperties({dataSource:r.b.createJsonFromElement(l)},!0),this.localData=this.dataSource,this.renderList(),this.trigger("actionComplete",{data:this.localData}))}},t.prototype.reRender=function(){this.removeElement(this.headerEle),this.removeElement(this.ulElement),this.removeElement(this.contentContainer),this.isReact&&this.clearTemplate(),-1===Object.keys(window).indexOf("ejsInterop")&&(this.element.innerHTML=""),this.headerEle=this.ulElement=this.liCollection=void 0,this.header(),this.setLocalData()},t.prototype.resetCurrentList=function(){this.setViewDataSource(this.curViewDS),this.contentContainer.innerHTML="",this.createList(),this.renderIntoDom(this.curUL)},t.prototype.setAttributes=function(e){for(var t=0;t<e.length;t++){var i=e[t];i.classList.contains("e-list-item")&&(i.setAttribute("id",this.element.id+"_"+i.getAttribute("data-uid")),i.setAttribute("tabindex","-1"))}},t.prototype.createList=function(){this.currentLiElements=[],this.isNestedList=!1,this.ulElement=this.curUL=r.b.createList(this.createElement,this.curViewDS,this.listBaseOption,null,this),this.liCollection=this.curUL.querySelectorAll("."+d.listItem),this.setAttributes(this.liCollection)},t.prototype.exceptionEvent=function(e){this.trigger("actionFailure",e)},t.prototype.UpdateCurrentUL=function(){this.ulElement=this.curUL=this.element.querySelector("."+d.parentItem),this.curUL&&(this.liCollection=this.curUL.querySelectorAll("."+d.listItem))},t.prototype.renderSubList=function(e){this.liElement=e;var t=e.getAttribute("data-uid");if(e.classList.contains(d.hasChild)&&t){var n=i.i(s.closest)(e.parentNode,"."+d.parentItem),l=this.element.querySelector("[pid='"+t+"']");if(this.curDSLevel.push(t),this.setViewDataSource(this.getSubDS()),!l){var a=this.curViewDS;l=r.b.createListFromJson(this.createElement,a,this.listBaseOption,this.curDSLevel.length,null,this),this.isReact&&this.renderReactTemplates();var o=l.querySelectorAll("."+d.listItem);this.setAttributes(o),l.setAttribute("pID",t),l.style.display="none",this.renderIntoDom(l)}if(this.switchView(n,l),this.liCollection=this.curUL.querySelectorAll("."+d.listItem),this.selectedItems){var c=i.i(r.c)(this.selectedItems.data,this.listBaseOption.fields);this.header(c[this.listBaseOption.fields.text],!0,"header")}this.selectedLI=void 0}},t.prototype.renderIntoDom=function(e){this.contentContainer.appendChild(e)},t.prototype.renderList=function(e){this.setViewDataSource(e),this.enableVirtualization?(Object.keys(this.dataSource).length&&(!this.template&&!this.groupTemplate||this.virtualizationModule.isNgTemplate()||(this.listBaseOption.itemCreated=this.virtualizationModule.createUIItem.bind(this.virtualizationModule))),this.virtualizationModule.uiVirtualization()):(this.createList(),this.contentContainer=this.createElement("div",{className:d.container}),this.element.appendChild(this.contentContainer),this.renderIntoDom(this.ulElement),this.isReact&&this.renderReactTemplates())},t.prototype.getElementUID=function(e){var t={};return e instanceof Element?t[this.fields.id]=e.getAttribute("data-uid"):t=e,t},t.prototype.render=function(){this.element.classList.add(d.root),i.i(s.attributes)(this.element,{tabindex:"0"}),this.setCSSClass(),this.setEnableRTL(),this.setEnable(),this.setSize(),this.wireEvents(),this.header(),this.setLocalData(),this.setHTMLAttribute(),this.rippleFn=i.i(s.rippleEffect)(this.element,{selector:"."+d.listItem}),this.renderComplete(),this.previousScrollTop=this.element.scrollTop},t.prototype.destroy=function(){this.isReact&&this.clearTemplate(),this.unWireEvents();var t=[d.root,d.disable,"e-rtl","e-has-header","e-lib"].concat(this.cssClass.split(" ").filter(function(e){return e}));i.i(s.removeClass)([this.element],t),this.element.removeAttribute("role"),this.element.removeAttribute("tabindex"),this.curUL=this.ulElement=this.liCollection=this.headerEle=void 0,this.element.innerHTML="",this.contentContainer=null,this.selectedItems=null,this.selectedLI=null,this.liElement=null,this.targetElement=null,this.currentLiElements=null,this.virtualCheckBox=null,e.prototype.destroy.call(this)},t.prototype.back=function(){var e=this.curDSLevel[this.curDSLevel.length-1];if(void 0!==e&&!this.isInAnimation()){this.curDSLevel.pop(),this.setViewDataSource(this.getSubDS());var t=this.element.querySelector("[data-uid='"+e+"']"),n=this.curUL;t?t=t.parentElement:(this.createList(),this.renderIntoDom(this.ulElement),t=this.curUL);var l=i.i(r.c)(this.curDSJSON,this.listBaseOption.fields),a=l[this.fields.text];this.switchView(n,t,!0),this.removeFocus();var o=this.element.querySelector("[data-uid='"+e+"']");o.classList.remove(d.disable),o.classList.add(d.focused),this.showCheckBox&&o.querySelector("."+d.checkboxIcon).classList.contains(d.checked)||o.classList.remove(d.selected),this.liCollection=this.curUL.querySelectorAll("."+d.listItem),this.enableHtmlSanitizer&&this.setProperties({headerTitle:s.SanitizeHtmlHelper.sanitize(this.headerTitle)},!0),this.header(this.curDSLevel.length?a:this.headerTitle,!!this.curDSLevel.length,"header")}},t.prototype.selectItem=function(e){this.enableVirtualization?this.virtualizationModule.selectItem(e):this.showCheckBox?this.setCheckboxLI(this.getLiFromObjOrElement(e)):!0===i.i(s.isNullOrUndefined)(e)?this.removeSelect():this.setSelectLI(this.getLiFromObjOrElement(e))},t.prototype.unselectItem=function(e){if(i.i(s.isNullOrUndefined)(e))this.removeSelect();else{var t=this.getLiFromObjOrElement(e);i.i(s.isNullOrUndefined)(t)||this.removeSelect(t)}},t.prototype.getLiFromObjOrElement=function(e){var t,l=this.dataSource instanceof n.DataManager?this.localData:this.dataSource;if(!i.i(s.isNullOrUndefined)(e))if("string"==typeof l[0]||"number"==typeof l[0])if(e instanceof Element){for(var a=e.getAttribute("data-uid").toString(),o=0;o<this.liCollection.length;o++)if(this.liCollection[o].getAttribute("data-uid").toString()===a){t=this.liCollection[o];break}}else Array.prototype.some.call(this.curUL.querySelectorAll("."+d.listItem),function(i){return i.innerText.trim()===e.toString()&&(t=i,!0)});else{var c=this.getItemData(e),h=i.i(r.c)(c,this.listBaseOption.fields);if(c&&(t=this.element.querySelector('[data-uid="'+h[this.fields.id]+'"]'),!this.enableVirtualization&&i.i(s.isNullOrUndefined)(t)))for(var u=this.element.querySelectorAll("."+d.listItem),o=0;o<u.length;o++)u[o].innerText.trim()===h[this.fields.text]&&(t=u[o])}return t},t.prototype.selectMultipleItems=function(e){if(!i.i(s.isNullOrUndefined)(e))for(var t=0;t<e.length;t++)i.i(s.isNullOrUndefined)(e[t])||this.selectItem(e[t])},t.prototype.getParentId=function(){var e=[];if(this.isNestedList)for(var t=this.curDSLevel.length-1;t>=0;t--)e.push(this.curDSLevel[t]);return e},t.prototype.updateSelectedId=function(){this.selectedId=[];for(var e=this.curUL.getElementsByClassName(d.selected),t=0;t<e.length;t++){var n=this.getItemData(e[t]);!i.i(s.isNullOrUndefined)(n)&&n[this.listBaseOption.fields.id]&&this.selectedId.push(n[this.listBaseOption.fields.id])}},t.prototype.getSelectedItems=function(){var e,t=!1;this.selectedId=[];var l=this.dataSource instanceof n.DataManager?this.localData:this.dataSource;if(this.enableVirtualization&&!t)e=this.virtualizationModule.getSelectedItems(),t=!0;else if(this.showCheckBox&&!t){var a=this.curUL.getElementsByClassName(d.selected),o=[],c=[];this.selectedId=[];for(var h=[],u=0;u<a.length;u++)if("string"==typeof l[0]||"number"==typeof l[0])o.push(a[u].innerText.trim());else{var p=this.getItemData(a[u]),m=i.i(r.c)(p,this.listBaseOption.fields);this.isNestedList?h.push({data:p,parentId:this.getParentId()}):c.push(p),m?(o.push(m[this.listBaseOption.fields.text]),this.selectedId.push(m[this.listBaseOption.fields.id])):(o.push(void 0),this.selectedId.push(void 0))}"string"!=typeof l[0]&&"number"!=typeof l[0]||t||(e={item:a,data:l,text:o},t=!0),this.isNestedList&&!t?(e={item:a,data:h,text:o},t=!0):t||(e={item:a,data:c,text:o},t=!0)}else if(!t){var f=this.element.getElementsByClassName(d.selected)[0],m=i.i(r.c)(this.getItemData(f),this.listBaseOption.fields);"string"!=typeof l[0]&&"number"!=typeof l[0]||t?t||(i.i(s.isNullOrUndefined)(m)||i.i(s.isNullOrUndefined)(f)?(e=void 0,t=!0):(this.selectedId.push(m[this.listBaseOption.fields.id]),e={text:m[this.listBaseOption.fields.text],item:f,data:this.getItemData(f)},t=!0)):(e=i.i(s.isNullOrUndefined)(f)?void 0:{item:f,data:l,text:f.innerText.trim()},t=!0)}return e},t.prototype.findItem=function(e){return this.getItemData(e)},t.prototype.enableItem=function(e){this.setItemState(e,!0),this.enableVirtualization&&this.virtualizationModule.enableItem(e)},t.prototype.disableItem=function(e){this.setItemState(e,!1),this.enableVirtualization&&this.virtualizationModule.disableItem(e)},t.prototype.setItemState=function(e,t){var s=this.getItemData(e),n=i.i(r.c)(s,this.listBaseOption.fields);if(s){var l=this.element.querySelector('[data-uid="'+n[this.fields.id]+'"]');t?(l&&l.classList.remove(d.disable),delete s[this.fields.enabled]):t||(l&&l.classList.add(d.disable),s[this.fields.enabled]=!1)}},t.prototype.showItem=function(e){this.showHideItem(e,!1,""),this.enableVirtualization&&this.virtualizationModule.showItem(e)},t.prototype.hideItem=function(e){this.showHideItem(e,!0,"none"),this.enableVirtualization&&this.virtualizationModule.hideItem(e)},t.prototype.showHideItem=function(e,t,s){var n=this.getItemData(e),l=i.i(r.c)(n,this.listBaseOption.fields);if(n){var a=this.element.querySelector('[data-uid="'+l[this.fields.id]+'"]');a&&(a.style.display=s),t?n[this.fields.isVisible]=!1:delete n[this.fields.isVisible]}},t.prototype.addItem=function(e,t,i){void 0===t&&(t=void 0);var s=this.dataSource instanceof n.DataManager?this.localData:this.dataSource;this.addItemInternally(e,t,s,i)},t.prototype.addItemInternally=function(e,t,s,n){if(e instanceof Array)if(this.enableVirtualization)this.virtualizationModule.addItem(e,t,s,n);else{var l=this.findItemFromDS(s,t),a=void 0;if(l){var o=i.i(r.c)(l,this.listBaseOption.fields);a=o[this.fields.child],a||(a=[]),a=a.concat(e)}if(l instanceof Array){for(var c=0;c<e.length;c++){s=this.addItemAtIndex(n,s,e[c]),this.setViewDataSource(s);var h=this.contentContainer?this.contentContainer.children[0]:null;this.contentContainer&&h?this.addItemIntoDom(e[c],h,this.curViewDS):this.reRender()}this.liCollection=this.curUL.querySelectorAll("."+d.listItem)}else l&&(l[this.fields.child]=a,this.addItemInNestedList(l,e))}},t.prototype.addItemAtIndex=function(e,t,n){return!i.i(s.isNullOrUndefined)(e)&&e>=0&&e<t.length&&i.i(s.isNullOrUndefined)(this.listBaseOption.fields.groupBy)?t.splice(e,0,n):t.push(n),t},t.prototype.addItemInNestedList=function(e,t){var n=e[this.fields.id],l=e[this.fields.child],a=this.element.querySelector("[pid='"+n+"']"),o=this.element.querySelector("[data-uid='"+n+"']"),c=a||(o?i.i(s.closest)(o,"ul"):null),h=a?l:[e],u=!!o&&!o.classList.contains(d.hasChild);if(u){var p=r.b.createListItemFromJson(this.createElement,h,this.listBaseOption,null,null,this);this.setAttributes(p),c.insertBefore(p[0],o),i.i(s.detach)(o),!0}if(a&&t){for(var m=0;m<t.length;m++)h.push(t[m]),this.addItemIntoDom(t[m],c,h);!0}},t.prototype.addItemIntoDom=function(e,t,i){var s=i.indexOf(e);this.addListItem(e,s,t,i);var n=i[s-1];n&&n.isHeader&&1===n.items.length&&this.addListItem(n,s-1,t,i)},t.prototype.addListItem=function(e,t,i,s){var n=this.getLiFromObjOrElement(s[t+1])||this.getLiFromObjOrElement(s[t+2])||null,l=r.b.createListItemFromJson(this.createElement,[e],this.listBaseOption,null,null,this);if(this.setAttributes(l),this.template&&this.isReact&&this.renderReactTemplates(),this.fields.groupBy&&s[t+1]&&s[t+1].isHeader){var a=this.getLiFromObjOrElement(s[t-1]);a&&(n=a.nextElementSibling)}i.insertBefore(l[0],n)},t.prototype.removeItem=function(e){var t=this.dataSource instanceof n.DataManager?this.localData:this.dataSource;this.enableVirtualization?this.virtualizationModule.removeItem(e):this.removeItemFromList(e,t)},t.prototype.removeItemFromList=function(e,t){var n,l=this,a=this.curViewDS,o=e instanceof Element?this.getElementUID(e):e;if(n=this.findItemFromDS(t,o,!0)){var c;c=this.findItemFromDS(n,o);var h=a.indexOf(c),u=this.getLiFromObjOrElement(e),p=void 0;this.validateNestedView(u),this.fields.groupBy&&this.curViewDS[h-1]&&a[h-1].isHeader&&1===a[h-1].items.length&&u&&u.previousElementSibling.classList.contains(d.groupListItem)&&(i.i(s.isNullOrUndefined)(u.nextElementSibling)||u.nextElementSibling&&u.nextElementSibling.classList.contains(d.groupListItem))&&(p=u.previousElementSibling),u&&i.i(s.detach)(u),p&&i.i(s.detach)(p);var m=n.length-1<=0?this.findParent(this.localData,this.fields.id,function(e){return e===c[l.fields.id]},null):null,f=n.indexOf(c);if(n.splice(f,1),this.setViewDataSource(t),m&&m.parent&&Array.isArray(m.parent[this.fields.child])&&m.parent[this.fields.child].length<=0){var I=this.getLiFromObjOrElement(m.parent);if(I){var g=r.b.createListItemFromJson(this.createElement,[m.parent],this.listBaseOption,null,null,this);this.setAttributes(g),I.parentElement.insertBefore(g[0],I),I.parentElement.removeChild(I)}}n.length<=0&&this.back(),this.liCollection=Array.prototype.slice.call(this.element.querySelectorAll("."+d.listItem))}},t.prototype.validateNestedView=function(e){var t=e?e.getAttribute("data-uid").toString().toLowerCase():null;if(t&&this.curDSLevel&&this.curDSLevel.length>0)for(;this.curDSLevel.some(function(e){return e.toString().toLowerCase()===t});)this.back()},t.prototype.removeMultipleItems=function(e){if(e.length)for(var t=0;t<e.length;t++)this.removeItem(e[t])},t.prototype.findParent=function(e,t,n,l){if(e.hasOwnProperty(t)&&!0===n(e[t]))return i.i(s.extend)({},e);for(var r=0;r<Object.keys(e).length;r++)if(e[Object.keys(e)[r]]&&"object"==typeof e[Object.keys(e)[r]]){var a=this.findParent(e[Object.keys(e)[r]],t,n,e);if(null!=a)return a.parent||(a.parent=l),a}return null},t.prototype.getModuleName=function(){return"listview"},t.prototype.requiredModules=function(){var e=[];return this.enableVirtualization&&e.push({args:[this],member:"virtualization"}),e},t.prototype.onListScroll=function(e){var t={originalEvent:e,scrollDirection:"Bottom",distanceY:this.element.scrollHeight-this.element.scrollTop},i=this.element.scrollTop;i>this.previousScrollTop?(t.scrollDirection="Bottom",t.distanceY=this.element.scrollHeight-this.element.clientHeight-this.element.scrollTop,this.trigger("scroll",t)):this.previousScrollTop>i&&(t.scrollDirection="Top",t.distanceY=this.element.scrollTop,this.trigger("scroll",t)),this.previousScrollTop=i},t.prototype.getPersistData=function(){return this.addOnPersist(["cssClass","enableRtl","htmlAttributes","enable","fields","animation","headerTitle","sortOrder","showIcon","height","width","showCheckBox","checkBoxPosition","selectedId"])},o([i.i(s.Property)("")],t.prototype,"cssClass",void 0),o([i.i(s.Property)(!1)],t.prototype,"enableVirtualization",void 0),o([i.i(s.Property)({})],t.prototype,"htmlAttributes",void 0),o([i.i(s.Property)(!0)],t.prototype,"enable",void 0),o([i.i(s.Property)([])],t.prototype,"dataSource",void 0),o([i.i(s.Property)()],t.prototype,"query",void 0),o([i.i(s.Complex)(r.b.defaultMappedFields,u)],t.prototype,"fields",void 0),o([i.i(s.Property)({effect:"SlideLeft",duration:400,easing:"ease"})],t.prototype,"animation",void 0),o([i.i(s.Property)("None")],t.prototype,"sortOrder",void 0),o([i.i(s.Property)(!1)],t.prototype,"showIcon",void 0),o([i.i(s.Property)(!1)],t.prototype,"showCheckBox",void 0),o([i.i(s.Property)("Left")],t.prototype,"checkBoxPosition",void 0),o([i.i(s.Property)("")],t.prototype,"headerTitle",void 0),o([i.i(s.Property)(!1)],t.prototype,"showHeader",void 0),o([i.i(s.Property)(!1)],t.prototype,"enableHtmlSanitizer",void 0),o([i.i(s.Property)("")],t.prototype,"height",void 0),o([i.i(s.Property)("")],t.prototype,"width",void 0),o([i.i(s.Property)(null)],t.prototype,"template",void 0),o([i.i(s.Property)(null)],t.prototype,"headerTemplate",void 0),o([i.i(s.Property)(null)],t.prototype,"groupTemplate",void 0),o([i.i(s.Event)()],t.prototype,"select",void 0),o([i.i(s.Event)()],t.prototype,"actionBegin",void 0),o([i.i(s.Event)()],t.prototype,"actionComplete",void 0),o([i.i(s.Event)()],t.prototype,"actionFailure",void 0),o([i.i(s.Event)()],t.prototype,"scroll",void 0),t=o([s.NotifyPropertyChanges],t)}(s.Component)},function(e,t,i){"use strict";var s=i(1);i.d(t,"a",function(){return s.a}),i.d(t,"b",function(){return s.b}),i.d(t,"c",function(){return s.c})},function(e,t,i){"use strict";var s=i(3);i.d(t,"a",function(){return s.a}),i.d(t,"b",function(){return s.b}),i.d(t,"c",function(){return s.c});var n=i(8);i.d(t,"d",function(){return n.a})},function(e,t,i){"use strict";var s=i(9);i.d(t,"a",function(){return s.a}),i.d(t,"b",function(){return s.b})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i(5);i.d(t,"classNames",function(){return s.a}),i.d(t,"FieldSettings",function(){return s.b}),i.d(t,"ListView",function(){return s.c}),i.d(t,"Virtualization",function(){return s.d});var n=i(4);i.d(t,"cssClass",function(){return n.a}),i.d(t,"ListBase",function(){return n.b}),i.d(t,"getFieldValues",function(){return n.c});var l=i(6);i.d(t,"Sortable",function(){return l.a}),i.d(t,"moveTo",function(){return l.b})},function(e,t,i){"use strict";i.d(t,"a",function(){return a});var s=i(3),n=i(0),l=(i.n(n),i(1)),r=i(2),a=(i.n(r),function(){function e(e){this.elementDifference=0,this.listViewInstance=e}return e.prototype.isNgTemplate=function(){return!i.i(n.isNullOrUndefined)(this.listViewInstance.templateRef)&&"string"!=typeof this.listViewInstance.templateRef},e.prototype.isVueFunctionTemplate=function(){return this.listViewInstance.isVue&&"function"==typeof this.listViewInstance.template},e.prototype.uiVirtualization=function(){this.wireScrollEvent(!1);var e=this.listViewInstance.curViewDS,t=e.slice(0,1);this.listViewInstance.ulElement=this.listViewInstance.curUL=l.b.createList(this.listViewInstance.createElement,t,this.listViewInstance.listBaseOption,null,this.listViewInstance),this.listViewInstance.contentContainer=this.listViewInstance.createElement("div",{className:s.a.container}),this.listViewInstance.element.appendChild(this.listViewInstance.contentContainer),this.listViewInstance.contentContainer.appendChild(this.listViewInstance.ulElement),this.listItemHeight=this.listViewInstance.ulElement.firstElementChild.getBoundingClientRect().height,this.expectedDomItemCount=this.ValidateItemCount(1e4),this.domItemCount=this.ValidateItemCount(Object.keys(this.listViewInstance.curViewDS).length),this.uiFirstIndex=0,this.uiLastIndex=this.domItemCount-1;var r=e.slice(1,this.domItemCount),a=l.b.createListItemFromJson(this.listViewInstance.createElement,r,this.listViewInstance.listBaseOption,null,null,this.listViewInstance);i.i(n.append)(a,this.listViewInstance.ulElement),this.listViewInstance.liCollection=this.listViewInstance.curUL.querySelectorAll("li"),this.topElement=this.listViewInstance.createElement("div"),this.listViewInstance.ulElement.insertBefore(this.topElement,this.listViewInstance.ulElement.firstElementChild),this.bottomElement=this.listViewInstance.createElement("div"),this.listViewInstance.ulElement.insertBefore(this.bottomElement,null),this.totalHeight=Object.keys(e).length*this.listItemHeight-this.domItemCount*this.listItemHeight,this.topElement.style.height="0px",this.bottomElement.style.height=this.totalHeight+"px",this.topElementHeight=0,this.bottomElementHeight=this.totalHeight,this.listDiff=0,this.uiIndicesInitialization()},e.prototype.wireScrollEvent=function(e){e?!0===this.listViewInstance.isWindow?(window.removeEventListener("scroll",this.onVirtualScroll),window.removeEventListener("scroll",this.updateUl)):(n.EventHandler.remove(this.listViewInstance.element,"scroll",this.onVirtualUiScroll),n.EventHandler.remove(this.listViewInstance.element,"scroll",this.updateUlContainer)):this.listViewInstance.isWindow?(this.onVirtualScroll=this.onVirtualUiScroll.bind(this),window.addEventListener("scroll",this.onVirtualScroll)):n.EventHandler.add(this.listViewInstance.element,"scroll",this.onVirtualUiScroll,this)},e.prototype.updateUlContainer=function(e){var t,l=this.listViewInstance.ulElement.querySelector("."+s.a.virtualElementContainer);i.i(n.isNullOrUndefined)(this.listViewInstance.liElementHeight)&&this.listViewInstance.updateLiElementHeight(),t=this.listViewInstance.isWindow?Math.round(e.target.documentElement.scrollTop/this.listViewInstance.liElementHeight)-2:Math.round(e.target.scrollTop/this.listViewInstance.liElementHeight)-2,(t-1)*this.listViewInstance.liElementHeight<0?l.style.top="0px":l.style.top=t*this.listViewInstance.liElementHeight+"px"},e.prototype.ValidateItemCount=function(e){var t,s=parseFloat(i.i(n.formatUnit)(this.listViewInstance.height));return t=this.listViewInstance.isWindow?Math.round(window.innerHeight/this.listItemHeight*3):"string"==typeof this.listViewInstance.height&&-1!==this.listViewInstance.height.indexOf("%")?Math.round(this.listViewInstance.element.getBoundingClientRect().height/this.listItemHeight*1.5):Math.round(s/this.listItemHeight*1.5),t>e&&(t=e),t},e.prototype.uiIndicesInitialization=function(){this.uiIndices={activeIndices:[],disabledItemIndices:[],hiddenItemIndices:[]};for(var e=this.listViewInstance.curViewDS,t=0;t<e.length;t++)this.listViewInstance.showCheckBox&&e[t][this.listViewInstance.fields.isChecked]&&this.uiIndices.activeIndices.push(t),i.i(n.isNullOrUndefined)(e[t][this.listViewInstance.fields.enabled])||e[t][this.listViewInstance.fields.enabled]||this.uiIndices.disabledItemIndices.push(t);if(this.isNgTemplate())for(var l=this.listViewInstance.element.querySelectorAll("."+s.a.listItem),r=0;r<l.length;r++)l[r].context=this.listViewInstance.viewContainerRef.get(r).context},e.prototype.refreshItemHeight=function(){if(this.listViewInstance.curViewDS.length){var e=this.listViewInstance.curViewDS;this.listItemHeight=this.topElement.nextSibling.getBoundingClientRect().height,this.totalHeight=Object.keys(e).length*this.listItemHeight-this.domItemCount*this.listItemHeight,this.bottomElementHeight=this.totalHeight,this.bottomElement.style.height=this.totalHeight+"px"}},e.prototype.getscrollerHeight=function(e){return this.listViewInstance.isWindow?pageYOffset-e<=0?0:pageYOffset-e:this.listViewInstance.element.scrollTop-e<=0?0:this.listViewInstance.element.scrollTop-e},e.prototype.onVirtualUiScroll=function(e){var t,s,l=this.listViewInstance.curViewDS;this.listItemHeight=i.i(n.select)(".e-list-item",this.listViewInstance.element).getBoundingClientRect().height,this.totalHeight=Object.keys(l).length*this.listItemHeight-this.domItemCount*this.listItemHeight,s=this.listViewInstance.isWindow?this.listViewInstance.ulElement.getBoundingClientRect().top-document.documentElement.getBoundingClientRect().top:this.listViewInstance.headerEle?this.listViewInstance.headerEle.getBoundingClientRect().height:0,this.scrollPosition=i.i(n.isNullOrUndefined)(this.scrollPosition)?0:this.scrollPosition;var r=this.getscrollerHeight(s);if(this.topElementHeight=this.listItemHeight*Math.floor(r/this.listItemHeight),this.bottomElementHeight=this.totalHeight-this.topElementHeight,t=r<=this.totalHeight?[this.topElementHeight,this.bottomElementHeight]:[this.totalHeight,0],this.topElementHeight=t[0],this.bottomElementHeight=t[1],this.topElementHeight!==parseFloat(this.topElement.style.height))if(this.topElement.style.height=this.topElementHeight+"px",this.bottomElement.style.height=this.bottomElementHeight+"px",r>this.scrollPosition){var a=Math.round(this.topElementHeight/this.listItemHeight-this.listDiff);a>this.expectedDomItemCount+5?this.onLongScroll(a,!0):this.onNormalScroll(a,!0)}else{var a=Math.round(this.listDiff-this.topElementHeight/this.listItemHeight);a>this.expectedDomItemCount+5?this.onLongScroll(a,!1):this.onNormalScroll(a,!1)}this.listDiff=Math.round(this.topElementHeight/this.listItemHeight),"function"==typeof this.listViewInstance.onUIScrolled&&this.listViewInstance.onUIScrolled(),this.scrollPosition=r},e.prototype.onLongScroll=function(e,t){for(var i=t?this.uiFirstIndex+e:this.uiFirstIndex-e,s=this.listViewInstance.ulElement.querySelectorAll("li"),n=0;n<s.length;n++)this.updateUI(s[n],i),i++;this.uiLastIndex=t?this.uiLastIndex+e:this.uiLastIndex-e,this.uiFirstIndex=t?this.uiFirstIndex+e:this.uiFirstIndex-e},e.prototype.onNormalScroll=function(e,t){if(t)for(var i=0;i<e;i++){var s=++this.uiLastIndex;this.updateUI(this.topElement.nextElementSibling,s,this.bottomElement),this.uiFirstIndex++}else for(var i=0;i<e;i++){var s=--this.uiFirstIndex,n=this.topElement.nextSibling;this.updateUI(this.bottomElement.previousElementSibling,s,n),this.uiLastIndex--}},e.prototype.updateUiContent=function(e,t){var r=this.listViewInstance.curViewDS;if("string"==typeof this.listViewInstance.dataSource[0]||"number"==typeof this.listViewInstance.dataSource[0]?(e.dataset.uid=l.b.generateId(),e.getElementsByClassName(s.a.listItemText)[0].innerHTML=this.listViewInstance.curViewDS[t].toString()):(e.dataset.uid=r[t][this.listViewInstance.fields.id]?r[t][this.listViewInstance.fields.id]:l.b.generateId(),e.getElementsByClassName(s.a.listItemText)[0].innerHTML=r[t][this.listViewInstance.fields.text]),this.listViewInstance.showIcon&&(e.querySelector("."+s.a.listIcon)&&i.i(n.detach)(e.querySelector("."+s.a.listIcon)),this.listViewInstance.curViewDS[t][this.listViewInstance.fields.iconCss])){var a=e.querySelector("."+s.a.textContent),o=this.listViewInstance.createElement("div",{className:s.a.listIcon+" "+this.listViewInstance.curViewDS[t][this.listViewInstance.fields.iconCss]});a.insertBefore(o,e.querySelector("."+s.a.listItemText))}if(this.listViewInstance.showCheckBox&&this.listViewInstance.fields.groupBy){this.checkListWrapper||(this.checkListWrapper=this.listViewInstance.curUL.querySelector("."+s.a.checkboxWrapper).cloneNode(!0));var a=e.querySelector("."+s.a.textContent);this.listViewInstance.curViewDS[t].isHeader?e.querySelector("."+s.a.checkboxWrapper)&&(e.classList.remove(s.a.checklist),a.classList.remove(s.a.checkbox),i.i(n.detach)(e.querySelector("."+s.a.checkboxWrapper))):e.querySelector("."+s.a.checkboxWrapper)||(e.classList.add(s.a.checklist),a.classList.add(s.a.checkbox),"Left"===this.listViewInstance.checkBoxPosition?a.classList.add("e-checkbox-left"):a.classList.add("e-checkbox-right"),a.append(this.checkListWrapper.cloneNode(!0)))}},e.prototype.changeElementAttributes=function(e,t){if(e.classList.remove(s.a.disable),this.uiIndices.disabledItemIndices.length&&-1!==this.uiIndices.disabledItemIndices.indexOf(t)&&e.classList.add(s.a.disable),e.style.display="",this.uiIndices.hiddenItemIndices.length&&-1!==this.uiIndices.hiddenItemIndices.indexOf(t)&&(e.style.display="none"),this.listViewInstance.showCheckBox){var l=e.querySelector("."+s.a.checkboxWrapper);e.classList.remove(s.a.selected),e.classList.remove(s.a.focused),l&&(l.removeAttribute("aria-checked"),l.firstElementChild.classList.remove(s.a.checked)),this.uiIndices.activeIndices.length&&-1!==this.uiIndices.activeIndices.indexOf(t)&&!this.listViewInstance.curUL.querySelector(s.a.selected)&&(e.classList.add(s.a.selected),l.firstElementChild.classList.add(s.a.checked),l.setAttribute("aria-checked","true"),this.activeIndex===t&&e.classList.add(s.a.focused))}else e.classList.remove(s.a.selected),e.removeAttribute("aria-selected"),i.i(n.isNullOrUndefined)(this.activeIndex)||this.activeIndex!==t||this.listViewInstance.curUL.querySelector(s.a.selected)||(e.classList.add(s.a.selected),e.setAttribute("aria-selected","true"));this.listViewInstance.fields.groupBy&&(this.listViewInstance.curViewDS[t].isHeader?e.classList.contains(s.a.listItem)&&(e.classList.remove(s.a.listItem),e.setAttribute("role","group"),e.classList.add(s.a.groupListItem)):e.classList.contains(s.a.groupListItem)&&(e.classList.remove(s.a.groupListItem),e.setAttribute("role","listitem"),e.classList.add(s.a.listItem)))},e.prototype.findDSAndIndexFromId=function(e,t){var s=this,l={};return t=this.listViewInstance.getElementUID(t),i.i(n.isNullOrUndefined)(t)||e.some(function(e,i){return!!(t[s.listViewInstance.fields.id]&&t[s.listViewInstance.fields.id]===(e[s.listViewInstance.fields.id]&&e[s.listViewInstance.fields.id])||t===e)&&(l.index=i,l.data=e,!0)}),l},e.prototype.getSelectedItems=function(){var e=this;if(!i.i(n.isNullOrUndefined)(this.activeIndex)||this.listViewInstance.showCheckBox&&this.uiIndices.activeIndices.length){var t=[],s=[];if("string"==typeof this.listViewInstance.dataSource[0]||"number"==typeof this.listViewInstance.dataSource[0]){var l=this.listViewInstance.curViewDS;if(this.listViewInstance.showCheckBox){for(var a=this.uiIndices.activeIndices,o=0;o<a.length;o++)t.push(l[a[o]]);return{text:t,data:t,index:this.uiIndices.activeIndices.map(function(t){return e.listViewInstance.dataSource.indexOf(l[t])})}}return{text:l[this.activeIndex],data:l[this.activeIndex],index:this.listViewInstance.dataSource.indexOf(l[this.activeIndex])}}var c=this.listViewInstance.curViewDS,h=this.listViewInstance.fields.text;if(this.listViewInstance.showCheckBox){for(var d=this.uiIndices.activeIndices,o=0;o<d.length;o++)s.push(c[d[o]][""+h]),t.push(c[d[o]]);var u=this.listViewInstance.dataSource instanceof r.DataManager?c:this.listViewInstance.dataSource;return{text:s,data:t,index:this.uiIndices.activeIndices.map(function(e){return u.indexOf(c[e])})}}var p=this.listViewInstance.dataSource instanceof r.DataManager?c:this.listViewInstance.dataSource;return{text:c[this.activeIndex][this.listViewInstance.fields.text],data:c[this.activeIndex],index:p.indexOf(c[this.activeIndex])}}},e.prototype.selectItem=function(e){var t=this.findDSAndIndexFromId(this.listViewInstance.curViewDS,e);if(Object.keys(t).length){var l=this.activeIndex===t.index,r=void 0;if(this.activeIndex=t.index,this.listViewInstance.showCheckBox&&(-1===this.uiIndices.activeIndices.indexOf(t.index)?(r=!0,this.uiIndices.activeIndices.push(t.index)):(r=!1,this.uiIndices.activeIndices.splice(this.uiIndices.activeIndices.indexOf(t.index),1)),this.listViewInstance.curUL.querySelector("."+s.a.focused)&&this.listViewInstance.curUL.querySelector("."+s.a.focused).classList.remove(s.a.focused)),this.listViewInstance.getLiFromObjOrElement(e))this.listViewInstance.showCheckBox?this.listViewInstance.setCheckboxLI(this.listViewInstance.getLiFromObjOrElement(e)):this.listViewInstance.setSelectLI(this.listViewInstance.getLiFromObjOrElement(e));else{var a=void 0;if("string"==typeof this.listViewInstance.dataSource[0]||"number"==typeof this.listViewInstance.dataSource[0])a={text:this.listViewInstance.curViewDS[this.activeIndex],data:this.listViewInstance.curViewDS[this.activeIndex],index:this.activeIndex};else{var o=this.listViewInstance.curViewDS;a={text:o[this.activeIndex][this.listViewInstance.fields.text],data:o[this.activeIndex],index:this.activeIndex}}this.listViewInstance.showCheckBox?(a.isChecked=r,this.listViewInstance.trigger("select",a)):l||(this.listViewInstance.removeSelect(),this.listViewInstance.trigger("select",a))}}else i.i(n.isNullOrUndefined)(e)&&!this.listViewInstance.showCheckBox&&(this.listViewInstance.removeSelect(),this.activeIndex=void 0)},e.prototype.enableItem=function(e){var t=this.findDSAndIndexFromId(this.listViewInstance.curViewDS,e);Object.keys(t).length&&this.uiIndices.disabledItemIndices.splice(this.uiIndices.disabledItemIndices.indexOf(t.index),1)},e.prototype.disableItem=function(e){var t=this.findDSAndIndexFromId(this.listViewInstance.curViewDS,e);Object.keys(t).length&&-1===this.uiIndices.disabledItemIndices.indexOf(t.index)&&this.uiIndices.disabledItemIndices.push(t.index)},e.prototype.showItem=function(e){var t=this.findDSAndIndexFromId(this.listViewInstance.curViewDS,e);Object.keys(t).length&&this.uiIndices.hiddenItemIndices.splice(this.uiIndices.hiddenItemIndices.indexOf(t.index),1)},e.prototype.hideItem=function(e){var t=this.findDSAndIndexFromId(this.listViewInstance.curViewDS,e);Object.keys(t).length&&-1===this.uiIndices.hiddenItemIndices.indexOf(t.index)&&this.uiIndices.hiddenItemIndices.push(t.index)},e.prototype.removeItem=function(e){var t,i=this.listViewInstance.curViewDS,s=this.findDSAndIndexFromId(i,e);Object.keys(s).length&&(t=s.data,i[s.index-1]&&i[s.index-1].isHeader&&1===i[s.index-1].items.length?(this.removeUiItem(s.index-1),this.removeUiItem(s.index-1)):this.removeUiItem(s.index));var n=this.listViewInstance.dataSource instanceof r.DataManager?this.listViewInstance.localData:this.listViewInstance.dataSource,l=n.indexOf(t);-1!==l&&(n.splice(l,1),this.listViewInstance.setViewDataSource(n)),this.listViewInstance.liCollection=this.listViewInstance.curUL.querySelectorAll("li")},e.prototype.setCheckboxLI=function(e,t){var i=Array.prototype.indexOf.call(this.listViewInstance.curUL.querySelectorAll("li"),e)+this.uiFirstIndex;this.activeIndex=Array.prototype.indexOf.call(this.listViewInstance.curUL.querySelectorAll("li"),e)+this.uiFirstIndex,e.classList.contains(s.a.selected)?-1===this.uiIndices.activeIndices.indexOf(i)&&this.uiIndices.activeIndices.push(i):this.uiIndices.activeIndices.splice(this.uiIndices.activeIndices.indexOf(i),1)},e.prototype.setSelectLI=function(e,t){this.activeIndex=Array.prototype.indexOf.call(this.listViewInstance.curUL.querySelectorAll("li"),e)+this.uiFirstIndex},e.prototype.checkedItem=function(e){if(e){this.uiIndices.activeIndices=[],this.activeIndex=void 0;for(var t=this.listViewInstance.curViewDS,i=0;i<t.length;i++)t[i].isHeader||this.uiIndices.activeIndices.push(i)}else this.activeIndex=void 0,this.uiIndices.activeIndices=[]},e.prototype.addUiItem=function(e){var t=this.listViewInstance.curViewDS;if(this.changeUiIndices(e,!0),this.activeIndex&&this.activeIndex>=e&&this.activeIndex++,this.listViewInstance.showCheckBox&&t[e][this.listViewInstance.fields.isChecked]&&this.uiIndices.activeIndices.push(e),parseFloat(this.bottomElement.style.height)||parseFloat(this.topElement.style.height)||(this.bottomElement.style.height=parseFloat(this.bottomElement.style.height)+this.listItemHeight+"px"),parseFloat(this.bottomElement.style.height)){var i=this.listViewInstance.curUL.lastElementChild.previousSibling,s=this.listViewInstance.getLiFromObjOrElement(t[e+1])||this.listViewInstance.getLiFromObjOrElement(t[e+2]);s&&(this.bottomElement.style.height=parseFloat(this.bottomElement.style.height)+this.listItemHeight+"px",this.updateUI(i,e,s))}else{var i=this.listViewInstance.curUL.firstElementChild.nextSibling,s=void 0;s=Object.keys(this.listViewInstance.curViewDS).length-1===e?this.listViewInstance.curUL.lastElementChild:this.listViewInstance.getLiFromObjOrElement(t[e+1])||this.listViewInstance.getLiFromObjOrElement(t[e+2]),this.topElement.style.height=parseFloat(this.topElement.style.height)+this.listItemHeight+"px",this.uiFirstIndex++,this.uiLastIndex++,s&&(this.updateUI(i,e,s),!0===this.listViewInstance.isWindow?window.scrollTo(0,pageYOffset+this.listItemHeight):this.listViewInstance.element.scrollTop+=this.listItemHeight)}this.totalHeight+=this.listItemHeight,this.listDiff=Math.round(parseFloat(this.topElement.style.height)/this.listItemHeight)},e.prototype.removeUiItem=function(e){this.totalHeight-=this.listItemHeight;var t=this.listViewInstance.curViewDS[e],l=this.listViewInstance.getLiFromObjOrElement(t);if(this.listViewInstance.curViewDS.splice(e,1),this.activeIndex&&this.activeIndex>=e&&this.activeIndex--,l)if(this.domItemCount>Object.keys(this.listViewInstance.curViewDS).length)i.i(n.detach)(l),this.domItemCount--,this.uiLastIndex--,this.totalHeight=0;else{if(l.classList.contains(s.a.disable)&&(l.classList.remove(s.a.disable),this.uiIndices.disabledItemIndices.splice(this.uiIndices.disabledItemIndices.indexOf(e),1)),"none"===l.style.display&&(l.style.display="",this.uiIndices.hiddenItemIndices.splice(this.uiIndices.hiddenItemIndices.indexOf(e),1)),this.listViewInstance.showCheckBox&&l.classList.contains(s.a.selected)){this.listViewInstance.removeSelect(),this.uiIndices.activeIndices.splice(this.uiIndices.activeIndices.indexOf(e),1);var r=l.querySelector("."+s.a.checkboxWrapper);r.removeAttribute("aria-checked"),r.firstElementChild.classList.remove(s.a.checked),l.classList.contains(s.a.focused)&&(l.classList.remove(s.a.focused),this.activeIndex=void 0)}else l.classList.contains(s.a.selected)&&(this.listViewInstance.removeSelect(),this.activeIndex=void 0);parseFloat(this.bottomElement.style.height)||parseFloat(this.topElement.style.height)?parseFloat(this.bottomElement.style.height)?(this.bottomElement.style.height=parseFloat(this.bottomElement.style.height)-this.listItemHeight+"px",this.updateUI(l,this.uiLastIndex,this.bottomElement)):(this.topElement.style.height=parseFloat(this.topElement.style.height)-this.listItemHeight+"px",this.updateUI(l,this.uiFirstIndex-1,this.topElement.nextSibling),this.uiLastIndex--,this.uiFirstIndex--):this.updateUI(l,this.uiLastIndex,this.bottomElement)}this.changeUiIndices(e,!1),this.listDiff=Math.round(parseFloat(this.topElement.style.height)/this.listItemHeight)},e.prototype.changeUiIndices=function(e,t){for(var i=Object.keys(this.uiIndices),s=0;s<i.length;s++)this.uiIndices[i[s]]=this.uiIndices[i[s]].map(function(i){return i>=e?t?++i:--i:i})},e.prototype.addItem=function(e,t,i,s){for(var n=0;n<e.length;n++){var l=e[n];if(i=this.listViewInstance.addItemAtIndex(s,i,l),this.listViewInstance.setViewDataSource(i),this.domItemCount)if(this.domItemCount<this.expectedDomItemCount){var r=this.listViewInstance.findItemFromDS(i,t);if(r instanceof Array){if(this.listViewInstance.ulElement){var a=this.listViewInstance.curViewDS.indexOf(l);this.createAndInjectNewItem(l,a);var o=this.listViewInstance.curViewDS[a-1];o&&o.isHeader&&1===o.items.length&&(--a,this.createAndInjectNewItem(o,a))}this.listViewInstance.liCollection=this.listViewInstance.curUL.querySelectorAll("li")}}else{var c=this.listViewInstance.curViewDS.indexOf(l);this.addUiItem(c);var o=this.listViewInstance.curViewDS[c-1];o&&o.isHeader&&1===o.items.length&&this.addUiItem(c-1)}else!this.listViewInstance.template&&!this.listViewInstance.groupTemplate||this.isNgTemplate()||(this.listViewInstance.listBaseOption.template=null,this.listViewInstance.listBaseOption.groupTemplate=null,this.listViewInstance.listBaseOption.itemCreated=this.createUIItem.bind(this)),this.uiVirtualization()}},e.prototype.createAndInjectNewItem=function(e,t){var i,s=l.b.createListItemFromJson(this.listViewInstance.createElement,[e],this.listViewInstance.listBaseOption,null,null,this.listViewInstance);if(i=Object.keys(this.listViewInstance.curViewDS).length-1===t?this.listViewInstance.curUL.lastElementChild:this.listViewInstance.getLiFromObjOrElement(this.listViewInstance.curViewDS[t+1])||this.listViewInstance.getLiFromObjOrElement(this.listViewInstance.curViewDS[t+2]),this.listViewInstance.fields.groupBy&&this.listViewInstance.curViewDS[t+1]&&this.listViewInstance.curViewDS[t+1].isHeader){var n=this.listViewInstance.getLiFromObjOrElement(this.listViewInstance.curViewDS[t-1]);n&&(i=n.nextElementSibling)}this.listViewInstance.ulElement.insertBefore(s[0],i),this.domItemCount++,this.bottomElementHeight<=0&&this.uiLastIndex++,this.refreshItemHeight()},e.prototype.createUIItem=function(e){if(!e.item.classList.contains("e-list-group-item")&&(this.templateData=e.curData.isHeader?e.curData.items[0]:e.curData,this.listViewInstance.showCheckBox&&(this.listViewInstance.renderCheckbox(e),!i.i(n.isNullOrUndefined)(this.listViewInstance.virtualCheckBox)&&!i.i(n.isNullOrUndefined)(this.listViewInstance.virtualCheckBox.outerHTML)))){var t=document.createElement("div"),s='<div class="e-text-content" role="presentation"> <span class="e-list-text"> ${'+this.listViewInstance.fields.text+"} </span></div>",l=i.i(n.compile)(this.listViewInstance.template||s,this.listViewInstance),r=l(this.templateData,this.listViewInstance);if(this.listViewInstance.template&&this.listViewInstance.isReact&&this.listViewInstance.renderReactTemplates(),[].slice.call(r).forEach(function(e){t.appendChild(e)}),t.children&&t.children[0]){for(t.children[0].classList.add("e-checkbox"),"Left"===this.listViewInstance.checkBoxPosition?t.children[0].classList.add("e-checkbox-left"):t.children[0].classList.add("e-checkbox-right"),"Left"===this.listViewInstance.checkBoxPosition?t.children[0].insertBefore(this.listViewInstance.virtualCheckBox,t.childNodes[0].children[0]):t.children[0].appendChild(this.listViewInstance.virtualCheckBox);e.item.lastChild;)e.item.removeChild(e.item.lastChild);[].slice.call(t.children).forEach(function(t){e.item.appendChild(t)})}}},e.prototype.reRenderUiVirtualization=function(){this.wireScrollEvent(!0),this.listViewInstance.contentContainer&&i.i(n.detach)(this.listViewInstance.contentContainer),this.listViewInstance.preRender(),this.domItemCount=0,this.listViewInstance.header(),this.listViewInstance.setLocalData()},e.prototype.updateUI=function(e,t,i){var s=this.isNgTemplate()?this.onNgChange:this.onChange;if(this.listViewInstance.template||this.listViewInstance.groupTemplate){var n=this.listViewInstance.curViewDS[t];e.dataset.uid=n[this.listViewInstance.fields.id]?n[this.listViewInstance.fields.id]:l.b.generateId(),s(n,e,this)}else this.updateUiContent(e,t);this.changeElementAttributes(e,t),i&&this.listViewInstance.ulElement.insertBefore(e,i)},e.prototype.onChange=function(e,t,i){var s=l.b.createListItemFromJson(i.listViewInstance.createElement,[e],i.listViewInstance.listBaseOption,null,null,i.listViewInstance);for(i.listViewInstance.isReact&&i.listViewInstance.renderReactTemplates();t.lastChild;)t.removeChild(t.lastChild);[].slice.call(s[0].children).forEach(function(e){t.appendChild(e)})},e.prototype.onNgChange=function(e,t,s){for(var l=i.i(n.compile)(s.listViewInstance.template),r=l(e);t.lastChild;)t.removeChild(t.lastChild);t.appendChild(r[0])},e.prototype.getModuleName=function(){return"virtualization"},e.prototype.destroy=function(){this.wireScrollEvent(!0),this.topElement=null,this.bottomElement=null},e}())},function(e,t,i){"use strict";function s(e,t,s,l){var r=[];if(t||(t=e),s&&s.length?s.forEach(function(t){r.push(e.children[t])}):r=[].slice.call(e.children),i.i(n.isNullOrUndefined)(l))r.forEach(function(e){t.appendChild(e)});else{var a=t.children[l];r.forEach(function(e){t.insertBefore(e,a)})}}i.d(t,"a",function(){return a}),t.b=s;var n=i(0),l=(i.n(n),this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}()),r=this&&this.__decorate||function(e,t,i,s){var n,l=arguments.length,r=l<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(l<3?n(r):l>3?n(t,i,r):n(t,i))||r);return l>3&&r&&Object.defineProperty(t,i,r),r},a=function(e){function t(t,s){var l=e.call(this,s,t)||this;return l.getHelper=function(e){var t=l.getSortableElement(e.sender.target);if(!l.isValidTarget(t,l))return!1;var s;return l.helper?s=l.helper({sender:t,element:e.element}):(s=t.cloneNode(!0),s.style.width=t.offsetWidth+"px",s.style.height=t.offsetHeight+"px"),i.i(n.addClass)([s],["e-sortableclone"]),document.body.appendChild(s),s},l.onDrag=function(e){if(e.target){l.trigger("drag",{event:e.event,element:l.element,target:e.target});var t=l.getSortableInstance(e.target),s=l.getSortableElement(e.target,t);if(!(l.isValidTarget(s,t)||e.target.className.indexOf("e-list-group-item")>-1)||l.curTarget===s&&i.i(n.isNullOrUndefined)(t.placeHolder)||t.placeHolderElement&&t.placeHolderElement===e.target)l.curTarget!==l.target&&l.scope&&l.curTarget!==s&&!i.i(n.isNullOrUndefined)(t.placeHolder)&&(i.i(n.remove)(l.getSortableInstance(l.curTarget).placeHolderElement),l.curTarget=l.target);else{if(e.target.classList.contains("e-list-group-item")&&(s=e.target),l.curTarget=s,l.target===s)return;var r=l.getIndex(t.placeHolderElement,t),a=l.getPlaceHolder(s,t),o=void 0;if(a){r=i.i(n.isNullOrUndefined)(r)?l.getIndex(l.target):r,o=l.getIndex(s,t,e.event);var c=l.isPlaceHolderPresent(t);if(c&&r===o)return;c&&i.i(n.remove)(t.placeHolderElement),t.placeHolderElement=a,e.target.className.indexOf("e-list-group-item")>-1?t.element.insertBefore(t.placeHolderElement,t.element.children[o]):t.element!==l.element&&o===t.element.childElementCount?t.element.appendChild(t.placeHolderElement):t.element.insertBefore(t.placeHolderElement,t.element.children[o]),l.refreshDisabled(r,o,t)}else{r=i.i(n.isNullOrUndefined)(r)?l.getIndex(l.target):l.getIndex(s,t)<r||!r?r:r-1,o=l.getIndex(s,t);var h=t.element!==l.element?o:r<o?o+1:o;l.updateItemClass(t),t.element.insertBefore(l.target,t.element.children[h]),l.refreshDisabled(r,o,t),l.curTarget=l.target,l.trigger("drop",{droppedElement:l.target,element:t.element,previousIndex:r,currentIndex:o,target:e.target,helper:document.getElementsByClassName("e-sortableclone")[0],event:e.event,scope:l.scope})}}if(t=l.getSortableInstance(l.curTarget),i.i(n.isNullOrUndefined)(s)&&e.target!==t.placeHolderElement)l.isPlaceHolderPresent(t)&&l.removePlaceHolder(t);else{var d,u=[].slice.call(document.getElementsByClassName("e-sortable-placeholder"));u.forEach(function(e){d=l.getSortableInstance(e),d.element&&d!==t&&l.removePlaceHolder(d)})}}},l.onDragStart=function(e){l.target=l.getSortableElement(e.target);var t=!1;l.target.classList.add("e-grabbed"),l.curTarget=l.target,e.helper=document.getElementsByClassName("e-sortableclone")[0];var i={cancel:!1,element:l.element,target:l.target};l.trigger("beforeDragStart",i,function(i){i.cancel&&(t=i.cancel,l.onDragStop(e))}),t||(n.isBlazor?l.trigger("dragStart",{event:e.event,element:l.element,target:l.target,bindEvents:e.bindEvents,dragElement:e.dragElement}):l.trigger("dragStart",{event:e.event,element:l.element,target:l.target}))},l.onDragStop=function(e){var t,s,r,a=l.getSortableInstance(l.curTarget);t=l.getIndex(l.target);var o=l.isPlaceHolderPresent(a);if(o){var c=l.getIndex(a.placeHolderElement,a),h={previousIndex:t,currentIndex:c,target:e.target,droppedElement:l.target,helper:e.helper,cancel:!1,handled:!1};l.trigger("beforeDrop",h,function(s){if(!s.cancel){if(r=s.handled,l.updateItemClass(a),s.handled){var o=l.target.cloneNode(!0);l.target.classList.remove("e-grabbed"),l.target=o}a.element.insertBefore(l.target,a.placeHolderElement);var c=l.getIndex(l.target,a);t=l===a&&t-c>1?t-1:t,l.trigger("drop",{event:e.event,element:a.element,previousIndex:t,currentIndex:c,target:e.target,helper:e.helper,droppedElement:l.target,scopeName:l.scope,handled:r})}i.i(n.remove)(a.placeHolderElement)})}if(a=l.getSortableInstance(e.target),s=a.element.childElementCount,t=l.getIndex(l.target),a.element===e.target||!o&&l.curTarget===l.target){var d={previousIndex:t,currentIndex:l.curTarget===l.target?t:s,target:e.target,droppedElement:l.target,helper:e.helper,cancel:!1};l.trigger("beforeDrop",d,function(i){(a.element===e.target||e.target.className.indexOf("e-list-nrt")>-1||e.target.className.indexOf("e-list-nr-template")>-1||e.target.closest(".e-list-nr-template"))&&!i.cancel&&(l.updateItemClass(a),a.element.appendChild(l.target),l.trigger("drop",{event:e.event,element:a.element,previousIndex:t,currentIndex:s,target:e.target,helper:e.helper,droppedElement:l.target,scopeName:l.scope}))})}l.target.classList.remove("e-grabbed"),l.target=null,l.curTarget=null,i.i(n.remove)(e.helper),i.i(n.getComponent)(l.element,"draggable").intDestroy(e.event)},l.bind(),l}l(t,e),a=t,t.prototype.bind=function(){this.element.id||(this.element.id=i.i(n.getUniqueID)("sortable")),this.itemClass||(this.itemClass="e-sort-item",this.dataBind()),this.initializeDraggable()},t.prototype.initializeDraggable=function(){new n.Draggable(this.element,{helper:this.getHelper,dragStart:this.onDragStart,drag:this.onDrag,dragStop:this.onDragStop,dragTarget:"."+this.itemClass,enableTapHold:!0,tapHoldThreshold:200,queryPositionInfo:this.queryPositionInfo,distance:1}),this.wireEvents()},t.prototype.wireEvents=function(){var e=this.element;n.EventHandler.add(e,"keydown",this.keyDownHandler,this)},t.prototype.unwireEvents=function(){var e=this.element;n.EventHandler.remove(e,"keydown",this.keyDownHandler)},t.prototype.keyDownHandler=function(e){if(27===e.keyCode){var t=i.i(n.getComponent)(this.element,"draggable");t&&t.intDestroy(null);var s=document.getElementsByClassName("e-sortableclone")[0];s&&s.remove();var l=document.getElementsByClassName("e-sortable-placeholder")[0];l&&l.remove()}},t.prototype.getPlaceHolder=function(e,t){if(t.placeHolder){var i=t.placeHolder({element:t.element,grabbedElement:this.target,target:e});return i.classList.add("e-sortable-placeholder"),i}return null},t.prototype.isValidTarget=function(e,t){return e&&i.i(n.compareElementParent)(e,t.element)&&e.classList.contains(t.itemClass)&&!e.classList.contains("e-disabled")},t.prototype.removePlaceHolder=function(e){i.i(n.remove)(e.placeHolderElement),e.placeHolderElement=null},t.prototype.updateItemClass=function(e){this!==e&&(this.target.classList.remove(this.itemClass),this.target.classList.add(e.itemClass))},t.prototype.getSortableInstance=function(e){if(e=i.i(n.closest)(e,".e-"+this.getModuleName())){var t=i.i(n.getComponent)(e,a);return t.scope&&this.scope&&t.scope===this.scope?t:this}return this},t.prototype.refreshDisabled=function(e,t,i){if(i===this)for(var s=void 0,n=e<t,l=void 0,r=n?e:t,a=n?t:e;r<=a;)s=this.element.children[r],s.classList.contains("e-disabled")?(l=this.getIndex(s),this.element.insertBefore(s,this.element.children[n?l+2:l-1]),r=n?l+2:l+1):r++},t.prototype.getIndex=function(e,t,s){void 0===t&&(t=this);var l,r;return[].slice.call(t.element.children).forEach(function(t,a){if(t.classList.contains("e-sortable-placeholder")&&(r=!0),t!==e);else if(l=a,!i.i(n.isNullOrUndefined)(s)){r&&(l-=1);var o=e.getBoundingClientRect(),c=o.bottom-(o.bottom-o.top)/2,h=s.changedTouches?s.changedTouches[0].clientY:s.clientY;l=h<=c?l:l+1}}),l},t.prototype.getSortableElement=function(e,t){return void 0===t&&(t=this),i.i(n.closest)(e,"."+t.itemClass)},t.prototype.queryPositionInfo=function(e){return e.left=pageXOffset?parseFloat(e.left)-pageXOffset+"px":e.left,e.top=pageYOffset?parseFloat(e.top)-pageYOffset+"px":e.top,e},t.prototype.isPlaceHolderPresent=function(e){return e.placeHolderElement&&!!i.i(n.closest)(e.placeHolderElement,"#"+e.element.id)},t.prototype.moveTo=function(e,t,i){s(this.element,e,t,i)},t.prototype.destroy=function(){this.unwireEvents(),"e-sort-item"===this.itemClass&&(this.itemClass=null,this.dataBind()),i.i(n.getComponent)(this.element,n.Draggable).destroy(),e.prototype.destroy.call(this)},t.prototype.getModuleName=function(){return"sortable"},t.prototype.onPropertyChanged=function(e,t){for(var i=0,s=Object.keys(e);i<s.length;i++){switch(s[i]){case"itemClass":[].slice.call(this.element.children).forEach(function(i){i.classList.contains(t.itemClass)&&i.classList.remove(t.itemClass),e.itemClass&&i.classList.add(e.itemClass)})}}};var a;return r([i.i(n.Property)(!1)],t.prototype,"enableAnimation",void 0),r([i.i(n.Property)(null)],t.prototype,"itemClass",void 0),r([i.i(n.Property)(null)],t.prototype,"scope",void 0),r([i.i(n.Property)()],t.prototype,"helper",void 0),r([i.i(n.Property)()],t.prototype,"placeHolder",void 0),r([i.i(n.Event)()],t.prototype,"drag",void 0),r([i.i(n.Event)()],t.prototype,"beforeDragStart",void 0),r([i.i(n.Event)()],t.prototype,"dragStart",void 0),r([i.i(n.Event)()],t.prototype,"beforeDrop",void 0),r([i.i(n.Event)()],t.prototype,"drop",void 0),t=a=r([n.NotifyPropertyChanges],t)}(n.Base)},function(e,t){e.exports=i}])});