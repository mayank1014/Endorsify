/*!
*  filename: ej2-dropdowns.min.js
*  version : 24.2.9
*  Copyright Syncfusion Inc. 2001 - 2023. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("SyncfusionBase"),require("SyncfusionData"),require("SyncfusionInputs"),require("SyncfusionPopups"),require("SyncfusionButtons"),require("SyncfusionLists"),require("SyncfusionNavigations"),require("SyncfusionNotifications")):"function"==typeof define&&define.amd?define(["SyncfusionBase","SyncfusionData","SyncfusionInputs","SyncfusionPopups","SyncfusionButtons","SyncfusionLists","SyncfusionNavigations","SyncfusionNotifications"],t):"object"==typeof exports?exports.SyncfusionDropdowns=t(require("SyncfusionBase"),require("SyncfusionData"),require("SyncfusionInputs"),require("SyncfusionPopups"),require("SyncfusionButtons"),require("SyncfusionLists"),require("SyncfusionNavigations"),require("SyncfusionNotifications")):e.SyncfusionDropdowns=t(e.SyncfusionBase,e.SyncfusionData,e.SyncfusionInputs,e.SyncfusionPopups,e.SyncfusionButtons,e.SyncfusionLists,e.SyncfusionNavigations,e.SyncfusionNotifications)}(this,function(e,t,i,s,l,n,o,r){return function(e){function t(s){if(i[s])return i[s].exports;var l=i[s]={i:s,l:!1,exports:{}};return e[s].call(l.exports,l,l.exports,t),l.l=!0,l.exports}var i={};return t.m=e,t.c=i,t.i=function(e){return e},t.d=function(e,i,s){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:s})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=24)}([function(t,i){t.exports=e},function(e,t,i){"use strict";i.d(t,"b",function(){return a}),i.d(t,"a",function(){return h}),i.d(t,"c",function(){return p});var s=i(0),l=(i.n(s),i(2)),n=(i.n(l),i(12)),o=(i.n(n),this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}()),r=this&&this.__decorate||function(e,t,i,s){var l,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var r=e.length-1;r>=0;r--)(l=e[r])&&(o=(n<3?l(o):n>3?l(t,i,o):l(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),r([i.i(s.Property)()],t.prototype,"text",void 0),r([i.i(s.Property)()],t.prototype,"value",void 0),r([i.i(s.Property)()],t.prototype,"iconCss",void 0),r([i.i(s.Property)()],t.prototype,"groupBy",void 0),r([i.i(s.Property)()],t.prototype,"htmlAttributes",void 0),t}(s.ChildProperty),h={root:"e-dropdownbase",rtl:"e-rtl",content:"e-content",selected:"e-active",hover:"e-hover",noData:"e-nodata",fixedHead:"e-fixed-head",focus:"e-item-focus",li:"e-list-item",group:"e-list-group-item",disabled:"e-disabled",grouping:"e-dd-group"},p=function(e){function t(t,i){var s=e.call(this,t,i)||this;return s.preventChange=!1,s.isAngular=!1,s.isPreventChange=!1,s.isDynamicDataChange=!1,s.addedNewItem=!1,s.isAddNewItemTemplate=!1,s.isRequesting=!1,s.isVirtualizationEnabled=!1,s.isAllowFiltering=!1,s.virtualizedItemsCount=0,s.totalItemCount=0,s.dataCount=0,s.isRemoteDataUpdated=!1,s.isIncrementalRequest=!1,s.itemCount=10,s}return o(t,e),t.prototype.getPropObject=function(e,t,i){var s=new Object,l=new Object,n=function(e){return e};s[n(e)]=t[n(e)],l[n(e)]=i[n(e)];var o=new Object;return o.newProperty=s,o.oldProperty=l,o},t.prototype.getValueByText=function(e,t,l){var n=null;return i.i(s.isNullOrUndefined)(this.listData)||(n=t?this.checkValueCase(e,!0,l):this.checkValueCase(e,!1,l)),n},t.prototype.checkValueCase=function(e,t,l,n){var o=this,r=null;n&&(r=e);var a=this.listData,h=this.fields,p=this.typeOfData(a).typeof;if("string"===p||"number"===p||"boolean"===p)for(var u=0,c=a;u<c.length;u++){var d=c[u];i.i(s.isNullOrUndefined)(d)||(l?r=this.checkingAccent(String(d),e,t):t?this.checkIgnoreCase(String(d),e)&&(r=this.getItemValue(String(d),e,t)):this.checkNonIgnoreCase(String(d),e)&&(r=this.getItemValue(String(d),e,t,n)))}else if(t)a.filter(function(t){var l=i.i(s.getValue)(h.value,t);!i.i(s.isNullOrUndefined)(l)&&o.checkIgnoreCase(i.i(s.getValue)(h.text,t).toString(),e)&&(r=i.i(s.getValue)(h.value,t))});else if(n){var m=null;m=r,a.filter(function(e){var t=i.i(s.getValue)(h.value,e);i.i(s.isNullOrUndefined)(t)||i.i(s.isNullOrUndefined)(r)||t.toString()!==m.toString()||(r=i.i(s.getValue)(h.text,e))})}else a.filter(function(t){o.checkNonIgnoreCase(i.i(s.getValue)(h.text,t),e)&&(r=i.i(s.getValue)(h.value,t))});return r},t.prototype.checkingAccent=function(e,t,i){var s=l.DataUtil.ignoreDiacritics(String(e)),n=l.DataUtil.ignoreDiacritics(t.toString()),o=null;return i?this.checkIgnoreCase(s,n)&&(o=this.getItemValue(String(e),t,i)):this.checkNonIgnoreCase(String(e),t)&&(o=this.getItemValue(String(e),t,i)),o},t.prototype.checkIgnoreCase=function(e,t){return String(e).toLowerCase()===t.toString().toLowerCase()},t.prototype.checkNonIgnoreCase=function(e,t){return String(e)===t.toString()},t.prototype.getItemValue=function(e,t,i,s){var l=this.listData,n=this.typeOfData(l).typeof;return s?e.toString():i?"string"===n?String(e):this.getFormattedValue(String(e)):"string"===n?t:this.getFormattedValue(t)},t.prototype.templateCompiler=function(e){var t=!1;if("function"!=typeof e&&e)try{t=!!i.i(s.selectAll)(e,document).length}catch(e){t=!1}return t},t.prototype.l10nUpdate=function(e){var t="listbox"===this.getModuleName()?this.ulElement:this.list;if("No records found"!==this.noRecordsTemplate||"Request failed"!==this.actionFailureTemplate){var l=e?this.actionFailureTemplate:this.noRecordsTemplate,n=void 0,o=e?this.actionFailureTemplateId:this.noRecordsTemplateId;t.innerHTML="";var r=this.templateCompiler(l);n="function"!=typeof l&&r?i.i(s.compile)(i.i(s.select)(l,document).innerHTML.trim()):i.i(s.compile)(l);var a=e?"actionFailureTemplate":"noRecordsTemplate",h=void 0;if((h=this.isReact&&"function"==typeof l?n({},this,a,o,this.isStringTemplate,null):n({},this,a,o,this.isStringTemplate,null,t))&&h.length>0)for(var p=0;p<h.length;p++)if("listbox"===this.getModuleName()&&"noRecordsTemplate"===a)if("#text"===h[p].nodeName){var u=this.createElement("li");u.textContent=h[p].textContent,u.classList.add("e-list-nrt"),u.setAttribute("role","option"),t.appendChild(u)}else h[p].classList.add("e-list-nr-template"),t.appendChild(h[p]);else(h[p]instanceof HTMLElement||h[p]instanceof Text)&&t.appendChild(h[p]);this.renderReactTemplates()}else{var c={noRecordsTemplate:"No records found",actionFailureTemplate:"Request failed"},d=new s.L10n(this.getLocaleName(),{},this.locale);""!==d.getConstant("actionFailureTemplate")||""!==d.getConstant("noRecordsTemplate")?this.l10n=d:this.l10n=new s.L10n("listbox"===this.getModuleName()?"listbox":"mention"===this.getModuleName()?"mention":"dropdowns",c,this.locale);var m=e?this.l10n.getConstant("actionFailureTemplate"):this.l10n.getConstant("noRecordsTemplate");if("listbox"===this.getModuleName()){var u=this.createElement("li");u.textContent=m,t.appendChild(u),u.classList.add("e-list-nrt"),u.setAttribute("role","option")}else i.i(s.isNullOrUndefined)(t)||(t.innerHTML=m)}},t.prototype.getLocaleName=function(){return"drop-down-base"},t.prototype.getTextByValue=function(e){return this.checkValueCase(e,!1,!1,!0)},t.prototype.getFormattedValue=function(e){if(this.listData&&this.listData.length){var t=void 0;if(t=this.properties.allowCustomValue&&this.properties.value&&this.properties.value instanceof Array&&this.properties.value.length>0?this.typeOfData(this.properties.value):this.typeOfData(this.listData),"number"==typeof i.i(s.getValue)(this.fields.value?this.fields.value:"value",t.item)||"number"===t.typeof)return parseFloat(e);if("boolean"==typeof i.i(s.getValue)(this.fields.value?this.fields.value:"value",t.item)||"boolean"===t.typeof)return"true"===e||""+e=="true"}return e},t.prototype.setEnableRtl=function(){i.i(s.isNullOrUndefined)(this.enableRtlElements)||(this.list&&this.enableRtlElements.push(this.list),this.enableRtl?i.i(s.addClass)(this.enableRtlElements,h.rtl):i.i(s.removeClass)(this.enableRtlElements,h.rtl))},t.prototype.initialize=function(e){if(this.bindEvent=!0,this.actionFailureTemplateId=this.element.id+"ActionFailureTemplate","UL"===this.element.tagName){var t=n.ListBase.createJsonFromElement(this.element);this.setProperties({fields:{text:"text",value:"text"}},!0),this.resetList(t,this.fields)}else if("SELECT"===this.element.tagName){var l=this.dataSource instanceof Array?this.dataSource.length>0:!i.i(s.isNullOrUndefined)(this.dataSource);l?this.isDynamicDataChange&&this.setListData(this.dataSource,this.fields,this.query):this.renderItemsBySelect()}else this.setListData(this.dataSource,this.fields,this.query,e)},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.updateDataAttribute=function(e){for(var t=["class","style","id","type","aria-expanded","aria-autocomplete","aria-readonly"],l={},n=0;n<this.element.attributes.length;n++)-1!==t.indexOf(this.element.attributes[n].name)||"dropdownlist"===this.getModuleName()&&"readonly"===this.element.attributes[n].name||(l[this.element.attributes[n].name]=this.element.getAttribute(this.element.attributes[n].name));i.i(s.extend)(l,e,l),this.setProperties({htmlAttributes:l},!0)},t.prototype.renderItemsBySelect=function(){var e=this.element,t={value:"value",text:"text"},i=[],s=e.querySelectorAll("select>optgroup"),l=e.querySelectorAll("select>option");if(this.getJSONfromOption(i,l,t),s.length){for(var n=0;n<s.length;n++){var o=s[n],r={};r[t.text]=o.label,r.isHeader=!0;var a=o.querySelectorAll("option");i.push(r),this.getJSONfromOption(i,a,t)}e.querySelectorAll("select>option")}this.updateFields(t.text,t.value,this.fields.groupBy,this.fields.htmlAttributes,this.fields.iconCss),this.resetList(i,t)},t.prototype.updateFields=function(e,t,l,n,o){var r={fields:{text:e,value:t,groupBy:i.i(s.isNullOrUndefined)(l)?this.fields&&this.fields.groupBy:l,htmlAttributes:i.i(s.isNullOrUndefined)(n)?this.fields&&this.fields.htmlAttributes:n,iconCss:i.i(s.isNullOrUndefined)(o)?this.fields&&this.fields.iconCss:o}};this.setProperties(r,!0)},t.prototype.getJSONfromOption=function(e,t,l){for(var n=0,o=t;n<o.length;n++){var r=o[n],a={};a[l.text]=r.innerText,a[l.value]=i.i(s.isNullOrUndefined)(r.getAttribute(l.value))?r.innerText:r.getAttribute(l.value),e.push(a)}},t.prototype.preRender=function(){this.scrollTimer=-1,this.enableRtlElements=[],this.isRequested=!1,this.isDataFetched=!1,this.itemTemplateId=this.element.id+"ItemTemplate",this.displayTemplateId=this.element.id+"DisplayTemplate",this.spinnerTemplateId=this.element.id+"SpinnerTemplate",this.valueTemplateId=this.element.id+"ValueTemplate",this.groupTemplateId=this.element.id+"GroupTemplate",this.headerTemplateId=this.element.id+"HeaderTemplate",this.footerTemplateId=this.element.id+"FooterTemplate",this.noRecordsTemplateId=this.element.id+"NoRecordsTemplate"},t.prototype.setListData=function(e,t,i,s){var n=this;t=t||this.fields;var o;this.isActive=!0;var r={cancel:!1,data:e,query:i};this.isPreventChange=!(!this.isAngular||!this.preventChange)||this.isPreventChange,this.isRequesting||this.trigger("actionBegin",r,function(r){if(!r.cancel)if(n.isRequesting=!0,n.showSpinner(),e instanceof l.DataManager&&!n.virtualGroupDataSource){if(n.isRequested=!0,n.isDataFetched)return void n.emptyDataRequest(t);r.data.executeQuery(n.getQuery(r.query)).then(function(e){n.isPreventChange=!(!n.isAngular||!n.preventChange)||n.isPreventChange,n.trigger("actionComplete",e,function(e){if(!n.virtualGroupDataSource&&n.isVirtualizationEnabled){if(n.isRemoteDataUpdated=!0,"combobox"===n.getModuleName()&&!n.initialRemoteRender&&n.isAllowFiltering&&n.isVirtualizationEnabled&&e.result&&(e.result=e.result.result),e.result.length>0){var r=e.result;if(!n.isVirtualizationEnabled||!n.fields.groupBy)return n.virtualGroupDataSource=r,n.hideSpinner(),n.isRequested=!1,n.isRequesting=!1,void n.setListData(r,t,i,s);var a=new l.DataManager(r).executeLocal((new l.Query).group(n.fields.groupBy));n.virtualGroupDataSource=a.records}return n.hideSpinner(),n.isRequested=!1,n.isRequesting=!1,void n.updatePopupState()}if(!e.cancel){n.isRequesting=!1;var h=e.result;if(n.isIncrementalRequest)return void(o=n.renderItems(h,t));0===h.length&&(n.isDataFetched=!0),n.dataCount=e.count,n.totalItemCount=e.count,o=n.renderItems(h,t),n.onActionComplete(o,h,e),n.groupTemplate&&n.renderGroupTemplate(o),n.isRequested=!1,n.bindChildItems(h,o,t,e)}})}).catch(function(e){n.isRequested=!1,n.isRequesting=!1,n.onActionFailure(e),n.hideSpinner()})}else{n.isRequesting=!1;var a=void 0;if(n.isVirtualizationEnabled&&!n.virtualGroupDataSource&&n.fields.groupBy){var h=new l.DataManager(n.dataSource).executeLocal((new l.Query).group(n.fields.groupBy));n.virtualGroupDataSource=h.records}var p=n.isVirtualizationEnabled&&n.virtualGroupDataSource?new l.DataManager(n.virtualGroupDataSource):new l.DataManager(r.data);if(a=n.getQuery(r.query).executeLocal(p),n.isVirtualizationEnabled&&"autocomplete"===n.getModuleName()&&0!=a.count&&a.count<2*n.itemCount){var u=n.getQuery(r.query);if(u)for(var c=0;c<u.queries.length;c++)if("onTake"===u.queries[c].fn){u.queries[c].e.nos=a.count,a=u.executeLocal(p);break}}n.dataCount=a.count,n.totalItemCount=a.count,a=n.isVirtualizationEnabled?a.result:a;var d={cancel:!1,result:a};n.isPreventChange=!(!n.isAngular||!n.preventChange)||n.isPreventChange,n.trigger("actionComplete",d,function(e){if(n.isIncrementalRequest)return void(o=n.renderItems(e.result,t));e.cancel||(o=n.renderItems(e.result,t),n.onActionComplete(o,e.result,s),n.groupTemplate&&n.renderGroupTemplate(o),n.bindChildItems(e.result,o,t),setTimeout(function(){"multiselect"===n.getModuleName()&&null!=n.itemTemplate&&o.childElementCount>0&&(o.children[0].childElementCount>0||n.fields.groupBy&&o.children[1]&&o.children[1].childElementCount>0)&&n.updateDataList()}))})}})},t.prototype.updatePopupState=function(){},t.prototype.updateRemoteData=function(){this.setListData(this.dataSource,this.fields,this.query)},t.prototype.bindChildItems=function(e,t,l,n){var o=this;e.length>=100&&"autocomplete"===this.getModuleName()?setTimeout(function(){var r=o.remainingItems(o.sortedData,l);i.i(s.append)(r,t),o.liCollections=o.list.querySelectorAll("."+h.li),o.updateListValues(),o.raiseDataBound(e,n)},0):this.raiseDataBound(e,n)},t.prototype.updateListValues=function(){},t.prototype.findListElement=function(e,t,i,s){var l=null;if(e)for(var n=[].slice.call(e.querySelectorAll(t)),o=0;o<n.length;o++)if(n[o].getAttribute(i)===s+""){l=n[o];break}return l},t.prototype.raiseDataBound=function(e,t){this.hideSpinner();var i={items:e,e:t};this.trigger("dataBound",i)},t.prototype.remainingItems=function(e,t){var i=new l.DataManager(e).executeLocal((new l.Query).skip(100));if(this.itemTemplate){var s=this.templateListItem(i,t);return[].slice.call(s.childNodes)}var o=this.typeOfData(i).typeof;return"string"===o||"number"===o||"boolean"===o?n.ListBase.createListItemFromArray(this.createElement,i,!0,this.listOption(i,t),this):n.ListBase.createListItemFromJson(this.createElement,i,this.listOption(i,t),1,!0,this)},t.prototype.emptyDataRequest=function(e){var t=[];this.onActionComplete(this.renderItems(t,e),t),this.isRequested=!1,this.hideSpinner()},t.prototype.showSpinner=function(){},t.prototype.hideSpinner=function(){},t.prototype.onActionFailure=function(e){this.liCollections=[],this.trigger("actionFailure",e),this.l10nUpdate(!0),i.i(s.isNullOrUndefined)(this.list)||i.i(s.addClass)([this.list],h.noData)},t.prototype.onActionComplete=function(e,t,l){if(this.listData=t,this.isVirtualizationEnabled&&this.notify("setGeneratedData",{module:"VirtualScroll"}),"listbox"!==this.getModuleName()&&e.setAttribute("tabindex","0"),this.isReact&&this.clearTemplate(["itemTemplate","groupTemplate","actionFailureTemplate","noRecordsTemplate"]),this.isVirtualizationEnabled||(this.fixedHeaderElement=i.i(s.isNullOrUndefined)(this.fixedHeaderElement)?this.fixedHeaderElement:null),"multiselect"===this.getModuleName()&&this.properties.allowCustomValue&&this.fields.groupBy)for(var n=0;n<e.childElementCount;n++)e.children[n].classList.contains("e-list-group-item")&&(i.i(s.isNullOrUndefined)(e.children[n].innerHTML)||""==e.children[n].innerHTML)&&i.i(s.addClass)([e.children[n]],"e-hide-group-header");i.i(s.isNullOrUndefined)(this.list)||this.isVirtualizationEnabled||(this.list.innerHTML="",this.list.appendChild(e),this.liCollections=this.list.querySelectorAll("."+h.li),this.ulElement=this.list.querySelector("ul"),this.postRender(this.list,t,this.bindEvent))},t.prototype.postRender=function(e,t,l){var n=e.querySelector("."+h.li),o=e.querySelector("."+h.selected);n&&!o&&n.classList.add(h.focus),t.length<=0?(this.l10nUpdate(),i.i(s.addClass)([e],h.noData)):e.classList.remove(h.noData)},t.prototype.getQuery=function(e){return e||(this.query?this.query:new l.Query)},t.prototype.updateVirtualizationProperties=function(e,t){this.isVirtualizationEnabled=!0,this.virtualizedItemsCount=e,this.isAllowFiltering=t},t.prototype.renderGroupTemplate=function(e){if(null!==this.fields.groupBy&&this.dataSource||this.element.querySelector("."+h.group)){var t=this.dataSource,l={groupTemplateID:this.groupTemplateId,isStringTemplate:this.isStringTemplate},o=e.querySelectorAll("."+h.group),r=this.templateCompiler(this.groupTemplate);if("function"!=typeof this.groupTemplate&&r){var a=i.i(s.select)(this.groupTemplate,document).innerHTML.trim(),p=n.ListBase.renderGroupTemplate(a,t,this.fields.properties,o,l,this);if(this.isGroupChecking)for(var u=0;u<p.length;u++)this.notify("addItem",{module:"CheckBoxSelection",item:p[u]})}else{var p=n.ListBase.renderGroupTemplate(this.groupTemplate,t,this.fields.properties,o,l,this);if(this.isGroupChecking)for(var u=0;u<p.length;u++)this.notify("addItem",{module:"CheckBoxSelection",item:p[u]})}this.renderReactTemplates()}},t.prototype.createListItems=function(e,t){if(e){t.groupBy||this.element.querySelector("optgroup")?(t.groupBy&&("None"!==this.sortOrder&&(e=this.getSortedDataSource(e)),e=n.ListBase.groupDataSource(e,t.properties,this.sortOrder)),i.i(s.addClass)([this.list],h.grouping)):e=this.getSortedDataSource(e);var o=this.listOption(e,t),r=e.length>100?new l.DataManager(e).executeLocal((new l.Query).take(100)):e;return this.sortedData=e,n.ListBase.createList(this.createElement,"autocomplete"===this.getModuleName()?r:e,o,!0,this)}return null},t.prototype.listOption=function(e,t){var l=!i.i(s.isNullOrUndefined)(t.iconCss),n=i.i(s.isNullOrUndefined)(t.properties)?t:t.properties,o=null!==t.text||null!==t.value?{fields:n,showIcon:l,ariaAttributes:{groupItemRole:"presentation"}}:{fields:{value:"text"}};return i.i(s.extend)({},o,t,!0)},t.prototype.setFloatingHeader=function(e){i.i(s.isNullOrUndefined)(this.list)||this.list.classList.contains(h.noData)||(i.i(s.isNullOrUndefined)(this.fixedHeaderElement)&&(this.fixedHeaderElement=this.createElement("div",{className:h.fixedHead}),i.i(s.isNullOrUndefined)(this.list)||this.list.querySelector("li").classList.contains(h.group)||(this.fixedHeaderElement.style.display="none"),i.i(s.isNullOrUndefined)(this.fixedHeaderElement)||i.i(s.isNullOrUndefined)(this.list)||i.i(s.prepend)([this.fixedHeaderElement],this.list),this.setFixedHeader()),i.i(s.isNullOrUndefined)(this.fixedHeaderElement)||"0"!==this.fixedHeaderElement.style.zIndex||this.setFixedHeader(),this.scrollStop(e))},t.prototype.scrollStop=function(e,t){for(var l=i.i(s.isNullOrUndefined)(e)?this.list:e.target,n=parseInt(getComputedStyle(this.getValidLi(),null).getPropertyValue("height"),10),o=Math.round(l.scrollTop/n),r=this.list.querySelectorAll("li:not(.e-hide-listitem)"),a=this.list.querySelectorAll(".e-virtual-list").length,p=0,u=!1,c=o;c>-1;c--){var d=this.isVirtualizationEnabled?c+a:c;if(this.isVirtualizationEnabled){var m=this.list.querySelectorAll(".e-list-group-item").length,f=0;if(u&&p++,this.updateGroupHeader(d,r,l)){if(f++,p>=this.getPageCount())break;if(m<=f)break}t&&(!i.i(s.isNullOrUndefined)(r[d])&&r[d].classList.contains(h.selected)&&"autocomplete"!==this.getModuleName()||!i.i(s.isNullOrUndefined)(r[d])&&r[d].classList.contains(h.focus)&&"autocomplete"===this.getModuleName())&&(p++,u=!0)}else if(this.updateGroupHeader(d,r,l))break}},t.prototype.getPageCount=function(e){var t=this.list.classList.contains(h.noData)?null:getComputedStyle(this.getItems()[0],null).getPropertyValue("height"),i=Math.round(this.list.getBoundingClientRect().height/parseInt(t,10));return e?i:Math.round(i)},t.prototype.updateGroupHeader=function(e,t,l){return!i.i(s.isNullOrUndefined)(t[e])&&t[e].classList.contains(h.group)?(this.updateGroupFixedHeader(t[e],l),!0):(this.fixedHeaderElement.style.display="none",this.fixedHeaderElement.style.top="none",!1)},t.prototype.updateGroupFixedHeader=function(e,t){this.fixedHeaderElement.innerHTML=e.innerHTML,this.fixedHeaderElement.style.position="fixed",this.fixedHeaderElement.style.top=this.list.parentElement.offsetTop+this.list.offsetTop+"px",this.fixedHeaderElement.style.display="block"},t.prototype.getValidLi=function(){return this.liCollections[0]},t.prototype.renderItems=function(e,t){var i;if(this.itemTemplate&&e){var s=e;s&&t.groupBy?("None"!==this.sortOrder&&(s=this.getSortedDataSource(s)),s=n.ListBase.groupDataSource(s,t.properties,this.sortOrder)):s=this.getSortedDataSource(s),this.sortedData=s;var o=s.length>100?new l.DataManager(s).executeLocal((new l.Query).take(100)):s;if(i=this.templateListItem("autocomplete"===this.getModuleName()?o:s,t),this.isVirtualizationEnabled){var r=this.list.querySelector(".e-list-parent"),a=this.list.querySelector(".e-virtual-ddl-content");e.length>=this.virtualizedItemsCount&&r&&a||r&&a&&this.isAllowFiltering||r&&a&&"autocomplete"===this.getModuleName()?(a.replaceChild(i,r),this.updateListElements(e)):a||(this.list.innerHTML="",this.createVirtualContent(),this.list.querySelector(".e-virtual-ddl-content").appendChild(i),this.updateListElements(e))}}else{if(i=this.createListItems(e,t),this.isIncrementalRequest)return this.incrementalLiCollections=i.querySelectorAll("."+h.li),this.incrementalUlElement=i,this.incrementalListData=e,i;if(this.isVirtualizationEnabled){var r=this.list.querySelector(".e-list-parent"),a=this.list.querySelector(".e-virtual-ddl-content");e.length>=this.virtualizedItemsCount&&r&&a||r&&a&&this.isAllowFiltering||r&&a&&"autocomplete"===this.getModuleName()?(a.replaceChild(i,r),this.updateListElements(e)):a||(this.list.innerHTML="",this.createVirtualContent(),this.list.querySelector(".e-virtual-ddl-content").appendChild(i),this.updateListElements(e))}}return i},t.prototype.createVirtualContent=function(){this.list.querySelector(".e-virtual-ddl-content")||this.list.appendChild(this.createElement("div",{className:"e-virtual-ddl-content"}))},t.prototype.updateListElements=function(e){this.liCollections=this.list.querySelectorAll("."+h.li),this.ulElement=this.list.querySelector("ul"),this.listData=e,this.postRender(this.list,e,this.bindEvent)},t.prototype.templateListItem=function(e,t){var l=this.listOption(e,t);l.templateID=this.itemTemplateId,l.isStringTemplate=this.isStringTemplate;var o=this.templateCompiler(this.itemTemplate);if("function"!=typeof this.itemTemplate&&o){var r=i.i(s.select)(this.itemTemplate,document).innerHTML.trim();return n.ListBase.renderContentTemplate(this.createElement,r,e,t.properties,l,this)}return n.ListBase.renderContentTemplate(this.createElement,this.itemTemplate,e,t.properties,l,this)},t.prototype.typeOfData=function(e){for(var t={typeof:null,item:null},l=0;!i.i(s.isNullOrUndefined)(e)&&l<e.length;l++)if(!i.i(s.isNullOrUndefined)(e[l])){var n="string"==typeof e[l]||"number"==typeof e[l]||"boolean"==typeof e[l],o=n?i.i(s.isNullOrUndefined)(e[l]):i.i(s.isNullOrUndefined)(i.i(s.getValue)(this.fields.value?this.fields.value:"value",e[l]));if(!o)return t={typeof:typeof e[l],item:e[l]}}return t},t.prototype.setFixedHeader=function(){i.i(s.isNullOrUndefined)(this.list)||(this.list.parentElement.style.display="block");var e=0;if(this.list&&this.list.parentElement&&(e=parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-width"),10),isNaN(e))){e=parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-top-width"),10)+parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-bottom-width"),10)+parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-left-width"),10)+parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-right-width"),10)}if(!i.i(s.isNullOrUndefined)(this.liCollections)){var t=this.getValidLi().offsetWidth-e;this.fixedHeaderElement.style.width=t.toString()+"px"}i.i(s.setStyleAttribute)(this.fixedHeaderElement,{zIndex:10});var l=this.ulElement.querySelector("."+h.group+":not(.e-hide-listitem)");this.fixedHeaderElement.innerHTML=l.innerHTML},t.prototype.getSortedDataSource=function(e){if(e&&"None"!==this.sortOrder){var t=this.fields.text?this.fields.text:"text";"string"!==this.typeOfData(e).typeof&&"number"!==this.typeOfData(e).typeof&&"boolean"!==this.typeOfData(e).typeof||(t=""),e=n.ListBase.getDataSource(e,n.ListBase.addSorting(this.sortOrder,t))}return e},t.prototype.getIndexByValue=function(e){for(var t,l=this.getItems(),n=0;n<l.length;n++)if(!i.i(s.isNullOrUndefined)(e)&&l[n].getAttribute("data-value")===e.toString()){t=n;break}return t},t.prototype.getIndexByValueFilter=function(e){var t,l=this.renderItems(this.selectData,this.fields);if(l&&l.children)for(var n=0;n<l.children.length;n++)if(!i.i(s.isNullOrUndefined)(e)&&l.children[n].getAttribute("data-value")===e.toString()){t=n;break}return t},t.prototype.dispatchEvent=function(e,t){var i=document.createEvent("HTMLEvents");i.initEvent(t,!1,!0),e&&e.dispatchEvent(i)},t.prototype.setFields=function(){this.fields.value&&!this.fields.text?this.updateFields(this.fields.value,this.fields.value):!this.fields.value&&this.fields.text?this.updateFields(this.fields.text,this.fields.text):this.fields.value||this.fields.text||this.updateFields("text","text")},t.prototype.resetList=function(e,t,l,n){if(this.list){if("SELECT"===this.element.tagName&&this.element.options.length>0||"UL"===this.element.tagName&&this.element.childNodes.length>0){!(e instanceof Array?e.length>0:!i.i(s.isNullOrUndefined)(e))&&this.selectData&&this.selectData.length>0&&(e=this.selectData)}e="combobox"===this.getModuleName()&&this.selectData&&e instanceof Array&&e.length<this.selectData.length&&this.addedNewItem?this.selectData:e,this.addedNewItem=!1,this.setListData(e,t,l,n)}},t.prototype.updateSelectElementData=function(e){(e||this.isVirtualizationEnabled)&&i.i(s.isNullOrUndefined)(this.selectData)&&this.listData&&this.listData.length>0&&(this.selectData=this.listData)},t.prototype.updateSelection=function(){},t.prototype.renderList=function(){this.render()},t.prototype.updateDataSource=function(e){this.resetList(this.dataSource),this.totalItemCount=this.dataSource instanceof l.DataManager?this.dataSource.dataSource.json.length:0},t.prototype.setUpdateInitial=function(e,t){this.isDataFetched=!1;for(var i={},s=0;e.length>s;s++)t[e[s]]&&"fields"===e[s]?(this.setFields(),i[e[s]]=t[e[s]]):t[e[s]]&&(i[e[s]]=t[e[s]]);Object.keys(i).length>0&&(-1===Object.keys(i).indexOf("dataSource")&&(i.dataSource=this.dataSource),this.updateDataSource(i))},t.prototype.onPropertyChanged=function(e,t){"dropdownbase"===this.getModuleName()&&this.setUpdateInitial(["fields","query","dataSource"],e),this.setUpdateInitial(["sortOrder","itemTemplate"],e);for(var l=0,n=Object.keys(e);l<n.length;l++){switch(n[l]){case"query":case"sortOrder":case"dataSource":case"itemTemplate":break;case"enableRtl":this.setEnableRtl();break;case"groupTemplate":if(this.renderGroupTemplate(this.list),this.ulElement&&this.fixedHeaderElement){var o=this.ulElement.querySelector("."+h.group);this.fixedHeaderElement.innerHTML=o.innerHTML}break;case"locale":this.list&&!i.i(s.isNullOrUndefined)(this.liCollections)&&0===this.liCollections.length&&this.l10nUpdate();break;case"zIndex":this.setProperties({zIndex:e.zIndex},!0),this.setZIndex()}}},t.prototype.render=function(e,t){"listbox"===this.getModuleName()?this.list=this.createElement("div",{className:h.content,attrs:{tabindex:"0"}}):this.list=this.createElement("div",{className:h.content}),this.list.classList.add(h.root),this.setFields();var l={duration:300,selector:"."+h.li};this.rippleFun=i.i(s.rippleEffect)(this.list,l);var n=this.element.querySelector("select>optgroup");if(!this.fields.groupBy&&i.i(s.isNullOrUndefined)(n)||this.isGroupChecking||s.EventHandler.add(this.list,"scroll",this.setFloatingHeader,this),"dropdownbase"===this.getModuleName()){this.element.getAttribute("tabindex")&&this.list.setAttribute("tabindex",this.element.getAttribute("tabindex")),i.i(s.removeClass)([this.element],h.root),this.element.style.display="none";var o=this.createElement("div");this.element.parentElement.insertBefore(o,this.element),o.appendChild(this.element),o.appendChild(this.list)}this.setEnableRtl(),t||this.initialize(e)},t.prototype.removeScrollEvent=function(){this.list&&s.EventHandler.remove(this.list,"scroll",this.setFloatingHeader)},t.prototype.getModuleName=function(){return"dropdownbase"},t.prototype.getItems=function(){return this.ulElement.querySelectorAll("."+h.li)},t.prototype.addItem=function(e,t){if((!this.list||this.list.textContent===this.noRecordsTemplate&&"listbox"!==this.getModuleName())&&this.renderList(),"None"!==this.sortOrder&&i.i(s.isNullOrUndefined)(t)){var l=[].slice.call(this.listData);l.push(e),l=this.getSortedDataSource(l),this.fields.groupBy?(l=n.ListBase.groupDataSource(l,this.fields.properties,this.sortOrder),t=l.indexOf(e)):t=l.indexOf(e)}var o=this.getItems().length,r=this.list.querySelector("."+h.selected);e=e instanceof Array?e:[e];var a;a=i.i(s.isNullOrUndefined)(t)||t<0||t>o-1?o:t;var p=this.fields;e&&p.groupBy&&(e=n.ListBase.groupDataSource(e,p.properties));for(var u=[],c=0;c<e.length;c++){var d=e[c],m=d.isHeader,f=this.createElement("li",{className:m?h.group:h.li,id:"option-add-"+c}),v=d instanceof Object?i.i(s.getValue)(p.text,d):d;if(m&&(f.innerText=v),this.itemTemplate&&!m){var g=this.templateCompiler(this.itemTemplate),y="function"!=typeof this.itemTemplate&&g?i.i(s.compile)(i.i(s.select)(this.itemTemplate,document).innerHTML.trim()):i.i(s.compile)(this.itemTemplate),C=y(d,this,"itemTemplate",this.itemTemplateId,this.isStringTemplate,null,f);C&&i.i(s.append)(C,f)}else m||f.appendChild(document.createTextNode(v));f.setAttribute("data-value",d instanceof Object?i.i(s.getValue)(p.value,d):d),f.setAttribute("role","option"),this.notify("addItem",{module:"CheckBoxSelection",item:f}),u.push(f),this.listData.push(d),"None"===this.sortOrder&&i.i(s.isNullOrUndefined)(t)&&0===a&&(a=null),this.updateActionCompleteData(f,d,a),this.trigger("beforeItemRender",{element:f,item:d})}if(0===o&&i.i(s.isNullOrUndefined)(this.list.querySelector("ul")))i.i(s.isNullOrUndefined)(this.list)||(this.list.innerHTML="",this.list.classList.remove(h.noData),this.isAddNewItemTemplate=!0,i.i(s.isNullOrUndefined)(this.ulElement)||this.list.appendChild(this.ulElement)),this.liCollections=u,i.i(s.isNullOrUndefined)(u)||i.i(s.isNullOrUndefined)(this.ulElement)||i.i(s.append)(u,this.ulElement),this.updateAddItemList(this.list,o);else{"listbox"===this.getModuleName()&&0===o&&(this.ulElement.innerHTML="");for(var b=[],c=0;c<e.length;c++){for(var E=this.ulElement.querySelectorAll(".e-list-group-item"),S=0;S<E.length;S++)b[S]=E[S].innerText;if(b.indexOf(u[c].innerText)>-1&&p.groupBy){for(var S=0;S<E.length;S++)if(b[S]===u[c].innerText){"None"===this.sortOrder?this.ulElement.insertBefore(u[c+1],E[S+1]):this.ulElement.insertBefore(u[c+1],this.ulElement.childNodes[t]),c+=1;break}}else this.liCollections[a]?this.liCollections[a].parentNode.insertBefore(u[c],this.liCollections[a]):this.ulElement.appendChild(u[c]);var x=[].slice.call(this.liCollections);x.splice(a,0,u[c]),this.liCollections=x,a+=1,"multiselect"===this.getModuleName()&&this.updateDataList()}}"listbox"===this.getModuleName()&&this.isReact&&this.renderReactTemplates(),(r||0===t)&&this.updateSelection(),this.addedNewItem=!0},t.prototype.validationAttribute=function(e,t){var i=e.getAttribute("name")?e.getAttribute("name"):e.getAttribute("id");t.setAttribute("name",i),e.removeAttribute("name");for(var s=["required","aria-required","form"],l=0;l<s.length;l++)if(e.getAttribute(s[l])){var n=e.getAttribute(s[l]);t.setAttribute(s[l],n),e.removeAttribute(s[l])}},t.prototype.setZIndex=function(){},t.prototype.updateActionCompleteData=function(e,t,i){},t.prototype.updateAddItemList=function(e,t){},t.prototype.updateDataList=function(){},t.prototype.getDataByValue=function(e){if(!i.i(s.isNullOrUndefined)(this.listData)){var t=this.typeOfData(this.listData).typeof;if("string"===t||"number"===t||"boolean"===t)for(var l=0,n=this.listData;l<n.length;l++){var o=n[l];if(!i.i(s.isNullOrUndefined)(o)&&o===e)return o}else for(var r=0,a=this.listData;r<a.length;r++){var o=a[r];if(!i.i(s.isNullOrUndefined)(o)&&i.i(s.getValue)(this.fields.value?this.fields.value:"value",o)===e)return o}}return null},t.prototype.destroy=function(){document.body.contains(this.list)&&(s.EventHandler.remove(this.list,"scroll",this.setFloatingHeader),i.i(s.isNullOrUndefined)(this.rippleFun)||this.rippleFun(),i.i(s.detach)(this.list)),this.liCollections=null,this.ulElement=null,this.list=null,this.enableRtlElements=null,this.rippleFun=null,e.prototype.destroy.call(this)},r([i.i(s.Complex)({text:null,value:null,iconCss:null,groupBy:null},a)],t.prototype,"fields",void 0),r([i.i(s.Property)(null)],t.prototype,"itemTemplate",void 0),r([i.i(s.Property)(null)],t.prototype,"groupTemplate",void 0),r([i.i(s.Property)("No records found")],t.prototype,"noRecordsTemplate",void 0),r([i.i(s.Property)("Request failed")],t.prototype,"actionFailureTemplate",void 0),r([i.i(s.Property)("None")],t.prototype,"sortOrder",void 0),r([i.i(s.Property)([])],t.prototype,"dataSource",void 0),r([i.i(s.Property)(null)],t.prototype,"query",void 0),r([i.i(s.Property)("StartsWith")],t.prototype,"filterType",void 0),r([i.i(s.Property)(!0)],t.prototype,"ignoreCase",void 0),r([i.i(s.Property)(1e3)],t.prototype,"zIndex",void 0),r([i.i(s.Property)(!1)],t.prototype,"ignoreAccent",void 0),r([i.i(s.Property)()],t.prototype,"locale",void 0),r([i.i(s.Event)()],t.prototype,"actionBegin",void 0),r([i.i(s.Event)()],t.prototype,"actionComplete",void 0),r([i.i(s.Event)()],t.prototype,"actionFailure",void 0),r([i.i(s.Event)()],t.prototype,"select",void 0),r([i.i(s.Event)()],t.prototype,"dataBound",void 0),r([i.i(s.Event)()],t.prototype,"created",void 0),r([i.i(s.Event)()],t.prototype,"destroyed",void 0),t=r([s.NotifyPropertyChanges],t)}(s.Component)},function(e,i){e.exports=t},function(e,t){e.exports=i},function(e,t){e.exports=s},function(e,t,i){"use strict";function s(e,t,i,s,l,n,o,d,m){n&&""!==r?r==a&&(h=String.fromCharCode(e)):""!=h?(r=h+String.fromCharCode(e),h=""):r+=String.fromCharCode(e),d?(setTimeout(function(){h=""},700),setTimeout(function(){r=""},3e3)):setTimeout(function(){r=""},1e3);var f;if(r=s?r.toLowerCase():r,c!==l||a!==r||m){var v=t,g=r.length,y=void 0,C=void 0;i=i?i+1:0;var b=i;p=[];do{b===v.length&&(b=-1),f=-1===b?0:b,C=v[f],y=s?C.innerText.toLowerCase():C.innerText,y.substr(0,g)===r&&p.push(v[f]),b++}while(b!==i);if(a=r,c=l,d){for(var E=!1,S=0;S<p.length;S++)if(o&&p[S].textContent.toLowerCase()===o.toLowerCase()){f=S,E=!0;break}return o&&E&&(f+=1),p[f]?p[f]:p[0]}return p[0]}for(var b=0;b<p.length;b++){if(p[b].classList.contains(u)){f=b;break}if(o&&p[b].textContent.toLowerCase()===o.toLowerCase()){f=b;break}}return f+=1,d?p[f]&&p.length-1!=f?p[f]:p[p.length]:p[f]?p[f]:p[0]}function l(e,t,i,s,l,o,r){var a=t;s=void 0===s||null===s||s;var h={item:null,index:null};if(e&&e.length){var p=e.length,u=s?e.toLocaleLowerCase():e;u=n(u);for(var c=0,d=a;c<d.length;c++){var m=function(e,n){var a,c=n[e],d=void 0;if(t&&l){var m=c,f=o.text.split(".");l.filter(function(e){Array.prototype.slice.call(f).forEach(function(t){("object"===r&&!e.isHeader&&-1!==m.textContent.toString().indexOf(e[t])&&m.getAttribute("data-value")===e[o.value].toString()||"string"===r&&-1!==m.textContent.toString().indexOf(e))&&(a="object"===r?e[t]:e)})})}if(d=l&&a?(s?a.toString().toLocaleLowerCase():a).replace(/^\s+|\s+$/g,""):(s?c.textContent.toLocaleLowerCase():c.textContent).replace(/^\s+|\s+$/g,""),"Equal"===i&&d===u||"StartsWith"===i&&d.substr(0,p)===u||"EndsWith"===i&&d.substr(d.length-u.length)===u||"Contains"===i&&new RegExp(u,"g").test(d))return h.item=c,h.index=e,{value:{item:c,index:e}}}(c,d);if("object"==typeof m)return m.value}return h}return h}function n(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function o(e){c===e&&(c="",a="",r="",p=[])}t.b=s,t.a=l,t.d=n,t.c=o;var r="",a="",h="",p=[],u="e-active",c=""},function(e,t,i){"use strict";function s(e,t,i,s){if(""!==t){var n=i?"gim":"gm";t=/^[a-zA-Z0-9- ]*$/.test(t)?t:t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var o="StartsWith"===s?"^("+t+")":"EndsWith"===s?"("+t+")$":"("+t+")";l(e,new RegExp(o,n))}}function l(e,t){for(var i=0;e.childNodes&&i<e.childNodes.length;i++){if(3===e.childNodes[i].nodeType&&""!==e.childNodes[i].textContent.trim()){var s=e.childNodes[i].nodeValue.trim().replace(t,'<span class="e-highlight">$1</span>');e.childNodes[i].nodeValue="",e.innerHTML=e.innerHTML.trim()+s;break}l(e.childNodes[i],t)}}function n(e){for(var t=e.querySelectorAll(".e-highlight"),i=t.length-1;i>=0;i--){var s=t[i].parentNode,l=document.createTextNode(t[i].textContent);s.replaceChild(l,t[i])}}t.a=s,t.b=n},function(e,t,i){"use strict";i.d(t,"a",function(){return c}),i.d(t,"b",function(){return m});var s=i(0),l=(i.n(s),i(4)),n=(i.n(l),i(3)),o=(i.n(n),i(5)),r=i(1),a=i(2),h=(i.n(a),i(30)),p=(i.n(h),this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}()),u=this&&this.__decorate||function(e,t,i,s){var l,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var r=e.length-1;r>=0;r--)(l=e[r])&&(o=(n<3?l(o):n>3?l(t,i,o):l(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},c={root:"e-dropdownlist",hover:r.a.hover,selected:r.a.selected,rtl:r.a.rtl,li:r.a.li,disable:r.a.disabled,base:r.a.root,focus:r.a.focus,content:r.a.content,input:"e-input-group",inputFocus:"e-input-focus",icon:"e-input-group-icon e-ddl-icon",iconAnimation:"e-icon-anim",value:"e-input-value",device:"e-ddl-device",backIcon:"e-input-group-icon e-back-icon e-icons",filterBarClearIcon:"e-input-group-icon e-clear-icon e-icons",filterInput:"e-input-filter",filterParent:"e-filter-parent",mobileFilter:"e-ddl-device-filter",footer:"e-ddl-footer",header:"e-ddl-header",clearIcon:"e-clear-icon",clearIconHide:"e-clear-icon-hide",popupFullScreen:"e-popup-full-page",disableIcon:"e-ddl-disable-icon",hiddenElement:"e-ddl-hidden",virtualList:"e-list-item e-virtual-list"},d={container:null,buttons:[]},m=function(e){function t(t,i){var s=e.call(this,t,i)||this;return s.skeletonCount=32,s.isListSearched=!1,s.preventChange=!1,s.isAngular=!1,s.virtualListHeight=0,s.isVirtualScrolling=!1,s.isPreventScrollAction=!1,s.scrollPreStartIndex=0,s.isScrollActionTriggered=!1,s.previousStartIndex=0,s.isMouseScrollAction=!1,s.isKeyBoardAction=!1,s.isUpwardScrolling=!1,s.startIndex=0,s.currentPageNumber=0,s.pageCount=0,s.isPreventKeyAction=!1,s.generatedDataObject={},s.incrementalQueryString="",s.incrementalEndIndex=0,s.incrementalStartIndex=0,s.incrementalPreQueryString="",s.isTouched=!1,s.virtualListInfo={currentPageNumber:null,direction:null,sentinelInfo:{},offsets:{},startIndex:0,endIndex:0},s.viewPortInfo={currentPageNumber:null,direction:null,sentinelInfo:{},offsets:{},startIndex:0,endIndex:0},s.selectedValueInfo={currentPageNumber:null,direction:null,sentinelInfo:{},offsets:{},startIndex:0,endIndex:0},s.IsScrollerAtEnd=function(){return this.list&&this.list.scrollTop+this.list.clientHeight>=this.list.scrollHeight},s}return p(t,e),t.prototype.preRender=function(){this.valueTempElement=null,this.element.style.opacity="0",this.initializeData(),e.prototype.preRender.call(this),this.activeIndex=this.index,this.queryString=""},t.prototype.initializeData=function(){this.isPopupOpen=!1,this.isDocumentClick=!1,this.isInteracted=!1,this.isFilterFocus=!1,this.beforePopupOpen=!1,this.initial=!0,this.initialRemoteRender=!1,this.isNotSearchList=!1,this.isTyped=!1,this.isSelected=!1,this.preventFocus=!1,this.preventAutoFill=!1,this.isValidKey=!1,this.typedString="",this.isEscapeKey=!1,this.isPreventBlur=!1,this.isTabKey=!1,this.actionCompleteData={isUpdated:!1},this.actionData={isUpdated:!1},this.prevSelectPoints={},this.isSelectCustom=!1,this.isDropDownClick=!1,this.preventAltUp=!1,this.isCustomFilter=!1,this.isSecondClick=!1,this.previousValue=null,this.keyConfigure={tab:"tab",enter:"13",escape:"27",end:"35",home:"36",down:"40",up:"38",pageUp:"33",pageDown:"34",open:"alt+40",close:"shift+tab",hide:"alt+38",space:"32"},this.viewPortInfo={currentPageNumber:null,direction:null,sentinelInfo:{},offsets:{},startIndex:0,endIndex:this.itemCount}},t.prototype.setZIndex=function(){this.popupObj&&this.popupObj.setProperties({zIndex:this.zIndex})},t.prototype.requiredModules=function(){var e=[];return this.enableVirtualization&&e.push({args:[this],member:"VirtualScroll"}),e},t.prototype.renderList=function(t,i){e.prototype.render.call(this,t,i),this.dataSource instanceof a.DataManager||(this.totalItemCount=this.dataSource&&this.dataSource.length?this.dataSource.length:0),this.unWireListEvents(),this.wireListEvents()},t.prototype.floatLabelChange=function(){if("dropdownlist"===this.getModuleName()&&"Auto"===this.floatLabelType){var e=this.inputWrapper.container.querySelector(".e-float-text");""!==this.inputElement.value||this.isInteracted?i.i(s.classList)(e,["e-label-top"],["e-label-bottom"]):i.i(s.classList)(e,["e-label-bottom"],["e-label-top"])}},t.prototype.resetHandler=function(e){e.preventDefault(),this.clearAll(e),this.enableVirtualization&&(this.list.scrollTop=0,this.virtualListInfo=null,this.previousStartIndex=0,this.previousEndIndex=0)},t.prototype.resetFocusElement=function(){if(this.removeHover(),this.removeSelection(),this.removeFocus(),this.list.scrollTop=0,"autocomplete"!==this.getModuleName()&&!i.i(s.isNullOrUndefined)(this.ulElement)){var e=this.ulElement.querySelector("."+c.li);this.enableVirtualization&&(e=this.liCollections[this.skeletonCount]),e&&e.classList.add(c.focus)}},t.prototype.clearAll=function(e,t){this.previousItemData=i.i(s.isNullOrUndefined)(this.itemData)?null:this.itemData,!i.i(s.isNullOrUndefined)(t)&&(i.i(s.isNullOrUndefined)(t)||!i.i(s.isNullOrUndefined)(t.dataSource)&&(t.dataSource instanceof a.DataManager||0!==t.dataSource.length))||(this.isActive=!0,this.resetSelection(t));var l=this.getItemData();this.previousValue!==l.value&&(this.onChangeEvent(e),this.checkAndResetCache(),this.enableVirtualization&&this.updateInitialData())},t.prototype.resetSelection=function(e){this.list&&(i.i(s.isNullOrUndefined)(e)||!i.i(s.isNullOrUndefined)(e.dataSource)&&(e.dataSource instanceof a.DataManager||0!==e.dataSource.length)?(this.allowFiltering&&"autocomplete"!==this.getModuleName()&&!i.i(s.isNullOrUndefined)(this.actionCompleteData.ulElement)&&!i.i(s.isNullOrUndefined)(this.actionCompleteData.list)&&this.actionCompleteData.list.length>0&&this.onActionComplete(this.actionCompleteData.ulElement.cloneNode(!0),this.actionCompleteData.list),this.resetFocusElement()):(this.selectedLI=null,this.actionCompleteData.isUpdated=!1,this.actionCompleteData.ulElement=null,this.actionCompleteData.list=null,this.resetList(e.dataSource))),i.i(s.isNullOrUndefined)(this.hiddenElement)||(this.hiddenElement.innerHTML=""),i.i(s.isNullOrUndefined)(this.inputElement)||(this.inputElement.value=""),this.value=null,this.itemData=null,this.text=null,this.index=null,this.activeIndex=null,this.item=null,this.queryString="",this.valueTempElement&&(i.i(s.detach)(this.valueTempElement),this.inputElement.style.display="block",this.valueTempElement=null),this.setSelection(null,null),this.isSelectCustom=!1,this.updateIconState(),this.cloneElements()},t.prototype.setHTMLAttributes=function(){if(Object.keys(this.htmlAttributes).length)for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var l=t[e];if("class"===l){var o=this.htmlAttributes[""+l].replace(/\s+/g," ").trim();""!==o&&i.i(s.addClass)([this.inputWrapper.container],o.split(" "))}else if("disabled"===l&&"disabled"===this.htmlAttributes[""+l])this.enabled=!1,this.setEnable();else if("readonly"!==l||i.i(s.isNullOrUndefined)(this.htmlAttributes[""+l]))if("style"===l)this.inputWrapper.container.setAttribute("style",this.htmlAttributes[""+l]);else if("aria-label"===l)"autocomplete"!==this.getModuleName()&&"combobox"!==this.getModuleName()||this.readonly?"dropdownlist"===this.getModuleName()&&this.inputWrapper.container.setAttribute("aria-label",this.htmlAttributes[""+l]):this.inputElement.setAttribute("aria-label",this.htmlAttributes[""+l]);else{var r=["title","id","placeholder","role","autocomplete","autocapitalize","spellcheck","minlength","maxlength"],a=["name","required"];"autocomplete"!==this.getModuleName()&&"combobox"!==this.getModuleName()||r.push("tabindex"),a.indexOf(l)>-1||0===l.indexOf("data")?this.hiddenElement.setAttribute(l,this.htmlAttributes[""+l]):r.indexOf(l)>-1?"placeholder"===l?n.Input.setPlaceholder(this.htmlAttributes[""+l],this.inputElement):this.inputElement.setAttribute(l,this.htmlAttributes[""+l]):this.inputWrapper.container.setAttribute(l,this.htmlAttributes[""+l])}else this.readonly=!0,this.dataBind()}"autocomplete"!==this.getModuleName()&&"combobox"!==this.getModuleName()||this.inputWrapper.container.removeAttribute("tabindex")},t.prototype.getAriaAttributes=function(){return{"aria-disabled":"false",role:"combobox","aria-expanded":"false","aria-live":"polite","aria-labelledby":this.hiddenElement.id}},t.prototype.setEnableRtl=function(){n.Input.setEnableRtl(this.enableRtl,[this.inputElement.parentElement]),this.popupObj&&(this.popupObj.enableRtl=this.enableRtl,this.popupObj.dataBind())},t.prototype.setEnable=function(){n.Input.setEnabled(this.enabled,this.inputElement),this.enabled?(i.i(s.removeClass)([this.inputWrapper.container],c.disable),this.inputElement.setAttribute("aria-disabled","false"),this.targetElement().setAttribute("tabindex",this.tabIndex)):(this.hidePopup(),i.i(s.addClass)([this.inputWrapper.container],c.disable),this.inputElement.setAttribute("aria-disabled","true"),this.targetElement().tabIndex=-1)},t.prototype.getPersistData=function(){return this.addOnPersist(["value"])},t.prototype.getLocaleName=function(){return"drop-down-list"},t.prototype.preventTabIndex=function(e){"dropdownlist"===this.getModuleName()&&(e.tabIndex=-1)},t.prototype.targetElement=function(){return i.i(s.isNullOrUndefined)(this.inputWrapper)?null:this.inputWrapper.container},t.prototype.getNgDirective=function(){return"EJS-DROPDOWNLIST"},t.prototype.getElementByText=function(e){return this.getElementByValue(this.getValueByText(e))},t.prototype.getElementByValue=function(e){for(var t,i=this.getItems(),s=0,l=i;s<l.length;s++){var n=l[s];if(this.getFormattedValue(n.getAttribute("data-value"))===e){t=n;break}}return t},t.prototype.initValue=function(){this.viewPortInfo.startIndex=this.virtualItemStartIndex=0,this.viewPortInfo.endIndex=this.virtualItemEndIndex=this.itemCount,this.renderList(),this.dataSource instanceof a.DataManager?this.initialRemoteRender=!0:this.updateValues()},t.prototype.updateValues=function(){if(this.selectedValueInfo=this.viewPortInfo,i.i(s.isNullOrUndefined)(this.value))if(this.text&&i.i(s.isNullOrUndefined)(this.value)){var e=this.getElementByText(this.text);if(i.i(s.isNullOrUndefined)(e))return void this.setProperties({text:null});this.setSelection(e,null)}else this.setSelection(this.liCollections[this.activeIndex],null);else this.setSelection(this.getElementByValue(this.value),null);this.setHiddenValue(),n.Input.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton)},t.prototype.onBlurHandler=function(e){if(this.enabled){var t=e.relatedTarget,l=e.target,n=this.isPreventBlur;if(this.isPreventBlur=!1,n&&!this.isDocumentClick&&this.isPopupOpen&&(!i.i(s.isNullOrUndefined)(l)||!this.isFilterLayout()&&i.i(s.isNullOrUndefined)(t)))return void("dropdownlist"===this.getModuleName()&&this.allowFiltering&&this.isPopupOpen?this.filterInput.focus():this.targetElement().focus());if(this.isDocumentClick||!i.i(s.isNullOrUndefined)(this.popupObj)&&document.body.contains(this.popupObj.element)&&this.popupObj.element.classList.contains(c.mobileFilter))return void(this.beforePopupOpen||(this.isDocumentClick=!1));("dropdownlist"===this.getModuleName()&&!this.isFilterFocus&&t!==this.inputElement&&(document.activeElement!==t||document.activeElement===t&&l.classList.contains(c.inputFocus))||i.i(s.isNullOrUndefined)(t)&&"dropdownlist"===this.getModuleName()&&this.allowFiltering&&l!==this.inputWrapper.container||"dropdownlist"!==this.getModuleName()&&!this.inputWrapper.container.contains(t)||this.isTabKey)&&(this.isDocumentClick=!!this.isPopupOpen,this.focusOutAction(e),this.isTabKey=!1),!this.isRequested||this.isPopupOpen||this.isPreventBlur||(this.isActive=!1,this.beforePopupOpen=!1)}},t.prototype.focusOutAction=function(e){this.isInteracted=!1,this.focusOut(e),this.onFocusOut(e)},t.prototype.onFocusOut=function(e){this.enabled&&(this.isSelected&&(this.isSelectCustom=!1,this.onChangeEvent(e)),this.floatLabelChange(),this.dispatchEvent(this.hiddenElement,"change"),"dropdownlist"===this.getModuleName()&&"INPUT"!==this.element.tagName&&this.dispatchEvent(this.inputElement,"blur"),this.inputWrapper.clearButton&&i.i(s.addClass)([this.inputWrapper.clearButton],c.clearIconHide),this.trigger("blur"))},t.prototype.onFocus=function(e){if(!this.isInteracted){this.isInteracted=!0;var t={isInteracted:!!e,event:e};this.trigger("focus",t)}this.updateIconState()},t.prototype.resetValueHandler=function(e){var t=i.i(s.closest)(this.inputElement,"form");if(t&&e.target===t){var l=this.element.tagName===this.getNgDirective()?null:this.inputElement.getAttribute("value");this.text=l}},t.prototype.wireEvent=function(){s.EventHandler.add(this.inputWrapper.container,"mousedown",this.dropDownClick,this),s.EventHandler.add(this.inputWrapper.container,"focus",this.focusIn,this),s.EventHandler.add(this.inputWrapper.container,"keypress",this.onSearch,this),s.EventHandler.add(window,"resize",this.windowResize,this),this.bindCommonEvent()},t.prototype.bindCommonEvent=function(){s.EventHandler.add(this.targetElement(),"blur",this.onBlurHandler,this);var e=i.i(s.closest)(this.inputElement,"form");e&&s.EventHandler.add(e,"reset",this.resetValueHandler,this),s.Browser.isDevice?this.keyboardModule=new s.KeyboardEvents(this.targetElement(),{keyAction:this.mobileKeyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}):this.keyboardModule=new s.KeyboardEvents(this.targetElement(),{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}),this.bindClearEvent()},t.prototype.windowResize=function(){this.isPopupOpen&&this.popupObj.refreshPosition(this.inputWrapper.container)},t.prototype.bindClearEvent=function(){this.showClearButton&&s.EventHandler.add(this.inputWrapper.clearButton,"mousedown",this.resetHandler,this)},t.prototype.unBindCommonEvent=function(){!i.i(s.isNullOrUndefined)(this.inputWrapper)&&this.targetElement()&&s.EventHandler.remove(this.targetElement(),"blur",this.onBlurHandler);var e=this.inputElement&&i.i(s.closest)(this.inputElement,"form");e&&s.EventHandler.remove(e,"reset",this.resetValueHandler),s.Browser.isDevice||this.keyboardModule.destroy(),this.showClearButton&&s.EventHandler.remove(this.inputWrapper.clearButton,"mousedown",this.resetHandler)},t.prototype.updateIconState=function(){this.showClearButton&&(""===this.inputElement.value||this.readonly?i.i(s.addClass)([this.inputWrapper.clearButton],c.clearIconHide):i.i(s.removeClass)([this.inputWrapper.clearButton],c.clearIconHide))},t.prototype.wireListEvents=function(){i.i(s.isNullOrUndefined)(this.list)||(s.EventHandler.add(this.list,"click",this.onMouseClick,this),s.EventHandler.add(this.list,"mouseover",this.onMouseOver,this),s.EventHandler.add(this.list,"mouseout",this.onMouseLeave,this))},t.prototype.onSearch=function(e){32!==e.charCode&&13!==e.charCode&&(void 0===this.list&&this.renderList(),this.searchKeyEvent=e,this.onServerIncrementalSearch(e))},t.prototype.onServerIncrementalSearch=function(e){this.isRequested||i.i(s.isNullOrUndefined)(this.list)||i.i(s.isNullOrUndefined)(this.list.querySelector("li"))||!this.enabled||this.readonly||this.incrementalSearch(e)},t.prototype.onMouseClick=function(e){var t=e.target;this.keyboardEvent=null;var l=i.i(s.closest)(t,"."+r.a.li);if(this.isValidLI(l))if(this.setSelection(l,e),s.Browser.isDevice&&this.isFilterLayout())history.back();else{this.closePopup(100,e)}},t.prototype.onMouseOver=function(e){var t=i.i(s.closest)(e.target,"."+r.a.li);this.setHover(t)},t.prototype.setHover=function(e){this.enabled&&this.isValidLI(e)&&!e.classList.contains(r.a.hover)&&(this.removeHover(),i.i(s.addClass)([e],r.a.hover))},t.prototype.onMouseLeave=function(){this.removeHover()},t.prototype.removeHover=function(){if(this.list){var e=this.list.querySelectorAll("."+r.a.hover);e&&e.length&&i.i(s.removeClass)(e,r.a.hover)}},t.prototype.isValidLI=function(e){return e&&e.hasAttribute("role")&&"option"===e.getAttribute("role")},t.prototype.updateIncrementalInfo=function(e,t){this.viewPortInfo.startIndex=e,this.viewPortInfo.endIndex=t,this.updateVirtualItemIndex(),this.isIncrementalRequest=!0,this.resetList(this.dataSource,this.fields,this.query),this.isIncrementalRequest=!1},t.prototype.updateIncrementalView=function(e,t){this.viewPortInfo.startIndex=e,this.viewPortInfo.endIndex=t,this.updateVirtualItemIndex(),this.resetList(this.dataSource,this.fields,this.query),this.UpdateSkeleton(),this.liCollections=this.list.querySelectorAll("."+r.a.li),this.ulElement=this.list.querySelector("ul")},t.prototype.updateIncrementalItemIndex=function(e,t){this.incrementalStartIndex=e,this.incrementalEndIndex=t},t.prototype.incrementalSearch=function(e){if(this.liCollections.length>0)if(this.enableVirtualization){var t=!1,l=!1,n=this.ulElement.getElementsByClassName("e-active")[0],r=n?n.textContent:null;""==this.incrementalQueryString?(this.incrementalQueryString=String.fromCharCode(e.charCode),this.incrementalPreQueryString=this.incrementalQueryString):String.fromCharCode(e.charCode).toLocaleLowerCase()==this.incrementalPreQueryString.toLocaleLowerCase()?l=!0:this.incrementalQueryString=String.fromCharCode(e.charCode),(this.viewPortInfo.endIndex>=this.incrementalEndIndex&&this.incrementalEndIndex<=this.totalItemCount||0==this.incrementalEndIndex)&&(t=!0,this.incrementalStartIndex=this.incrementalEndIndex,0==this.incrementalEndIndex?this.incrementalEndIndex=100>this.totalItemCount?this.totalItemCount:100:this.incrementalEndIndex=this.incrementalEndIndex+100>this.totalItemCount?this.totalItemCount:this.incrementalEndIndex+100,this.updateIncrementalInfo(this.incrementalStartIndex,this.incrementalEndIndex),t=!0),(0!==this.viewPortInfo.startIndex||t)&&this.updateIncrementalView(0,this.itemCount);for(var a=i.i(o.b)(e.charCode,this.incrementalLiCollections,this.activeIndex,!0,this.element.id,l,r,!0);i.i(s.isNullOrUndefined)(a)&&this.incrementalEndIndex<this.totalItemCount&&(this.updateIncrementalItemIndex(this.incrementalEndIndex,this.incrementalEndIndex+100>this.totalItemCount?this.totalItemCount:this.incrementalEndIndex+100),this.updateIncrementalInfo(this.incrementalStartIndex,this.incrementalEndIndex),t=!0,(0!==this.viewPortInfo.startIndex||t)&&this.updateIncrementalView(0,this.itemCount),a=i.i(o.b)(e.charCode,this.incrementalLiCollections,0,!0,this.element.id,l,r,!0,!0),i.i(s.isNullOrUndefined)(a));)if(i.i(s.isNullOrUndefined)(a)&&this.incrementalEndIndex>=this.totalItemCount){this.updateIncrementalItemIndex(0,100>this.totalItemCount?this.totalItemCount:100);break}i.i(s.isNullOrUndefined)(a)&&this.incrementalEndIndex>=this.totalItemCount&&(this.updateIncrementalItemIndex(0,100>this.totalItemCount?this.totalItemCount:100),this.updateIncrementalInfo(this.incrementalStartIndex,this.incrementalEndIndex),t=!0,(0!==this.viewPortInfo.startIndex||t)&&this.updateIncrementalView(0,this.itemCount),a=i.i(o.b)(e.charCode,this.incrementalLiCollections,0,!0,this.element.id,l,r,!0,!0));var h=a&&this.getIndexByValue(a.getAttribute("data-value"));if(h)h-=this.skeletonCount;else for(var p=0;p<this.incrementalLiCollections.length;p++)if(!i.i(s.isNullOrUndefined)(a)&&!i.i(s.isNullOrUndefined)(a.getAttribute("data-value"))&&this.incrementalLiCollections[p].getAttribute("data-value")===a.getAttribute("data-value").toString()){h=p,h=this.incrementalStartIndex+h;break}if(h&&!(this.viewPortInfo.startIndex>=h&&h>=this.viewPortInfo.endIndex)){var u=h-(this.itemCount/2-2)>0?h-(this.itemCount/2-2):0,c=this.viewPortInfo.startIndex+this.itemCount>this.totalItemCount?this.totalItemCount:this.viewPortInfo.startIndex+this.itemCount;this.updateIncrementalView(u,c)}if(i.i(s.isNullOrUndefined)(a))this.updateIncrementalView(0,this.itemCount),this.list.getElementsByClassName("e-virtual-ddl-content")[0].style=this.getTransformValues(),this.list.scrollTop=0;else{var d=this.getIndexByValue(a.getAttribute("data-value"))-this.skeletonCount;if(d>this.itemCount/2){var u=this.viewPortInfo.startIndex+(this.itemCount/2-2)<this.totalItemCount?this.viewPortInfo.startIndex+(this.itemCount/2-2):this.totalItemCount,c=this.viewPortInfo.startIndex+this.itemCount>this.totalItemCount?this.totalItemCount:this.viewPortInfo.startIndex+this.itemCount;this.updateIncrementalView(u,c)}if(a=this.getElementByValue(a.getAttribute("data-value")),this.setSelection(a,e),this.setScrollPosition(),this.list.getElementsByClassName("e-virtual-ddl-content")[0].style=this.getTransformValues(),this.enableVirtualization&&!this.fields.groupBy){var m=this.virtualListInfo&&this.virtualListInfo.startIndex?this.selectedLI.offsetTop+this.virtualListInfo.startIndex*this.selectedLI.offsetHeight:this.selectedLI.offsetTop;this.list.scrollTop=m-this.list.querySelectorAll(".e-virtual-list").length*this.selectedLI.offsetHeight}this.incrementalPreQueryString=this.incrementalQueryString}}else{var a=i.i(o.b)(e.charCode,this.liCollections,this.activeIndex,!0,this.element.id);i.i(s.isNullOrUndefined)(a)||(this.setSelection(a,e),this.setScrollPosition())}},t.prototype.hideSpinner=function(){i.i(s.isNullOrUndefined)(this.spinnerElement)||(i.i(l.hideSpinner)(this.spinnerElement),i.i(s.removeClass)([this.spinnerElement],c.disableIcon),this.spinnerElement.innerHTML="",this.spinnerElement=null)},t.prototype.showSpinner=function(){i.i(s.isNullOrUndefined)(this.spinnerElement)&&(this.spinnerElement=s.Browser.isDevice&&!i.i(s.isNullOrUndefined)(this.filterInputObj)&&this.filterInputObj.buttons[1]||!i.i(s.isNullOrUndefined)(this.filterInputObj)&&this.filterInputObj.buttons[0]||this.inputWrapper.buttons[0],i.i(s.addClass)([this.spinnerElement],c.disableIcon),i.i(l.createSpinner)({target:this.spinnerElement,width:s.Browser.isDevice?"16px":"14px"},this.createElement),i.i(l.showSpinner)(this.spinnerElement))},t.prototype.keyActionHandler=function(e){if(this.enabled){this.keyboardEvent=e,this.isPreventKeyAction&&this.enableVirtualization&&e.preventDefault();var t="pageUp"===e.action||"pageDown"===e.action,l="dropdownlist"!==this.getModuleName()&&("home"===e.action||"end"===e.action);this.isEscapeKey="escape"===e.action,this.isTabKey=!this.isPopupOpen&&"tab"===e.action;var n="down"===e.action||"up"===e.action||"pageUp"===e.action||"pageDown"===e.action||"home"===e.action||"end"===e.action;if((!(this.isEditTextBox()||t||l)||this.isPopupOpen)&&!this.readonly){var o="tab"===e.action||"close"===e.action;if(!i.i(s.isNullOrUndefined)(this.list)||this.isRequested||o||"escape"===e.action||(this.searchKeyEvent=e,this.renderList(e),this.UpdateSkeleton(),this.liCollections=this.list.querySelectorAll("."+r.a.li),this.ulElement=this.list.querySelector("ul")),i.i(s.isNullOrUndefined)(this.list)||!i.i(s.isNullOrUndefined)(this.liCollections)&&n&&0===this.liCollections.length||this.isRequested)return;switch((o&&"autocomplete"!==this.getModuleName()&&this.isPopupOpen||"escape"===e.action)&&e.preventDefault(),this.isSelected="escape"!==e.action&&this.isSelected,this.isTyped=!n&&"escape"!==e.action&&this.isTyped,e.action){case"down":case"up":this.updateUpDownAction(e);break;case"pageUp":this.pageUpSelection(this.activeIndex-this.getPageCount(),e),e.preventDefault();break;case"pageDown":this.pageDownSelection(this.activeIndex+this.getPageCount(),e),e.preventDefault();break;case"home":case"end":this.isMouseScrollAction=!0,this.updateHomeEndAction(e);break;case"space":"dropdownlist"===this.getModuleName()&&(this.beforePopupOpen||(this.showPopup(),e.preventDefault()));break;case"open":this.showPopup(e);break;case"hide":this.preventAltUp=this.isPopupOpen,this.hidePopup(e),this.focusDropDown(e);break;case"enter":this.selectCurrentItem(e);break;case"tab":this.selectCurrentValueOnTab(e);break;case"escape":case"close":this.isPopupOpen&&(this.hidePopup(e),this.focusDropDown(e))}}}},t.prototype.updateUpDownAction=function(e,t){if(this.allowFiltering&&!this.enableVirtualization&&"autocomplete"!==this.getModuleName()){var l=this.getItemData().value;i.i(s.isNullOrUndefined)(l)&&(l="null");var n=this.getIndexByValue(l);i.i(s.isNullOrUndefined)(n)||(this.activeIndex=n)}var o=this.list.querySelector("."+c.focus);if(this.isSelectFocusItem(o)&&!t){if(this.setSelection(o,e),this.enableVirtualization&&!this.fields.groupBy&&"combobox"!==this.getModuleName()){var a=this.virtualListInfo&&this.virtualListInfo.startIndex?this.selectedLI.offsetTop+this.virtualListInfo.startIndex*this.selectedLI.offsetHeight:this.selectedLI.offsetTop;this.list.scrollTop=a-this.list.querySelectorAll(".e-virtual-list").length*this.selectedLI.offsetHeight}}else if(!i.i(s.isNullOrUndefined)(this.liCollections)){var h=this.activeIndex,p="down"===e.action?this.activeIndex+1:this.activeIndex-1;p=t?h:p;var u=0;"autocomplete"===this.getModuleName()&&(u="down"===e.action&&i.i(s.isNullOrUndefined)(this.activeIndex)?0:this.liCollections.length-1,p=p<0?this.liCollections.length-1:p===this.liCollections.length?0:p);var d=void 0;if("autocomplete"!==this.getModuleName()||"autocomplete"===this.getModuleName()&&this.isPopupOpen)if(this.enableVirtualization)if(t)if("autocomplete"===this.getModuleName()){var m=this.getFormattedValue(this.selectedLI.getAttribute("data-value"));d=this.getElementByValue(m)}else d=this.getElementByValue(this.getItemData().value);else d=i.i(s.isNullOrUndefined)(this.activeIndex)?this.liCollections[this.skeletonCount]:this.liCollections[p],d=i.i(s.isNullOrUndefined)(d)||d.classList.contains("e-virtual-list")?null:d;else d=i.i(s.isNullOrUndefined)(this.activeIndex)?this.liCollections[u]:this.liCollections[p];if(i.i(s.isNullOrUndefined)(d)){if(this.enableVirtualization&&!this.isPopupOpen&&"autocomplete"!==this.getModuleName()&&(this.viewPortInfo.endIndex!==this.totalItemCount&&"down"===e.action||0!==this.viewPortInfo.startIndex&&"up"===e.action)){if("down"===e.action){this.viewPortInfo.startIndex=this.viewPortInfo.startIndex+this.itemCount<this.totalItemCount-this.itemCount?this.viewPortInfo.startIndex+this.itemCount:this.totalItemCount-this.itemCount,this.viewPortInfo.endIndex=this.viewPortInfo.startIndex+this.itemCount,this.updateVirtualItemIndex(),this.isCustomFilter="combobox"===this.getModuleName()||this.isCustomFilter,this.resetList(this.dataSource,this.fields,this.query),this.isCustomFilter="combobox"!==this.getModuleName()&&this.isCustomFilter;var f="null"!==this.liCollections[0].getAttribute("data-value")?this.getFormattedValue(this.liCollections[0].getAttribute("data-value")):null,v=this.getDataByValue(f);v&&(this.itemData=v)}else if("up"===e.action){this.viewPortInfo.startIndex=this.viewPortInfo.startIndex-this.itemCount>0?this.viewPortInfo.startIndex-this.itemCount:0,this.viewPortInfo.endIndex=this.viewPortInfo.startIndex+this.itemCount,this.updateVirtualItemIndex(),this.isCustomFilter="combobox"===this.getModuleName()||this.isCustomFilter,this.resetList(this.dataSource,this.fields,this.query),this.isCustomFilter="combobox"!==this.getModuleName()&&this.isCustomFilter;var g="null"!==this.liCollections[this.liCollections.length-1].getAttribute("data-value")?this.getFormattedValue(this.liCollections[this.liCollections.length-1].getAttribute("data-value")):null,v=this.getDataByValue(g);v&&(this.itemData=v)}this.UpdateSkeleton(),this.liCollections=this.list.querySelectorAll("."+r.a.li),this.ulElement=this.list.querySelector("ul"),this.handleVirtualKeyboardActions(e,this.pageCount)}}else this.setSelection(d,e)}if(this.allowFiltering&&!this.enableVirtualization&&"autocomplete"!==this.getModuleName()){var y=this.getItemData().value,n=this.getIndexByValueFilter(y);i.i(s.isNullOrUndefined)(n)||(this.activeIndex=n)}this.allowFiltering&&"dropdownlist"===this.getModuleName()&&(i.i(s.isNullOrUndefined)(this.ulElement)||i.i(s.isNullOrUndefined)(this.ulElement.getElementsByClassName("e-item-focus")[0])?i.i(s.isNullOrUndefined)(this.ulElement)||i.i(s.isNullOrUndefined)(this.ulElement.getElementsByClassName("e-active")[0])||i.i(s.attributes)(this.filterInput,{"aria-activedescendant":this.ulElement.getElementsByClassName("e-active")[0].id}):i.i(s.attributes)(this.filterInput,{"aria-activedescendant":this.ulElement.getElementsByClassName("e-item-focus")[0].id})),e.preventDefault()},t.prototype.updateVirtualItemIndex=function(){this.virtualItemStartIndex=this.viewPortInfo.startIndex,this.virtualItemEndIndex=this.viewPortInfo.endIndex,this.virtualListInfo=this.viewPortInfo},t.prototype.updateHomeEndAction=function(e,t){if("dropdownlist"===this.getModuleName()){var i=0;if("home"===e.action?(i=0,this.enableVirtualization&&this.isPopupOpen?i=this.skeletonCount:this.enableVirtualization&&!this.isPopupOpen&&0!==this.viewPortInfo.startIndex&&(this.viewPortInfo.startIndex=0,this.viewPortInfo.endIndex=this.itemCount,this.updateVirtualItemIndex(),this.resetList(this.dataSource,this.fields,this.query))):(this.enableVirtualization&&!this.isPopupOpen&&this.viewPortInfo.endIndex!==this.totalItemCount&&(this.viewPortInfo.startIndex=this.totalItemCount-this.itemCount,this.viewPortInfo.endIndex=this.totalItemCount,this.updateVirtualItemIndex(),this.resetList(this.dataSource,this.fields,this.query)),i=this.getItems().length-1),e.preventDefault(),this.activeIndex===i)return void(t&&this.setSelection(this.liCollections[i],e));this.setSelection(this.liCollections[i],e)}},t.prototype.selectCurrentValueOnTab=function(e){"autocomplete"===this.getModuleName()?this.selectCurrentItem(e):this.isPopupOpen&&(this.hidePopup(e),this.focusDropDown(e))},t.prototype.mobileKeyActionHandler=function(e){if(this.enabled&&(!this.isEditTextBox()||this.isPopupOpen)&&!this.readonly){if(void 0!==this.list||this.isRequested||(this.searchKeyEvent=e,this.renderList()),i.i(s.isNullOrUndefined)(this.list)||!i.i(s.isNullOrUndefined)(this.liCollections)&&0===this.liCollections.length||this.isRequested)return;"enter"===e.action&&this.selectCurrentItem(e)}},t.prototype.handleVirtualKeyboardActions=function(e,t){switch(e.action){case"down":case"up":null==this.itemData&&"autocomplete"!==this.getModuleName()||this.updateUpDownAction(e,!0);break;case"pageUp":var i=2*t-4;this.activeIndex=Math.round(i),this.pageUpSelection(this.activeIndex-this.getPageCount(),e,!0),e.preventDefault();break;case"pageDown":this.activeIndex=1,this.pageDownSelection(this.activeIndex+this.getPageCount(),e,!0),e.preventDefault();break;case"home":case"end":this.isMouseScrollAction=!0,this.updateHomeEndAction(e,!0)}this.keyboardEvent=null},t.prototype.selectCurrentItem=function(e){if(this.isPopupOpen){var t=this.list.querySelector("."+c.focus);t&&(this.setSelection(t,e),this.isTyped=!1),this.isSelected&&(this.isSelectCustom=!1,this.onChangeEvent(e)),this.hidePopup(e),this.focusDropDown(e)}else this.showPopup()},t.prototype.isSelectFocusItem=function(e){return!i.i(s.isNullOrUndefined)(e)},t.prototype.pageUpSelection=function(e,t,l){var n=e>=0?this.liCollections[e+1]:this.liCollections[0];(this.enableVirtualization&&null==this.activeIndex||l)&&(n=e>=0?this.liCollections[e+this.skeletonCount+1]:this.liCollections[0]),!i.i(s.isNullOrUndefined)(n)&&n.classList.contains("e-virtual-list")&&(n=this.liCollections[this.skeletonCount]),this.PageUpDownSelection(n,t),this.allowFiltering&&"dropdownlist"===this.getModuleName()&&(i.i(s.isNullOrUndefined)(this.ulElement)||i.i(s.isNullOrUndefined)(this.ulElement.getElementsByClassName("e-item-focus")[0])?i.i(s.isNullOrUndefined)(this.ulElement)||i.i(s.isNullOrUndefined)(this.ulElement.getElementsByClassName("e-active")[0])||i.i(s.attributes)(this.filterInput,{"aria-activedescendant":this.ulElement.getElementsByClassName("e-active")[0].id}):i.i(s.attributes)(this.filterInput,{"aria-activedescendant":this.ulElement.getElementsByClassName("e-item-focus")[0].id}))},t.prototype.PageUpDownSelection=function(e,t){this.enableVirtualization?i.i(s.isNullOrUndefined)(e)||("autocomplete"===this.getModuleName()||e.classList.contains("e-active"))&&("autocomplete"!==this.getModuleName()||e.classList.contains("e-item-focus"))||this.setSelection(e,t):this.setSelection(e,t)},t.prototype.pageDownSelection=function(e,t,l){var n=this.getItems(),o=e<=n.length?this.liCollections[e-1]:this.liCollections[n.length-1];(this.enableVirtualization&&null==this.activeIndex||l)&&(o=e<=n.length?this.liCollections[e+this.skeletonCount-1]:this.liCollections[n.length-1]),this.PageUpDownSelection(o,t),this.allowFiltering&&"dropdownlist"===this.getModuleName()&&(i.i(s.isNullOrUndefined)(this.ulElement)||i.i(s.isNullOrUndefined)(this.ulElement.getElementsByClassName("e-item-focus")[0])?i.i(s.isNullOrUndefined)(this.ulElement)||i.i(s.isNullOrUndefined)(this.ulElement.getElementsByClassName("e-active")[0])||i.i(s.attributes)(this.filterInput,{"aria-activedescendant":this.ulElement.getElementsByClassName("e-active")[0].id}):i.i(s.attributes)(this.filterInput,{"aria-activedescendant":this.ulElement.getElementsByClassName("e-item-focus")[0].id}))},t.prototype.unWireEvent=function(){i.i(s.isNullOrUndefined)(this.inputWrapper)||(s.EventHandler.remove(this.inputWrapper.container,"mousedown",this.dropDownClick),s.EventHandler.remove(this.inputWrapper.container,"keypress",this.onSearch),s.EventHandler.remove(this.inputWrapper.container,"focus",this.focusIn),s.EventHandler.remove(window,"resize",this.windowResize)),this.unBindCommonEvent()},t.prototype.unWireListEvents=function(){this.list&&(s.EventHandler.remove(this.list,"click",this.onMouseClick),s.EventHandler.remove(this.list,"mouseover",this.onMouseOver),s.EventHandler.remove(this.list,"mouseout",this.onMouseLeave))},t.prototype.checkSelector=function(e){return'[id="'+e.replace(/(:|\.|\[|\]|,|=|@|\\|\/|#)/g,"\\$1")+'"]'},t.prototype.onDocumentClick=function(e){var t=e.target;if(!i.i(s.isNullOrUndefined)(this.popupObj)&&i.i(s.closest)(t,this.checkSelector(this.popupObj.element.id))||i.i(s.isNullOrUndefined)(this.inputWrapper)||this.inputWrapper.container.contains(e.target))t===this.inputElement||this.allowFiltering&&t===this.filterInput||"combobox"===this.getModuleName()&&!this.allowFiltering&&s.Browser.isDevice&&t===this.inputWrapper.buttons[0]||(this.isPreventBlur=(s.Browser.isIE||"edge"===s.Browser.info.name)&&(document.activeElement===this.targetElement()||document.activeElement===this.filterInput),e.preventDefault());else if(this.inputWrapper.container.classList.contains(c.inputFocus)||this.isPopupOpen){this.isDocumentClick=!0;var l=this.isRequested;"combobox"===this.getModuleName()&&this.isTyped&&(this.isInteracted=!1),this.hidePopup(e),this.isInteracted=!1,l||(this.onFocusOut(e),this.inputWrapper.container.classList.remove(c.inputFocus))}},t.prototype.activeStateChange=function(){this.isDocumentClick&&(this.hidePopup(),this.onFocusOut(),this.inputWrapper.container.classList.remove(c.inputFocus))},t.prototype.focusDropDown=function(e){!this.initial&&this.isFilterLayout()&&this.focusIn(e)},t.prototype.dropDownClick=function(e){if(3!==e.which&&2!==e.button&&(this.keyboardEvent=null,!this.targetElement().classList.contains(c.disable)&&this.inputWrapper.clearButton!==e.target)){var t=e.target;if(t===this.inputElement||this.allowFiltering&&t===this.filterInput||"combobox"===this.getModuleName()||e.preventDefault(),this.readonly)this.focusIn(e);else{this.isPopupOpen?(this.hidePopup(e),this.isFilterLayout()&&this.focusDropDown(e)):(this.focusIn(e),this.floatLabelChange(),this.queryString=""===this.inputElement.value.trim()?null:this.inputElement.value,this.isDropDownClick=!0,this.showPopup(e));var i=this,s=this.element.tagName===this.getNgDirective()&&this.itemTemplate?500:100;this.isSecondClick||setTimeout(function(){i.cloneElements(),i.isSecondClick=!0},s)}}},t.prototype.cloneElements=function(){if(this.list){var e=this.list.querySelector("ul");e&&(e=e.cloneNode?e.cloneNode(!0):e,this.actionCompleteData.ulElement=e)}},t.prototype.updateSelectedItem=function(e,t,l,n){var o=this;this.removeSelection(),e.classList.add(r.a.selected),this.removeHover();var a="null"!==e.getAttribute("data-value")?this.getFormattedValue(e.getAttribute("data-value")):null,h=this.getDataByValue(a);if(this.initial||l||i.i(s.isNullOrUndefined)(t))this.selectEventCallback(e,t,l,h,a),n&&this.setSelectOptions(e,t);else{var p=this.detachChanges(h);this.isSelected=!0;var u={e:t,item:e,itemData:p,isInteracted:!!t,cancel:!1};this.trigger("select",u,function(i){i.cancel?e.classList.remove(r.a.selected):(o.selectEventCallback(e,t,l,h,a),n&&o.setSelectOptions(e,t))})}},t.prototype.selectEventCallback=function(e,t,l,n,o){this.previousItemData=i.i(s.isNullOrUndefined)(this.itemData)?null:this.itemData,this.itemData!=n&&(this.previousValue=i.i(s.isNullOrUndefined)(this.itemData)?null:"object"==typeof this.itemData?this.checkFieldValue(this.itemData,this.fields.value.split(".")):this.itemData),this.item=e,this.itemData=n;var a=this.list.querySelector("."+r.a.focus);if(a&&i.i(s.removeClass)([a],r.a.focus),e.setAttribute("aria-selected","true"),i.i(s.isNullOrUndefined)(o)&&(o="null"),this.allowFiltering&&!this.enableVirtualization&&"autocomplete"!==this.getModuleName()){var h=this.getIndexByValueFilter(o);i.i(s.isNullOrUndefined)(h)?this.activeIndex=this.getIndexByValue(o):this.activeIndex=h}else this.activeIndex=this.getIndexByValue(o)},t.prototype.activeItem=function(e){this.isValidLI(e)&&!e.classList.contains(r.a.selected)&&(this.removeSelection(),e.classList.add(r.a.selected),this.removeHover(),e.setAttribute("aria-selected","true"))},t.prototype.setValue=function(e){var t=this.getItemData();null===t.value?n.Input.setValue(null,this.inputElement,this.floatLabelType,this.showClearButton):n.Input.setValue(t.text,this.inputElement,this.floatLabelType,this.showClearButton),this.valueTemplate&&null!==this.itemData?this.setValueTemplate():i.i(s.isNullOrUndefined)(this.valueTempElement)||this.inputElement.previousSibling!==this.valueTempElement||(i.i(s.detach)(this.valueTempElement),this.inputElement.style.display="block"),i.i(s.isNullOrUndefined)(t.value)||this.enableVirtualization||!this.allowFiltering||(this.activeIndex=this.getIndexByValueFilter(t.value));var l=c.clearIcon,o=this.isFiltering()&&this.filterInput&&"combobox"===this.getModuleName(),r=o&&this.filterInput.parentElement.querySelector("."+l);return this.isFiltering()&&r&&r.style.removeProperty("visibility"),this.previousValue===t.value?(this.isSelected=!1,!0):(this.isSelected=!this.initial,this.isSelectCustom=!1,"dropdownlist"===this.getModuleName()&&this.updateIconState(),!1)},t.prototype.setSelection=function(e,t){if(this.isValidLI(e)&&(!e.classList.contains(r.a.selected)||this.isPopupOpen&&this.isSelected&&e.classList.contains(r.a.selected)))this.updateSelectedItem(e,t,!1,!0);else if(this.setSelectOptions(e,t),this.enableVirtualization){var i=this.fields.value?this.fields.value:"";if(this.dataSource instanceof a.DataManager&&this.virtualGroupDataSource){var s=new a.DataManager(this.virtualGroupDataSource).executeLocal((new a.Query).where(new a.Predicate(i,"equal",this.value)));if(s&&s.length>0){this.itemData=s[0];var l=this.getItemData();(this.value===l.value&&this.text!==l.text||this.value!==l.value&&this.text===l.text)&&this.setProperties({text:l.text,value:l.value})}}else{var s=new a.DataManager(this.dataSource).executeLocal((new a.Query).where(new a.Predicate(i,"equal",this.value)));if(s&&s.length>0){this.itemData=s[0];var l=this.getItemData();(this.value===l.value&&this.text!==l.text||this.value!==l.value&&this.text===l.text)&&this.setProperties({text:l.text,value:l.value})}}}},t.prototype.setSelectOptions=function(e,t){this.list&&this.removeHover(),this.previousSelectedLI=i.i(s.isNullOrUndefined)(this.selectedLI)?null:this.selectedLI,this.selectedLI=e,this.setValue(t)||((!this.isPopupOpen&&!i.i(s.isNullOrUndefined)(e)||this.isPopupOpen&&!i.i(s.isNullOrUndefined)(t)&&("keydown"!==t.type||"keydown"===t.type&&"enter"===t.action))&&(this.isSelectCustom=!1,this.onChangeEvent(t)),!this.isPopupOpen||i.i(s.isNullOrUndefined)(this.selectedLI)||null===this.itemData||t&&"click"===t.type||this.setScrollPosition(t),"mozilla"!==s.Browser.info.name&&this.targetElement()&&(i.i(s.attributes)(this.targetElement(),{"aria-describedby":""!==this.inputElement.id?this.inputElement.id:this.element.id}),this.targetElement().removeAttribute("aria-live")),!this.isPopupOpen||i.i(s.isNullOrUndefined)(this.ulElement)||i.i(s.isNullOrUndefined)(this.ulElement.getElementsByClassName("e-item-focus")[0])?!this.isPopupOpen||i.i(s.isNullOrUndefined)(this.ulElement)||i.i(s.isNullOrUndefined)(this.ulElement.getElementsByClassName("e-active")[0])||i.i(s.attributes)(this.targetElement(),{"aria-activedescendant":this.ulElement.getElementsByClassName("e-active")[0].id}):i.i(s.attributes)(this.targetElement(),{"aria-activedescendant":this.ulElement.getElementsByClassName("e-item-focus")[0].id}))},t.prototype.dropdownCompiler=function(e){var t=!1;if("function"!=typeof e&&e)try{t=!!document.querySelectorAll(e).length}catch(e){t=!1}return t},t.prototype.setValueTemplate=function(){var e;this.isReact&&(this.clearTemplate(["valueTemplate"]),this.valueTempElement&&(i.i(s.detach)(this.valueTempElement),this.inputElement.style.display="block",this.valueTempElement=null)),this.valueTempElement||(this.valueTempElement=this.createElement("span",{className:c.value}),this.inputElement.parentElement.insertBefore(this.valueTempElement,this.inputElement),this.inputElement.style.display="none"),this.isReact||(this.valueTempElement.innerHTML="");var t=this.dropdownCompiler(this.valueTemplate);e="function"!=typeof this.valueTemplate&&t?i.i(s.compile)(document.querySelector(this.valueTemplate).innerHTML.trim()):i.i(s.compile)(this.valueTemplate);var l=e(this.itemData,this,"valueTemplate",this.valueTemplateId,this.isStringTemplate,null,this.valueTempElement);l&&l.length>0&&i.i(s.append)(l,this.valueTempElement),this.renderReactTemplates()},t.prototype.removeSelection=function(){if(this.list){var e=this.list.querySelectorAll("."+r.a.selected);e.length&&(i.i(s.removeClass)(e,r.a.selected),e[0].removeAttribute("aria-selected"))}},t.prototype.getItemData=function(){var e=this.fields,t=null;t=this.itemData;var l,n;return i.i(s.isNullOrUndefined)(t)||(l=i.i(s.getValue)(e.value,t),n=i.i(s.getValue)(e.text,t)),{value:i.i(s.isNullOrUndefined)(t)||i.i(s.isUndefined)(l)?t:l,text:i.i(s.isNullOrUndefined)(t)||i.i(s.isUndefined)(l)?t:n}},t.prototype.onChangeEvent=function(e){var t=this.getItemData(),i=this.isSelectCustom?null:this.activeIndex;this.setProperties({index:i,text:t.text,value:t.value},!0),this.detachChangeEvent(e)},t.prototype.detachChanges=function(e){return"string"==typeof e||"boolean"==typeof e||"number"==typeof e?Object.defineProperties({},{value:{value:e,enumerable:!0},text:{value:e,enumerable:!0}}):e},t.prototype.detachChangeEvent=function(e){if(this.isSelected=!1,this.previousValue=this.value,this.activeIndex=this.index,this.typedString=i.i(s.isNullOrUndefined)(this.text)?"":this.text,!this.initial){var t=this.detachChanges(this.itemData),l=void 0;l="string"==typeof this.previousItemData||"boolean"==typeof this.previousItemData||"number"==typeof this.previousItemData?Object.defineProperties({},{value:{value:this.previousItemData,enumerable:!0},text:{value:this.previousItemData,enumerable:!0}}):this.previousItemData,this.setHiddenValue();var n={e:e,item:this.item,itemData:t,previousItem:this.previousSelectedLI,previousItemData:l,isInteracted:!!e,value:this.value,element:this.element,event:e};this.isAngular&&this.preventChange?this.preventChange=!1:this.trigger("change",n)}!i.i(s.isNullOrUndefined)(this.value)&&""!==this.value||"Always"===this.floatLabelType||i.i(s.removeClass)([this.inputWrapper.container],"e-valid-input")},t.prototype.setHiddenValue=function(){if(i.i(s.isNullOrUndefined)(this.value))this.hiddenElement.innerHTML="";else if(this.hiddenElement.querySelector("option")){var e=this.hiddenElement.querySelector("option");e.textContent=this.text,e.setAttribute("value",this.value.toString())}else if(!i.i(s.isNullOrUndefined)(this.hiddenElement)){this.hiddenElement.innerHTML="<option selected>"+this.text+"</option>";var e=this.hiddenElement.querySelector("option");e.setAttribute("value",this.value.toString())}},t.prototype.onFilterUp=function(e){if(e.ctrlKey&&86===e.keyCode||!this.isValidKey&&40!==e.keyCode&&38!==e.keyCode)this.isValidKey=!1;else switch(this.isValidKey=!1,e.keyCode){case 38:case 40:"autocomplete"!==this.getModuleName()||this.isPopupOpen||this.preventAltUp||this.isRequested?this.preventAutoFill=!1:(this.preventAutoFill=!0,this.searchLists(e)),this.preventAltUp=!1,"autocomplete"!==this.getModuleName()||i.i(s.isNullOrUndefined)(this.ulElement)||i.i(s.isNullOrUndefined)(this.ulElement.getElementsByClassName("e-item-focus")[0])||i.i(s.attributes)(this.targetElement(),{"aria-activedescendant":this.ulElement.getElementsByClassName("e-item-focus")[0].id}),e.preventDefault();break;case 46:case 8:this.typedString=this.filterInput.value,!this.isPopupOpen&&""!==this.typedString||this.isPopupOpen&&this.queryString.length>0?(this.preventAutoFill=!0,this.searchLists(e)):""===this.typedString&&""===this.queryString&&"autocomplete"!==this.getModuleName()?(this.preventAutoFill=!0,this.searchLists(e)):""===this.typedString&&(this.list&&this.resetFocusElement(),this.activeIndex=null,"dropdownlist"!==this.getModuleName()&&(this.preventAutoFill=!0,this.searchLists(e),"autocomplete"===this.getModuleName()&&this.hidePopup())),e.preventDefault();break;default:this.typedString=this.filterInput.value,this.preventAutoFill=!1,this.searchLists(e),(this.enableVirtualization&&"autocomplete"!==this.getModuleName()||"autocomplete"===this.getModuleName()&&!(this.dataSource instanceof a.DataManager)||"autocomplete"===this.getModuleName()&&this.dataSource instanceof a.DataManager&&0!=this.totalItemCount)&&this.getFilteringSkeletonCount()}},t.prototype.getFilteringSkeletonCount=function(){var e=this.dataCount-this.viewPortInfo.endIndex,t=this.skeletonCount;this.getSkeletonCount(!0),this.skeletonCount=this.dataCount>2*this.itemCount?this.skeletonCount:e>this.skeletonCount?this.skeletonCount:e>0?e:0;var i=!0;if("autocomplete"===this.getModuleName()&&0!=this.totalItemCount&&this.totalItemCount<2*this.itemCount&&(this.skeletonCount=0,i=!1),!this.list.classList.contains(r.a.noData)){this.skeletonCount;t!==this.skeletonCount&&i?this.UpdateSkeleton(!0,Math.abs(t-this.skeletonCount)):this.UpdateSkeleton(),this.liCollections=this.list.querySelectorAll(".e-list-item"),this.list.getElementsByClassName("e-virtual-ddl").length>0&&(this.list.getElementsByClassName("e-virtual-ddl")[0].style=this.GetVirtualTrackHeight()),this.list.getElementsByClassName("e-virtual-ddl-content").length>0&&(this.list.getElementsByClassName("e-virtual-ddl-content")[0].style=this.getTransformValues())}},t.prototype.getSkeletonCount=function(e){this.virtualListHeight=null!=this.listHeight?parseInt(this.listHeight,10):this.virtualListHeight;var t=this.virtualListHeight>0?Math.floor(this.virtualListHeight/this.listItemHeight):0;this.skeletonCount=2*t<this.itemCount?this.itemCount:2*t,this.itemCount=e?this.itemCount:this.skeletonCount,this.skeletonCount=Math.floor(this.skeletonCount/2)+2},t.prototype.onFilterDown=function(e){switch(e.keyCode){case 13:break;case 40:case 38:this.queryString=this.filterInput.value,e.preventDefault();break;case 9:this.isPopupOpen&&"autocomplete"!==this.getModuleName()&&e.preventDefault();break;default:this.prevSelectPoints=this.getSelectionPoints(),this.queryString=this.filterInput.value}},t.prototype.removeFillSelection=function(){if(this.isInteracted){var e=this.getSelectionPoints();this.inputElement.setSelectionRange(e.end,e.end)}},t.prototype.getQuery=function(e){var t;if(!this.isCustomFilter&&this.allowFiltering&&this.filterInput){t=e?e.clone():this.query?this.query.clone():new a.Query;var i=""===this.typedString?"contains":this.filterType,s=this.typeOfData(this.dataSource).typeof;if((this.dataSource instanceof a.DataManager||"string"!==s)&&"number"!==s){var l=this.fields.text?this.fields.text:"";t.where(l,i,this.typedString,this.ignoreCase,this.ignoreAccent)}else t.where("",i,this.typedString,this.ignoreCase,this.ignoreAccent)}else t=e?e.clone():this.query?this.query.clone():new a.Query;if(this.enableVirtualization&&0!=this.viewPortInfo.endIndex&&(!(this.dataSource instanceof a.DataManager)||this.dataSource instanceof a.DataManager&&this.virtualGroupDataSource)){var n=this.getTakeValue(),o=!1;if(t)for(var r=0;r<t.queries.length;r++)if("onSkip"===t.queries[r].fn){o=!0;break}!this.allowFiltering&&this.isPopupOpen&&o||t.skip(this.virtualItemStartIndex),this.isIncrementalRequest?t.take(this.incrementalEndIndex):t.take(n),t.requiresCount()}return t},t.prototype.getSelectionPoints=function(){var e=this.inputElement;return{start:Math.abs(e.selectionStart),end:Math.abs(e.selectionEnd)}},t.prototype.searchLists=function(e){var t=this;if(this.isTyped=!0,this.activeIndex=null,this.isListSearched=!0,this.filterInput.parentElement.querySelector("."+c.clearIcon)){this.filterInput.parentElement.querySelector("."+c.clearIcon).style.visibility=""===this.filterInput.value?"hidden":"visible"}if(this.isDataFetched=!1,this.isFiltering()){this.checkAndResetCache();var i={preventDefaultAction:!1,text:this.filterInput.value,updateData:function(e,s,l){i.cancel||(t.isCustomFilter=!0,t.filteringAction(e,s,l))},baseEventArgs:e,cancel:!1};this.trigger("filtering",i,function(e){e.cancel||t.isCustomFilter||e.preventDefaultAction||t.filteringAction(t.dataSource,null,t.fields)})}},t.prototype.filter=function(e,t,i){this.isCustomFilter=!0,this.filteringAction(e,t,i)},t.prototype.filteringAction=function(e,t,l){if(!i.i(s.isNullOrUndefined)(this.filterInput)){this.beforePopupOpen=!(!this.isPopupOpen&&"combobox"===this.getModuleName()&&""===this.filterInput.value);var n=this.list.classList.contains(r.a.noData);if(""!==this.filterInput.value.trim()||this.itemTemplate){if(this.isNotSearchList=!1,t=""===this.filterInput.value.trim()?null:t,this.enableVirtualization&&this.isFiltering()&&this.isTyped&&(this.isPreventScrollAction=!0,this.list.scrollTop=0,this.previousStartIndex=0,this.virtualListInfo=null),this.resetList(e,l,t),"dropdownlist"===this.getModuleName()&&this.list.classList.contains(r.a.noData)&&(this.popupContentElement.setAttribute("role","status"),this.popupContentElement.setAttribute("id","no-record"),i.i(s.attributes)(this.filterInputObj.container,{"aria-activedescendant":"no-record"})),this.enableVirtualization&&n&&!this.list.classList.contains(r.a.noData)&&(this.list.querySelector(".e-virtual-ddl-content")||this.list.appendChild(this.createElement("div",{className:"e-virtual-ddl-content",styles:this.getTransformValues()})).appendChild(this.list.querySelector(".e-list-parent")),!this.list.querySelector(".e-virtual-ddl"))){var o=this.createElement("div",{id:this.element.id+"_popup",className:"e-virtual-ddl",styles:this.GetVirtualTrackHeight()});document.getElementsByClassName("e-popup")[0].querySelector(".e-dropdownbase").appendChild(o)}}else{if(this.actionCompleteData.isUpdated=!1,this.isTyped=!1,!i.i(s.isNullOrUndefined)(this.actionCompleteData.ulElement)&&!i.i(s.isNullOrUndefined)(this.actionCompleteData.list)){if(this.enableVirtualization&&(this.totalItemCount=this.dataSource&&this.dataSource.length?this.dataSource.length:0,this.resetList(e,l,t),n&&!this.list.classList.contains(r.a.noData)&&(this.list.querySelector(".e-virtual-ddl-content")||this.list.appendChild(this.createElement("div",{className:"e-virtual-ddl-content",styles:this.getTransformValues()})).appendChild(this.list.querySelector(".e-list-parent")),!this.list.querySelector(".e-virtual-ddl")))){var o=this.createElement("div",{id:this.element.id+"_popup",className:"e-virtual-ddl",styles:this.GetVirtualTrackHeight()});document.getElementsByClassName("e-popup")[0].querySelector(".e-dropdownbase").appendChild(o)}this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list)}this.isTyped=!0,i.i(s.isNullOrUndefined)(this.itemData)||"dropdownlist"!==this.getModuleName()||(this.focusIndexItem(),this.setScrollPosition()),this.isNotSearchList=!0}this.enableVirtualization&&this.getFilteringSkeletonCount(),this.renderReactTemplates()}},t.prototype.setSearchBox=function(e){if(this.isFiltering()){var t=e.querySelector("."+c.filterParent)?e.querySelector("."+c.filterParent):this.createElement("span",{className:c.filterParent});this.filterInput=this.createElement("input",{attrs:{type:"text"},className:c.filterInput}),this.element.parentNode.insertBefore(this.filterInput,this.element);var l=!1;return s.Browser.isDevice&&(l=!0),this.filterInputObj=n.Input.createInput({element:this.filterInput,buttons:l?[c.backIcon,c.filterBarClearIcon]:[c.filterBarClearIcon],properties:{placeholder:this.filterBarPlaceholder}},this.createElement),i.i(s.isNullOrUndefined)(this.cssClass)||(-1!==this.cssClass.split(" ").indexOf("e-outline")?i.i(s.addClass)([this.filterInputObj.container],"e-outline"):-1!==this.cssClass.split(" ").indexOf("e-filled")&&i.i(s.addClass)([this.filterInputObj.container],"e-filled")),i.i(s.append)([this.filterInputObj.container],t),i.i(s.prepend)([t],e),i.i(s.attributes)(this.filterInput,{"aria-disabled":"false",role:"combobox",autocomplete:"off",autocapitalize:"off",spellcheck:"false"}),this.clearIconElement=this.filterInput.parentElement.querySelector("."+c.clearIcon),!s.Browser.isDevice&&this.clearIconElement&&(s.EventHandler.add(this.clearIconElement,"click",this.clearText,this),this.clearIconElement.style.visibility="hidden"),s.Browser.isDevice?this.searchKeyModule=new s.KeyboardEvents(this.filterInput,{keyAction:this.mobileKeyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}):this.searchKeyModule=new s.KeyboardEvents(this.filterInput,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}),s.EventHandler.add(this.filterInput,"input",this.onInput,this),s.EventHandler.add(this.filterInput,"keyup",this.onFilterUp,this),s.EventHandler.add(this.filterInput,"keydown",this.onFilterDown,this),s.EventHandler.add(this.filterInput,"blur",this.onBlurHandler,this),s.EventHandler.add(this.filterInput,"paste",this.pasteHandler,this),this.filterInputObj}return d},t.prototype.onInput=function(e){this.isValidKey=!0,"combobox"===this.getModuleName()&&this.updateIconState(),s.Browser.isDevice&&"mozilla"===s.Browser.info.name&&(this.typedString=this.filterInput.value,this.preventAutoFill=!0,this.searchLists(e))},t.prototype.pasteHandler=function(e){var t=this;setTimeout(function(){t.typedString=t.filterInput.value,t.searchLists(e)})},t.prototype.onActionFailure=function(t){e.prototype.onActionFailure.call(this,t),this.beforePopupOpen&&this.renderPopup()},t.prototype.UpdateSkeleton=function(e,t){var i=this.list.querySelector(".e-virtual-ddl-content"),s=this.list.querySelector(".e-virtual-list");if(i&&(!s||e)&&this.enableVirtualization)for(var l=e?t:this.skeletonCount,n=0;n<l;n++){var o=this.createElement("li",{className:c.virtualList,styles:"overflow: inherit"});this.enableVirtualization&&this.itemTemplate&&(o.style.height=this.listItemHeight+"px");var r=new h.Skeleton({shape:"Text",height:"10px",width:"95%",cssClass:"e-skeleton-text"});r.appendTo(this.createElement("div")),o.appendChild(r.element),i.firstChild.insertBefore(o,i.firstChild.children[0])}},t.prototype.getTakeValue=function(){return this.allowFiltering&&"dropdownlist"===this.getModuleName()&&s.Browser.isDevice?Math.round(window.outerHeight/this.listItemHeight):this.itemCount},t.prototype.onActionComplete=function(t,l,n,o){var r=this;if(this.dataSource instanceof a.DataManager&&!i.i(s.isNullOrUndefined)(n)&&!this.virtualGroupDataSource&&(this.totalItemCount=n.count),this.isNotSearchList&&!this.enableVirtualization)return void(this.isNotSearchList=!1);var h=this.itemCount;if(this.isActive||!i.i(s.isNullOrUndefined)(t)){var p=this.selectedLI?this.selectedLI.cloneNode(!0):null;if(e.prototype.onActionComplete.call(this,t,l,n),this.skeletonCount=0!=this.totalItemCount&&this.totalItemCount<2*this.itemCount?0:this.skeletonCount,this.updateSelectElementData(this.allowFiltering),this.isRequested&&!i.i(s.isNullOrUndefined)(this.searchKeyEvent)&&"keydown"===this.searchKeyEvent.type&&(this.isRequested=!1,this.keyActionHandler(this.searchKeyEvent),this.searchKeyEvent=null),this.isRequested&&!i.i(s.isNullOrUndefined)(this.searchKeyEvent)&&(this.incrementalSearch(this.searchKeyEvent),this.searchKeyEvent=null),this.enableVirtualization||(this.list.scrollTop=0),i.i(s.isNullOrUndefined)(t)||i.i(s.attributes)(t,{id:this.element.id+"_options",role:"listbox","aria-hidden":"false","aria-label":"listbox"}),this.initialRemoteRender){if(this.initial=!0,this.activeIndex=this.index,this.initialRemoteRender=!1,this.value&&this.dataSource instanceof a.DataManager){var u=i.i(s.isNullOrUndefined)(this.fields.value)?this.fields.text:this.fields.value,c=this.fields.value.split("."),d=l.some(function(e){return i.i(s.isNullOrUndefined)(e[u])&&c.length>1?r.checkFieldValue(e,c)===r.value:e[u]===r.value});this.enableVirtualization&&this.virtualGroupDataSource&&(d=this.virtualGroupDataSource.some(function(e){return i.i(s.isNullOrUndefined)(e[u])&&c.length>1?r.checkFieldValue(e,c)===r.value:e[u]===r.value})),d?this.updateValues():this.dataSource.executeQuery(this.getQuery(this.query).where(new a.Predicate(u,"equal",this.value))).then(function(e){e.result.length>0?(r.addItem(e.result,l.length),r.updateValues()):r.updateValues()})}else this.updateValues();this.initial=!1}else"autocomplete"===this.getModuleName()&&this.value&&this.setInputValue();if("autocomplete"!==this.getModuleName()&&this.isFiltering()&&!this.isTyped)(!this.actionCompleteData.isUpdated||!this.isCustomFilter&&!this.isFilterFocus||i.i(s.isNullOrUndefined)(this.itemData)&&this.allowFiltering&&(this.dataSource instanceof a.DataManager||!i.i(s.isNullOrUndefined)(this.dataSource)&&!i.i(s.isNullOrUndefined)(this.dataSource.length)&&0!==this.dataSource.length))&&(this.itemTemplate&&"EJS-COMBOBOX"===this.element.tagName&&this.allowFiltering?setTimeout(function(){r.updateActionCompleteDataValues(t,l)},0):this.updateActionCompleteDataValues(t,l)),(this.allowCustom||this.allowFiltering&&!this.isValueInList(l,this.value)&&this.dataSource instanceof a.DataManager)&&!this.enableVirtualization?this.addNewItem(l,p):(this.allowCustom||this.allowFiltering&&this.isValueInList(l,this.value))&&!this.enableVirtualization&&this.addNewItem(l,p),(!i.i(s.isNullOrUndefined)(this.itemData)||i.i(s.isNullOrUndefined)(this.itemData)&&this.enableVirtualization)&&this.focusIndexItem(),this.enableVirtualization&&this.updateActionCompleteDataValues(t,l);else if(this.enableVirtualization&&"autocomplete"!==this.getModuleName()&&!this.isFiltering()){var m=this.getItemData().value;this.activeIndex=this.getIndexByValue(m);var f=this.findListElement(this.list,"li","data-value",m);this.selectedLI=f}else this.enableVirtualization&&"autocomplete"===this.getModuleName()&&(this.activeIndex=this.skeletonCount);this.beforePopupOpen&&(this.renderPopup(n),this.enableVirtualization&&(this.list.querySelector(".e-virtual-list")||(this.UpdateSkeleton(),this.liCollections=this.list.querySelectorAll(".e-list-item"))),this.enableVirtualization&&h!=this.itemCount&&this.resetList(this.dataSource,this.fields))}},t.prototype.isValueInList=function(e,t){if(Array.isArray(e)){for(var i=0;i<e.length;i++)if(e[i]===t)return!0}else if("object"==typeof e&&null!==e)for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)&&e[s]===t)return!0;return!1},t.prototype.checkFieldValue=function(e,t){var i=e;return t.forEach(function(e){i=i[e]}),i},t.prototype.updateActionCompleteDataValues=function(e,t){this.actionCompleteData={ulElement:e.cloneNode(!0),list:t,isUpdated:!0},this.actionData.list!==this.actionCompleteData.list&&this.actionCompleteData.ulElement&&this.actionCompleteData.list&&(this.actionData=this.actionCompleteData)},t.prototype.addNewItem=function(e,t){var l=this;if(!i.i(s.isNullOrUndefined)(this.itemData)&&!i.i(s.isNullOrUndefined)(t)){var n=this.getItemData().value;e.some(function(e){return("string"==typeof e||"number"==typeof e)&&e===n||i.i(s.getValue)(l.fields.value,e)===n})||this.addItem(this.itemData)}},t.prototype.updateActionCompleteData=function(e,t,i){var s=this;"autocomplete"!==this.getModuleName()&&this.actionCompleteData.ulElement&&(this.itemTemplate&&"EJS-COMBOBOX"===this.element.tagName&&this.allowFiltering?setTimeout(function(){s.actionCompleteDataUpdate(e,t,i)},0):this.actionCompleteDataUpdate(e,t,i))},t.prototype.actionCompleteDataUpdate=function(e,t,i){null!==i?this.actionCompleteData.ulElement.insertBefore(e.cloneNode(!0),this.actionCompleteData.ulElement.childNodes[i]):this.actionCompleteData.ulElement.appendChild(e.cloneNode(!0)),this.isFiltering()&&this.actionCompleteData.list.indexOf(t)<0&&this.actionCompleteData.list.push(t)},t.prototype.focusIndexItem=function(){var e=this.getItemData().value;this.activeIndex=this.getIndexByValue(e);var t=this.findListElement(this.list,"li","data-value",e);this.selectedLI=t,this.activeItem(t),this.enableVirtualization&&i.i(s.isNullOrUndefined)(t)||this.removeFocus()},t.prototype.updateSelection=function(){var e=this.list.querySelector("."+r.a.selected);e?(this.setProperties({index:this.getIndexByValue(e.getAttribute("data-value"))}),this.activeIndex=this.index):(this.removeFocus(),this.list.querySelector("."+r.a.li).classList.add(c.focus))},t.prototype.updateSelectionList=function(){if(!(this.list&&this.list.querySelector(".e-active")||i.i(s.isNullOrUndefined)(this.value))){var e=this.findListElement(this.list,"li","data-value",this.value);e&&e.classList.add("e-active")}},t.prototype.checkAndResetCache=function(){this.enableVirtualization&&(this.generatedDataObject={},this.virtualItemStartIndex=this.virtualItemEndIndex=0,this.viewPortInfo={currentPageNumber:null,direction:null,sentinelInfo:{},offsets:{},startIndex:0,endIndex:this.itemCount},this.selectedValueInfo=null)},t.prototype.removeFocus=function(){var e=this.list.querySelectorAll("."+c.focus);e&&e.length&&i.i(s.removeClass)(e,c.focus)},t.prototype.getTransformValues=function(){var e=this.viewPortInfo.startIndex*this.listItemHeight;return e-=this.skeletonCount*this.listItemHeight,"transform: translate(0px, "+(e=0===this.viewPortInfo.startIndex&&this.listData&&0===this.listData.length?0:e)+"px);"},t.prototype.GetVirtualTrackHeight=function(){var e=this.totalItemCount===this.viewPortInfo.endIndex?this.totalItemCount*this.listItemHeight-this.itemCount*this.listItemHeight:this.totalItemCount*this.listItemHeight,t="height: "+(e-this.itemCount*this.listItemHeight)+"px;";return"autocomplete"===this.getModuleName()&&0===this.skeletonCount?"height: 0px;":t},t.prototype.renderPopup=function(e){var t=this;if(this.popupObj&&document.body.contains(this.popupObj.element))return void this.refreshPopup();var l={cancel:!1};this.trigger("beforeOpen",l,function(l){if(l.cancel)t.beforePopupOpen=!1;else{var n=t.createElement("div",{id:t.element.id+"_popup",className:"e-ddl e-popup "+(null!==t.cssClass?t.cssClass:"")});n.setAttribute("aria-label",t.element.id),n.setAttribute("role","dialog");var o=t.setSearchBox(n);if(t.listHeight=i.i(s.formatUnit)(t.popupHeight),t.headerTemplate&&t.setHeaderTemplate(n),i.i(s.append)([t.list],n),t.footerTemplate&&t.setFooterTemplate(n),document.body.appendChild(n),n.style.top="0px",t.enableVirtualization&&t.itemTemplate){var a=n.querySelectorAll("li.e-list-item:not(.e-virtual-list)");t.listItemHeight=a.length>0?Math.ceil(a[0].getBoundingClientRect().height):0}if(t.enableVirtualization&&!t.list.classList.contains(r.a.noData))if(t.list.querySelector(".e-virtual-ddl-content")?t.list.getElementsByClassName("e-virtual-ddl-content")[0].style=t.getTransformValues():t.list.appendChild(t.createElement("div",{className:"e-virtual-ddl-content",styles:t.getTransformValues()})).appendChild(t.list.querySelector(".e-list-parent")),t.UpdateSkeleton(),t.liCollections=t.list.querySelectorAll("."+r.a.li),t.virtualItemCount=t.itemCount,t.list.querySelector(".e-virtual-ddl"))t.list.getElementsByClassName("e-virtual-ddl")[0].style=t.GetVirtualTrackHeight();else{var h=t.createElement("div",{id:t.element.id+"_popup",className:"e-virtual-ddl",styles:t.GetVirtualTrackHeight()});n.querySelector(".e-dropdownbase").appendChild(h)}if(n.style.visibility="hidden","auto"!==t.popupHeight){if(t.searchBoxHeight=0,i.i(s.isNullOrUndefined)(o.container)||"combobox"===t.getModuleName()||"autocomplete"===t.getModuleName()||(t.searchBoxHeight=o.container.parentElement.getBoundingClientRect().height,t.listHeight=(parseInt(t.listHeight,10)-t.searchBoxHeight).toString()+"px"),t.headerTemplate){t.header=t.header?t.header:n.querySelector(".e-ddl-header");var p=Math.round(t.header.getBoundingClientRect().height);t.listHeight=(parseInt(t.listHeight,10)-(p+t.searchBoxHeight)).toString()+"px"}if(t.footerTemplate){t.footer=t.footer?t.footer:n.querySelector(".e-ddl-footer");var p=Math.round(t.footer.getBoundingClientRect().height);t.listHeight=(parseInt(t.listHeight,10)-(p+t.searchBoxHeight)).toString()+"px"}t.list.style.maxHeight=(parseInt(t.listHeight,10)-2).toString()+"px",n.style.maxHeight=i.i(s.formatUnit)(t.popupHeight)}else n.style.height="auto";var u=0,d=void 0;if(t.isPreventScrollAction=!0,!i.i(s.isNullOrUndefined)(t.selectedLI)&&!i.i(s.isNullOrUndefined)(t.activeIndex)&&t.activeIndex>=0?t.setScrollPosition():t.enableVirtualization?t.setScrollPosition():t.list.scrollTop=0,s.Browser.isDevice&&!t.allowFiltering&&("dropdownlist"===t.getModuleName()||t.isDropDownClick&&"combobox"===t.getModuleName())){u=t.getOffsetValue(n);var m=t.isEmptyList()?t.list:t.liCollections[0];i.i(s.isNullOrUndefined)(t.inputElement)||(d=-(parseInt(getComputedStyle(m).textIndent,10)-parseInt(getComputedStyle(t.inputElement).paddingLeft,10)+parseInt(getComputedStyle(t.inputElement.parentElement).borderLeftWidth,10)))}t.createPopup(n,u,d),t.popupContentElement=t.popupObj.element.querySelector(".e-content"),t.getFocusElement(),t.checkCollision(n),s.Browser.isDevice&&(parseInt(t.popupWidth.toString(),10)>window.outerWidth&&("dropdownlist"!==t.getModuleName()||!t.allowFiltering)&&t.popupObj.element.classList.add("e-wide-popup"),t.popupObj.element.classList.add(c.device),("dropdownlist"===t.getModuleName()||"combobox"===t.getModuleName()&&!t.allowFiltering&&t.isDropDownClick)&&(t.popupObj.collision={X:"fit",Y:"fit"}),t.isFilterLayout()&&(t.popupObj.element.classList.add(c.mobileFilter),t.popupObj.position={X:0,Y:0},t.popupObj.dataBind(),i.i(s.attributes)(t.popupObj.element,{style:"left:0px;right:0px;top:0px;bottom:0px;"}),i.i(s.addClass)([document.body,t.popupObj.element],c.popupFullScreen),t.setSearchBoxPosition(),t.backIconElement=o.container.querySelector(".e-back-icon"),t.clearIconElement=o.container.querySelector("."+c.clearIcon),s.EventHandler.add(t.backIconElement,"click",t.clickOnBackIcon,t),s.EventHandler.add(t.clearIconElement,"click",t.clearText,t))),n.style.visibility="visible",i.i(s.addClass)([n],"e-popup-close");for(var f=t.popupObj.getScrollableParent(t.inputWrapper.container),v=0,g=f;v<g.length;v++){var y=g[v];s.EventHandler.add(y,"scroll",t.scrollHandler,t)}i.i(s.isNullOrUndefined)(t.list)||(t.unWireListEvents(),t.wireListEvents()),t.selectedElementID=t.selectedLI?t.selectedLI.id:null,t.enableVirtualization&&(t.notify("bindScrollEvent",{module:"VirtualScroll",component:t.getModuleName(),enable:t.enableVirtualization}),setTimeout(function(){(t.value||t.list.querySelector(".e-active"))&&(t.updateSelectionList(),t.selectedValueInfo&&t.viewPortInfo&&t.viewPortInfo.offsets.top?t.list.scrollTop=t.viewPortInfo.offsets.top:t.scrollBottom(!0,!0))},5)),i.i(s.attributes)(t.targetElement(),{"aria-expanded":"true","aria-owns":t.element.id+"_popup","aria-controls":t.element.id}),"dropdownlist"!==t.getModuleName()&&t.list.classList.contains("e-nodata")&&(i.i(s.attributes)(t.targetElement(),{"aria-activedescendant":"no-record"}),t.popupContentElement.setAttribute("role","status"),t.popupContentElement.setAttribute("id","no-record")),t.inputElement.setAttribute("aria-expanded","true"),t.inputElement.setAttribute("aria-controls",t.element.id);var C=t.isFiltering()?t.filterInput.parentElement:t.inputWrapper.container;i.i(s.addClass)([C],[c.inputFocus]);var b={name:"FadeIn",duration:100};t.beforePopupOpen=!0;var E=t.popupObj,S={popup:E,event:e,cancel:!1,animation:b};t.trigger("open",S,function(e){e.cancel?(t.beforePopupOpen=!1,t.destroyPopup()):(i.i(s.isNullOrUndefined)(t.inputWrapper)||i.i(s.addClass)([t.inputWrapper.container],[c.iconAnimation]),t.renderReactTemplates(),i.i(s.isNullOrUndefined)(t.popupObj)||t.popupObj.show(new s.Animation(e.animation),1e3===t.zIndex?t.element:null))})}})},t.prototype.checkCollision=function(e){if(!s.Browser.isDevice||s.Browser.isDevice&&"dropdownlist"!==this.getModuleName()&&!this.isDropDownClick){i.i(l.isCollide)(e).length>0&&(e.style.marginTop=-parseInt(getComputedStyle(e).marginTop,10)+"px"),this.popupObj.resolveCollision()}},t.prototype.getOffsetValue=function(e){var t=getComputedStyle(e),i=parseInt(t.borderTopWidth,10),s=parseInt(t.borderBottomWidth,10);return this.setPopupPosition(i+s)},t.prototype.createPopup=function(e,t,n){var o=this;this.popupObj=new l.Popup(e,{width:this.setWidth(),targetType:"relative",relateTo:this.inputWrapper.container,collision:this.enableRtl?{X:"fit",Y:"flip"}:{X:"flip",Y:"flip"},offsetY:t,enableRtl:this.enableRtl,offsetX:n,position:this.enableRtl?{X:"right",Y:"bottom"}:{X:"left",Y:"bottom"},zIndex:this.zIndex,close:function(){o.isDocumentClick||o.focusDropDown(),o.isReact&&o.clearTemplate(["headerTemplate","footerTemplate"]),o.isNotSearchList=!1,o.isDocumentClick=!1,o.destroyPopup(),o.isFiltering()&&o.actionCompleteData.list&&o.actionCompleteData.list[0]&&(o.isActive=!0,o.enableVirtualization?o.onActionComplete(o.ulElement,o.listData,null,!0):o.onActionComplete(o.actionCompleteData.ulElement,o.actionCompleteData.list,null,!0))},open:function(){s.EventHandler.add(document,"mousedown",o.onDocumentClick,o),o.isPopupOpen=!0;var e=o.actionCompleteData&&o.actionCompleteData.ulElement&&o.actionCompleteData.ulElement.querySelector("li"),t=o.list.querySelector("ul li");i.i(s.isNullOrUndefined)(o.ulElement)||i.i(s.isNullOrUndefined)(o.ulElement.getElementsByClassName("e-item-focus")[0])?i.i(s.isNullOrUndefined)(o.ulElement)||i.i(s.isNullOrUndefined)(o.ulElement.getElementsByClassName("e-active")[0])||i.i(s.attributes)(o.targetElement(),{"aria-activedescendant":o.ulElement.getElementsByClassName("e-active")[0].id}):i.i(s.attributes)(o.targetElement(),{"aria-activedescendant":o.ulElement.getElementsByClassName("e-item-focus")[0].id}),o.isFiltering()&&o.itemTemplate&&o.element.tagName===o.getNgDirective()&&e&&t&&e.textContent!==t.textContent&&"EJS-COMBOBOX"!==o.element.tagName&&o.cloneElements(),o.isFilterLayout()&&(i.i(s.removeClass)([o.inputWrapper.container],[c.inputFocus]),o.isFilterFocus=!0,o.filterInput.focus(),o.inputWrapper.clearButton&&i.i(s.addClass)([o.inputWrapper.clearButton],c.clearIconHide)),o.activeStateChange()},targetExitViewport:function(){s.Browser.isDevice||o.hidePopup()}})},t.prototype.isEmptyList=function(){return!i.i(s.isNullOrUndefined)(this.liCollections)&&0===this.liCollections.length},t.prototype.getFocusElement=function(){},t.prototype.isFilterLayout=function(){return"dropdownlist"===this.getModuleName()&&this.allowFiltering},t.prototype.scrollHandler=function(){s.Browser.isDevice&&("dropdownlist"===this.getModuleName()&&!this.isFilterLayout()||"combobox"===this.getModuleName()&&!this.allowFiltering&&this.isDropDownClick)&&this.element&&!this.isElementInViewport(this.element)&&this.hidePopup()},t.prototype.isElementInViewport=function(e){var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=window.innerHeight&&t.right<=window.innerWidth},t.prototype.setSearchBoxPosition=function(){var e=this.filterInput.parentElement.getBoundingClientRect().height;this.popupObj.element.style.maxHeight="100%",this.popupObj.element.style.width="100%",this.list.style.maxHeight=window.innerHeight-e+"px",this.list.style.height=window.innerHeight-e+"px";var t=this.filterInput.parentElement.querySelector("."+c.clearIcon);i.i(s.detach)(this.filterInput),t.parentElement.insertBefore(this.filterInput,t)},t.prototype.setPopupPosition=function(e){var t,l=e,n=this.list.querySelector("."+c.focus)||this.selectedLI,o=this.isEmptyList()?this.list:this.liCollections[0],r=this.isEmptyList()?this.list:this.liCollections[this.getItems().length-1],a=o.getBoundingClientRect().height;this.listItemHeight=a;var h=this.list.offsetHeight/2,p=i.i(s.isNullOrUndefined)(n)?o.offsetTop:n.offsetTop;if(r.offsetTop-h<p&&!i.i(s.isNullOrUndefined)(this.liCollections)&&this.liCollections.length>0&&!i.i(s.isNullOrUndefined)(n)){var u=this.list.offsetHeight/a,d=parseInt(getComputedStyle(this.list).paddingBottom,10);t=(u-(this.liCollections.length-this.activeIndex))*a-l+d,this.list.scrollTop=n.offsetTop}else p>h&&!this.enableVirtualization?(t=h-a/2,this.list.scrollTop=p-h+a/2):t=p;return-(t=t+a+l-(a-this.inputWrapper.container.offsetHeight)/2)},t.prototype.setWidth=function(){var e=i.i(s.formatUnit)(this.popupWidth);if(e.indexOf("%")>-1){e=(this.inputWrapper.container.offsetWidth*parseFloat(e)/100).toString()+"px"}if(s.Browser.isDevice&&!this.allowFiltering&&("dropdownlist"===this.getModuleName()||this.isDropDownClick&&"combobox"===this.getModuleName())){var t=this.isEmptyList()?this.list:this.liCollections[0];e=parseInt(e,10)+2*(parseInt(getComputedStyle(t).textIndent,10)-parseInt(getComputedStyle(this.inputElement).paddingLeft,10)+parseInt(getComputedStyle(this.inputElement.parentElement).borderLeftWidth,10))+"px"}return e},t.prototype.scrollBottom=function(e,t,l){var n=this;if(void 0===t&&(t=!1),void 0===l&&(l=null),i.i(s.isNullOrUndefined)(this.selectedLI)&&this.enableVirtualization&&(this.selectedLI=this.list.querySelector("."+r.a.li),!i.i(s.isNullOrUndefined)(this.selectedLI)&&this.selectedLI.classList.contains("e-virtual-list")&&(this.selectedLI=this.liCollections[this.skeletonCount])),!i.i(s.isNullOrUndefined)(this.selectedLI)){this.isUpwardScrolling=!1;var o=this.list.querySelectorAll(".e-virtual-list").length,a=this.list.querySelector("li:last-of-type")?this.list.querySelector("li:last-of-type").getAttribute("data-value"):null,h=this.virtualListInfo&&this.virtualListInfo.startIndex?this.selectedLI.offsetTop+this.virtualListInfo.startIndex*this.selectedLI.offsetHeight:this.selectedLI.offsetTop,p=this.list.offsetHeight,u=h-o*this.selectedLI.offsetHeight+this.selectedLI.offsetHeight-this.list.scrollTop,c=this.list.scrollTop+u-p,d=!1;c=e?c+2*parseInt(getComputedStyle(this.list).paddingTop,10):c+parseInt(getComputedStyle(this.list).paddingTop,10);var m=h-o*this.selectedLI.offsetHeight+this.selectedLI.offsetHeight-this.list.scrollTop;if(m=this.fields.groupBy&&!i.i(s.isNullOrUndefined)(this.fixedHeaderElement)?m-this.fixedHeaderElement.offsetHeight:m,0!==this.activeIndex||this.enableVirtualization){if(u>p||!(m>0&&this.list.offsetHeight>m)){var f=this.selectedLI?this.selectedLI.getAttribute("data-value"):null,v="pageDown"==l?this.getPageCount()-2:1;!this.enableVirtualization||this.isKeyBoardAction||t?this.isKeyBoardAction&&this.enableVirtualization&&a&&f===a&&"end"!=l&&!this.isVirtualScrolling?(this.isPreventKeyAction=!0,this.enableVirtualization&&this.itemTemplate?this.list.scrollTop+=c:this.list.scrollTop+=this.selectedLI.offsetHeight*v,this.isPreventKeyAction=!this.IsScrollerAtEnd()&&this.isPreventKeyAction,this.isKeyBoardAction=!1,this.isPreventScrollAction=!1):this.enableVirtualization&&"end"==l?(this.isPreventKeyAction=!1,this.isKeyBoardAction=!1,this.isPreventScrollAction=!1,this.list.scrollTop=this.list.scrollHeight):("pageDown"==l&&this.enableVirtualization&&!this.isVirtualScrolling&&(this.isPreventKeyAction=!1,this.isKeyBoardAction=!1,this.isPreventScrollAction=!1,c+=this.selectedLI.offsetHeight*v),this.list.scrollTop=c):this.list.scrollTop=this.virtualListInfo&&this.virtualListInfo.startIndex?this.virtualListInfo.startIndex*this.listItemHeight:0,d=this.isKeyBoardAction,!0}}else this.list.scrollTop=0,d=this.isKeyBoardAction;this.isKeyBoardAction=d,this.enableVirtualization&&this.fields.groupBy&&this.fixedHeaderElement&&"down"==l&&setTimeout(function(){n.scrollStop(null,!0)},100)}},t.prototype.scrollTop=function(e){if(void 0===e&&(e=null),!i.i(s.isNullOrUndefined)(this.selectedLI)){var t=this.list.querySelectorAll(".e-virtual-list").length,l=this.virtualListInfo&&this.virtualListInfo.startIndex?this.selectedLI.offsetTop+this.virtualListInfo.startIndex*this.selectedLI.offsetHeight:this.selectedLI.offsetTop,n=l-t*this.selectedLI.offsetHeight-this.list.scrollTop,o=this.list.querySelector("li.e-list-item:not(.e-virtual-list)")?this.list.querySelector("li.e-list-item:not(.e-virtual-list)").getAttribute("data-value"):null;n=this.fields.groupBy&&!i.i(s.isNullOrUndefined)(this.fixedHeaderElement)?n-this.fixedHeaderElement.offsetHeight:n;var r=l-t*this.selectedLI.offsetHeight+this.selectedLI.offsetHeight-this.list.scrollTop,a=this.enableVirtualization&&"autocomplete"===this.getModuleName()&&n<=0;if(0!==this.activeIndex||this.enableVirtualization)if(n<0||a){var h=this.selectedLI?this.selectedLI.getAttribute("data-value"):null,p="pageUp"==e?this.getPageCount()-2:1;this.enableVirtualization&&this.isKeyBoardAction&&o&&h===o&&"home"!=e&&!this.isVirtualScrolling?(this.isUpwardScrolling=!0,this.isPreventKeyAction=!0,this.list.scrollTop-=this.selectedLI.offsetHeight*p,this.isPreventKeyAction=0!=this.list.scrollTop&&this.isPreventKeyAction,this.isKeyBoardAction=!1,this.isPreventScrollAction=!1):this.enableVirtualization&&"home"==e?(this.isPreventScrollAction=!1,this.isPreventKeyAction=!0,this.isKeyBoardAction=!1,this.list.scrollTo(0,0)):("pageUp"==e&&this.enableVirtualization&&!this.isVirtualScrolling&&(this.isPreventKeyAction=!1,this.isKeyBoardAction=!1,this.isPreventScrollAction=!1,n-=this.selectedLI.offsetHeight*p),this.list.scrollTop=this.list.scrollTop+n)}else r>0&&this.list.offsetHeight>r||(this.list.scrollTop=this.selectedLI.offsetTop-(this.fields.groupBy&&!i.i(s.isNullOrUndefined)(this.fixedHeaderElement)?this.fixedHeaderElement.offsetHeight:0));else this.list.scrollTop=0}},t.prototype.isEditTextBox=function(){return!1},t.prototype.isFiltering=function(){return this.allowFiltering},t.prototype.isPopupButton=function(){return!0},t.prototype.setScrollPosition=function(e){if(this.isPreventScrollAction=!0,i.i(s.isNullOrUndefined)(e))this.scrollBottom(!0);else switch(e.action){case"pageDown":case"down":case"end":this.isKeyBoardAction=!0,this.scrollBottom(!1,!1,e.action);break;default:this.isKeyBoardAction="up"==e.action||"pageUp"==e.action||"open"==e.action,this.scrollTop(e.action)}this.isKeyBoardAction=!1},t.prototype.clearText=function(){this.filterInput.value=this.typedString="",this.searchLists(null),this.enableVirtualization&&(this.list.scrollTop=0,this.totalItemCount=this.dataCount=this.dataSource&&this.dataSource.length?this.dataSource.length:0,this.list.getElementsByClassName("e-virtual-ddl")[0]&&(this.list.getElementsByClassName("e-virtual-ddl")[0].style=this.GetVirtualTrackHeight()),this.getSkeletonCount(),this.UpdateSkeleton(),this.liCollections=this.list.querySelectorAll(".e-list-item"),this.list.getElementsByClassName("e-virtual-ddl-content")[0]&&(this.list.getElementsByClassName("e-virtual-ddl-content")[0].style=this.getTransformValues()))},t.prototype.setEleWidth=function(e){i.i(s.isNullOrUndefined)(e)||("number"==typeof e?this.inputWrapper.container.style.width=i.i(s.formatUnit)(e):"string"==typeof e&&(this.inputWrapper.container.style.width=e.match(/px|%|em/)?e:i.i(s.formatUnit)(e)))},t.prototype.closePopup=function(e,t){var l=this,n=!i.i(s.isNullOrUndefined)(this.filterInput)&&!i.i(s.isNullOrUndefined)(this.filterInput.value)&&""!==this.filterInput.value;"combobox"===this.getModuleName()&&this.typedString;if(this.isTyped=!1,this.popupObj&&document.body.contains(this.popupObj.element)&&this.beforePopupOpen){this.keyboardEvent=null,s.EventHandler.remove(document,"mousedown",this.onDocumentClick),this.isActive=!1,this.filterInputObj=null,this.isDropDownClick=!1,this.preventAutoFill=!1;for(var o=this.popupObj.getScrollableParent(this.inputWrapper.container),r=0,h=o;r<h.length;r++){var p=h[r];s.EventHandler.remove(p,"scroll",this.scrollHandler)}s.Browser.isDevice&&this.isFilterLayout()&&i.i(s.removeClass)([document.body,this.popupObj.element],c.popupFullScreen),this.isFilterLayout()&&(s.Browser.isDevice||(this.searchKeyModule.destroy(),this.clearIconElement&&s.EventHandler.remove(this.clearIconElement,"click",this.clearText)),this.backIconElement&&(s.EventHandler.remove(this.backIconElement,"click",this.clickOnBackIcon),s.EventHandler.remove(this.clearIconElement,"click",this.clearText)),i.i(s.isNullOrUndefined)(this.filterInput)||(s.EventHandler.remove(this.filterInput,"input",this.onInput),s.EventHandler.remove(this.filterInput,"keyup",this.onFilterUp),s.EventHandler.remove(this.filterInput,"keydown",this.onFilterDown),s.EventHandler.remove(this.filterInput,"blur",this.onBlurHandler),s.EventHandler.remove(this.filterInput,"paste",this.pasteHandler)),this.allowFiltering&&"dropdownlist"===this.getModuleName()&&this.filterInput.removeAttribute("aria-activedescendant"),this.filterInput=null),i.i(s.attributes)(this.targetElement(),{"aria-expanded":"false"}),this.inputElement.setAttribute("aria-expanded","false"),this.targetElement().removeAttribute("aria-owns"),this.targetElement().removeAttribute("aria-activedescendant"),this.inputWrapper.container.classList.remove(c.iconAnimation),this.isFiltering()&&(this.actionCompleteData.isUpdated=!1),this.enableVirtualization&&(null==this.value||this.isTyped?(this.viewPortInfo.endIndex=this.viewPortInfo&&this.viewPortInfo.endIndex>0?this.viewPortInfo.endIndex:this.itemCount,("autocomplete"===this.getModuleName()||"dropdownlist"===this.getModuleName()&&!i.i(s.isNullOrUndefined)(this.typedString)&&""!=this.typedString||"combobox"===this.getModuleName()&&this.allowFiltering&&!i.i(s.isNullOrUndefined)(this.typedString)&&""!=this.typedString)&&this.checkAndResetCache()):"autocomplete"===this.getModuleName()&&this.checkAndResetCache(),"dropdownlist"!==this.getModuleName()&&"combobox"!==this.getModuleName()||0==this.skeletonCount||this.getSkeletonCount(!0)),this.beforePopupOpen=!1;var u={name:"FadeOut",duration:100,delay:e||0},d=this.popupObj,m={popup:d,cancel:!1,animation:u,event:t||null};this.trigger("close",m,function(e){if(!i.i(s.isNullOrUndefined)(l.popupObj)&&!i.i(s.isNullOrUndefined)(l.popupObj.element.querySelector(".e-fixed-head"))){var t=l.popupObj.element.querySelector(".e-fixed-head");t.parentNode.removeChild(t),l.fixedHeaderElement=null}e.cancel||("autocomplete"===l.getModuleName()&&l.rippleFun(),l.isPopupOpen?l.popupObj.hide(new s.Animation(e.animation)):l.destroyPopup())}),s.Browser.isDevice&&!m.cancel&&this.popupObj.element.classList.contains("e-wide-popup")&&this.popupObj.element.classList.remove("e-wide-popup");var f;f=this.dataSource instanceof a.DataManager?this.virtualGroupDataSource&&this.virtualGroupDataSource.length?this.virtualGroupDataSource.length:0:this.dataSource&&this.dataSource.length?this.dataSource.length:0,this.enableVirtualization&&this.isFiltering()&&null!=this.value&&n&&this.totalItemCount!==f&&(this.updateInitialData(),this.checkAndResetCache())}},t.prototype.updateInitialData=function(){var e=this.selectData,t=this.renderItems(e,this.fields);this.list.scrollTop=0,this.virtualListInfo={currentPageNumber:null,direction:null,sentinelInfo:{},offsets:{},startIndex:0,endIndex:0},"combobox"===this.getModuleName()&&(this.typedString=""),this.previousStartIndex=0,this.previousEndIndex=0,this.dataSource instanceof a.DataManager?this.totalItemCount=this.dataCount=this.virtualGroupDataSource&&this.virtualGroupDataSource.length?this.virtualGroupDataSource.length:0:this.totalItemCount=this.dataCount=this.dataSource&&this.dataSource.length?this.dataSource.length:0,this.list.getElementsByClassName("e-virtual-ddl")[0]&&(this.list.getElementsByClassName("e-virtual-ddl")[0].style=this.GetVirtualTrackHeight()),"autocomplete"!==this.getModuleName()&&0!=this.totalItemCount&&this.totalItemCount>2*this.itemCount&&this.getSkeletonCount(),this.UpdateSkeleton(),this.listData=e,this.updateActionCompleteDataValues(t,e),this.liCollections=this.list.querySelectorAll(".e-list-item"),this.list.getElementsByClassName("e-virtual-ddl-content")[0]&&(this.list.getElementsByClassName("e-virtual-ddl-content")[0].style=this.getTransformValues())},t.prototype.destroyPopup=function(){this.isPopupOpen=!1,this.isFilterFocus=!1,this.popupObj&&(this.popupObj.destroy(),i.i(s.detach)(this.popupObj.element))},t.prototype.clickOnBackIcon=function(){this.hidePopup(),this.focusIn()},t.prototype.render=function(){this.preselectedIndex=i.i(s.isNullOrUndefined)(this.index)?null:this.index,"INPUT"===this.element.tagName?(this.inputElement=this.element,i.i(s.isNullOrUndefined)(this.inputElement.getAttribute("role"))&&this.inputElement.setAttribute("role","combobox"),i.i(s.isNullOrUndefined)(this.inputElement.getAttribute("type"))&&this.inputElement.setAttribute("type","text"),this.inputElement.setAttribute("aria-expanded","false")):(this.inputElement=this.createElement("input",{attrs:{role:"combobox",type:"text"}}),this.element.tagName!==this.getNgDirective()&&(this.element.style.display="none"),this.element.parentElement.insertBefore(this.inputElement,this.element),this.preventTabIndex(this.inputElement));var e=this.cssClass;i.i(s.isNullOrUndefined)(this.cssClass)||""===this.cssClass||(e=this.cssClass.replace(/\s+/g," ").trim()),!i.i(s.isNullOrUndefined)(i.i(s.closest)(this.element,"fieldset"))&&i.i(s.closest)(this.element,"fieldset").disabled&&(this.enabled=!1),this.inputWrapper=n.Input.createInput({element:this.inputElement,buttons:this.isPopupButton()?[c.icon]:null,floatLabelType:this.floatLabelType,properties:{readonly:"dropdownlist"===this.getModuleName()||this.readonly,placeholder:this.placeholder,cssClass:e,enabled:this.enabled,enableRtl:this.enableRtl,showClearButton:this.showClearButton}},this.createElement),this.element.tagName===this.getNgDirective()?this.element.appendChild(this.inputWrapper.container):this.inputElement.parentElement.insertBefore(this.element,this.inputElement),this.hiddenElement=this.createElement("select",{attrs:{"aria-hidden":"true","aria-label":this.getModuleName(),tabindex:"-1",class:c.hiddenElement}}),i.i(s.prepend)([this.hiddenElement],this.inputWrapper.container),this.validationAttribute(this.element,this.hiddenElement),this.setReadOnly(),this.setFields(),this.inputWrapper.container.style.width=i.i(s.formatUnit)(this.width),this.inputWrapper.container.classList.add("e-ddl"),"Auto"===this.floatLabelType&&n.Input.calculateWidth(this.inputElement,this.inputWrapper.container),!i.i(s.isNullOrUndefined)(this.inputWrapper.buttons[0])&&this.inputWrapper.container.getElementsByClassName("e-float-text-content")[0]&&"Never"!==this.floatLabelType&&this.inputWrapper.container.getElementsByClassName("e-float-text-content")[0].classList.add("e-icon"),this.wireEvent(),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.removeAttribute("tabindex");var t=this.element.getAttribute("id")?this.element.getAttribute("id"):i.i(s.getUniqueID)("ej2_dropdownlist");if(this.element.id=t,this.hiddenElement.id=t+"_hidden",this.targetElement().setAttribute("tabindex",this.tabIndex),"autocomplete"!==this.getModuleName()&&"combobox"!==this.getModuleName()||this.readonly?"dropdownlist"===this.getModuleName()&&(i.i(s.attributes)(this.targetElement(),{"aria-label":this.getModuleName()}),this.inputElement.setAttribute("aria-label",this.getModuleName()),this.inputElement.setAttribute("aria-expanded","false"),this.inputElement.setAttribute("aria-controls",this.element.id+"_popups")):this.inputElement.setAttribute("aria-label",this.getModuleName()),i.i(s.attributes)(this.targetElement(),this.getAriaAttributes()),this.updateDataAttribute(this.htmlAttributes),this.setHTMLAttributes(),this.targetElement()===this.inputElement&&this.inputElement.removeAttribute("aria-labelledby"),null!==this.value||null!==this.activeIndex||null!==this.text)this.enableVirtualization&&(this.listItemHeight=this.getListHeight(),this.getSkeletonCount(),this.updateVirtualizationProperties(this.itemCount,this.allowFiltering)),this.initValue(),this.selectedValueInfo=this.viewPortInfo,this.enableVirtualization&&(this.activeIndex=this.activeIndex+this.skeletonCount);else if("SELECT"===this.element.tagName&&this.element.options[0]){var l=this.element;this.value=l.options[l.selectedIndex].value,this.text=i.i(s.isNullOrUndefined)(this.value)?null:l.options[l.selectedIndex].textContent,this.initValue()}this.setEnabled(),this.preventTabIndex(this.element),this.enabled||(this.targetElement().tabIndex=-1),this.initial=!1,this.element.style.opacity="",this.inputElement.onselect=function(e){e.stopImmediatePropagation()},this.inputElement.onchange=function(e){e.stopImmediatePropagation()},this.element.hasAttribute("autofocus")&&this.focusIn(),i.i(s.isNullOrUndefined)(this.text)||this.inputElement.setAttribute("value",this.text),this.element.hasAttribute("data-val")&&this.element.setAttribute("data-val","false");var o=this.inputWrapper.container.getElementsByClassName("e-float-text")[0];i.i(s.isNullOrUndefined)(this.element.id)||""===this.element.id||i.i(s.isNullOrUndefined)(o)||(o.id="label_"+this.element.id.replace(/ /g,"_"),i.i(s.attributes)(this.inputElement,{"aria-labelledby":o.id})),this.renderComplete(),this.listItemHeight=this.getListHeight(),this.getSkeletonCount(),this.enableVirtualization&&this.updateVirtualizationProperties(this.itemCount,this.allowFiltering),this.viewPortInfo.startIndex=this.virtualItemStartIndex=0,this.viewPortInfo.endIndex=this.virtualItemEndIndex=this.viewPortInfo.startIndex>0?this.viewPortInfo.endIndex:this.itemCount},t.prototype.getListHeight=function(){var e=this.createElement("div",{className:"e-dropdownbase"}),t=this.createElement("li",{className:"e-list-item"}),l=i.i(s.formatUnit)(this.popupHeight);e.style.height=parseInt(l,10).toString()+"px",e.appendChild(t),document.body.appendChild(e),this.virtualListHeight=e.getBoundingClientRect().height;var n=Math.ceil(t.getBoundingClientRect().height);return e.remove(),n},t.prototype.setFooterTemplate=function(e){var t;this.footer?this.isReact&&"function"==typeof this.footerTemplate?this.clearTemplate(["footerTemplate"]):this.footer.innerHTML="":(this.footer=this.createElement("div"),i.i(s.addClass)([this.footer],c.footer));var l=this.dropdownCompiler(this.footerTemplate);t="function"!=typeof this.footerTemplate&&l?i.i(s.compile)(i.i(s.select)(this.footerTemplate,document).innerHTML.trim()):i.i(s.compile)(this.footerTemplate);var n=t({},this,"footerTemplate",this.footerTemplateId,this.isStringTemplate,null,this.footer);n&&n.length>0&&i.i(s.append)(n,this.footer),i.i(s.append)([this.footer],e)},t.prototype.setHeaderTemplate=function(e){var t;this.header?this.header.innerHTML="":(this.header=this.createElement("div"),i.i(s.addClass)([this.header],c.header));var l=this.dropdownCompiler(this.headerTemplate);t="function"!=typeof this.headerTemplate&&l?i.i(s.compile)(i.i(s.select)(this.headerTemplate,document).innerHTML.trim()):i.i(s.compile)(this.headerTemplate);var n=t({},this,"headerTemplate",this.headerTemplateId,this.isStringTemplate,null,this.header);n&&n.length&&i.i(s.append)(n,this.header);var o=e.querySelector("div.e-content");e.insertBefore(this.header,o)},t.prototype.setEnabled=function(){this.element.setAttribute("aria-disabled",this.enabled?"false":"true")},t.prototype.setOldText=function(e){this.text=e},t.prototype.setOldValue=function(e){this.value=e},t.prototype.refreshPopup=function(){i.i(s.isNullOrUndefined)(this.popupObj)||!document.body.contains(this.popupObj.element)||(!this.allowFiltering||s.Browser.isDevice&&this.isFilterLayout())&&"autocomplete"!==this.getModuleName()||(i.i(s.removeClass)([this.popupObj.element],"e-popup-close"),this.popupObj.refreshPosition(this.inputWrapper.container),this.popupObj.resolveCollision())},t.prototype.checkData=function(e){!e.dataSource||i.i(s.isNullOrUndefined)(Object.keys(e.dataSource))||!this.itemTemplate||!this.allowFiltering||this.isListSearched&&e.dataSource instanceof a.DataManager||(this.list=null,this.actionCompleteData={ulElement:null,list:null,isUpdated:!1}),this.isListSearched=!1;var t=-1!==Object.keys(e).indexOf("value")&&i.i(s.isNullOrUndefined)(e.value),l=-1!==Object.keys(e).indexOf("text")&&i.i(s.isNullOrUndefined)(e.text);"autocomplete"!==this.getModuleName()&&this.allowFiltering&&(t||l)&&(this.itemData=null),this.allowFiltering&&e.dataSource&&!i.i(s.isNullOrUndefined)(Object.keys(e.dataSource))?(this.actionCompleteData={ulElement:null,list:null,isUpdated:!1},this.actionData=this.actionCompleteData):this.allowFiltering&&e.query&&!i.i(s.isNullOrUndefined)(Object.keys(e.query))&&(this.actionCompleteData="combobox"===this.getModuleName()?{ulElement:null,list:null,isUpdated:!1}:this.actionCompleteData,this.actionData=this.actionCompleteData)},t.prototype.updateDataSource=function(e){""===this.inputElement.value&&(i.i(s.isNullOrUndefined)(e)||!i.i(s.isNullOrUndefined)(e.dataSource)&&(e.dataSource instanceof a.DataManager||0!==e.dataSource.length))||this.clearAll(null,e),this.fields.groupBy&&e.fields&&!this.isGroupChecking&&this.list&&(s.EventHandler.remove(this.list,"scroll",this.setFloatingHeader),s.EventHandler.add(this.list,"scroll",this.setFloatingHeader,this)),(i.i(s.isNullOrUndefined)(e)||!i.i(s.isNullOrUndefined)(e.dataSource)&&(e.dataSource instanceof a.DataManager||0!==e.dataSource.length)||!Array.isArray(e.dataSource)||0!==e.dataSource.length)&&(this.typedString="",this.resetList(this.dataSource)),this.isCustomFilter||this.isFilterFocus||document.activeElement===this.filterInput||this.checkCustomValue()},t.prototype.checkCustomValue=function(){this.itemData=this.getDataByValue(this.value);var e=this.getItemData();this.setProperties({text:e.text,value:e.value})},t.prototype.updateInputFields=function(){"dropdownlist"===this.getModuleName()&&n.Input.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton)},t.prototype.onPropertyChanged=function(t,l){var o=this;i.i(s.isNullOrUndefined)(t.dataSource)||this.isTouched||!i.i(s.isNullOrUndefined)(t.value)||!i.i(s.isNullOrUndefined)(t.index)||i.i(s.isNullOrUndefined)(this.preselectedIndex)||(t.index=this.preselectedIndex),i.i(s.isNullOrUndefined)(t.value)&&i.i(s.isNullOrUndefined)(t.index)||(this.isTouched=!0),"dropdownlist"===this.getModuleName()&&(this.checkData(t),this.setUpdateInitial(["fields","query","dataSource"],t));for(var r=this,h=0,p=Object.keys(t);h<p.length;h++){var u=p[h];!function(h){switch(h){case"query":case"dataSource":r.getSkeletonCount(),r.checkAndResetCache();break;case"htmlAttributes":r.setHTMLAttributes();break;case"width":r.setEleWidth(t.width),n.Input.calculateWidth(r.inputElement,r.inputWrapper.container);break;case"placeholder":n.Input.setPlaceholder(t.placeholder,r.inputElement);break;case"filterBarPlaceholder":r.filterInput&&n.Input.setPlaceholder(t.filterBarPlaceholder,r.filterInput);break;case"readonly":"dropdownlist"!==r.getModuleName()&&n.Input.setReadonly(t.readonly,r.inputElement),r.setReadOnly();break;case"cssClass":r.setCssClass(t.cssClass,l.cssClass),n.Input.calculateWidth(r.inputElement,r.inputWrapper.container);break;case"enableRtl":r.setEnableRtl();break;case"enabled":r.setEnable();break;case"text":if(null===t.text){r.clearAll();break}if(r.enableVirtualization){r.updateValues(),r.updateInputFields(),r.notify("setCurrentViewDataAsync",{module:"VirtualScroll"});break}if(r.list||(r.dataSource instanceof a.DataManager&&(r.initialRemoteRender=!0),r.renderList()),!r.initialRemoteRender){var p=r.getElementByText(t.text);if(!r.checkValidLi(p))if(r.liCollections&&100===r.liCollections.length&&"autocomplete"===r.getModuleName()&&r.listData.length>100)r.setSelectionData(t.text,l.text,"text");else if(t.text&&r.dataSource instanceof a.DataManager){var u=r.getItems().length,c=i.i(s.isNullOrUndefined)(r.fields.text)?r.fields.value:r.fields.text;r.typedString="",r.dataSource.executeQuery(r.getQuery(r.query).where(new a.Predicate(c,"equal",t.text))).then(function(e){e.result.length>0?(o.addItem(e.result,u),o.updateValues()):o.setOldText(l.text)})}else"autocomplete"===r.getModuleName()?r.setInputValue(t,l):r.setOldText(l.text);r.updateInputFields()}break;case"value":if(null===t.value){r.clearAll();break}if(r.enableVirtualization){r.updateValues(),r.updateInputFields(),r.notify("setCurrentViewDataAsync",{module:"VirtualScroll"}),r.preventChange=r.isAngular&&r.preventChange?!r.preventChange:r.preventChange;break}if(r.notify("beforeValueChange",{newProp:t}),r.list||(r.dataSource instanceof a.DataManager&&(r.initialRemoteRender=!0),r.renderList()),!r.initialRemoteRender){var d=r.getElementByValue(t.value);if(!r.checkValidLi(d))if(r.liCollections&&100===r.liCollections.length&&"autocomplete"===r.getModuleName()&&r.listData.length>100)r.setSelectionData(t.value,l.value,"value");else if(t.value&&r.dataSource instanceof a.DataManager){var m=r.getItems().length,c=i.i(s.isNullOrUndefined)(r.fields.value)?r.fields.text:r.fields.value;r.typedString="",r.dataSource.executeQuery(r.getQuery(r.query).where(new a.Predicate(c,"equal",t.value))).then(function(e){e.result.length>0?(o.addItem(e.result,m),o.updateValues()):o.setOldValue(l.value)})}else"autocomplete"===r.getModuleName()?r.setInputValue(t,l):r.setOldValue(l.value);r.updateInputFields(),r.preventChange=r.isAngular&&r.preventChange?!r.preventChange:r.preventChange}break;case"index":if(null===t.index){r.clearAll();break}if(r.list||(r.dataSource instanceof a.DataManager&&(r.initialRemoteRender=!0),r.renderList()),!r.initialRemoteRender&&r.liCollections){var f=r.liCollections[t.index];r.checkValidLi(f)||(r.liCollections&&100===r.liCollections.length&&"autocomplete"===r.getModuleName()&&r.listData.length>100?r.setSelectionData(t.index,l.index,"index"):r.index=l.index),r.updateInputFields()}break;case"footerTemplate":r.popupObj&&r.setFooterTemplate(r.popupObj.element);break;case"headerTemplate":r.popupObj&&r.setHeaderTemplate(r.popupObj.element);break;case"valueTemplate":i.i(s.isNullOrUndefined)(r.itemData)||null===r.valueTemplate||r.setValueTemplate();break;case"allowFiltering":r.allowFiltering&&(r.actionCompleteData={ulElement:r.ulElement,list:r.listData,isUpdated:!0},r.actionData=r.actionCompleteData,r.updateSelectElementData(r.allowFiltering));break;case"floatLabelType":n.Input.removeFloating(r.inputWrapper),n.Input.addFloating(r.inputElement,t.floatLabelType,r.placeholder,r.createElement),!i.i(s.isNullOrUndefined)(r.inputWrapper.buttons[0])&&r.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0]&&"Never"!==r.floatLabelType&&r.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon");break;case"showClearButton":r.inputWrapper.clearButton||(n.Input.setClearButton(t.showClearButton,r.inputElement,r.inputWrapper,null,r.createElement),r.bindClearEvent());break;default:var v=r.getPropObject(h,t,l);e.prototype.onPropertyChanged.call(r,v.newProperty,v.oldProperty)}}(u)}},t.prototype.checkValidLi=function(e){return!!this.isValidLI(e)&&(this.setSelection(e,null),!0)},t.prototype.setSelectionData=function(e,t,i){var s,l=this;this.updateListValues=function(){"text"===i?(s=l.getElementByText(e),l.checkValidLi(s)||l.setOldText(t)):"value"===i?(s=l.getElementByValue(e),l.checkValidLi(s)||l.setOldValue(t)):"index"===i&&(s=l.liCollections[e],l.checkValidLi(s)||(l.index=t))}},t.prototype.updatePopupState=function(){this.beforePopupOpen&&(this.beforePopupOpen=!1,this.showPopup())},t.prototype.setReadOnly=function(){this.readonly?i.i(s.addClass)([this.inputWrapper.container],["e-readonly"]):i.i(s.removeClass)([this.inputWrapper.container],["e-readonly"])},t.prototype.setInputValue=function(e,t){},t.prototype.setCssClass=function(e,t){i.i(s.isNullOrUndefined)(t)||(t=t.replace(/\s+/g," ").trim()),i.i(s.isNullOrUndefined)(e)||(e=e.replace(/\s+/g," ").trim()),n.Input.setCssClass(e,[this.inputWrapper.container],t),this.popupObj&&n.Input.setCssClass(e,[this.popupObj.element],t)},t.prototype.getModuleName=function(){return"dropdownlist"},t.prototype.showPopup=function(e){if(this.enabled){if(this.isReact&&"combobox"===this.getModuleName()&&this.itemTemplate&&this.isCustomFilter&&this.isAddNewItemTemplate&&(this.renderList(),this.isAddNewItemTemplate=!1),this.isFiltering()&&this.dataSource instanceof a.DataManager&&this.actionData.list!==this.actionCompleteData.list&&this.actionData.list&&this.actionData.ulElement&&(this.actionCompleteData=this.actionData,this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list,null,!0)),this.beforePopupOpen)return void this.refreshPopup();this.beforePopupOpen=!0,this.isFiltering()&&!this.isActive&&this.actionCompleteData.list&&this.actionCompleteData.list[0]?(this.isActive=!0,this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list,null,!0)):(i.i(s.isNullOrUndefined)(this.list)||!i.i(s.isUndefined)(this.list)&&(this.list.classList.contains(r.a.noData)||this.list.querySelectorAll("."+r.a.li).length<=0))&&(this.isReact&&this.isFiltering()&&null!=this.itemTemplate&&(this.isSecondClick=!1),this.renderList(e)),this.enableVirtualization&&this.listData&&this.listData.length&&(i.i(s.isNullOrUndefined)(this.value)||"dropdownlist"!==this.getModuleName()&&"combobox"!==this.getModuleName()||this.removeHover(),this.beforePopupOpen||this.notify("setCurrentViewDataAsync",{module:"VirtualScroll"})),this.beforePopupOpen&&this.invokeRenderPopup(e),this.enableVirtualization&&!this.allowFiltering&&null!=this.selectedValueInfo&&this.selectedValueInfo.startIndex>0&&null!=this.value&&this.notify("dataProcessAsync",{module:"VirtualScroll",isOpen:!0})}},t.prototype.invokeRenderPopup=function(e){if(s.Browser.isDevice&&this.isFilterLayout()){var t=this;window.onpopstate=function(){t.hidePopup()},history.pushState({},"")}i.i(s.isNullOrUndefined)(this.list)||i.i(s.isNullOrUndefined)(this.list.children[0])&&!this.list.classList.contains(r.a.noData)||this.renderPopup(e)},t.prototype.renderHightSearch=function(){},t.prototype.hidePopup=function(e){if(this.isEscapeKey&&"dropdownlist"===this.getModuleName())if(i.i(s.isNullOrUndefined)(this.inputElement)||n.Input.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton),this.isEscapeKey=!1,i.i(s.isNullOrUndefined)(this.index))this.resetSelection();else{var t=this.findListElement(this.ulElement,"li","data-value",this.value);this.selectedLI=this.liCollections[this.index]||t,this.selectedLI&&(this.updateSelectedItem(this.selectedLI,null,!0),this.valueTemplate&&null!==this.itemData&&this.setValueTemplate())}this.closePopup(0,e);var l=this.getItemData(),o=!i.i(s.isNullOrUndefined)(this.selectedLI);o&&this.enableVirtualization&&this.selectedLI.classList&&(o=this.selectedLI.classList.contains("e-active")),this.inputElement&&""===this.inputElement.value.trim()&&!this.isInteracted&&(this.isSelectCustom||o&&this.inputElement.value!==l.text)&&(this.isSelectCustom=!1,this.clearAll(e))},t.prototype.focusIn=function(e){if(this.enabled&&!this.targetElement().classList.contains(c.disable)){var t=!1;this.preventFocus&&s.Browser.isDevice&&(this.inputWrapper.container.tabIndex=1,this.inputWrapper.container.focus(),this.preventFocus=!1,t=!0),t||this.targetElement().focus(),i.i(s.addClass)([this.inputWrapper.container],[c.inputFocus]),this.onFocus(e),"Auto"===this.floatLabelType&&n.Input.calculateWidth(this.inputElement,this.inputWrapper.container)}},t.prototype.focusOut=function(e){this.enabled&&(this.enableVirtualization||"combobox"!==this.getModuleName()&&"autocomplete"!==this.getModuleName()||(this.isTyped=!0),this.hidePopup(e),this.targetElement()&&this.targetElement().blur(),i.i(s.removeClass)([this.inputWrapper.container],[c.inputFocus]),"Auto"===this.floatLabelType&&""===this.inputElement.value&&n.Input.calculateWidth(this.inputElement,this.inputWrapper.container))},t.prototype.destroy=function(){if(this.isActive=!1,i.i(o.c)(this.element.id),this.isReact&&this.clearTemplate(),this.hidePopup(),this.popupObj&&this.popupObj.hide(),this.unWireEvent(),this.list&&this.unWireListEvents(),!this.element||this.element.classList.contains("e-"+this.getModuleName())){if(this.inputElement){for(var t=["readonly","aria-disabled","placeholder","aria-labelledby","aria-expanded","autocomplete","aria-readonly","autocapitalize","spellcheck","aria-autocomplete","aria-live","aria-describedby","aria-label"],l=0;l<t.length;l++)this.inputElement.removeAttribute(t[l]);this.inputElement.setAttribute("tabindex",this.tabIndex),this.inputElement.classList.remove("e-input"),n.Input.setValue("",this.inputElement,this.floatLabelType,this.showClearButton)}this.element.style.display="block",this.inputWrapper.container.parentElement.tagName===this.getNgDirective()?i.i(s.detach)(this.inputWrapper.container):(this.inputWrapper.container.parentElement.insertBefore(this.element,this.inputWrapper.container),i.i(s.detach)(this.inputWrapper.container)),this.hiddenElement=null,this.inputWrapper=null,this.keyboardModule=null,this.ulElement=null,this.list=null,this.popupObj=null,this.popupContentElement=null,this.rippleFun=null,this.selectedLI=null,this.liCollections=null,this.item=null,this.inputWrapper=null,this.footer=null,this.header=null,this.previousSelectedLI=null,this.valueTempElement=null,this.actionData.ulElement=null,this.inputElement&&!i.i(s.isNullOrUndefined)(this.inputElement.onchange)&&(this.inputElement.onchange=null),this.isAngular&&(this.inputElement=null),e.prototype.destroy.call(this)}},t.prototype.getItems=function(){return this.list||(this.dataSource instanceof a.DataManager&&(this.initialRemoteRender=!0),this.renderList()),this.ulElement?e.prototype.getItems.call(this):[]},t.prototype.getDataByValue=function(t){return e.prototype.getDataByValue.call(this,t)},t.prototype.clear=function(){this.value=null},u([i.i(s.Property)(null)],t.prototype,"cssClass",void 0),u([i.i(s.Property)("100%")],t.prototype,"width",void 0),u([i.i(s.Property)(!0)],t.prototype,"enabled",void 0),u([i.i(s.Property)(!1)],t.prototype,"enablePersistence",void 0),u([i.i(s.Property)("300px")],t.prototype,"popupHeight",void 0),u([i.i(s.Property)("100%")],t.prototype,"popupWidth",void 0),u([i.i(s.Property)(null)],t.prototype,"placeholder",void 0),u([i.i(s.Property)(null)],t.prototype,"filterBarPlaceholder",void 0),u([i.i(s.Property)({})],t.prototype,"htmlAttributes",void 0),u([i.i(s.Property)(null)],t.prototype,"query",void 0),u([i.i(s.Property)(null)],t.prototype,"valueTemplate",void 0),u([i.i(s.Property)(null)],t.prototype,"headerTemplate",void 0),u([i.i(s.Property)(null)],t.prototype,"footerTemplate",void 0),u([i.i(s.Property)(!1)],t.prototype,"allowFiltering",void 0),u([i.i(s.Property)(!1)],t.prototype,"readonly",void 0),u([i.i(s.Property)(!1)],t.prototype,"enableVirtualization",void 0),u([i.i(s.Property)(null)],t.prototype,"text",void 0),u([i.i(s.Property)(null)],t.prototype,"value",void 0),u([i.i(s.Property)(null)],t.prototype,"index",void 0),u([i.i(s.Property)("Never")],t.prototype,"floatLabelType",void 0),u([i.i(s.Property)(!1)],t.prototype,"showClearButton",void 0),u([i.i(s.Event)()],t.prototype,"filtering",void 0),u([i.i(s.Event)()],t.prototype,"change",void 0),u([i.i(s.Event)()],t.prototype,"beforeOpen",void 0),u([i.i(s.Event)()],t.prototype,"open",void 0),u([i.i(s.Event)()],t.prototype,"close",void 0),u([i.i(s.Event)()],t.prototype,"blur",void 0),u([i.i(s.Event)()],t.prototype,"focus",void 0),t=u([s.NotifyPropertyChanges],t)}(r.c)},function(e,t){e.exports=l},function(e,t,i){"use strict";i.d(t,"a",function(){return c});var s=i(0),l=(i.n(s),i(7)),n=i(5),o=i(4),r=(i.n(o),i(3)),a=(i.n(r),i(2)),h=(i.n(a),this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}()),p=this&&this.__decorate||function(e,t,i,s){var l,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var r=e.length-1;r>=0;r--)(l=e[r])&&(o=(n<3?l(o):n>3?l(t,i,o):l(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o};l.a.root="e-combobox";var u={container:null,buttons:[]},c=function(e){function t(t,i){return e.call(this,t,i)||this}return h(t,e),t.prototype.preRender=function(){e.prototype.preRender.call(this)},t.prototype.getLocaleName=function(){return"combo-box"},t.prototype.wireEvent=function(){"combobox"===this.getModuleName()&&(s.EventHandler.add(this.inputWrapper.buttons[0],"mousedown",this.preventBlur,this),s.EventHandler.add(this.inputWrapper.container,"blur",this.onBlurHandler,this)),i.i(s.isNullOrUndefined)(this.inputWrapper.buttons[0])||s.EventHandler.add(this.inputWrapper.buttons[0],"mousedown",this.dropDownClick,this),s.EventHandler.add(this.inputElement,"focus",this.targetFocus,this),this.readonly||(s.EventHandler.add(this.inputElement,"input",this.onInput,this),s.EventHandler.add(this.inputElement,"keyup",this.onFilterUp,this),s.EventHandler.add(this.inputElement,"keydown",this.onFilterDown,this),s.EventHandler.add(this.inputElement,"paste",this.pasteHandler,this),s.EventHandler.add(window,"resize",this.windowResize,this)),this.bindCommonEvent()},t.prototype.preventBlur=function(e){(this.allowFiltering||document.activeElement===this.inputElement||document.activeElement.classList.contains(l.a.input)||!s.Browser.isDevice)&&s.Browser.isDevice||e.preventDefault()},t.prototype.onBlurHandler=function(t){var l=this.inputElement&&""===this.inputElement.value?null:this.inputElement&&this.inputElement.value;i.i(s.isNullOrUndefined)(this.listData)||i.i(s.isNullOrUndefined)(l)||l===this.text||this.customValue(t),e.prototype.onBlurHandler.call(this,t)},t.prototype.targetElement=function(){return this.inputElement},t.prototype.setOldText=function(e){r.Input.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton),this.customValue(),this.removeSelection()},t.prototype.setOldValue=function(e){this.allowCustom?this.valueMuteChange(this.value):this.valueMuteChange(null),this.removeSelection(),this.setHiddenValue()},t.prototype.valueMuteChange=function(e){var t=i.i(s.isNullOrUndefined)(e)?null:e.toString();r.Input.setValue(t,this.inputElement,this.floatLabelType,this.showClearButton),this.setProperties({value:e,text:e,index:null},!0),this.activeIndex=this.index;var l=this.fields,n={};n[l.text]=i.i(s.isNullOrUndefined)(e)?null:e.toString(),n[l.value]=i.i(s.isNullOrUndefined)(e)?null:e.toString(),this.itemData=n,this.item=null,this.previousValue!==this.value&&this.detachChangeEvent(null)},t.prototype.updateValues=function(){if(i.i(s.isNullOrUndefined)(this.value))if(this.text&&i.i(s.isNullOrUndefined)(this.value)){var e=this.getElementByText(this.text);e?this.setSelection(e,null):(r.Input.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton),this.customValue())}else this.setSelection(this.liCollections[this.activeIndex],null);else{var e=this.getElementByValue(this.value),t=!i.i(s.isNullOrUndefined)(e);if(this.enableVirtualization&&this.value){var l=this.fields.value?this.fields.value:"";if(this.dataSource instanceof a.DataManager&&this.virtualGroupDataSource){var n=new a.DataManager(this.virtualGroupDataSource).executeLocal((new a.Query).where(new a.Predicate(l,"equal",this.value)));if(n&&n.length>0){this.itemData=n[0],t=!0;var o=this.getItemData();(this.value===o.value&&this.text!==o.text||this.value!==o.value&&this.text===o.text)&&this.setProperties({text:o.text,value:o.value})}}else{var n=new a.DataManager(this.dataSource).executeLocal((new a.Query).where(new a.Predicate(l,"equal",this.value)));if(n&&n.length>0){this.itemData=n[0],t=!0;var o=this.getItemData();(this.value===o.value&&this.text!==o.text||this.value!==o.value&&this.text===o.text)&&this.setProperties({text:o.text,value:o.value})}}}e?this.setSelection(e,null):!this.enableVirtualization&&this.allowCustom||this.allowCustom&&this.enableVirtualization&&!t?this.valueMuteChange(this.value):(!this.enableVirtualization||this.enableVirtualization&&!t)&&this.valueMuteChange(null)}this.setHiddenValue(),r.Input.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton)},t.prototype.updateIconState=function(){this.showClearButton&&(this.inputElement&&""!==this.inputElement.value&&!this.readonly?i.i(s.removeClass)([this.inputWrapper.clearButton],l.a.clearIconHide):i.i(s.addClass)([this.inputWrapper.clearButton],l.a.clearIconHide))},t.prototype.getAriaAttributes=function(){return{role:"combobox","aria-autocomplete":"both","aria-labelledby":this.hiddenElement.id,"aria-expanded":"false","aria-readonly":this.readonly.toString(),autocomplete:"off",autocapitalize:"off",spellcheck:"false"}},t.prototype.searchLists=function(t){this.isTyped=!0,this.isFiltering()?(e.prototype.searchLists.call(this,t),this.ulElement&&""===this.filterInput.value.trim()&&this.setHoverList(this.ulElement.querySelector("."+l.a.li))):(this.ulElement&&""===this.inputElement.value&&this.preventAutoFill&&this.setHoverList(this.ulElement.querySelector("."+l.a.li)),this.incrementalSearch(t))},t.prototype.getNgDirective=function(){return"EJS-COMBOBOX"},t.prototype.setSearchBox=function(){return this.filterInput=this.inputElement,this.isFiltering()||this.isReact&&"combobox"===this.getModuleName()?this.inputWrapper:u},t.prototype.onActionComplete=function(t,i,s,l){var n=this;e.prototype.onActionComplete.call(this,t,i,s),this.isSelectCustom&&this.removeSelection(),this.preventAutoFill||"combobox"!==this.getModuleName()||!this.isTyped||this.enableVirtualization||setTimeout(function(){n.inlineSearch()})},t.prototype.getFocusElement=function(){var e=this.isSelectCustom?{text:""}:this.getItemData(),t=i.i(s.isNullOrUndefined)(this.list)?this.list:this.list.querySelector("."+l.a.selected);if(e.text&&e.text.toString()===this.inputElement.value&&!i.i(s.isNullOrUndefined)(t))return t;if((s.Browser.isDevice&&!this.isDropDownClick||!s.Browser.isDevice)&&!i.i(s.isNullOrUndefined)(this.liCollections)&&this.liCollections.length>0){var o=this.inputElement.value,r=this.sortedData,a=this.typeOfData(r).typeof,h=i.i(n.a)(o,this.liCollections,this.filterType,!0,r,this.fields,a);if(this.enableVirtualization&&""!==o&&"autocomplete"!==this.getModuleName()&&this.isTyped&&!this.allowFiltering){var p=!1;for((this.viewPortInfo.endIndex>=this.incrementalEndIndex&&this.incrementalEndIndex<=this.totalItemCount||0==this.incrementalEndIndex)&&(p=!0,this.incrementalStartIndex=this.incrementalEndIndex,0==this.incrementalEndIndex?this.incrementalEndIndex=100>this.totalItemCount?this.totalItemCount:100:this.incrementalEndIndex=this.incrementalEndIndex+100>this.totalItemCount?this.totalItemCount:this.incrementalEndIndex+100,this.updateIncrementalInfo(this.incrementalStartIndex,this.incrementalEndIndex),p=!0),(0!==this.viewPortInfo.startIndex||p)&&this.updateIncrementalView(0,this.itemCount),h=i.i(n.a)(o,this.incrementalLiCollections,this.filterType,!0,r,this.fields,a);i.i(s.isNullOrUndefined)(h)&&this.incrementalEndIndex<this.totalItemCount&&(this.incrementalStartIndex=this.incrementalEndIndex,this.incrementalEndIndex=this.incrementalEndIndex+100>this.totalItemCount?this.totalItemCount:this.incrementalEndIndex+100,this.updateIncrementalInfo(this.incrementalStartIndex,this.incrementalEndIndex),p=!0,(0!==this.viewPortInfo.startIndex||p)&&this.updateIncrementalView(0,this.itemCount),h=i.i(n.a)(o,this.incrementalLiCollections,this.filterType,!0,r,this.fields,a),i.i(s.isNullOrUndefined)(h));)if(i.i(s.isNullOrUndefined)(h)&&this.incrementalEndIndex>=this.totalItemCount){this.incrementalStartIndex=0,this.incrementalEndIndex=100>this.totalItemCount?this.totalItemCount:100;break}if(h.index&&!(this.viewPortInfo.startIndex>=h.index&&h.index>=this.viewPortInfo.endIndex)){var u=h.index-(this.itemCount/2-2)>0?h.index-(this.itemCount/2-2):0,c=this.viewPortInfo.startIndex+this.itemCount>this.totalItemCount?this.totalItemCount:this.viewPortInfo.startIndex+this.itemCount;u!=this.viewPortInfo.startIndex&&this.updateIncrementalView(u,c)}if(i.i(s.isNullOrUndefined)(h.item))this.updateIncrementalView(0,this.itemCount),this.list.getElementsByClassName("e-virtual-ddl-content")[0].style=this.getTransformValues(),this.list.scrollTop=0;else{if(this.getIndexByValue(h.item.getAttribute("data-value"))-this.skeletonCount>this.itemCount/2){var u=this.viewPortInfo.startIndex+(this.itemCount/2-2)<this.totalItemCount?this.viewPortInfo.startIndex+(this.itemCount/2-2):this.totalItemCount,c=this.viewPortInfo.startIndex+this.itemCount>this.totalItemCount?this.totalItemCount:this.viewPortInfo.startIndex+this.itemCount;this.updateIncrementalView(u,c)}h.item=this.getElementByValue(h.item.getAttribute("data-value"))}h&&h.item&&(h.item=this.getElementByValue(h.item.getAttribute("data-value")))}var d=h.item;if(i.i(s.isNullOrUndefined)(d))this.isSelectCustom&&""!==this.inputElement.value.trim()&&(this.removeFocus(),this.enableVirtualization||(this.list.scrollTop=0));else{var m=this.getIndexByValue(d.getAttribute("data-value"))-1,f=parseInt(getComputedStyle(this.liCollections[0],null).getPropertyValue("height"),10);if(!isNaN(f)&&"autocomplete"!==this.getModuleName()){this.removeFocus();var v=this.fields.groupBy?this.liCollections[0].offsetHeight:0;if(this.enableVirtualization){if(this.list.getElementsByClassName("e-virtual-ddl-content")[0].style=this.getTransformValues(),this.enableVirtualization&&!this.fields.groupBy){var g=this.virtualListInfo&&this.virtualListInfo.startIndex?d.offsetTop+this.virtualListInfo.startIndex*d.offsetHeight:d.offsetTop;this.list.scrollTop=g-this.list.querySelectorAll(".e-virtual-list").length*d.offsetHeight}}else this.list.scrollTop=m*f+v;i.i(s.addClass)([d],l.a.focus)}}return d}return null},t.prototype.setValue=function(t){return t&&"keydown"===t.type&&"enter"===t.action&&this.removeFillSelection(),this.autofill&&"combobox"===this.getModuleName()&&t&&"keydown"===t.type&&"enter"!==t.action?(this.preventAutoFill=!1,this.inlineSearch(t),!1):e.prototype.setValue.call(this,t)},t.prototype.checkCustomValue=function(){this.itemData=this.getDataByValue(this.value);var e=this.getItemData();this.allowCustom&&i.i(s.isNullOrUndefined)(e.value)&&i.i(s.isNullOrUndefined)(e.text)||this.setProperties({value:e.value},!this.allowCustom)},t.prototype.showSpinner=function(){i.i(s.isNullOrUndefined)(this.spinnerElement)&&(this.spinnerElement="autocomplete"===this.getModuleName()?this.inputWrapper.buttons[0]||this.inputWrapper.clearButton||r.Input.appendSpan("e-input-group-icon e-atc-spinner-icon",this.inputWrapper.container,this.createElement):this.inputWrapper.buttons[0]||this.inputWrapper.clearButton,i.i(s.addClass)([this.spinnerElement],l.a.disableIcon),i.i(o.createSpinner)({target:this.spinnerElement,width:s.Browser.isDevice?"16px":"14px"},this.createElement),i.i(o.showSpinner)(this.spinnerElement))},t.prototype.hideSpinner=function(){i.i(s.isNullOrUndefined)(this.spinnerElement)||(i.i(o.hideSpinner)(this.spinnerElement),i.i(s.removeClass)([this.spinnerElement],l.a.disableIcon),this.spinnerElement.classList.contains("e-atc-spinner-icon")?i.i(s.detach)(this.spinnerElement):this.spinnerElement.innerHTML="",this.spinnerElement=null)},t.prototype.setAutoFill=function(e,t){if(t||this.setHoverList(e),this.autofill&&!this.preventAutoFill){var i=this.getTextByValue(e.getAttribute("data-value")).toString(),s=this.getFormattedValue(e.getAttribute("data-value"));"combobox"===this.getModuleName()&&(this.isSelected||this.previousValue===s?this.updateSelectedItem(e,null,!0):(this.updateSelectedItem(e,null),this.isSelected=!0,this.previousValue=this.getFormattedValue(e.getAttribute("data-value")))),this.isAndroidAutoFill(i)||this.setAutoFillSelection(i,t)}},t.prototype.isAndroidAutoFill=function(e){if(s.Browser.isAndroid){var t=this.getSelectionPoints(),i=this.prevSelectPoints.end,l=t.end,n=this.prevSelectPoints.start,o=t.start;return 0!==i&&(i===e.length&&n===e.length||n>o&&i>l||i===l&&n===o)}return!1},t.prototype.clearAll=function(t,l){(i.i(s.isNullOrUndefined)(l)||!i.i(s.isNullOrUndefined)(l)&&i.i(s.isNullOrUndefined)(l.dataSource))&&e.prototype.clearAll.call(this,t),this.isFiltering()&&!i.i(s.isNullOrUndefined)(t)&&t.target===this.inputWrapper.clearButton&&this.searchLists(t)},t.prototype.isSelectFocusItem=function(e){return!i.i(s.isNullOrUndefined)(e)},t.prototype.inlineSearch=function(e){var t=e&&("down"===e.action||"up"===e.action||"home"===e.action||"end"===e.action||"pageUp"===e.action||"pageDown"===e.action),n=t?this.liCollections[this.activeIndex]:this.getFocusElement();if(i.i(s.isNullOrUndefined)(n))if(""===this.inputElement.value){if(this.activeIndex=null,!i.i(s.isNullOrUndefined)(this.list)){this.enableVirtualization||(this.list.scrollTop=0);var o=this.list.querySelector("."+l.a.li);this.setHoverList(o)}}else this.activeIndex=null,this.removeSelection(),this.liCollections&&this.liCollections.length>0&&!this.isCustomFilter&&this.removeFocus();else{if(!t){var r=this.getFormattedValue(n.getAttribute("data-value"));this.activeIndex=this.getIndexByValue(r),this.activeIndex=i.i(s.isNullOrUndefined)(this.activeIndex)?null:this.activeIndex}this.preventAutoFill=""!==this.inputElement.value&&this.preventAutoFill,this.setAutoFill(n,t)}},t.prototype.incrementalSearch=function(e){this.showPopup(e),i.i(s.isNullOrUndefined)(this.listData)||(this.inlineSearch(e),e.preventDefault())},t.prototype.setAutoFillSelection=function(e,t){void 0===t&&(t=!1);var i=this.getSelectionPoints(),s=this.inputElement.value.substr(0,i.start);if(s&&s.toLowerCase()===e.substr(0,i.start).toLowerCase()){var l=s+e.substr(s.length,e.length);r.Input.setValue(l,this.inputElement,this.floatLabelType,this.showClearButton),this.inputElement.setSelectionRange(i.start,this.inputElement.value.length)}else t&&(r.Input.setValue(e,this.inputElement,this.floatLabelType,this.showClearButton),this.inputElement.setSelectionRange(0,this.inputElement.value.length))},t.prototype.getValueByText=function(t){return e.prototype.getValueByText.call(this,t,!0,this.ignoreAccent)},t.prototype.unWireEvent=function(){"combobox"===this.getModuleName()&&(s.EventHandler.remove(this.inputWrapper.buttons[0],"mousedown",this.preventBlur),s.EventHandler.remove(this.inputWrapper.container,"blur",this.onBlurHandler)),i.i(s.isNullOrUndefined)(this.inputWrapper.buttons[0])||s.EventHandler.remove(this.inputWrapper.buttons[0],"mousedown",this.dropDownClick),this.inputElement&&(s.EventHandler.remove(this.inputElement,"focus",this.targetFocus),this.readonly||(s.EventHandler.remove(this.inputElement,"input",this.onInput),s.EventHandler.remove(this.inputElement,"keyup",this.onFilterUp),s.EventHandler.remove(this.inputElement,"keydown",this.onFilterDown),s.EventHandler.remove(this.inputElement,"paste",this.pasteHandler),s.EventHandler.remove(window,"resize",this.windowResize))),this.unBindCommonEvent()},t.prototype.setSelection=function(t,l){e.prototype.setSelection.call(this,t,l),i.i(s.isNullOrUndefined)(t)||this.autofill||this.isDropDownClick||this.removeFocus()},t.prototype.selectCurrentItem=function(e){var t;this.isPopupOpen&&(t=this.isSelected?this.list.querySelector("."+l.a.selected):this.list.querySelector("."+l.a.focus),t&&(this.setSelection(t,e),this.isTyped=!1),this.isSelected&&(this.isSelectCustom=!1,this.onChangeEvent(e))),"enter"===e.action&&""===this.inputElement.value.trim()?this.clearAll(e):this.isTyped&&!this.isSelected&&i.i(s.isNullOrUndefined)(t)&&this.customValue(e),this.hidePopup(e)},t.prototype.setHoverList=function(e){this.removeSelection(),this.isValidLI(e)&&!e.classList.contains(l.a.selected)&&(this.removeFocus(),e.classList.add(l.a.focus))},t.prototype.targetFocus=function(e){s.Browser.isDevice&&!this.allowFiltering&&(this.preventFocus=!1),this.onFocus(e),r.Input.calculateWidth(this.inputElement,this.inputWrapper.container)},t.prototype.dropDownClick=function(t){t.preventDefault(),s.Browser.isDevice&&!this.isFiltering()&&(this.preventFocus=!0),e.prototype.dropDownClick.call(this,t)},t.prototype.customValue=function(e){var t=this,l=this.getValueByText(this.inputElement.value);if(this.allowCustom||""===this.inputElement.value)if(""!==this.inputElement.value.trim()){var n=this.value;if(i.i(s.isNullOrUndefined)(l)){var o=""===this.inputElement.value?null:this.inputElement.value,a={text:o,item:{}};this.initial?this.updateCustomValueCallback(o,a,n):this.trigger("customValueSpecifier",a,function(i){t.updateCustomValueCallback(o,i,n,e)})}else this.isSelectCustom=!1,this.setProperties({value:l}),n!==this.value&&this.onChangeEvent(e)}else this.allowCustom&&(this.isSelectCustom=!0);else{var h=this.previousValue,p=this.value;this.setProperties({value:l}),i.i(s.isNullOrUndefined)(this.value)&&r.Input.setValue("",this.inputElement,this.floatLabelType,this.showClearButton),this.autofill&&h===this.value&&p!==this.value&&this.onChangeEvent(null)}},t.prototype.updateCustomValueCallback=function(e,t,l,n){var o=this.fields,r=t.item,a={};r&&i.i(s.getValue)(o.text,r)&&i.i(s.getValue)(o.value,r)?a=r:(i.i(s.setValue)(o.text,e,a),i.i(s.setValue)(o.value,e,a)),this.itemData=a;var h={text:i.i(s.getValue)(o.text,this.itemData),value:i.i(s.getValue)(o.value,this.itemData),index:null};this.setProperties(h,!0),this.setSelection(null,null),this.isSelectCustom=!0,l!==this.value&&this.onChangeEvent(n)},t.prototype.onPropertyChanged=function(t,l){"combobox"===this.getModuleName()&&(this.checkData(t),this.setUpdateInitial(["fields","query","dataSource"],t));for(var n=0,o=Object.keys(t);n<o.length;n++){var a=o[n];switch(a){case"readonly":r.Input.setReadonly(this.readonly,this.inputElement),this.readonly?(s.EventHandler.remove(this.inputElement,"input",this.onInput),s.EventHandler.remove(this.inputElement,"keyup",this.onFilterUp),s.EventHandler.remove(this.inputElement,"keydown",this.onFilterDown)):(s.EventHandler.add(this.inputElement,"input",this.onInput,this),s.EventHandler.add(this.inputElement,"keyup",this.onFilterUp,this),s.EventHandler.add(this.inputElement,"keydown",this.onFilterDown,this)),this.setReadOnly();break;case"allowFiltering":this.setSearchBox(),this.isFiltering()&&"combobox"===this.getModuleName()&&i.i(s.isNullOrUndefined)(this.list)&&e.prototype.renderList.call(this);break;case"allowCustom":break;default:var h=this.getPropObject(a,t,l);e.prototype.onPropertyChanged.call(this,h.newProperty,h.oldProperty),this.isFiltering()&&"dataSource"===a&&i.i(s.isNullOrUndefined)(this.list)&&this.itemTemplate&&"combobox"===this.getModuleName()&&e.prototype.renderList.call(this)}}},t.prototype.render=function(){e.prototype.render.call(this),this.setSearchBox(),this.isFiltering()&&"combobox"===this.getModuleName()&&i.i(s.isNullOrUndefined)(this.list)&&e.prototype.renderList.call(this),this.renderComplete()},t.prototype.getModuleName=function(){return"combobox"},t.prototype.addItem=function(t,i){e.prototype.addItem.call(this,t,i)},t.prototype.filter=function(t,i,s){e.prototype.filter.call(this,t,i,s)},t.prototype.showPopup=function(t){e.prototype.showPopup.call(this,t)},t.prototype.hidePopup=function(t){var o=this.inputElement&&""===this.inputElement.value?null:this.inputElement&&this.inputElement.value;if(!i.i(s.isNullOrUndefined)(this.listData)){var a=this.isEscapeKey;this.isEscapeKey&&(r.Input.setValue(this.typedString,this.inputElement,this.floatLabelType,this.showClearButton),this.isEscapeKey=!1),this.autofill&&this.removeFillSelection();var h=this.isSelectCustom?{text:""}:this.getItemData(),p=i.i(s.isNullOrUndefined)(this.list)?null:this.list.querySelector("."+l.a.selected);if(this.inputElement&&h.text===this.inputElement.value&&!i.i(s.isNullOrUndefined)(p))return this.isSelected&&(this.onChangeEvent(t),this.isSelectCustom=!1),void e.prototype.hidePopup.call(this,t);if("combobox"===this.getModuleName()&&""!==this.inputElement.value.trim()){var u=this.sortedData,c=this.typeOfData(u).typeof,d=i.i(n.a)(this.inputElement.value,this.liCollections,"Equal",!0,u,this.fields,c);this.selectedLI=d.item,i.i(s.isNullOrUndefined)(d.index)&&(d.index=i.i(n.a)(this.inputElement.value,this.liCollections,"StartsWith",!0,u,this.fields,c).index),this.activeIndex=d.index,i.i(s.isNullOrUndefined)(this.selectedLI)?a&&(this.isSelectCustom=!0,this.removeSelection()):this.updateSelectedItem(this.selectedLI,null,!0)}this.isEscapeKey||!this.isTyped||this.isInteracted||this.customValue(t)}i.i(s.isNullOrUndefined)(this.listData)&&this.allowCustom&&!i.i(s.isNullOrUndefined)(o)&&o!==this.value&&this.customValue(),e.prototype.hidePopup.call(this,t)},t.prototype.focusIn=function(){this.enabled&&(s.Browser.isDevice&&!this.isFiltering()&&(this.preventFocus=!0),e.prototype.focusIn.call(this))},t.prototype.clear=function(){this.value=null},t.prototype.focusOut=function(t){e.prototype.focusOut.call(this,t)},t.prototype.getItems=function(){return e.prototype.getItems.call(this)},t.prototype.getDataByValue=function(t){return e.prototype.getDataByValue.call(this,t)},t.prototype.renderHightSearch=function(){},p([i.i(s.Property)(!1)],t.prototype,"autofill",void 0),p([i.i(s.Property)(!0)],t.prototype,"allowCustom",void 0),p([i.i(s.Property)({})],t.prototype,"htmlAttributes",void 0),p([i.i(s.Property)(!1)],t.prototype,"allowFiltering",void 0),p([i.i(s.Property)(null)],t.prototype,"query",void 0),p([i.i(s.Property)(null)],t.prototype,"index",void 0),p([i.i(s.Property)(!0)],t.prototype,"showClearButton",void 0),p([i.i(s.Property)(!1)],t.prototype,"enableRtl",void 0),p([i.i(s.Event)()],t.prototype,"customValueSpecifier",void 0),p([i.i(s.Event)()],t.prototype,"filtering",void 0),p([i.i(s.Property)(null)],t.prototype,"valueTemplate",void 0),p([i.i(s.Property)("Never")],t.prototype,"floatLabelType",void 0),p([i.i(s.Property)(null)],t.prototype,"filterBarPlaceholder",void 0),p([i.i(s.Property)(null)],t.prototype,"cssClass",void 0),p([i.i(s.Property)(null)],t.prototype,"headerTemplate",void 0),p([i.i(s.Property)(null)],t.prototype,"footerTemplate",void 0),p([i.i(s.Property)(null)],t.prototype,"placeholder",void 0),p([i.i(s.Property)("100%")],t.prototype,"width",void 0),p([i.i(s.Property)("300px")],t.prototype,"popupHeight",void 0),p([i.i(s.Property)("100%")],t.prototype,"popupWidth",void 0),p([i.i(s.Property)(!1)],t.prototype,"readonly",void 0),p([i.i(s.Property)(null)],t.prototype,"text",void 0),p([i.i(s.Property)(null)],t.prototype,"value",void 0),t=p([s.NotifyPropertyChanges],t)}(l.b)},function(e,t,i){"use strict";i.d(t,"a",function(){return a});var s=i(0),l=(i.n(s),i(2)),n=(i.n(l),this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,s=arguments.length;i<s;i++){t=arguments[i];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},n.apply(this,arguments)}),o=this&&this.__awaiter||function(e,t,i,s){return new(i||(i=Promise))(function(l,n){function o(e){try{a(s.next(e))}catch(e){n(e)}}function r(e){try{a(s.throw(e))}catch(e){n(e)}}function a(e){e.done?l(e.value):new i(function(t){t(e.value)}).then(o,r)}a((s=s.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){function i(e){return function(t){return s([e,t])}}function s(i){if(l)throw new TypeError("Generator is already executing.");for(;a;)try{if(l=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{l=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var l,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r},a=function(){function e(e){var t=this;this.sentinelInfo={up:{check:function(e,i){var s=e.top-t.containerElementRect.top;return i.entered=s>=0,s+t.parent.listItemHeight*t.parent.virtualItemCount/2>=0},axis:"Y"},down:{check:function(e,i){var s=(t.parent.popupContentElement.clientHeight,e.bottom);return i.entered=e.bottom<=t.containerElementRect.bottom,s-t.parent.listItemHeight*t.parent.virtualItemCount/2<=t.parent.listItemHeight*t.parent.virtualItemCount/2},axis:"Y"}},this.parent=e,this.removeEventListener(),this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on("observe",this.observe,this),this.parent.on("setGeneratedData",this.setGeneratedData,this),this.parent.on("dataProcessAsync",this.dataProcessAsync,this),this.parent.on("setCurrentViewDataAsync",this.setCurrentViewDataAsync,this),this.parent.on("bindScrollEvent",this.bindScrollEvent,this))},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off("observe",this.observe),this.parent.off("setGeneratedData",this.setGeneratedData),this.parent.off("dataProcessAsync",this.dataProcessAsync),this.parent.off("setCurrentViewDataAsync",this.setCurrentViewDataAsync),this.parent.off("bindScrollEvent",this.bindScrollEvent))},e.prototype.bindScrollEvent=function(e){var t=this;this.component=e.component,this.observe(function(e){return t.scrollListener(e)})},e.prototype.observe=function(e){this.containerElementRect=this.parent.popupContentElement.getBoundingClientRect(),s.EventHandler.add(this.parent.popupContentElement,"wheel mousedown",this.popupScrollHandler,this),this.touchModule=new s.Touch(this.parent.popupContentElement,{scroll:this.popupScrollHandler.bind(this)}),s.EventHandler.add(this.parent.popupContentElement,"scroll",this.virtualScrollHandler(e),this)},e.prototype.getModuleName=function(){return"VirtualScroll"},e.prototype.popupScrollHandler=function(e){this.parent.isMouseScrollAction=!0,this.parent.isPreventScrollAction=!1},e.prototype.getPageQuery=function(e,t,i){return 0===i||this.parent.allowFiltering||"autocomplete"===this.component||(e=e.skip(t)),e},e.prototype.setGeneratedData=function(e,t){for(var i=0,s=this.parent.listData.length+this.parent.virtualItemStartIndex,l=this.parent.virtualItemStartIndex;l<s;l++){if(!this.parent.generatedDataObject[l]&&null!==t&&this.parent.listData.slice(i,i+1).length>0){var n=this.parent.listData.slice(i,i+1);n.length>0&&(this.parent.generatedDataObject[l]=n)}i++}},e.prototype.generateAndExecuteQueryAsync=function(e,t,n,o){void 0===t&&(t=0),void 0===n&&(n=0),void 0===o&&(o=!1);var r=this.parent.dataSource;if(!o)if(i.i(s.isNullOrUndefined)(this.parent.query))e=this.getPageQuery(e,t,n);else{var a=this.removeSkipAndTakeEvents(this.parent.query.clone());e=this.getPageQuery(a,t,n)}var h=this.parent.isCustomFilter;if("combobox"===this.component){var p=0;this.parent.dataSource instanceof l.DataManager?p=this.parent.dataSource.dataSource.json.length:this.parent.dataSource&&this.parent.dataSource.length>0&&(p=this.parent.dataSource.length),p>0&&(this.parent.isCustomFilter=p==this.parent.totalItemCount&&this.parent.queryString!=this.parent.typedString||this.parent.isCustomFilter)}this.parent.resetList(r,this.parent.fields,e),this.parent.isCustomFilter=h},e.prototype.removeSkipAndTakeEvents=function(e){return e.queries=e.queries.filter(function(e){return"onSkip"!==e.fn&&"onTake"!==e.fn}),e},e.prototype.setCurrentViewDataAsync=function(){for(var e=[],t=this.parent.viewPortInfo.startIndex;t<this.parent.viewPortInfo.endIndex;t++){var i=this.parent.generatedDataObject[t];i&&e.push(i[0])}this.parent.renderItems(e,this.parent.fields);var s=this.parent.list.getElementsByClassName("e-virtual-ddl")[0];s&&(s.style=this.parent.GetVirtualTrackHeight()),this.parent.UpdateSkeleton(),this.parent.liCollections=this.parent.list.querySelectorAll(".e-list-item");var l=this.parent.list.getElementsByClassName("e-virtual-ddl-content")[0];l&&(l.style=this.parent.getTransformValues()),this.parent.fields.groupBy&&this.parent.scrollStop()},e.prototype.generateQueryAndSetQueryIndexAsync=function(e,t){var i=!1,s=0,l=0,n=this.parent&&0!==this.parent.viewPortInfo.endIndex?this.parent.viewPortInfo.endIndex:0+this.parent.getItems().length;if(!t&&0!==n)for(var o=this.parent.viewPortInfo.startIndex;o<=n;o++)o in this.parent.generatedDataObject||(i?l=o===n?o:o+1:(i=!0,s=l=o));!i||this.parent.totalItemCount==s&&this.parent.totalItemCount==l||(this.parent.virtualItemStartIndex=s,this.parent.virtualItemEndIndex=l,this.generateAndExecuteQueryAsync(e,s,l)),this.setCurrentViewDataAsync()},e.prototype.dataProcessAsync=function(e){this.parent.selectedValueInfo=null,this.parent.virtualItemStartIndex=this.parent.viewPortInfo.startIndex,this.parent.virtualItemEndIndex=this.parent.viewPortInfo.endIndex,this.generateQueryAndSetQueryIndexAsync(new l.Query,e)},e.prototype.virtualScrollRefreshAsync=function(){return o(this,void 0,void 0,function(){return r(this,function(e){switch(e.label){case 0:return this.parent.isCustomFilter=!(this.parent.isTyped||"combobox"===this.component&&this.parent.allowFiltering&&this.parent.queryString!=this.parent.typedString||!i.i(s.isNullOrUndefined)(this.parent.filterInput)&&!i.i(s.isNullOrUndefined)(this.parent.filterInput.value)&&""!==this.parent.filterInput.value&&"combobox"!==this.component)&&!("autocomplete"===this.component&&null!=this.parent.value)||this.parent.isCustomFilter,(this.parent.allowFiltering||"autocomplete"===this.component)&&(i.i(s.isNullOrUndefined)(this.parent.typedString)||"combobox"===this.component&&!i.i(s.isNullOrUndefined)(this.parent.typedString)&&this.parent.allowFiltering?(this.parent.getSkeletonCount(!0),"combobox"===this.component&&(this.parent.skeletonCount=0!=this.parent.totalItemCount&&this.parent.totalItemCount<2*this.parent.itemCount?0:this.parent.skeletonCount)):(this.parent.viewPortInfo.endIndex>=this.parent.dataCount&&(this.parent.viewPortInfo.endIndex=this.parent.dataCount),this.parent.viewPortInfo.startIndex>=this.parent.dataCount&&(this.parent.viewPortInfo.startIndex=this.parent.dataCount-this.parent.itemCount))),[4,this.dataProcessAsync()];case 1:return e.sent(),null!=this.parent.keyboardEvent&&this.parent.handleVirtualKeyboardActions(this.parent.keyboardEvent,this.parent.pageCount),this.parent.isCustomFilter=!1,[2]}})})},e.prototype.scrollListener=function(e){var t=this;if(!this.parent.isPreventScrollAction){var l=e.sentinel,o=this.parent.previousStartIndex;if(this.parent.viewPortInfo=this.getInfoFromView(e.direction,l,e.offset,!1),this.parent.isUpwardScrolling=!1,this.parent.previousStartIndex===o||this.parent.isKeyBoardAction){if(this.parent.isScrollActionTriggered){this.parent.isPreventKeyAction=!1,this.parent.isScrollActionTriggered=!1;var r=this.parent.list.querySelectorAll(".e-virtual-list").length,a=this.parent.list.querySelector(".e-list-item"),h=e.offset.top-a.offsetHeight*r;this.parent.list.getElementsByClassName("e-virtual-ddl-content")[0].style.transform="translate(0px,"+h+"px)"}}else this.parent.isScrollActionTriggered=!1,this.parent.currentPageNumber=this.parent.viewPortInfo.currentPageNumber,this.parent.virtualListInfo=n({},this.parent.viewPortInfo),this.parent.isPreventKeyAction=!0,this.parent.isVirtualScrolling=!0,setTimeout(function(){t.parent.pageCount=t.parent.getPageCount(),t.virtualScrollRefreshAsync().then(function(){t.parent.popupObj&&(t.parent.list=t.parent.popupObj.element.querySelector(".e-content")||i.i(s.select)(".e-content"),t.parent.updateSelectionList(),t.parent.liCollections=t.parent.getItems()),t.parent.isKeyBoardAction=!1,t.parent.isVirtualScrolling=!1,t.parent.isPreventKeyAction=!1})},5);this.parent.previousInfo=this.parent.viewPortInfo}},e.prototype.getPageCount=function(e,t){void 0===t&&(t=!1);var i=e&&e.querySelector(".e-content");if(i){var s=i.classList.contains("e-nodata")?null:getComputedStyle(i.querySelectorAll(".e-list-item")[0],null).getPropertyValue("height"),l=i.getBoundingClientRect().height/parseInt(s,10);return t?l:Math.round(l)}return 0},e.prototype.getRowHeight=function(){return i.i(s.isNullOrUndefined)(this.parent.liCollections)||0==this.parent.liCollections.length?0:Math.ceil(this.parent.liCollections[0].getBoundingClientRect().height)},e.prototype.getInfoFromView=function(e,t,l,n){var o={direction:e,sentinelInfo:t,offsets:l,startIndex:this.parent.previousStartIndex,endIndex:this.parent.previousEndIndex},r=this.parent.popupContentElement.getBoundingClientRect().height,a=this.parent.listItemHeight,h=l.top/a,p=r/a,u=h+p,c=this.parent.virtualItemCount/4,d=this.parent.totalItemCount;if("down"===o.direction){var m=Math.round(u)-Math.round(c);if(i.i(s.isNullOrUndefined)(o.startIndex)||u>o.startIndex+Math.round(this.parent.virtualItemCount/2+c)&&o.endIndex!==d){o.startIndex=m>=0?Math.round(m):0,o.startIndex=o.startIndex>h?Math.floor(h):o.startIndex;var f=o.startIndex+this.parent.virtualItemCount;o.startIndex=f<u?Math.ceil(u)-this.parent.virtualItemCount:o.startIndex,o.endIndex=f<d?f:d,o.startIndex=f>=d?o.endIndex-this.parent.virtualItemCount>0?o.endIndex-this.parent.virtualItemCount:0:o.startIndex,o.currentPageNumber=Math.ceil(o.endIndex/this.parent.virtualItemCount)}}else if("up"===o.direction&&o.startIndex&&o.endIndex){var v=Math.round((o.startIndex*a+c*a)/a);if(h<v){var g=c>p?c:p+p/4,f=Math.round(h+g);o.endIndex=f<d?f:d;var m=o.endIndex-this.parent.virtualItemCount;o.startIndex=m>0?m:0,o.endIndex=m<0?this.parent.virtualItemCount:o.endIndex,o.currentPageNumber=Math.ceil(o.startIndex/this.parent.virtualItemCount)}}return n?this.parent.scrollPreStartIndex=o.startIndex:(this.parent.previousStartIndex=o.startIndex,this.parent.startIndex=o.startIndex,this.parent.previousEndIndex=o.endIndex),o},e.prototype.virtualScrollHandler=function(e){var t=this,l="chrome"===s.Browser.info.name?200:100,n=0,o=i.i(s.debounce)(e,l),r=i.i(s.debounce)(e,50);return function(e){var i=e.target.scrollTop,s=e.target.scrollLeft,l=n<i&&!t.parent.isUpwardScrolling?"down":"up";n=i;var a=t.sentinelInfo[l],h=t.parent.scrollPreStartIndex,p={top:i,left:s};if(t.parent.list.querySelectorAll(".e-virtual-list").length>0){t.getInfoFromView(l,a,p,!0);if(t.parent.scrollPreStartIndex!=h&&!t.parent.isPreventScrollAction){t.parent.isScrollActionTriggered=!0;t.parent.list.querySelector(".e-virtual-ddl-content").style.transform="translate(0px,"+i+"px)"}}var u=o;"X"===a.axis&&(u=r),u({direction:l,sentinel:a,offset:{top:i,left:s},focusElement:document.activeElement})}},e.prototype.destroy=function(){this.removeEventListener()},e}()},function(e,t,i){"use strict";function s(e,t,s,n,o,r,a){var f=i.i(p.createElement)("span",{className:u}),v=i.i(p.createElement)("label",{className:c}),g=s.getAttribute("id")?s.getAttribute("id"):i.i(p.getUniqueID)("ej2_multiselect");s.id=g,i.i(p.isNullOrUndefined)(s.id)||""===s.id||(v.id="label_"+s.id.replace(/ /g,"_"),i.i(p.attributes)(n,{"aria-labelledby":v.id})),i.i(p.isNullOrUndefined)(n.placeholder)||""===n.placeholder||(v.innerText=h(n.placeholder),n.removeAttribute("placeholder")),v.innerText=h(a),t.appendChild(f),t.appendChild(v),e.classList.add("e-float-input"),l(o,v),"Always"===r&&(v.classList.contains(m)&&i.i(p.removeClass)([v],m),i.i(p.addClass)([v],d))}function l(e,t){e&&e.length>0?(i.i(p.addClass)([t],d),i.i(p.removeClass)([t],m)):(i.i(p.removeClass)([t],d),i.i(p.addClass)([t],m))}function n(e,t,s,l,n,r,a){var h,d=t.querySelector("."+c),m=t.querySelector("."+u);i.i(p.isNullOrUndefined)(d)?(h=null!==a?a:"",o(n,l,h)):(h=d.innerText,i.i(p.detach)(s.querySelector("."+c)),o(n,l,h),i.i(p.isNullOrUndefined)(m)||i.i(p.detach)(s.querySelector("."+u))),e.classList.remove("e-float-input")}function o(e,t,i){e&&e.length?t.placeholder="":t.placeholder=i}function r(e,t){e.classList.add("e-input-focus");var s=t.querySelector("."+c);i.i(p.isNullOrUndefined)(s)||(i.i(p.addClass)([s],d),s.classList.contains(m)&&i.i(p.removeClass)([s],m))}function a(e,t,s,l,n){e.classList.remove("e-input-focus");var o=t.querySelector("."+c);s&&s.length<=0&&"Auto"===l&&!i.i(p.isNullOrUndefined)(o)&&(o.classList.contains(d)&&i.i(p.removeClass)([o],d),i.i(p.addClass)([o],m))}function h(e){var t="";if(!i.i(p.isNullOrUndefined)(e)&&""!==e){var s=document.createElement("span");s.innerHTML='<input  placeholder="'+e+'"/>';t=s.children[0].placeholder}return t}t.a=s,t.b=l,t.c=n,t.d=o,t.e=r,t.f=a,t.g=h;var p=i(0),u=(i.n(p),"e-float-line"),c="e-float-text",d="e-label-top",m="e-label-bottom"},function(e,t){e.exports=n},function(e,t,i){"use strict";var s=i(22);i.d(t,"a",function(){return s.a})},function(e,t,i){"use strict";var s=i(9);i.d(t,"a",function(){return s.a})},function(e,t,i){"use strict";var s=i(5);i.d(t,"a",function(){return s.b}),i.d(t,"b",function(){return s.a}),i.d(t,"c",function(){return s.d}),i.d(t,"d",function(){return s.c});var l=i(6);i.d(t,"e",function(){return l.a}),i.d(t,"f",function(){return l.b});var n=i(10);i.d(t,"g",function(){return n.a})},function(e,t,i){"use strict";var s=i(1);i.d(t,"a",function(){return s.b}),i.d(t,"b",function(){return s.a}),i.d(t,"c",function(){return s.c})},function(e,t,i){"use strict";var s=i(7);i.d(t,"a",function(){return s.a}),i.d(t,"b",function(){return s.b});var l=i(10);i.d(t,"c",function(){return l.a})},function(e,t,i){"use strict";var s=i(23);i.d(t,"a",function(){return s.a}),i.d(t,"b",function(){return s.b}),i.d(t,"c",function(){return s.c})},function(e,t,i){"use strict";var s=i(25);i.d(t,"a",function(){return s.a}),i.d(t,"b",function(){return s.b}),i.d(t,"c",function(){return s.c})},function(e,t,i){"use strict";var s=i(26);i.d(t,"a",function(){return s.a})},function(e,t,i){"use strict";var s=i(28);i.d(t,"a",function(){return s.a});var l=i(27);i.d(t,"b",function(){return l.a});var n=i(11);i.d(t,"c",function(){return n.a}),i.d(t,"d",function(){return n.b}),i.d(t,"e",function(){return n.c}),i.d(t,"f",function(){return n.d}),i.d(t,"g",function(){return n.e}),i.d(t,"h",function(){return n.f}),i.d(t,"i",function(){return n.g})},function(e,t,i){"use strict";i.d(t,"a",function(){return d});var s=i(0),l=(i.n(s),i(7)),n=i(9),o=i(6),r=i(5),a=i(1),h=i(3),p=(i.n(h),i(2)),u=(i.n(p),this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}()),c=this&&this.__decorate||function(e,t,i,s){var l,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var r=e.length-1;r>=0;r--)(l=e[r])&&(o=(n<3?l(o):n>3?l(t,i,o):l(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o};l.a.root="e-autocomplete",l.a.icon="e-input-group-icon e-ddl-icon e-search-icon";var d=function(e){function t(t,i){var s=e.call(this,t,i)||this;return s.isFiltered=!1,s.searchList=!1,s}return u(t,e),t.prototype.preRender=function(){e.prototype.preRender.call(this)},t.prototype.getLocaleName=function(){return"auto-complete"},t.prototype.getNgDirective=function(){return"EJS-AUTOCOMPLETE"},t.prototype.getQuery=function(e){var t=e?e.clone():this.query?this.query.clone():new p.Query,l=""!==this.queryString||i.i(s.isNullOrUndefined)(this.value)?this.filterType:"equal",n=""!==this.queryString||i.i(s.isNullOrUndefined)(this.value)?this.queryString:this.value;if(this.isFiltered)return t;if(null!==this.queryString&&""!==this.queryString){var o=this.typeOfData(this.dataSource).typeof;if((this.dataSource instanceof p.DataManager||"string"!==o)&&"number"!==o){if(!this.enableVirtualization||this.enableVirtualization&&(!(this.dataSource instanceof p.DataManager)||this.dataSource instanceof p.DataManager&&this.virtualGroupDataSource)){var r=i.i(s.isNullOrUndefined)(this.fields.value)?"":this.fields.value;t.where(r,l,n,this.ignoreCase,this.ignoreAccent)}}else t.where("",l,n,this.ignoreCase,this.ignoreAccent)}if(!i.i(s.isNullOrUndefined)(this.suggestionCount)&&!this.enableVirtualization){if(20!==this.suggestionCount)for(var a=0;a<t.queries.length;a++)"onTake"===t.queries[a].fn&&t.queries.splice(a,1);t.take(this.suggestionCount)}if(this.enableVirtualization&&(!(this.dataSource instanceof p.DataManager)||this.dataSource instanceof p.DataManager&&this.virtualGroupDataSource)){var h=this.getTakeValue();t.skip(this.virtualItemStartIndex),t.take(h),t.requiresCount()}return t},t.prototype.searchLists=function(t){var l=this;if(this.isTyped=!0,this.isDataFetched=this.isSelectCustom=!1,this.checkAndResetCache(),i.i(s.isNullOrUndefined)(this.list)&&e.prototype.renderList.call(this,t,!0),this.queryString=this.filterInput.value,"mousedown"!==t.type&&(40===t.keyCode||38===t.keyCode))return this.queryString=""===this.queryString?null:this.queryString,this.beforePopupOpen=!0,void this.resetList(this.dataSource,this.fields,null,t);this.isSelected=!1,this.activeIndex=null;var n={preventDefaultAction:!1,text:this.filterInput.value,updateData:function(e,t,i){n.cancel||(l.isFiltered=!0,l.filterAction(e,t,i))},cancel:!1};this.trigger("filtering",n,function(e){e.cancel||l.isFiltered||e.preventDefaultAction||(l.searchList=!0,l.filterAction(l.dataSource,null,l.fields,t))})},t.prototype.filter=function(e,t,i){this.isFiltered=!0,this.filterAction(e,t,i)},t.prototype.filterAction=function(e,t,i,s){this.beforePopupOpen=!0;var l=this.list.classList.contains("e-nodata");if(""!==this.queryString&&this.queryString.length>=this.minLength){if(this.enableVirtualization&&this.isFiltering()&&this.isTyped&&(this.isPreventScrollAction=!0,this.list.scrollTop=0,this.previousStartIndex=0,this.virtualListInfo=null),this.resetList(e,i,t,s),this.enableVirtualization&&l&&!this.list.classList.contains("e-nodata")&&(this.list.querySelector(".e-virtual-ddl-content")||this.list.appendChild(this.createElement("div",{className:"e-virtual-ddl-content",styles:this.getTransformValues()})).appendChild(this.list.querySelector(".e-list-parent")),!this.list.querySelector(".e-virtual-ddl"))){var n=this.createElement("div",{id:this.element.id+"_popup",className:"e-virtual-ddl",styles:this.GetVirtualTrackHeight()});document.getElementsByClassName("e-popup")[0].querySelector(".e-dropdownbase").appendChild(n)}("autocomplete"===this.getModuleName()&&!(this.dataSource instanceof p.DataManager)||"autocomplete"===this.getModuleName()&&this.dataSource instanceof p.DataManager&&0!=this.totalItemCount)&&this.getFilteringSkeletonCount()}else this.hidePopup(s),this.beforePopupOpen=!1;this.renderReactTemplates()},t.prototype.clearAll=function(t,l){(i.i(s.isNullOrUndefined)(l)||!i.i(s.isNullOrUndefined)(l)&&i.i(s.isNullOrUndefined)(l.dataSource))&&(e.prototype.clearAll.call(this,t),this.checkAndResetCache()),this.beforePopupOpen&&this.hidePopup()},t.prototype.onActionComplete=function(t,n,o,r){this.enableVirtualization||(this.fixedHeaderElement=null),("autocomplete"===this.getModuleName()&&!(this.dataSource instanceof p.DataManager)||"autocomplete"===this.getModuleName()&&this.dataSource instanceof p.DataManager&&0!=this.totalItemCount)&&this.getFilteringSkeletonCount(),e.prototype.onActionComplete.call(this,t,n,o);var a=this.list.querySelector("."+l.a.li);i.i(s.isNullOrUndefined)(a)||i.i(s.removeClass)([a],l.a.focus),this.postBackAction()},t.prototype.postBackAction=function(){if(this.autofill&&!i.i(s.isNullOrUndefined)(this.liCollections[0])&&this.searchList){var t=[this.liCollections[0]],l=this.listData,n=this.typeOfData(l).typeof,o=i.i(r.a)(this.inputElement.value,t,"StartsWith",this.ignoreCase,l,this.fields,n);this.searchList=!1,i.i(s.isNullOrUndefined)(o.item)||e.prototype.setAutoFill.call(this,this.liCollections[0],!0)}},t.prototype.setSelection=function(t,l){if(!this.isValidLI(t))return void(this.selectedLI=t);if(!i.i(s.isNullOrUndefined)(l)&&"keydown"===l.type&&"enter"!==l.action&&"tab"!==l.action&&this.isValidLI(t)){var n=this.getFormattedValue(t.getAttribute("data-value"));if(this.activeIndex=this.getIndexByValue(n),this.setHoverList(t),this.selectedLI=t,this.setScrollPosition(l),this.autofill&&this.isPopupOpen){this.preventAutoFill=!1;var o=l&&"down"===l.action||"up"===l.action||"home"===l.action||"end"===l.action||"pageUp"===l.action||"pageDown"===l.action;e.prototype.setAutoFill.call(this,t,o)}}else e.prototype.setSelection.call(this,t,l)},t.prototype.listOption=function(t,l){var n=this,r=e.prototype.listOption.call(this,t,l);if(i.i(s.isNullOrUndefined)(r.itemCreated))r.itemCreated=function(e){if(n.highlight)if(n.element.tagName===n.getNgDirective()&&n.itemTemplate)setTimeout(function(){i.i(o.a)(e.item,n.queryString,n.ignoreCase,n.filterType)},0);else{var t=/<[^>]*>/g.test(e.item.innerText);t&&(e.item.innerText=e.item.innerText.replace(/[\u00A0-\u9999<>&]/g,function(e){return"&#"+e.charCodeAt(0)+";"})),i.i(o.a)(e.item,n.queryString,n.ignoreCase,n.filterType)}};else{var a=r.itemCreated;r.itemCreated=function(e){n.highlight&&i.i(o.a)(e.item,n.queryString,n.ignoreCase,n.filterType),a.apply(n,[e])}}return r},t.prototype.isFiltering=function(){return!0},t.prototype.renderPopup=function(t){this.enableVirtualization||(this.list.scrollTop=0),e.prototype.renderPopup.call(this,t)},t.prototype.isEditTextBox=function(){return!1},t.prototype.isPopupButton=function(){return this.showPopupButton},t.prototype.isSelectFocusItem=function(e){return!1},t.prototype.setInputValue=function(e,t){var i=t&&t.text?t.text:t?t.value:t,s=e&&e.text?e.text:e&&e.value?e.value:this.value;if(!s||""!==this.typedString||this.allowCustom||this.dataSource instanceof p.DataManager)e&&(e.text?this.setOldText(i):this.setOldValue(i));else{var l="string"===this.typeOfData(this.dataSource).typeof?"":this.fields.value,n=this.getItems().length,o=new p.Query,r=this;new p.DataManager(this.dataSource).executeQuery(o.where(new p.Predicate(l,"equal",s))).then(function(t){t.result.length>0?(r.value=""!==l?t.result[0][r.fields.value].toString():t.result[0].toString(),r.addItem(t.result,n),r.updateValues()):e&&e.text?r.setOldText(i):e&&e.value?r.setOldValue(i):r.updateValues()})}},t.prototype.showPopup=function(e){if(this.enabled){if(this.beforePopupOpen)return void this.refreshPopup();this.beforePopupOpen=!0,this.preventAutoFill=!0,i.i(s.isNullOrUndefined)(this.list)?this.renderList(e):this.resetList(this.dataSource,this.fields,null,e)}},t.prototype.hidePopup=function(t){e.prototype.hidePopup.call(this,t),this.activeIndex=null,this.virtualListInfo=this.viewPortInfo,this.previousStartIndex=this.viewPortInfo.startIndex,this.startIndex=this.viewPortInfo.startIndex,this.previousEndIndex=this.viewPortInfo.endIndex},t.prototype.onPropertyChanged=function(t,n){"autocomplete"===this.getModuleName()&&this.setUpdateInitial(["fields","query","dataSource"],t);for(var o=0,r=Object.keys(t);o<r.length;o++){var a=r[o];switch(a){case"showPopupButton":if(this.showPopupButton){var p=h.Input.appendSpan(l.a.icon,this.inputWrapper.container,this.createElement);this.inputWrapper.buttons[0]=p,h.Input.calculateWidth(this.inputElement,this.inputWrapper.container),i.i(s.isNullOrUndefined)(this.inputWrapper.buttons[0])||i.i(s.isNullOrUndefined)(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])||"Never"===this.floatLabelType||this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon"),this.inputWrapper&&this.inputWrapper.buttons&&this.inputWrapper.buttons[0]&&s.EventHandler.add(this.inputWrapper.buttons[0],"click",this.dropDownClick,this)}else i.i(s.detach)(this.inputWrapper.buttons[0]),this.inputWrapper.buttons[0]=null;break;default:var u=this.getPropObject(a,t,n);e.prototype.onPropertyChanged.call(this,u.newProperty,u.oldProperty)}}},t.prototype.renderHightSearch=function(){if(this.highlight)for(var e=0;e<this.liCollections.length;e++){var t=this.ulElement.querySelector(".e-active");t||(i.i(o.b)(this.liCollections[e]),i.i(o.a)(this.liCollections[e],this.queryString,this.ignoreCase,this.filterType))}},t.prototype.getModuleName=function(){return"autocomplete"},t.prototype.render=function(){e.prototype.render.call(this)},c([i.i(s.Complex)({value:null,iconCss:null,groupBy:null},a.b)],t.prototype,"fields",void 0),c([i.i(s.Property)(!0)],t.prototype,"ignoreCase",void 0),c([i.i(s.Property)(!1)],t.prototype,"showPopupButton",void 0),c([i.i(s.Property)(!1)],t.prototype,"highlight",void 0),c([i.i(s.Property)(20)],t.prototype,"suggestionCount",void 0),c([i.i(s.Property)({})],t.prototype,"htmlAttributes",void 0),c([i.i(s.Property)(null)],t.prototype,"query",void 0),c([i.i(s.Property)(1)],t.prototype,"minLength",void 0),c([i.i(s.Property)("Contains")],t.prototype,"filterType",void 0),c([i.i(s.Event)()],t.prototype,"filtering",void 0),c([i.i(s.Property)(null)],t.prototype,"index",void 0),c([i.i(s.Property)("Never")],t.prototype,"floatLabelType",void 0),c([i.i(s.Property)(null)],t.prototype,"valueTemplate",void 0),c([i.i(s.Property)(null)],t.prototype,"filterBarPlaceholder",void 0),c([i.i(s.Property)(!1)],t.prototype,"allowFiltering",void 0),c([i.i(s.Property)(null)],t.prototype,"text",void 0),t=c([s.NotifyPropertyChanges],t)}(n.a)},function(e,t,i){"use strict";i.d(t,"a",function(){return C}),i.d(t,"b",function(){return b}),i.d(t,"c",function(){return E});var s=i(3),l=(i.n(s),i(8)),n=(i.n(l),i(0)),o=(i.n(n),i(2)),r=(i.n(o),i(4)),a=(i.n(r),i(29)),h=(i.n(a),this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}()),p=this&&this.__decorate||function(e,t,i,s){var l,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var r=e.length-1;r>=0;r--)(l=e[r])&&(o=(n<3?l(o):n>3?l(t,i,o):l(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},u="e-input-group-icon e-ddt-icon e-icons",c="e-show-chip",d="e-show-clear",m="e-chip-input",f="e-input-focus",v="e-icon-hide",g="e-check",y="e-no-data",C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return h(t,e),p([i.i(n.Property)("child")],t.prototype,"child",void 0),p([i.i(n.Property)([])],t.prototype,"dataSource",void 0),p([i.i(n.Property)("expanded")],t.prototype,"expanded",void 0),p([i.i(n.Property)("hasChildren")],t.prototype,"hasChildren",void 0),p([i.i(n.Property)("htmlAttributes")],t.prototype,"htmlAttributes",void 0),p([i.i(n.Property)("iconCss")],t.prototype,"iconCss",void 0),p([i.i(n.Property)("imageUrl")],t.prototype,"imageUrl",void 0),p([i.i(n.Property)("parentValue")],t.prototype,"parentValue",void 0),p([i.i(n.Property)(null)],t.prototype,"query",void 0),p([i.i(n.Property)("selectable")],t.prototype,"selectable",void 0),p([i.i(n.Property)("selected")],t.prototype,"selected",void 0),p([i.i(n.Property)(null)],t.prototype,"tableName",void 0),p([i.i(n.Property)("text")],t.prototype,"text",void 0),p([i.i(n.Property)("tooltip")],t.prototype,"tooltip",void 0),p([i.i(n.Property)("value")],t.prototype,"value",void 0),t}(n.ChildProperty),b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return h(t,e),p([i.i(n.Property)(!1)],t.prototype,"autoCheck",void 0),p([i.i(n.Property)("Auto")],t.prototype,"expandOn",void 0),p([i.i(n.Property)(!1)],t.prototype,"loadOnDemand",void 0),t}(n.ChildProperty),E=function(e){function t(t,i){var s=e.call(this,t,i)||this;return s.filterTimer=null,s.isFilteredData=!1,s.isFilterRestore=!1,s.selectedData=[],s.filterDelayTime=300,s.isClicked=!1,s.isCheckAllCalled=!1,s.isFromFilterChange=!1,s}return h(t,e),t.prototype.getPersistData=function(){var e=["value"];return this.addOnPersist(e)},t.prototype.getLocaleName=function(){return"drop-down-tree"},t.prototype.preRender=function(){this.inputFocus=!1,this.isPopupOpen=!1,this.isFirstRender=!0,this.isInitialized=!1,this.currentText=null,this.currentValue=null,this.oldValue=null,this.removeValue=!1,this.selectedText=[],this.treeItems=[],this.dataValue=null,this.isNodeSelected=!1,this.isDynamicChange=!1,this.clearIconWidth=0,this.headerTemplateId=this.element.id+"HeaderTemplate",this.footerTemplateId=this.element.id+"FooterTemplate",this.actionFailureTemplateId=this.element.id+"ActionFailureTemplate",this.noRecordsTemplateId=this.element.id+"NoRecordsTemplate",this.customTemplateId=this.element.id+"CustomTemplate",this.keyConfigs={escape:"escape",altUp:"alt+uparrow",altDown:"alt+downarrow",tab:"tab",shiftTab:"shift+tab",end:"end",enter:"enter",home:"home",moveDown:"downarrow",moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",ctrlDown:"ctrl+downarrow",ctrlUp:"ctrl+uparrow",ctrlEnter:"ctrl+enter",ctrlHome:"ctrl+home",ctrlEnd:"ctrl+end",shiftDown:"shift+downarrow",shiftUp:"shift+uparrow",shiftEnter:"shift+enter",shiftHome:"shift+home",shiftEnd:"shift+end",csDown:"ctrl+shift+downarrow",csUp:"ctrl+shift+uparrow",csEnter:"ctrl+shift+enter",csHome:"ctrl+shift+home",csEnd:"ctrl+shift+end",space:"space",ctrlA:"ctrl+A"}},t.prototype.render=function(){var e=i.i(n.select)("#"+this.element.id+"_tree",document);if(e){var t=i.i(n.select)("#"+this.element.id+"_options",document);i.i(n.detach)(t||e.parentElement)}"INPUT"===this.element.tagName?(this.inputEle=this.element,i.i(n.isNullOrUndefined)(this.inputEle.getAttribute("role"))&&(this.inputEle.setAttribute("aria-expanded","false"),this.inputEle.setAttribute("role","combobox"),this.inputEle.setAttribute("aria-haspopup","tree"),this.inputEle.setAttribute("aria-controls",this.element.id+"_options")),i.i(n.isNullOrUndefined)(this.inputEle.getAttribute("type"))&&this.inputEle.setAttribute("type","text")):(this.inputEle=this.createElement("input",{attrs:{role:"textbox",type:"text"}}),this.element.parentElement.insertBefore(this.inputEle,this.element)),this.inputObj=s.Input.createInput({element:this.inputEle,floatLabelType:this.floatLabelType,buttons:this.showDropDownIcon?[u]:null,properties:{readonly:!0,placeholder:this.placeholder,enabled:this.enabled,cssClass:this.cssClass,enableRtl:this.enableRtl}},this.createElement),this.inputWrapper=this.inputObj.container,this.inputWrapper.classList.contains("e-input-group")||this.inputWrapper.classList.add("e-input-group"),this.showDropDownIcon&&this.inputWrapper.classList.add("e-show-dd-icon"),this.element.tagName===this.getDirective()&&this.element.appendChild(this.inputWrapper),this.createHiddenElement(),this.createClearIcon(),this.inputWrapper.classList.add("e-ddt"),this.setElementWidth(this.width),this.updateDataAttribute(),this.setHTMLAttributes(),this.setAttributes(),this.popupDiv=this.createElement("div",{className:"e-popup-content"}),this.popupDiv.classList.add("e-dropdown"),this.tree=this.createElement("div",{id:this.element.id+"_tree"}),this.popupDiv.appendChild(this.tree),document.body.appendChild(this.popupDiv),this.wireTreeEvents(),i.i(n.addClass)([this.popupDiv],"e-ddt-icon-hide"),this.renderTree(),this.isRemoteData=this.fields.dataSource instanceof o.DataManager,(this.allowMultiSelection||this.showCheckBox)&&("Delimiter"!==this.mode&&this.createChip(),this.wrapText||"Custom"===this.mode||(this.overFlowWrapper=this.createElement("span",{className:"e-overflow "+v}),this.inputWrapper.insertBefore(this.overFlowWrapper,this.hiddenElement),"Box"!==this.mode&&i.i(n.addClass)([this.overFlowWrapper],"e-show-text"))),this.isRemoteData||(this.setTreeValue(),this.setTreeText(),this.updateHiddenValue(),this.setSelectedValue(),this.wrapText||this.updateView()),this.wireEvents();var l=i.i(n.select)(".e-list-parent",this.treeObj.element);l&&l.getAttribute("aria-multiselectable")&&l.removeAttribute("aria-multiselectable"),this.oldValue=this.value,this.isInitialized=!0,this.hasTemplate=this.itemTemplate||this.headerTemplate||this.footerTemplate||this.actionFailureTemplate||this.noRecordsTemplate||this.customTemplate,this.renderComplete()},t.prototype.hideCheckAll=function(e){var t=i.i(n.isNullOrUndefined)(this.popupEle)?null:this.popupEle.querySelector(".e-selectall-parent");i.i(n.isNullOrUndefined)(t)||(e&&!t.classList.contains("e-hide-selectall")?i.i(n.addClass)([t],"e-hide-selectall"):!e&&t.classList.contains("e-hide-selectall")&&i.i(n.removeClass)([t],"e-hide-selectall"))},t.prototype.renderFilter=function(){this.filterContainer=this.createElement("div",{id:this.element.id+"_filter_wrap",className:"e-filter-wrap"});var e=this.createElement("input",{id:this.element.id+"_filter",attrs:{autocomplete:"off","aria-label":this.filterBarPlaceholder}});this.filterContainer.appendChild(e),i.i(n.prepend)([this.filterContainer],this.popupEle),this.filterObj=new s.TextBox({value:"",showClearButton:!0,placeholder:this.filterBarPlaceholder,input:this.filterChangeHandler.bind(this)}),this.filterObj.appendTo("#"+this.element.id+"_filter")},t.prototype.filterChangeHandler=function(e){var t=this;i.i(n.isNullOrUndefined)(e.value)||(window.clearTimeout(this.filterTimer),this.filterTimer=window.setTimeout(function(){t.filterHandler(e.value,e.event)},this.filterDelayTime))},t.prototype.isChildObject=function(){return"object"==typeof this.treeObj.fields.child},t.prototype.filterHandler=function(e,t){var i=this;this.isFromFilterChange=!0,this.isFilteredData||(this.isRemoteData&&(this.treeObj.expandedNodes=[]),this.treeData=this.treeObj.getTreeData());var s=this.cloneFields(this.fields),l={cancel:!1,preventDefaultAction:!1,event:t,text:e,fields:s};this.trigger("filtering",l,function(t){if(!t.cancel){var s=!1,l=void 0;if(i.isFilteredData=!0,""===e?(i.isFilteredData=!1,i.isFilterRestore=!0,l=i.cloneFields(i.fields)):t.preventDefaultAction?l=t.fields:1===i.treeDataType?l=i.selfReferencefilter(e,t.fields):i.fields.dataSource instanceof o.DataManager?(l=i.remoteDataFilter(e,t.fields),l.child=i.fields.child,i.treeObj.fields=i.getTreeFields(t.fields),i.treeObj.dataBind(),s=!0):l=i.nestedFilter(e,t.fields),i.hideCheckAll(i.isFilteredData),s)return;if(i.isRemoteData&&(i.isChildObject()?l.child=i.fields.child:l=t.fields),i.treeObj.fields=i.getTreeFields(l),i.treeObj.dataBind(),i.hasTemplate&&i.portals&&i.treeObj.portals){for(var n=0;n<i.treeObj.portals.length;n++)-1==i.portals.indexOf(i.treeObj.portals[n])&&i.portals.push(i.treeObj.portals[n]);i.isReact&&i.renderReactTemplates()}}})},t.prototype.remoteDataFilter=function(e,t){var s=this;return t.dataSource=this.treeData.map(function(t){return s.remoteChildFilter(e,t)}).filter(function(e){return!i.i(n.isNullOrUndefined)(e)}),t},t.prototype.remoteChildFilter=function(e,t,s,l){var o=this.isChildObject()?t.child:t[this.fields.child];if(i.i(n.isNullOrUndefined)(o))return this.isMatchedNode(e,t,s,l)?t:null;for(var r=[],a=0;a<o.length;a++){var h=this.remoteChildFilter(e,o[a],!0,!0);i.i(n.isNullOrUndefined)(h)||r.push(h)}var p=Object.assign({},t);return l=!1,0!==r.length?p.child=r:(p.child=null,p=this.isMatchedNode(e,p)?p:null),p},t.prototype.nestedFilter=function(e,t){for(var s=[],l=0;l<this.treeData.length;l++){var o=this.nestedChildFilter(e,this.treeData[l]);i.i(n.isNullOrUndefined)(o)||s.push(o)}return t.dataSource=s,t},t.prototype.nestedChildFilter=function(e,t){var s=t[this.fields.child];if(i.i(n.isNullOrUndefined)(s))return this.isMatchedNode(e,t)?t:null;for(var l=[],o=0;o<s.length;o++){var r=this.nestedChildFilter(e,s[o]);i.i(n.isNullOrUndefined)(r)||l.push(r)}var a=Object.assign({},t);return 0!==l.length?(a[this.fields.child]=l,a):(a[this.fields.child]=null,this.isMatchedNode(e,a)?a:null)},t.prototype.selfReferencefilter=function(e,t){for(var s=[],l=[],o=0;o<this.treeData.length;o++)this.isMatchedNode(e,this.treeData[o])&&s.push(this.treeData[o]);for(var o=0;o<s.length;o++)if(-1===l.indexOf(s[o])){l.push(s[o]);for(var r=s[o][this.fields.parentValue];!i.i(n.isNullOrUndefined)(r);){for(var a=null,h=0;h<this.treeData.length;h++){var p=this.treeData[h][this.fields.value];if(!i.i(n.isNullOrUndefined)(p)&&p===r){a=this.treeData[h];break}}if(i.i(n.isNullOrUndefined)(a)||-1!==l.indexOf(a))break;l.push(a),r=a[this.fields.parentValue]}}return t.dataSource=l,t},t.prototype.isMatchedNode=function(e,t,i,s){var l;if(!(l=i&&s&&this.isChildObject()?t[this.fields.child.text]:t[this.fields.text])){for(var n=this.fields.child;!t[n.text];)n=n.child;l=t[n.text]}return this.ignoreCase&&(l=l.toLowerCase(),e=e.toLowerCase()),this.ignoreAccent&&(l=o.DataUtil.ignoreDiacritics(l),e=o.DataUtil.ignoreDiacritics(e)),"StartsWith"===this.filterType?l.slice(0,e.length)===e:"EndsWith"===this.filterType?l.slice(-e.length)===e:-1!==l.indexOf(e)},t.prototype.wireEvents=function(){n.EventHandler.add(this.inputWrapper,"mouseup",this.dropDownClick,this),n.EventHandler.add(this.inputWrapper,"focus",this.focusIn,this),n.EventHandler.add(this.inputWrapper,"blur",this.focusOut,this),n.EventHandler.add(this.inputWrapper,"mousemove",this.mouseIn,this),n.EventHandler.add(this.inputWrapper,"mouseout",this.onMouseLeave,this),n.EventHandler.add(this.overAllClear,"mousedown",this.clearAll,this),n.EventHandler.add(window,"resize",this.windowResize,this);var e=i.i(n.closest)(this.inputWrapper,"form");e&&n.EventHandler.add(e,"reset",this.resetValueHandler,this),this.keyboardModule=new n.KeyboardEvents(this.inputWrapper,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})},t.prototype.wireTreeEvents=function(){this.keyboardModule=new n.KeyboardEvents(this.tree,{keyAction:this.treeAction.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})},t.prototype.wireCheckAllWrapperEvents=function(){this.keyboardModule=new n.KeyboardEvents(this.checkAllParent,{keyAction:this.checkAllAction.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})},t.prototype.unWireEvents=function(){n.EventHandler.remove(this.inputWrapper,"mouseup",this.dropDownClick),n.EventHandler.remove(this.inputWrapper,"focus",this.focusIn),n.EventHandler.remove(this.inputWrapper,"blur",this.focusOut),n.EventHandler.remove(this.inputWrapper,"mousemove",this.mouseIn),n.EventHandler.remove(this.inputWrapper,"mouseout",this.onMouseLeave),n.EventHandler.remove(this.overAllClear,"mousedown",this.clearAll),n.EventHandler.remove(window,"resize",this.windowResize);var e=i.i(n.closest)(this.inputWrapper,"form");e&&n.EventHandler.remove(e,"reset",this.resetValueHandler)},t.prototype.dropDownClick=function(e){if(this.enabled&&!this.readonly){if(this.isClearButtonClick)return void(this.isClearButtonClick=!1);this.isPopupOpen?this.hidePopup():(this.focusIn(e),this.renderPopup()),this.showOverAllClear()}},t.prototype.mouseIn=function(){!this.enabled&&this.readonly||this.showOverAllClear()},t.prototype.onMouseLeave=function(){this.inputFocus||(i.i(n.addClass)([this.overAllClear],v),i.i(n.removeClass)([this.inputWrapper],d))},t.prototype.getDirective=function(){return"EJS-DROPDOWNTREE"},t.prototype.focusOut=function(e){if(this.enabled&&!this.readonly&&this.inputFocus&&(!n.Browser.isIE&&"edge"!==n.Browser.info.name||e.target!==this.inputWrapper)){var t=e.relatedTarget;t===this.inputEle||!i.i(n.isNullOrUndefined)(t)||e.target===this.inputWrapper&&this.isPopupOpen||this.onFocusOut(e)}},t.prototype.onFocusOut=function(e){if(this.inputFocus=!1,this.isPopupOpen&&this.hidePopup(),this.isClearButtonClick&&(this.isClearButtonClick=!1),this.showClearButton&&(this.clearIconWidth=i.i(n.select)(".e-clear-icon",this.inputWrapper).offsetWidth,i.i(n.addClass)([this.overAllClear],v),i.i(n.removeClass)([this.inputWrapper],d)),i.i(n.removeClass)([this.inputWrapper],[f]),this.allowMultiSelection||this.showCheckBox){var t=!!this.value&&!!this.value.length;"Delimiter"!==this.mode&&"Custom"!==this.mode&&this.chipWrapper&&"Default"===this.mode&&(i.i(n.addClass)([this.chipWrapper],v),i.i(n.removeClass)([this.inputWrapper],c),i.i(n.removeClass)([this.inputEle],m)),!this.wrapText&&t&&this.updateView()}this.changeOnBlur&&this.triggerChangeEvent(e),this.removeValue=!1,this.oldValue=this.value,this.trigger("blur")},t.prototype.updateView=function(){!this.showCheckBox&&!this.allowMultiSelection||"Custom"===this.mode||this.inputFocus||("Box"!==this.mode?i.i(n.addClass)([this.inputWrapper,this.overFlowWrapper],"e-show-text"):i.i(n.addClass)([this.inputWrapper],c),this.value&&0!==this.value.length&&(this.inputWrapper.contains(this.chipWrapper)&&i.i(n.addClass)([this.chipWrapper],v),i.i(n.addClass)([this.inputEle],m),this.updateOverFlowView(),this.ensurePlaceHolder()))},t.prototype.triggerChangeEvent=function(e){if((!this.ddtCompareValues(this.oldValue,this.value)||this.isChipDelete)&&!this.removeValue){var t={e:e,oldValue:this.oldValue,value:this.value,isInteracted:!!e,element:this.element};this.trigger("change",t),this.oldValue=this.value}},t.prototype.ddtCompareValues=function(e,t){if(null===e||null===t){return null===e?t===e:0===e.length&&t===e}if(e.length!==t.length)return!1;for(var i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0},t.prototype.focusIn=function(e){if(this.enabled&&!this.readonly&&!this.inputFocus){this.showOverAllClear(),this.inputFocus=!0,i.i(n.addClass)([this.inputWrapper],[f]),(this.allowMultiSelection||this.showCheckBox)&&("Delimiter"!==this.mode&&this.inputFocus&&(this.chipWrapper&&this.value&&0!==this.value.length&&(i.i(n.removeClass)([this.chipWrapper],v),i.i(n.addClass)([this.inputEle],m)),i.i(n.addClass)([this.inputWrapper],c),this.popupObj&&this.popupObj.refreshPosition()),this.wrapText||"Custom"===this.mode||(this.inputWrapper.contains(this.overFlowWrapper)&&i.i(n.addClass)([this.overFlowWrapper],v),"Delimiter"===this.mode?(i.i(n.removeClass)([this.inputWrapper],c),i.i(n.removeClass)([this.inputEle],m)):i.i(n.addClass)([this.inputWrapper],c),i.i(n.removeClass)([this.inputWrapper],"e-show-text"),this.ensurePlaceHolder()));var t={isInteracted:!!e,event:e};this.trigger("focus",t)}},t.prototype.treeAction=function(e){var t=this,i={cancel:!1,event:e};this.trigger("keyPress",i,function(i){if(i.cancel)e.stopImmediatePropagation();else switch(e.action){case"escape":case"altUp":t.inputWrapper.focus(),e.preventDefault(),t.isPopupOpen&&t.hidePopup();break;case"tab":case"shiftTab":t.isPopupOpen&&t.hidePopup();break;case"enter":case"ctrlEnter":case"shiftEnter":case"csEnter":t.showCheckBox||(t.isValueChange=!0,t.keyEventArgs=e);break;case"space":t.isValueChange=!0,t.keyEventArgs=e;break;case"ctrlA":t.allowMultiSelection&&t.selectAll(!0)}})},t.prototype.keyActionHandler=function(e){var t=this,i={cancel:!1,event:e};this.trigger("keyPress",i,function(i){if(!i.cancel)switch(e.action){case"escape":case"altUp":t.isPopupOpen&&t.hidePopup();break;case"shiftTab":case"tab":t.isPopupOpen&&t.hidePopup(),t.inputFocus&&t.onFocusOut();break;case"altDown":t.isPopupOpen||(t.showPopup(),e.preventDefault());break;case"moveDown":t.showSelectAll&&t.showCheckBox&&t.checkAllParent.focus()}})},t.prototype.checkAllAction=function(e){var t=this,s={cancel:!1,event:e};this.trigger("keyPress",s,function(s){if(!s.cancel)switch(e.action){case"space":t.clickHandler(e);break;case"moveDown":var l=t.treeObj.element.querySelector("li");l.focus(),i.i(n.addClass)([l],["e-node-focus"])}})},t.prototype.windowResize=function(){this.popupObj&&(this.popupObj.setProperties({width:this.setWidth()}),this.popupObj.refreshPosition())},t.prototype.resetValueHandler=function(e){var t=i.i(n.closest)(this.inputWrapper,"form");t&&e.target===t&&(this.isDynamicChange=!0,this.setProperties({value:null},!0),this.resetValue(!0),this.isDynamicChange=!1)},t.prototype.getAriaAttributes=function(){return{}},t.prototype.updateOverFlowView=function(){if(this.overFlowWrapper.classList.remove("e-total-count"),i.i(n.removeClass)([this.overFlowWrapper],v),this.value&&this.value.length){var e="",t=void 0,s=void 0,l=void 0,o=1,r=void 0,a=void 0,h=0;this.overFlowWrapper.innerHTML="";var p={overflowCountTemplate:"+${count} more..",totalCountTemplate:"${count} selected"};this.l10n=new n.L10n(this.getLocaleName(),p,this.locale);var u=this.l10n.getConstant("overflowCountTemplate"),c=this.l10n.getConstant("totalCountTemplate"),d=this.createElement("span",{className:"e-remain"});this.overFlowWrapper.appendChild(d),d.innerText=u.replace("${count}",this.value.length.toString());var m=d.offsetWidth;if(i.i(n.remove)(d),this.showDropDownIcon&&(h=i.i(n.select)(".e-ddt-icon",this.inputWrapper).offsetWidth),!i.i(n.isNullOrUndefined)(this.value))if("Box"!==this.mode)for(var f=0;!i.i(n.isNullOrUndefined)(this.value[f]);f++){if(e+=0===f?"":this.delimiterChar+" ",s=this.getOverflowVal(f),e+=s,s=this.overFlowWrapper.innerHTML,this.enableHtmlSanitizer?this.overFlowWrapper.innerText=n.SanitizeHtmlHelper.sanitize(e):this.overFlowWrapper.innerHTML=e,r=this.overFlowWrapper.offsetWidth,t=this.inputWrapper.offsetWidth,r+h+this.clearIconWidth>t){for(void 0!==l&&""!==l&&(s=l,f=o+1),this.overFlowWrapper.innerHTML=s,a=this.value.length-f,r=this.overFlowWrapper.offsetWidth;r+m+h+this.clearIconWidth>=t&&0!==r&&""!==this.overFlowWrapper.innerHTML;){var g=this.overFlowWrapper.innerHTML.split(this.delimiterChar);g.pop(),this.overFlowWrapper.innerHTML=g.join(this.delimiterChar),a++,r=this.overFlowWrapper.offsetWidth}break}r+m+h+this.clearIconWidth<=t?(l=e,o=f):0===f&&(l="",o=-1)}else{i.i(n.addClass)([this.chipWrapper],v);for(var y=this.chipWrapper.cloneNode(!0),C=i.i(n.selectAll)(".e-chips",y),b=0;b<C.length;b++){if(s=this.overFlowWrapper.innerHTML,this.overFlowWrapper.appendChild(C[b]),e=this.overFlowWrapper.innerHTML,r=this.overFlowWrapper.offsetWidth,t=this.inputWrapper.offsetWidth,r+h+this.clearIconWidth>t){for(void 0!==l&&""!==l&&(s=l,b=o+1),this.overFlowWrapper.innerHTML=s,a=this.value.length-b,r=this.overFlowWrapper.offsetWidth;r+m+h+this.clearIconWidth>=t&&0!==r&&""!==this.overFlowWrapper.innerHTML;)this.overFlowWrapper.removeChild(this.overFlowWrapper.lastChild),a++,r=this.overFlowWrapper.offsetWidth;break}r+m+h+this.clearIconWidth<=t?(l=e,o=b):0===b&&(l="",o=-1)}}a>0&&this.overFlowWrapper.appendChild(this.updateRemainTemplate(d,a,u,c)),"Box"!==this.mode||this.overFlowWrapper.classList.contains("e-total-count")||i.i(n.addClass)([d],"e-wrap-count")}else this.overFlowWrapper.innerHTML="",i.i(n.addClass)([this.overFlowWrapper],v);this.updateDelimMode()},t.prototype.updateRemainTemplate=function(e,t,s,l){return this.overFlowWrapper.firstChild&&3===this.overFlowWrapper.firstChild.nodeType&&""===this.overFlowWrapper.firstChild.nodeValue&&this.overFlowWrapper.removeChild(this.overFlowWrapper.firstChild),e.innerHTML="",e.innerText=!this.overFlowWrapper.firstChild||3!==this.overFlowWrapper.firstChild.nodeType&&"Box"!==this.mode?l.replace("${count}",t.toString()):s.replace("${count}",t.toString()),!this.overFlowWrapper.firstChild||3!==this.overFlowWrapper.firstChild.nodeType&&"Box"!==this.mode?(i.i(n.addClass)([this.overFlowWrapper],"e-total-count"),i.i(n.removeClass)([this.overFlowWrapper],"e-wrap-count")):i.i(n.removeClass)([this.overFlowWrapper],"e-total-count"),e},t.prototype.getOverflowVal=function(e){var t=this.getSelectedData(this.value[e]);return i.i(n.getValue)(this.treeSettings.loadOnDemand?this.fields.text:"text",t)},t.prototype.updateDelimMode=function(){"Box"!==this.mode?i.i(n.select)(".e-remain",this.overFlowWrapper)&&!this.overFlowWrapper.classList.contains("e-total-count")?(i.i(n.addClass)([this.overFlowWrapper],"e-wrap-count"),i.i(n.addClass)([this.overFlowWrapper],"e-show-text")):(this.overFlowWrapper.classList.remove("e-wrap-count"),i.i(n.removeClass)([this.overFlowWrapper],"e-wrap-count")):i.i(n.select)(".e-remain",this.overFlowWrapper)&&this.overFlowWrapper.classList.remove("e-wrap-count")},t.prototype.createHiddenElement=function(){this.allowMultiSelection||this.showCheckBox?this.hiddenElement=this.createElement("select",{attrs:{"aria-hidden":"true",class:"e-ddt-hidden",tabindex:"-1",multiple:""}}):this.hiddenElement=this.createElement("select",{attrs:{"aria-hidden":"true",tabindex:"-1",class:"e-ddt-hidden"}}),i.i(n.prepend)([this.hiddenElement],this.inputWrapper),this.validationAttribute()},t.prototype.createClearIcon=function(){this.overAllClear=this.createElement("span",{className:"e-clear-icon e-icons"}),i.i(n.addClass)([this.overAllClear],v),i.i(n.removeClass)([this.inputWrapper],d),this.showClearButton&&this.inputWrapper.insertBefore(this.overAllClear,this.inputObj.buttons[0])},t.prototype.validationAttribute=function(){var e=this.inputEle.getAttribute("name")?this.inputEle.getAttribute("name"):this.inputEle.getAttribute("id");this.hiddenElement.setAttribute("name",e),this.inputEle.removeAttribute("name");for(var t=["required","aria-required","form"],i=0;i<t.length;i++){var s=this.inputEle.getAttribute(t[i]);s&&(this.hiddenElement.setAttribute(t[i],s),this.inputEle.removeAttribute(t[i]))}},t.prototype.createChip=function(){if(!this.inputWrapper.contains(this.chipWrapper)){this.chipWrapper=this.createElement("span",{className:"e-chips-wrapper"}),this.chipCollection=this.createElement("span",{className:"e-chips-collection"}),this.chipWrapper.appendChild(this.chipCollection),this.inputWrapper.insertBefore(this.chipWrapper,this.hiddenElement),i.i(n.addClass)([this.inputWrapper],c);this.getValidMode()&&null!==this.value&&this.value&&0!==this.value.length?i.i(n.addClass)([this.inputEle],m):(null===this.value||this.value&&0===this.value.length||this.checkWrapper)&&i.i(n.addClass)([this.chipWrapper],v)}},t.prototype.getValidMode=function(){return!(!this.allowMultiSelection&&!this.showCheckBox)&&("Box"===this.mode||!("Default"!==this.mode||!this.inputFocus))},t.prototype.createSelectAllWrapper=function(){this.checkAllParent=this.createElement("div",{className:"e-selectall-parent",attrs:{tabindex:"0"}}),this.selectAllSpan=this.createElement("span",{className:"e-all-text"}),this.selectAllSpan.textContent="";var e=i.i(n.closest)(this.element,".e-bigger"),t=i.i(n.isNullOrUndefined)(e)?"":"e-small";this.checkBoxElement=i.i(l.createCheckBox)(this.createElement,!0,{cssClass:t}),this.checkBoxElement.setAttribute("role","checkbox"),this.checkAllParent.appendChild(this.checkBoxElement),this.checkAllParent.appendChild(this.selectAllSpan),this.setLocale(),n.EventHandler.add(this.checkAllParent,"mouseup",this.clickHandler,this),this.wireCheckAllWrapperEvents()},t.prototype.clickHandler=function(e){var t;if(t=e.currentTarget&&e.currentTarget.classList.contains("e-selectall-parent")?e.currentTarget.firstElementChild.lastElementChild:e.target,this.checkWrapper=i.i(n.closest)(t,".e-checkbox-wrapper"),!i.i(n.isNullOrUndefined)(this.checkWrapper)){this.isClicked=!0;var s=i.i(n.select)(".e-frame",this.checkWrapper);this.changeState(this.checkWrapper,s.classList.contains(g)?"uncheck":"check",e),this.isClicked=!1}e.preventDefault()},t.prototype.changeState=function(e,t,s){var l,o=e.getElementsByClassName("e-frame")[0];"check"!==t||o.classList.contains(g)?"uncheck"===t&&o.classList.contains(g)&&(o.classList.remove(g),l="false",this.isReverseUpdate||(this.treeObj.uncheckAll(),this.changeOnBlur||this.triggerChangeEvent(s)),this.setLocale(!1)):(o.classList.add(g),l="true",this.isReverseUpdate||(this.isCheckAllCalled=!0,this.treeObj.checkAll(),this.changeOnBlur||this.triggerChangeEvent(s)),this.setLocale(!0)),this.setMultiSelect(),this.ensurePlaceHolder(),l="check"===t?"true":"false",i.i(n.isNullOrUndefined)(l)||e.parentElement.setAttribute("aria-checked",l)},t.prototype.setLocale=function(e){if(this.selectAllSpan)if("Select All"!==this.selectAllText||"Unselect All"!==this.unSelectAllText){var t=e?this.unSelectAllText:this.selectAllText;this.selectAllSpan.textContent="";for(var s=i.i(n.compile)(t),l=e?"unSelectAllText":"selectAllText",o=0,r=s({},this,l,null,!this.isStringTemplate);o<r.length;o++){var a=r[o];this.selectAllSpan.textContent=a.textContent}}else this.selectAllSpan.textContent=e?this.unSelectAllText:this.selectAllText},t.prototype.setAttributes=function(){this.inputEle.setAttribute("tabindex","-1");var e=this.element.getAttribute("id");this.hiddenElement.id=e+"_hidden",this.inputWrapper.setAttribute("tabindex","0"),i.i(n.attributes)(this.inputWrapper,this.getAriaAttributes())},t.prototype.setHTMLAttributes=function(){if(Object.keys(this.htmlAttributes).length)for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var l=t[e];if("class"===l)this.inputWrapper.classList.add(this.htmlAttributes[""+l]);else if("disabled"===l&&"disabled"===this.htmlAttributes[""+l])this.setProperties({enabled:!1},!0),this.setEnable();else if("readonly"!==l||i.i(n.isNullOrUndefined)(this.htmlAttributes[""+l]))if("style"===l)this.inputWrapper.setAttribute("style",this.htmlAttributes[""+l]);else{var o=["title","id","placeholder","aria-placeholder","role","autocorrect","autocomplete","autocapitalize","spellcheck","minlength","maxlength"],r=["name","required"];0===l.indexOf("data")||r.indexOf(l)>-1?this.hiddenElement.setAttribute(l,this.htmlAttributes[""+l]):o.indexOf(l)>-1&&"placeholder"===l?s.Input.setPlaceholder(this.htmlAttributes[""+l],this.inputEle):this.inputEle.setAttribute(l,this.htmlAttributes[""+l])}else this.setProperties({readonly:!0},!0),this.dataBind()}},t.prototype.updateDataAttribute=function(){for(var e=this.htmlAttributes,t=["class","style","id","type"],s={},l=0;l<this.element.attributes.length;l++)-1===t.indexOf(this.element.attributes[l].name)&&"readonly"!==this.element.attributes[l].name&&(s[this.element.attributes[l].name]=this.element.getAttribute(this.element.attributes[l].name));i.i(n.extend)(s,e,s),this.setProperties({htmlAttributes:s},!0)},t.prototype.showOverAllClear=function(){if(this.enabled&&!this.readonly&&this.overAllClear){!!this.value&&!!this.value.length&&this.showClearButton?(i.i(n.removeClass)([this.overAllClear],v),i.i(n.addClass)([this.inputWrapper],d)):(i.i(n.addClass)([this.overAllClear],v),i.i(n.removeClass)([this.inputWrapper],d))}},t.prototype.setTreeValue=function(){if(null!==this.value&&0!==this.value.length){var e=void 0;if(this.showCheckBox||this.allowMultiSelection){for(var t=0;t<this.value.length;t++)e=this.treeObj.getTreeData(this.value[t])[0],i.i(n.isNullOrUndefined)(e)&&this.value.splice(this.value.indexOf(this.value[t]),1);0!==this.value.length&&this.setValidValue()}else e=this.treeObj.getTreeData(this.value[0])[0],i.i(n.isNullOrUndefined)(e)?this.setProperties({value:this.currentValue},!0):(this.setProperties({text:e[this.fields.text]},!0),this.setValidValue())}},t.prototype.setTreeText=function(){if((null===this.value||this.isInitialized)&&null!==this.text){var e=void 0,t=[];if(this.showCheckBox||this.allowMultiSelection){for(var s=this.text.split(this.delimiterChar),l=0;l<s.length;l++)e=this.getItems(s[l]),i.i(n.isNullOrUndefined)(e)||t.push(e[this.fields.value].toString());0!==t.length?(this.oldValue=this.value,this.setProperties({value:t},!0),this.setValidValue()):this.setProperties({text:this.currentText},!0)}else e=this.getItems(this.text),i.i(n.isNullOrUndefined)(e)?this.setProperties({text:this.currentText},!0):(this.oldValue=this.value,this.setProperties({value:[e[this.fields.value].toString()]},!0),this.setValidValue())}},t.prototype.setSelectedValue=function(){null==this.value&&(this.isInitialized||(this.oldValue=this.value,this.treeObj.selectedNodes.length>0&&!this.showCheckBox?(this.setProperties({value:this.treeObj.selectedNodes},!0),this.allowMultiSelection&&this.updateMode()):this.showCheckBox&&this.treeObj.checkedNodes&&this.treeObj.checkedNodes.length>0&&(this.setProperties({value:this.treeObj.checkedNodes},!0),i.i(n.setValue)("selectedNodes",[],this.treeObj),this.treeObj.dataBind(),this.updateMode()),this.updateSelectedValues(),this.currentText=this.text,this.currentValue=this.value))},t.prototype.setValidValue=function(){var e=this;if(this.showCheckBox||this.allowMultiSelection){if(this.showCheckBox){(this.value.filter(function(t){return-1===e.treeObj.checkedNodes.indexOf(t)}).length>0||this.treeSettings.autoCheck)&&(this.treeObj.checkedNodes=this.value.slice(),this.treeObj.dataBind(),this.setMultiSelect())}else this.treeObj.selectedNodes=this.value.slice(),this.selectedText=[],this.updateSelectedValues();this.treeObj.dataBind()}else{s.Input.setValue(this.text,this.inputEle,this.floatLabelType);var t=this.value[0].toString();this.treeObj.selectedNodes[0]!==t&&i.i(n.setValue)("selectedNodes",[t],this.treeObj)}this.currentText=this.text,this.currentValue=this.value,this.isInitialized&&this.triggerChangeEvent()},t.prototype.getItems=function(e){var t;if(1===this.treeDataType)for(var s=0;s<this.treeItems.length;s++){var l=i.i(n.getValue)(this.fields.text,this.treeItems[s]);if(!i.i(n.isNullOrUndefined)(this.treeItems[s])&&!i.i(n.isNullOrUndefined)(l)&&l===e){t=this.treeItems[s];break}}else t=this.getNestedItems(this.treeItems,this.fields,e);return t},t.prototype.getNestedItems=function(e,t,s){for(var l,r=0,a=e.length;r<a;r++){var h=i.i(n.getValue)(this.fields.text,e[r]);if(e[r]&&h&&h.toString()===s)return e[r];if("string"!=typeof t.child||i.i(n.isNullOrUndefined)(i.i(n.getValue)(t.child,e[r]))){if(this.fields.dataSource instanceof o.DataManager&&!i.i(n.isNullOrUndefined)(i.i(n.getValue)("child",e[r]))){if(void 0!==(l=this.getNestedItems(i.i(n.getValue)("child",e[r]),this.getChildType(t),s)))break}}else{var p=i.i(n.getValue)(t.child,e[r]);if(void 0!==(l=this.getNestedItems(p,this.getChildType(t),s)))break}}return l},t.prototype.getChildType=function(e){return"string"==typeof e.child||i.i(n.isNullOrUndefined)(e.child)?e:e.child},t.prototype.renderTree=function(){this.treeObj=new a.TreeView({fields:this.getTreeFields(this.fields),enableRtl:this.enableRtl,nodeSelected:this.onNodeSelected.bind(this),nodeChecked:this.onNodeChecked.bind(this),nodeChecking:this.beforeCheck.bind(this),nodeExpanded:this.onNodeExpanded.bind(this),actionFailure:this.onActionFailure.bind(this),nodeClicked:this.onNodeClicked.bind(this),dataBound:this.OnDataBound.bind(this),allowMultiSelection:this.allowMultiSelection,enableHtmlSanitizer:this.enableHtmlSanitizer,showCheckBox:this.showCheckBox,autoCheck:this.treeSettings.autoCheck,sortOrder:this.sortOrder,expandOn:this.treeSettings.expandOn,loadOnDemand:this.treeSettings.loadOnDemand,nodeSelecting:this.onBeforeSelect.bind(this),nodeTemplate:this.itemTemplate}),this.treeObj.root=this.root?this.root:this,this.treeObj.appendTo("#"+this.tree.id)},t.prototype.renderPopup=function(){var e=this;this.isFilteredData&&(this.filterObj.value="",this.treeObj.fields=this.getTreeFields(this.fields),this.isFilterRestore=!0,this.isFilteredData=!1,this.hideCheckAll(!1));var t=!1,s={cancel:!1};this.trigger("beforeOpen",s,function(s){if(s.cancel?t=!0:(i.i(n.addClass)([e.inputWrapper],["e-icon-anim"]),e.isFirstRender?(e.popupEle=e.createElement("div",{id:e.element.id+"_options",className:"e-ddt e-popup "+(null!=e.cssClass?e.cssClass:"")}),e.popupEle.setAttribute("role","region"),e.popupEle.setAttribute("aria-label",e.element.id),document.body.appendChild(e.popupEle),e.createPopup(e.popupEle)):(e.popupEle=e.popupObj.element,e.isReact&&e.isFilterRestore&&(e.treeObj.refresh(),e.isFilteredData=!0,e.popupEle.removeChild(e.filterContainer)))),(e.isFirstRender&&!t||e.isFilteredData)&&(e.isFilteredData=!1,i.i(n.prepend)([e.popupDiv],e.popupEle),i.i(n.removeClass)([e.popupDiv],"e-ddt-icon-hide"),e.allowFiltering&&e.renderFilter(),e.showCheckBox&&e.showSelectAll&&!e.popupDiv.classList.contains(y)&&(e.createSelectAllWrapper(),e.popupEle.insertBefore(e.checkAllParent,e.popupDiv)),e.headerTemplate&&e.setHeaderTemplate(),e.footerTemplate&&e.setFooterTemplate(),e.isFirstRender=!1,e.hasTemplate&&e.portals&&(e.portals=e.portals.concat(e.treeObj.portals),e.renderReactTemplates())),!t){if(i.i(n.attributes)(e.inputEle,{"aria-expanded":"true"}),e.popupObj.show(null,1e3===e.zIndex?e.inputEle:null),i.i(n.removeClass)([e.popupEle],"e-ddt-icon-hide"),e.updatePopupHeight(),e.popupObj.refreshPosition(),(!e.showCheckBox||!e.showSelectAll)&&!e.popupDiv.classList.contains(y)&&e.treeItems.length>0){var l=e.treeObj.element.querySelector("li");l.focus(),i.i(n.addClass)([l],["e-node-focus"])}if(e.checkSelectAll&&e.checkBoxElement){var o=i.i(n.closest)(e.checkBoxElement,".e-checkbox-wrapper");e.changeState(o,"check"),e.checkSelectAll=!1}e.allowFiltering&&(i.i(n.removeClass)([e.inputWrapper],[f]),e.filterObj.element.focus());var r={popup:e.popupObj};e.trigger("open",r)}})},t.prototype.updatePopupHeight=function(){if(!this.isFirstRender){var e=this.getHeight();if(this.popupEle.style.maxHeight=e,this.allowFiltering){var t=Math.round(this.filterContainer.getBoundingClientRect().height);e=i.i(n.formatUnit)(parseInt(e,10)-t+"px")}if(this.headerTemplate){var t=Math.round(this.header.getBoundingClientRect().height);e=i.i(n.formatUnit)(parseInt(e,10)-t+"px")}if(this.showCheckBox&&this.showSelectAll&&!this.popupDiv.classList.contains(y)){var t=Math.round(this.checkAllParent.getBoundingClientRect().height);e=i.i(n.formatUnit)(parseInt(e,10)-t+"px")}if(this.footerTemplate){var t=Math.round(this.footer.getBoundingClientRect().height);e=i.i(n.formatUnit)(parseInt(e,10)-t+"px")}var s=parseInt(window.getComputedStyle(this.popupEle).borderTopWidth,10);s+=parseInt(window.getComputedStyle(this.popupEle).borderBottomWidth,10),e=i.i(n.formatUnit)(parseInt(e,10)-s+"px"),this.popupDiv.style.maxHeight=e}},t.prototype.createPopup=function(e){var t=this;this.isFirstRender&&(this.popupObj=new r.Popup(e,{width:this.setWidth(),targetType:"relative",collision:{X:"flip",Y:"flip"},relateTo:this.inputWrapper,zIndex:this.zIndex,enableRtl:this.enableRtl,position:{X:"left",Y:"bottom"},close:function(){t.isPopupOpen=!1},open:function(){n.EventHandler.add(document,"mousedown",t.onDocumentClick,t),t.isPopupOpen=!0},targetExitViewport:function(){n.Browser.isDevice||t.hidePopup()}}))},t.prototype.setElementWidth=function(e){var t=this.inputWrapper;i.i(n.isNullOrUndefined)(e)||("number"==typeof e?t.style.width=i.i(n.formatUnit)(e):"string"==typeof e&&(t.style.width=e.match(/px|%|em/)?e:i.i(n.formatUnit)(e)))},t.prototype.setWidth=function(){var e=i.i(n.formatUnit)(this.popupWidth);return e.indexOf("%")>-1?e=(this.inputWrapper.offsetWidth*parseFloat(e)/100).toString()+"px":"string"==typeof this.popupWidth&&(e=this.popupWidth.match(/px|em/)?this.popupWidth:e),e},t.prototype.getHeight=function(){var e=i.i(n.formatUnit)(this.popupHeight);return e.indexOf("%")>-1?e=(document.documentElement.clientHeight*parseFloat(e)/100).toString()+"px":"string"==typeof this.popupHeight&&(e=this.popupHeight.match(/px|em/)?this.popupHeight:e),e},t.prototype.onDocumentClick=function(e){var t=e.target,s=i.i(n.closest)(t,".e-list-parent"),l=i.i(n.closest)(t,".e-filter-wrap"),o=i.i(n.closest)(t,".e-ddt-header"),r=i.i(n.closest)(t,".e-ddt-footer"),a=!!t.classList.contains("e-dropdown")||(i.i(n.matches)(t,".e-ddt .e-popup")||i.i(n.matches)(t,".e-ddt .e-treeview"));this.isPopupOpen&&(!i.i(n.isNullOrUndefined)(this.inputWrapper)&&this.inputWrapper.contains(t)||s||a||o||r)||(this.allowMultiSelection||this.showCheckBox)&&(this.isPopupOpen&&t.classList.contains("e-chips-close")||this.isPopupOpen&&(t.classList.contains("e-selectall-parent")||t.classList.contains("e-all-text")||t.classList.contains("e-frame")))?(this.isDocumentClick=!1,e.preventDefault()):i.i(n.isNullOrUndefined)(this.inputWrapper)||this.inputWrapper.contains(t)||!this.inputFocus||l||this.focusOut(e)},t.prototype.onActionFailure=function(e){this.trigger("actionFailure",e),this.l10nUpdate(!0),i.i(n.addClass)([this.popupDiv],y)},t.prototype.OnDataBound=function(e){this.treeItems=e.data,this.treeItems.length<=0?(this.l10nUpdate(),i.i(n.addClass)([this.popupDiv],y),this.hideCheckAll(!0)):this.popupDiv.classList.contains(y)&&this.treeItems.length>=1&&(i.i(n.removeClass)([this.popupDiv],y),this.hideCheckAll(!1)),this.treeDataType=this.getTreeDataType(this.treeItems,this.fields),this.isFirstRender&&this.isRemoteData&&(this.setTreeValue(),this.setTreeText(),this.updateHiddenValue(),this.setSelectedValue(),this.wrapText||this.updateView(),this.treeObj.element.focus());var t={data:e.data};this.trigger("dataBound",t),null===this.filterObj&&(this.isFilteredData=!1),this.isFilteredData&&this.treeObj.expandAll(),this.isFilterRestore&&(this.restoreFilterSelection(),this.isFilterRestore=!1)},t.prototype.restoreFilterSelection=function(){this.showCheckBox?this.treeObj.checkedNodes=this.value?this.value:[]:this.treeObj.selectedNodes=this.value?this.value:[]},t.prototype.setCssClass=function(e,t){var s=this.popupObj?[this.inputWrapper,this.popupObj.element]:[this.inputWrapper];i.i(n.isNullOrUndefined)(t)||""===t||i.i(n.removeClass)(s,t.split(" ")),i.i(n.isNullOrUndefined)(e)||""===e||i.i(n.addClass)(s,e.split(" "))},t.prototype.setEnableRTL=function(e){e?this.inputWrapper.classList.add("e-rtl"):this.inputWrapper.classList.remove("e-rtl"),this.popupObj&&(this.popupObj.enableRtl=e,this.popupObj.dataBind()),this.treeObj&&(this.treeObj.enableRtl=e,this.treeObj.dataBind())},t.prototype.setEnable=function(){s.Input.setEnabled(this.enabled,this.inputEle),this.enabled?(i.i(n.removeClass)([this.inputWrapper],"e-disabled"),this.inputEle.setAttribute("aria-disabled","false"),this.inputWrapper.setAttribute("aria-disabled","false")):(this.isPopupOpen&&this.hidePopup(),i.i(n.addClass)([this.inputWrapper],"e-disabled"),this.inputWrapper&&this.inputWrapper.classList.contains(f)&&i.i(n.removeClass)([this.inputWrapper],[f]),this.inputEle.setAttribute("aria-disabled","true"),this.inputWrapper.setAttribute("aria-disabled","true"))},t.prototype.cloneFields=function(e){return{dataSource:e.dataSource,value:e.value,text:e.text,parentValue:e.parentValue,child:this.cloneChildField(e.child),hasChildren:e.hasChildren,expanded:e.expanded,iconCss:e.iconCss,imageUrl:e.imageUrl,htmlAttributes:e.htmlAttributes,query:e.query,selected:e.selected,selectable:e.selectable,tableName:e.tableName,tooltip:e.tooltip}},t.prototype.cloneChildField=function(e){return"string"==typeof e?e:{dataSource:e.dataSource,value:e.value,text:e.text,parentValue:e.parentValue,child:e.child?this.cloneChildField(e.child):null,hasChildren:e.hasChildren,expanded:e.expanded,iconCss:e.iconCss,imageUrl:e.imageUrl,htmlAttributes:e.htmlAttributes,query:e.query,selected:e.selected,selectable:e.selectable,tableName:e.tableName,tooltip:e.tooltip}},t.prototype.getTreeFields=function(e){return{dataSource:e.dataSource,id:e.value,text:e.text,parentID:e.parentValue,child:this.getTreeChildren(e.child),hasChildren:e.hasChildren,expanded:e.expanded,iconCss:e.iconCss,imageUrl:e.imageUrl,isChecked:e.selected,htmlAttributes:e.htmlAttributes,query:e.query,selectable:e.selectable,selected:e.selected,tableName:e.tableName,tooltip:e.tooltip}},t.prototype.getTreeChildren=function(e){if("string"==typeof e)return e;if(!i.i(n.isNullOrUndefined)(e)){e=this.getActualProperties(e);var t=e;return e.value&&(t.id=e.value),e.parentValue&&(t.parentID=e.parentValue),e.child&&(t.child=this.getTreeChildren(e.child)),e.selected&&this.showCheckBox&&(t.isChecked=e.selected),t}return null},t.prototype.getTreeDataType=function(e,t){if(this.fields.dataSource instanceof o.DataManager){for(var s=0;s<e.length;s++)if("string"==typeof t.child&&i.i(n.isNullOrUndefined)(i.i(n.getValue)(t.child,e[s])))return 1;return 2}i.i(n.isNullOrUndefined)(this.fields.dataSource)&&(this.fields.dataSource=[]);for(var s=0,l=this.fields.dataSource.length;s<l;s++){if("string"==typeof t.child&&!i.i(n.isNullOrUndefined)(i.i(n.getValue)(t.child,this.fields.dataSource[s])))return 2;if(!i.i(n.isNullOrUndefined)(i.i(n.getValue)(t.parentValue,this.fields.dataSource[s]))||!i.i(n.isNullOrUndefined)(i.i(n.getValue)(t.hasChildren,this.fields.dataSource[s])))return 1}return 1},t.prototype.setFields=function(){this.resetValue(),this.hasTemplate&&this.updateTemplate(),this.treeObj.fields=this.getTreeFields(this.fields),this.treeObj.dataBind()},t.prototype.getEventArgs=function(e){var t,i=e.data,s=e.nodeData;return this.showCheckBox&&("check"===e.action?t="select":"uncheck"===e.action&&(t="un-select")),{action:this.showCheckBox?t:e.action,isInteracted:!!this.isClicked||e.isInteracted,item:e.node,itemData:this.showCheckBox?i[0]:s}},t.prototype.onBeforeSelect=function(e){e.isInteracted&&(this.oldValue=this.value?this.value.slice():this.value,null===this.value&&this.setProperties({value:[]},!0))},t.prototype.updateHiddenValue=function(){this.allowMultiSelection||this.showCheckBox||(this.value&&this.value.length?this.hiddenElement.innerHTML='<option selected value ="'+this.value[0]+'">'+this.text+"</option>":this.hiddenElement.innerHTML="")},t.prototype.onNodeSelected=function(e){if(!this.showCheckBox){var t;if(e.isInteracted){var l=i.i(n.getValue)("id",e.nodeData).toString();this.allowMultiSelection?this.allowMultiSelection&&this.setMultiSelect():(this.hiddenElement.innerHTML="",this.setProperties({value:[l]},!0),t=this.itemTemplate?i.i(n.getValue)("text",this.treeObj.getNode(l)):i.i(n.getValue)("text",e.nodeData).toString(),s.Input.setValue(t,this.inputEle,this.floatLabelType),this.setProperties({text:t},!0),this.currentText=this.text,this.currentValue=this.value,i.i(n.attributes)(this.inputWrapper,{"aria-describedby":this.element.id}),i.i(n.attributes)(this.inputWrapper,{"aria-activedescendant":l.toString()}),this.updateHiddenValue(),this.showOverAllClear(),this.hidePopup(),this.isNodeSelected=!0)}var o=this.getEventArgs(e);this.trigger("select",o),this.isValueChange&&!this.changeOnBlur&&(this.triggerChangeEvent(this.keyEventArgs),this.isValueChange=!1)}},t.prototype.onNodeClicked=function(e){!this.changeOnBlur&&this.isNodeSelected&&(this.triggerChangeEvent(e.event),this.isNodeSelected=!1);var t=e.event.target;if((t.classList.contains("e-fullrow")||t.classList.contains("e-list-text"))&&this.showCheckBox){this.isClicked=!0;"true"===this.treeObj.getNode(e.node).isChecked?this.treeObj.uncheckAll([e.node]):this.treeObj.checkAll([e.node]),this.isClicked=!1,this.setMultiSelect(),this.ensurePlaceHolder()}this.changeOnBlur||!this.allowMultiSelection&&!this.showCheckBox||this.triggerChangeEvent(e.event)},t.prototype.onNodeChecked=function(e){var t=this.getEventArgs(e);if(this.trigger("select",t),this.isFilteredData&&"uncheck"===e.action){var s=i.i(n.getValue)("id",e.data[0]).toString();this.removeSelectedData(s,!0)}if(!this.isChipDelete&&e.isInteracted&&(this.setMultiSelect(),this.ensurePlaceHolder()),this.showSelectAll&&this.checkBoxElement){var l=this.treeObj.element.querySelectorAll("li"),o=this.treeObj.element.querySelectorAll("li[aria-checked=true]"),r=i.i(n.closest)(this.checkBoxElement,".e-checkbox-wrapper");r&&"uncheck"===e.action&&(e.isInteracted||0===o.length||!i.i(n.isNullOrUndefined)(e.data[0])&&"false"===e.data[0].isChecked)?(this.isReverseUpdate=!0,this.changeState(r,"uncheck"),this.isReverseUpdate=!1):r&&"check"===e.action&&o.length===l.length&&(e.isInteracted||this.isCheckAllCalled||!i.i(n.isNullOrUndefined)(e.data[0])&&"true"===e.data[0].isChecked)&&(this.isReverseUpdate=!0,this.isCheckAllCalled=!1,this.changeState(r,"check"),this.isReverseUpdate=!1)}},t.prototype.beforeCheck=function(e){e.isInteracted&&(this.oldValue=this.value?this.value.slice():this.value)},t.prototype.onNodeExpanded=function(e){if(this.hasTemplate&&this.portals&&this.treeObj.portals){for(var t=0;t<this.treeObj.portals.length;t++)-1==this.portals.indexOf(this.treeObj.portals[t])&&this.portals.push(this.treeObj.portals[t]);this.renderReactTemplates()}},t.prototype.updateClearButton=function(e){if(e?this.inputWrapper.contains(this.overAllClear)?(i.i(n.removeClass)([this.overAllClear],v),i.i(n.addClass)([this.inputWrapper],d)):this.inputEle.parentElement.insertBefore(this.overAllClear,this.inputEle.nextSibling):(i.i(n.addClass)([this.overAllClear],v),i.i(n.removeClass)([this.inputWrapper],d)),(this.allowMultiSelection||this.showCheckBox)&&this.chipWrapper)for(var t=i.i(n.selectAll)(".e-chips-close",this.chipWrapper),s=0;s<t.length;s++)e?i.i(n.removeClass)([t[s]],v):i.i(n.addClass)([t[s]],v)},t.prototype.updateDropDownIconState=function(e){var t=i.i(n.select)(".e-ddt-icon",this.inputWrapper);e?(t?i.i(n.removeClass)([t],v):s.Input.appendSpan(u,this.inputWrapper,this.createElement),i.i(n.addClass)([this.inputWrapper],"e-show-dd-icon")):(i.i(n.addClass)([t],v),i.i(n.removeClass)([this.inputWrapper],"e-show-dd-icon"))},t.prototype.updateMode=function(){if("Custom"!==this.mode)if("Delimiter"!==this.mode){this.inputWrapper.contains(this.chipWrapper)||this.createChip();var e=this.getValidMode();this.chipWrapper.classList.contains(v)&&e?(i.i(n.removeClass)([this.chipWrapper],v),i.i(n.addClass)([this.inputWrapper],c)):e||(i.i(n.addClass)([this.chipWrapper],v),i.i(n.removeClass)([this.inputWrapper],c));var t=null!==this.value&&0!==this.value.length;e&&t?i.i(n.addClass)([this.inputEle],m):i.i(n.removeClass)([this.inputEle],m)}else this.inputEle.classList.contains(m)&&(i.i(n.removeClass)([this.inputEle],m),this.chipWrapper&&(i.i(n.addClass)([this.chipWrapper],v),i.i(n.removeClass)([this.inputWrapper],c)))},t.prototype.ensurePlaceHolder=function(){(i.i(n.isNullOrUndefined)(this.value)||this.value&&0===this.value.length)&&(i.i(n.removeClass)([this.inputEle],m),this.chipWrapper&&i.i(n.addClass)([this.chipWrapper],v))},t.prototype.ensureClearIconPosition=function(e){"Never"!==e&&this.inputWrapper.insertBefore(this.overAllClear,this.inputObj.buttons[0])},t.prototype.setMultiSelectValue=function(e){if(this.isFilteredData){for(var t=i.i(n.isNullOrUndefined)(this.value)?[]:this.value,s=0;s<e.length;s++)(i.i(n.isNullOrUndefined)(this.value)||-1===this.value.indexOf(e[s]))&&t.push(e[s]);this.setProperties({value:t},!0)}else this.setProperties({value:this.isFromFilterChange&&e&&0==e.length?this.value:e},!0),this.isFromFilterChange=!1,e&&0!==e.length&&!this.showCheckBox&&(this.treeObj.selectedNodes=this.value.slice(),this.treeObj.dataBind())},t.prototype.setMultiSelect=function(){if(this.showCheckBox&&!this.isDynamicChange)this.setMultiSelectValue(this.treeObj.checkedNodes.slice());else{var e=this.allowMultiSelection?this.showCheckBox?this.treeObj.checkedNodes:this.treeObj.selectedNodes:this.value?this.showCheckBox?this.value:[this.value[0]]:null;this.setMultiSelectValue(e),this.showCheckBox&&null!==this.value&&(this.treeObj.checkedNodes=this.value,this.treeObj.dataBind())}this.selectedText=[];var t=!!this.allowMultiSelection||!!this.showCheckBox;this.inputWrapper.contains(this.chipWrapper)&&!t&&(i.i(n.removeClass)([this.inputEle],m),i.i(n.detach)(this.chipWrapper)),this.getValidMode()&&null!==this.value&&(i.i(n.addClass)([this.inputEle],m),this.chipWrapper&&i.i(n.removeClass)([this.chipWrapper],v));var s=!!this.value&&!!this.value.length;this.chipWrapper&&"Box"===this.mode&&!s&&(i.i(n.addClass)([this.chipWrapper],v),i.i(n.removeClass)([this.inputEle],m)),this.updateSelectedValues()},t.prototype.getSelectedData=function(e){var t=null;if(this.isFilteredData)for(var s=0;s<this.selectedData.length;s++)if(i.i(n.getValue)(this.treeSettings.loadOnDemand?this.fields.value:"id",this.selectedData[s]).toString()===e){t=this.selectedData[s];break}return i.i(n.isNullOrUndefined)(t)&&(t=this.treeSettings.loadOnDemand?this.getNodeData(e):this.treeObj.getNode(e),i.i(n.isNullOrUndefined)(t)||this.selectedData.push(t)),t},t.prototype.getNodeData=function(e){if(!i.i(n.isNullOrUndefined)(e)){if(1!==this.treeDataType)return this.getChildNodeData(this.treeItems,this.fields,e);for(var t=0,s=this.treeItems.length;t<s;t++){var l=i.i(n.getValue)(this.fields.value,this.treeItems[t]);if(!i.i(n.isNullOrUndefined)(this.treeItems[t])&&!i.i(n.isNullOrUndefined)(l)&&l.toString()===e)return this.treeItems[t]}}},t.prototype.getChildNodeData=function(e,t,s){var l;if(i.i(n.isNullOrUndefined)(e))return l;for(var r=0,a=e.length;r<a;r++){var h=i.i(n.getValue)(t.value,e[r]);if(e[r]&&h&&h.toString()===s)return e[r];if("string"!=typeof t.child||i.i(n.isNullOrUndefined)(i.i(n.getValue)(t.child,e[r]))){if(this.fields.dataSource instanceof o.DataManager&&!i.i(n.isNullOrUndefined)(i.i(n.getValue)("child",e[r]))){if(void 0!==(l=this.getChildNodeData(i.i(n.getValue)("child",e[r]),this.getChildMapperFields(t),s)))break}}else{var p=i.i(n.getValue)(t.child,e[r]);if(void 0!==(l=this.getChildNodeData(p,this.getChildMapperFields(t),s)))break}}return l},t.prototype.getChildMapperFields=function(e){return"string"==typeof e.child||i.i(n.isNullOrUndefined)(e.child)?e:e.child},t.prototype.removeSelectedData=function(e,t){var s=i.i(n.isNullOrUndefined)(this.value)?[]:this.value.slice();s.splice(s.indexOf(e),1),this.setProperties({value:s},t);for(var l=0;l<this.selectedData.length;l++)if(i.i(n.getValue)(this.treeSettings.loadOnDemand?this.fields.value:"id",this.selectedData[l]).toString()===e){this.selectedData.splice(l,1);break}},t.prototype.updateSelectedValues=function(){this.dataValue="";var e,t,l,o="";this.hiddenElement.innerHTML="";var r="";if(this.isChipDelete&&!this.treeSettings.autoCheck||!this.inputWrapper.contains(this.chipWrapper)||(this.chipCollection.innerHTML=""),this.isFilteredData||(this.selectedData=[]),!i.i(n.isNullOrUndefined)(this.value)){for(var a=0,h=this.value.length;a<h;a++)l=this.getSelectedData(this.value[a]),t=i.i(n.getValue)(this.treeSettings.loadOnDemand?this.fields.text:"text",l),this.selectedText.push(t),e=this.selectedText[this.selectedText.length-1],this.selectedText.length>1?(this.dataValue+=this.delimiterChar+" "+e,o+=","+e):(this.dataValue+=e,o+=e),"Custom"===this.mode||"Delimiter"===this.mode||this.isChipDelete&&!this.treeSettings.autoCheck||!this.allowMultiSelection&&!this.showCheckBox||this.setChipValues(e,this.value[a]),r+='<option selected value ="'+this.value[a]+'">'+this.selectedText[this.selectedText.length-1]+"</option>";this.selectedText.length>=1&&this.setProperties({text:o},!0),this.hiddenElement.innerHTML=r,"Custom"===this.mode&&(this.allowMultiSelection||this.showCheckBox)&&this.setTagValues()}var p=this.getValidMode();"Custom"===this.mode||"Box"===this.mode||!this.allowMultiSelection&&!this.showCheckBox||p||this.chipWrapper&&(i.i(n.addClass)([this.chipWrapper],v),i.i(n.removeClass)([this.inputWrapper],c)),s.Input.setValue(this.dataValue,this.inputEle,this.floatLabelType),""===o?this.setProperties({text:null},!0):this.setProperties({text:o},!0),this.showClearButton&&this.inputFocus&&this.showOverAllClear(),(this.allowMultiSelection||this.showCheckBox)&&this.popupObj&&this.popupObj.refreshPosition(),this.currentText=this.text,this.currentValue=this.value},t.prototype.setChipValues=function(e,t){this.inputWrapper.contains(this.chipWrapper)||this.createChip();var i=this.createElement("span",{className:"e-chips",attrs:{"data-value":t}}),s=this.createElement("span",{className:"e-chipcontent"}),l=this.createElement("span",{className:"e-chips-close e-icons"});this.enableHtmlSanitizer?s.innerText=n.SanitizeHtmlHelper.sanitize(e):s.innerHTML=e,i.appendChild(s),this.chipCollection.appendChild(i),this.showClearButton&&(i.appendChild(l),n.EventHandler.add(l,"mousedown",this.removeChip,this))},t.prototype.setTagValues=function(){if(null!==this.value&&null!=this.text){this.inputWrapper.contains(this.chipWrapper)||this.createChip(),this.inputWrapper.classList.contains(c)||i.i(n.addClass)([this.inputWrapper],c);var e=this.createElement("span",{className:"e-chips"});this.inputEle.classList.contains(m)||i.i(n.addClass)([this.inputEle],m),this.chipWrapper.classList.contains(v)&&i.i(n.removeClass)([this.chipWrapper],v);var t=this.createElement("span",{className:"e-chipcontent"}),s=this.customTemplate,l=this.customTemplateId,o=this.templateComplier(s),r=o({value:this.value,text:this.text},this,"customTemplate",l,this.isStringTemplate,void 0,t);r&&(r=Array.prototype.slice.call(r),i.i(n.append)(r,t)),e.appendChild(t),this.chipCollection.appendChild(e)}},t.prototype.setSelectAllWrapper=function(e){this.isFirstRender||(e&&!this.popupEle.contains(this.checkAllParent)&&this.showCheckBox?(this.createSelectAllWrapper(),this.popupEle.insertBefore(this.checkAllParent,this.popupDiv)):this.popupEle.contains(this.checkAllParent)&&(i.i(n.detach)(this.checkAllParent),this.checkAllParent=null))},t.prototype.setHeaderTemplate=function(){this.header?this.header.innerHTML="":(this.header=this.createElement("div"),i.i(n.addClass)([this.header],"e-ddt-header"));var e=this.templateComplier(this.headerTemplate),t=e({},this,"headerTemplate",this.headerTemplateId,this.isStringTemplate,void 0,this.header);t&&(t=Array.prototype.slice.call(t),i.i(n.append)(t,this.header)),this.popupEle.insertBefore(this.header,this.checkAllParent?this.checkAllParent:this.popupDiv)},t.prototype.templateComplier=function(e){if(e){try{return"function"!=typeof e&&document.querySelectorAll(e).length?i.i(n.compile)(document.querySelector(e).innerHTML.trim()):i.i(n.compile)(e)}catch(t){return i.i(n.compile)(e)}}return i.i(n.compile)(e)},t.prototype.setFooterTemplate=function(){this.footer?this.footer.innerHTML="":(this.footer=this.createElement("div"),i.i(n.addClass)([this.footer],"e-ddt-footer"));var e=this.templateComplier(this.footerTemplate),t=e({},this,"footerTemplate",this.footerTemplateId,this.isStringTemplate,void 0,this.footer);t&&(t=Array.prototype.slice.call(t),i.i(n.append)(t,this.footer)),i.i(n.append)([this.footer],this.popupEle)},t.prototype.clearAll=function(e){this.enabled&&!this.readonly&&(this.resetValue(),this.showOverAllClear(),(this.allowMultiSelection||this.showCheckBox)&&(this.popupObj&&this.popupObj.refreshPosition(),this.wrapText||this.updateOverflowWrapper(!0)),e&&(this.isClearButtonClick=!0),this.changeOnBlur||this.triggerChangeEvent(e))},t.prototype.removeChip=function(e){if(this.enabled&&!this.readonly){var t=e.target.parentElement,s=t.getAttribute("data-value");this.chipCollection&&t&&i.i(n.remove)(t),this.isChipDelete=!0,this.isClearButtonClick=!0,this.removeSelectedData(s,!0),this.selectedText=[],this.allowMultiSelection&&(this.treeObj.selectedNodes=this.value.slice(),this.updateSelectedValues()),this.showCheckBox&&(this.treeObj.uncheckAll([s]),this.clearCheckAll(),this.setMultiSelect()),this.triggerChangeEvent(e),this.isChipDelete=!1,this.ensurePlaceHolder()}},t.prototype.resetValue=function(e){this.value==[]&&null==this.text||(s.Input.setValue(null,this.inputEle,this.floatLabelType),e||(this.oldValue=this.value,this.setProperties({value:[]},!0)),this.dataValue=null,this.setProperties({text:null},!0),this.selectedData=[],i.i(n.setValue)("selectedNodes",[],this.treeObj),this.hiddenElement.innerHTML="",this.showCheckBox&&(this.treeObj.uncheckAll(),this.setMultiSelect(),this.clearCheckAll()),null!==this.oldValue||e?e&&this.triggerChangeEvent():this.removeValue=!0,(this.allowMultiSelection||this.showCheckBox)&&this.chipWrapper&&(this.chipCollection.innerHTML="",this.wrapText||this.updateOverflowWrapper(!0),this.ensurePlaceHolder()))},t.prototype.clearCheckAll=function(){this.showSelectAll&&this.value&&0===this.value.length&&this.setLocale(!1)},t.prototype.selectAllItems=function(e){if(this.showCheckBox)e?(this.isCheckAllCalled=!0,this.treeObj.checkAll()):this.treeObj.uncheckAll(),this.checkSelectAll=e;else if(this.allowMultiSelection)if(e){for(var t=i.i(n.selectAll)("li",this.treeObj.element),s=void 0,l=[],o=0;o<t.length;o++)s=t[o].getAttribute("data-uid").toString(),l.push(s);this.treeObj.selectedNodes=l}else this.treeObj.selectedNodes=[];this.updateMode(),this.setMultiSelect(),this.wrapText||(e?this.updateView():this.updateOverflowWrapper(!0))},t.prototype.updateTreeSettings=function(e){var t=Object.keys(e.treeSettings)[0];if("autoCheck"===t)this.treeObj.autoCheck=this.treeSettings.autoCheck;else if("loadOnDemand"===t)this.treeObj.loadOnDemand=this.treeSettings.loadOnDemand;else if("expandOn"===t)return this.treeObj.expandOn=this.treeSettings.expandOn,void this.treeObj.dataBind();this.treeObj.dataBind(),this.setMultiSelect(),this.updateValue(this.value)},t.prototype.updateCheckBoxState=function(e){this.hasTemplate&&this.updateTemplate(),this.wrapText||this.updateOverflowWrapper(!1),this.treeObj.showCheckBox=e,this.treeObj.dataBind(),this.isDynamicChange=!0,this.setSelectAllWrapper(this.showSelectAll),this.showSelectAll&&this.setLocale(),this.showCheckBox&&this.updateMode(),this.setMultiSelect(),this.isDynamicChange=!1},t.prototype.updateTemplate=function(){this.popupObj&&(this.clearTemplate(),this.portals=[],this.popupObj.destroy(),this.isPopupOpen?(this.hidePopup(),this.isFirstRender=!0,this.renderPopup()):this.isFirstRender=!0)},t.prototype.l10nUpdate=function(e){if(this.noRecord?this.noRecord.innerHTML="":this.noRecord=this.createElement("div"),"No Records Found"!==this.noRecordsTemplate||"The Request Failed"!==this.actionFailureTemplate){var t=e?this.actionFailureTemplate:this.noRecordsTemplate,s=e?this.actionFailureTemplateId:this.noRecordsTemplateId,l=e?"actionFailureTemplate":"noRecordsTemplate",o=this.templateComplier(t),r=o({},this,l,s,this.isStringTemplate,void 0,this.noRecord);r&&(r=Array.prototype.slice.call(r),i.i(n.append)(r,this.noRecord))}else{var a={noRecordsTemplate:"No Records Found",actionFailureTemplate:"The Request Failed"};this.l10n=new n.L10n(this.getLocaleName(),a,this.locale),this.noRecord.innerHTML=e?this.l10n.getConstant("actionFailureTemplate"):this.l10n.getConstant("noRecordsTemplate")}i.i(n.addClass)([this.noRecord],"e-ddt-nodata"),i.i(n.prepend)([this.noRecord],this.popupDiv)},t.prototype.updateRecordTemplate=function(e){this.treeItems&&this.treeItems.length<=0&&(this.l10nUpdate(e),this.hasTemplate&&this.updateTemplate())},t.prototype.updateOverflowWrapper=function(e){e?this.inputWrapper.contains(this.overFlowWrapper)&&e&&(this.overFlowWrapper.innerHTML=""):this.inputWrapper.contains(this.overFlowWrapper)||(this.overFlowWrapper=this.createElement("span",{className:"e-overflow "+v}),this.inputWrapper.insertBefore(this.overFlowWrapper,this.hiddenElement))},t.prototype.updateMultiSelection=function(e){this.wrapText||this.updateOverflowWrapper(!1),this.treeObj.allowMultiSelection=e,this.treeObj.dataBind(),this.updateOption(),this.allowMultiSelection&&this.updateMode(),this.setMultiSelect()},t.prototype.updateAllowFiltering=function(e){this.isFirstRender||(e?this.renderFilter():this.destroyFilter())},t.prototype.updateFilterPlaceHolder=function(){this.filterObj&&(this.filterObj.placeholder=this.filterBarPlaceholder,this.filterObj.element.setAttribute("aria-label",this.filterBarPlaceholder))},t.prototype.updateValue=function(e){this.isDynamicChange=!0,i.i(n.isNullOrUndefined)(e)||0===e.length?this.resetValue(!0):(this.setTreeValue(),!this.allowMultiSelection&&!this.showCheckBox||this.wrapText||(this.updateOverflowWrapper(!1),this.updateView())),this.updateHiddenValue(),this.isDynamicChange=!1},t.prototype.updateText=function(e){i.i(n.isNullOrUndefined)(e)?this.resetValue():(this.setTreeText(),!this.allowMultiSelection&&!this.showCheckBox||this.wrapText||(this.updateOverflowWrapper(!1),this.updateView())),this.updateHiddenValue()},t.prototype.updateModelMode=function(){if(!!this.allowMultiSelection||!!this.showCheckBox){if(!this.wrapText){var e=i.i(n.select)(".e-overflow",this.inputWrapper);e&&(e.innerHTML="")}this.updateMode(),this.setMultiSelect(),!this.wrapText&&this.value&&0!==this.value.length&&(this.updateOverFlowView(),i.i(n.addClass)([this.inputEle],m),"Box"===this.mode?i.i(n.removeClass)([this.overFlowWrapper,this.inputWrapper],"e-show-text"):i.i(n.addClass)([this.overFlowWrapper,this.inputWrapper],"e-show-text"))}},t.prototype.updateOption=function(){this.hiddenElement.hasAttribute("multiple")||!this.allowMultiSelection&&!this.showCheckBox?!this.hiddenElement.hasAttribute("multiple")||this.allowMultiSelection||this.showCheckBox||this.hiddenElement.removeAttribute("multiple"):this.hiddenElement.setAttribute("multiple","")},t.prototype.onPropertyChanged=function(e,t){for(var l=0,o=Object.keys(e);l<o.length;l++){switch(o[l]){case"width":this.setElementWidth(e.width),this.popupObj&&(this.popupObj.element.style.width=this.setWidth());break;case"placeholder":s.Input.setPlaceholder(e.placeholder,this.inputEle);break;case"cssClass":this.setCssClass(e.cssClass,t.cssClass);break;case"enableRtl":this.setEnableRTL(this.enableRtl);break;case"fields":this.setFields();break;case"readonly":s.Input.setReadonly(e.readonly,this.inputEle);break;case"enabled":this.setEnable();break;case"floatLabelType":s.Input.removeFloating(this.inputObj),s.Input.addFloating(this.inputEle,e.floatLabelType,this.placeholder,this.createElement),this.ensureClearIconPosition(e.floatLabelType);break;case"showClearButton":this.updateClearButton(e.showClearButton);break;case"allowFiltering":this.updateAllowFiltering(e.allowFiltering);break;case"filterBarPlaceholder":this.updateFilterPlaceHolder();break;case"value":this.oldValue=t.value,this.updateValue(e.value);break;case"text":this.updateText(e.text);break;case"allowMultiSelection":this.updateMultiSelection(e.allowMultiSelection);break;case"mode":if(!this.showCheckBox&&!this.allowMultiSelection)return;"Custom"===this.mode?(this.overFlowWrapper&&i.i(n.detach)(this.overFlowWrapper),this.chipWrapper&&i.i(n.detach)(this.chipWrapper),this.setTagValues()):("Custom"===t.mode&&this.updateOverflowWrapper(this.wrapText),this.updateModelMode());break;case"delimiterChar":if("Box"===this.mode)return;(this.showCheckBox||this.allowMultiSelection)&&this.setMultiSelect();break;case"selectAllText":this.showCheckBox&&this.showSelectAll&&this.setLocale();break;case"unSelectAllText":this.showCheckBox&&this.showSelectAll&&this.setLocale(!1);break;case"showSelectAll":this.showCheckBox&&(this.setSelectAllWrapper(e.showSelectAll),this.updatePopupHeight());break;case"showCheckBox":this.updateCheckBoxState(e.showCheckBox),this.wrapText||this.updateOverflowWrapper(!0),this.updatePopupHeight(),this.updateOption();break;case"treeSettings":this.updateTreeSettings(e);break;case"customTemplate":if("Custom"!==this.mode)return;this.chipCollection.innerHTML="",this.setTagValues();break;case"sortOrder":this.hasTemplate&&this.updateTemplate(),this.treeObj.sortOrder=e.sortOrder,this.treeObj.dataBind(),this.updateValue(this.value);break;case"showDropDownIcon":this.updateDropDownIconState(e.showDropDownIcon);break;case"popupWidth":this.popupObj&&(this.popupObj.element.style.width=this.setWidth());break;case"popupHeight":this.popupObj&&this.updatePopupHeight();break;case"zIndex":this.popupObj&&(this.popupObj.zIndex=e.zIndex,this.popupObj.dataBind());break;case"headerTemplate":case"footerTemplate":this.updateTemplate();break;case"itemTemplate":this.updateTemplate(),this.treeObj.nodeTemplate=e.itemTemplate,this.treeObj.dataBind();break;case"noRecordsTemplate":this.updateRecordTemplate();break;case"actionFailureTemplate":this.updateRecordTemplate(!0);break;case"htmlAttributes":this.setHTMLAttributes();break;case"wrapText":this.updateOverflowWrapper(this.wrapText),!this.allowMultiSelection&&!this.showCheckBox||this.wrapText?(i.i(n.addClass)([this.overFlowWrapper],v),this.chipWrapper&&"Box"===this.mode?i.i(n.removeClass)([this.chipWrapper],v):(i.i(n.removeClass)([this.inputWrapper],c),i.i(n.removeClass)([this.inputEle],m)),this.ensurePlaceHolder()):this.updateView()}}},t.prototype.clear=function(){this.clearAll(),this.inputFocus?this.onFocusOut():(this.changeOnBlur&&this.triggerChangeEvent(),this.removeValue=!1)},t.prototype.destroy=function(){for(this.clearTemplate(),this.unWireEvents(),this.setCssClass(null,this.cssClass),this.setProperties({text:null},!0),this.treeObj.destroy(),this.destroyFilter(),this.popupObj&&(this.popupObj.destroy(),i.i(n.detach)(this.popupObj.element)),this.element.tagName!==this.getDirective()&&this.inputWrapper.parentElement.insertBefore(this.element,this.inputWrapper),s.Input.setValue(null,this.inputEle,this.floatLabelType),i.i(n.detach)(this.inputWrapper),i.i(n.detach)(this.popupDiv),i.i(n.detach)(this.hiddenElement),this.element.classList.remove("e-input"),(this.showCheckBox||this.allowMultiSelection)&&this.element.classList.remove(m),this.inputObj=null;this.hiddenElement.options.length>0;)this.hiddenElement.remove(0);this.hiddenElement.innerHTML="",this.hiddenElement=null,this.inputWrapper=null,this.popupDiv=null,this.tree=null,this.popupObj=null,this.treeObj=null,this.overAllClear=null,this.chipWrapper=null,this.chipCollection=null,this.checkAllParent=null,this.selectAllSpan=null,this.checkBoxElement=null,this.checkWrapper=null,this.popupEle=null,this.header=null,this.footer=null,this.overFlowWrapper=null,this.keyboardModule=null,e.prototype.destroy.call(this),this.setProperties({value:[]},!0)},t.prototype.destroyFilter=function(){this.filterObj&&(this.filterObj.destroy(),i.i(n.detach)(this.filterObj.element),i.i(n.detach)(this.filterContainer),this.filterObj=null)},t.prototype.ensureVisible=function(e){this.treeObj.ensureVisible(e)},t.prototype.getData=function(e){return this.treeObj.getTreeData(e)},t.prototype.hidePopup=function(){var e={popup:this.popupObj};this.inputWrapper.classList.remove("e-icon-anim"),this.popupEle&&i.i(n.addClass)([this.popupEle],"e-ddt-icon-hide"),i.i(n.attributes)(this.inputEle,{"aria-expanded":"false"}),this.popupObj&&this.isPopupOpen&&(this.popupObj.hide(),this.inputFocus&&(this.inputWrapper.focus(),this.allowFiltering&&i.i(n.addClass)([this.inputWrapper],[f])),this.trigger("close",e))},t.prototype.selectAll=function(e){this.selectAllItems(e)},t.prototype.showPopup=function(){!this.enabled||this.readonly||this.isPopupOpen||(this.renderPopup(),this.focusIn())},t.prototype.getModuleName=function(){return"dropdowntree"},p([i.i(n.Property)("The Request Failed")],t.prototype,"actionFailureTemplate",void 0),p([i.i(n.Property)(!1)],t.prototype,"allowFiltering",void 0),p([i.i(n.Property)(!1)],t.prototype,"allowMultiSelection",void 0),p([i.i(n.Property)(!0)],t.prototype,"changeOnBlur",void 0),p([i.i(n.Property)("")],t.prototype,"cssClass",void 0),p([i.i(n.Property)("${value.length} item(s) selected")],t.prototype,"customTemplate",void 0),p([i.i(n.Property)(",")],t.prototype,"delimiterChar",void 0),p([i.i(n.Property)(!0)],t.prototype,"enabled",void 0),p([i.i(n.Complex)({},C)],t.prototype,"fields",void 0),p([i.i(n.Property)(null)],t.prototype,"filterBarPlaceholder",void 0),p([i.i(n.Property)("StartsWith")],t.prototype,"filterType",void 0),p([i.i(n.Property)("Never")],t.prototype,"floatLabelType",void 0),p([i.i(n.Property)(null)],t.prototype,"footerTemplate",void 0),p([i.i(n.Property)(!1)],t.prototype,"ignoreAccent",void 0),p([i.i(n.Property)(!0)],t.prototype,"ignoreCase",void 0),p([i.i(n.Property)(null)],t.prototype,"headerTemplate",void 0),p([i.i(n.Property)({})],t.prototype,"htmlAttributes",void 0),p([i.i(n.Property)(null)],t.prototype,"itemTemplate",void 0),p([i.i(n.Property)("Default")],t.prototype,"mode",void 0),p([i.i(n.Property)("No Records Found")],t.prototype,"noRecordsTemplate",void 0),p([i.i(n.Property)(null)],t.prototype,"placeholder",void 0),p([i.i(n.Property)("300px")],t.prototype,"popupHeight",void 0),p([i.i(n.Property)("100%")],t.prototype,"popupWidth",void 0),p([i.i(n.Property)(!1)],t.prototype,"readonly",void 0),p([i.i(n.Property)(!1)],t.prototype,"showSelectAll",void 0),p([i.i(n.Property)("Select All")],t.prototype,"selectAllText",void 0),p([i.i(n.Property)(!1)],t.prototype,"showCheckBox",void 0),p([i.i(n.Property)(!1)],t.prototype,"enableHtmlSanitizer",void 0),p([i.i(n.Property)(!0)],t.prototype,"showClearButton",void 0),p([i.i(n.Property)(!0)],t.prototype,"showDropDownIcon",void 0),p([i.i(n.Property)("None")],t.prototype,"sortOrder",void 0),p([i.i(n.Property)(null)],t.prototype,"text",void 0),p([i.i(n.Complex)({},b)],t.prototype,"treeSettings",void 0),p([i.i(n.Property)("Unselect All")],t.prototype,"unSelectAllText",void 0),p([i.i(n.Property)(null)],t.prototype,"value",void 0),p([i.i(n.Property)("100%")],t.prototype,"width",void 0),p([i.i(n.Property)(1e3)],t.prototype,"zIndex",void 0),p([i.i(n.Property)(!1)],t.prototype,"wrapText",void 0),p([i.i(n.Event)()],t.prototype,"actionFailure",void 0),p([i.i(n.Event)()],t.prototype,"beforeOpen",void 0),p([i.i(n.Event)()],t.prototype,"change",void 0),p([i.i(n.Event)()],t.prototype,"close",void 0),p([i.i(n.Event)()],t.prototype,"blur",void 0),p([i.i(n.Event)()],t.prototype,"created",void 0),p([i.i(n.Event)()],t.prototype,"dataBound",void 0),p([i.i(n.Event)()],t.prototype,"destroyed",void 0),p([i.i(n.Event)()],t.prototype,"filtering",void 0),p([i.i(n.Event)()],t.prototype,"focus",void 0),p([i.i(n.Event)()],t.prototype,"keyPress",void 0),p([i.i(n.Event)()],t.prototype,"open",void 0),p([i.i(n.Event)()],t.prototype,"select",void 0),t=p([n.NotifyPropertyChanges],t)}(n.Component)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i(15);i.d(t,"incrementalSearch",function(){return s.a}),i.d(t,"Search",function(){return s.b}),i.d(t,"escapeCharRegExp",function(){return s.c}),i.d(t,"resetIncrementalSearchValues",function(){return s.d}),i.d(t,"highlightSearch",function(){return s.e}),i.d(t,"revertHighlightSearch",function(){return s.f}),i.d(t,"VirtualScroll",function(){return s.g});var l=i(16);i.d(t,"FieldSettings",function(){return l.a}),i.d(t,"dropDownBaseClasses",function(){return l.b}),i.d(t,"DropDownBase",function(){return l.c});var n=i(17);i.d(t,"dropDownListClasses",function(){return n.a}),i.d(t,"DropDownList",function(){return n.b});var o=i(18);i.d(t,"Fields",function(){return o.a}),i.d(t,"TreeSettings",function(){return o.b}),i.d(t,"DropDownTree",function(){return o.c});var r=i(14);i.d(t,"ComboBox",function(){return r.a});var a=i(13);i.d(t,"AutoComplete",function(){return a.a});var h=i(21);i.d(t,"MultiSelect",function(){return h.a}),i.d(t,"CheckBoxSelection",function(){return h.b}),i.d(t,"createFloatLabel",function(){return h.c}),i.d(t,"updateFloatLabelState",function(){return h.d}),i.d(t,"removeFloating",function(){return h.e}),i.d(t,"setPlaceHolder",function(){return h.f}),i.d(t,"floatLabelFocus",function(){return h.g}),i.d(t,"floatLabelBlur",function(){return h.h}),i.d(t,"encodePlaceholder",function(){return h.i});var p=i(19);i.d(t,"SelectionSettings",function(){return p.a}),i.d(t,"ToolbarSettings",function(){return p.b}),i.d(t,"ListBox",function(){return p.c});var u=i(20);i.d(t,"Mention",function(){return u.a})},function(e,t,i){"use strict";i.d(t,"a",function(){return c}),i.d(t,"b",function(){return d}),i.d(t,"c",function(){return m});var s=i(3),l=(i.n(s),i(1)),n=i(0),o=(i.n(n),i(12)),r=(i.n(o),i(8)),a=(i.n(r),i(4)),h=(i.n(a),i(2)),p=(i.n(h),this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}()),u=this&&this.__decorate||function(e,t,i,s){var l,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var r=e.length-1;r>=0;r--)(l=e[r])&&(o=(n<3?l(o):n>3?l(t,i,o):l(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return p(t,e),u([i.i(n.Property)("Multiple")],t.prototype,"mode",void 0),u([i.i(n.Property)(!1)],t.prototype,"showCheckbox",void 0),u([i.i(n.Property)(!1)],t.prototype,"showSelectAll",void 0),u([i.i(n.Property)("Left")],t.prototype,"checkboxPosition",void 0),t}(n.ChildProperty),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return p(t,e),u([i.i(n.Property)([])],t.prototype,"items",void 0),u([i.i(n.Property)("Right")],t.prototype,"position",void 0),t}(n.ChildProperty),m=function(e){function t(t,i){var s=e.call(this,t,i)||this;return s.isValidKey=!1,s.isDataSourceUpdate=!1,s.keyDownStatus=!1,s}p(t,e),m=t,t.prototype.addItem=function(t,i){e.prototype.addItem.call(this,t,i)},t.prototype.render=function(){if(this.isAngular&&this.allowFiltering){var t=this.element,s=t.cloneNode(!0);t.parentNode.replaceChild(s,t),this.element=s,i.i(n.setValue)("ej2_instances",[this],this.element)}this.inputString="",this.initLoad=!0,this.isCustomFiltering=!1,this.initialSelectedOptions=this.value,this.inputFormName=this.element.getAttribute("name"),e.prototype.render.call(this),this.setEnabled(),this.renderComplete()},t.prototype.initWrapper=function(){var e=this.createElement("select",{className:"e-hidden-select",attrs:{multiple:""}});e.style.visibility="hidden",this.list.classList.add("e-listbox-wrapper"),this.list.querySelector(".e-list-parent").setAttribute("role","presentation");for(var t=this.list.querySelectorAll(".e-list-group-item"),s=0;s<t.length;s++)t[s].removeAttribute("tabindex"),t[s].setAttribute("role","option");this.itemTemplate&&this.list.classList.add("e-list-template"),this.list.classList.add("e-wrapper"),this.list.classList.add("e-lib"),"EJS-LISTBOX"===this.element.tagName?(this.element.setAttribute("tabindex","0"),this.initLoad&&this.element.appendChild(this.list)):(this.initLoad&&this.element.parentElement.insertBefore(this.list,this.element),this.list.insertBefore(this.element,this.list.firstChild),this.element.style.display="none"),this.list.insertBefore(e,this.list.firstChild),this.list.getElementsByClassName("e-list-item")[0]&&this.list.getElementsByClassName("e-list-item")[0].classList.remove(l.a.focus),this.itemTemplate&&this.renderReactTemplates(),i.i(n.removeClass)([this.list],[l.a.content,l.a.root]),this.validationAttribute(this.element,e),this.list.setAttribute("role","listbox"),i.i(n.attributes)(this.list,{role:"listbox","aria-label":"listbox","aria-multiselectable":"Multiple"===this.selectionSettings.mode?"true":"false"}),this.updateSelectionSettings()},t.prototype.updateSelectionSettings=function(){if(this.selectionSettings.showCheckbox&&this.selectionSettings.showSelectAll&&this.liCollections.length){var e=new n.L10n(this.getModuleName(),{selectAllText:"Select All",unSelectAllText:"Unselect All"},this.locale);this.showSelectAll=!0,this.selectAllText=e.getConstant("selectAllText"),this.unSelectAllText=e.getConstant("unSelectAllText"),this.popupWrapper=this.list,this.checkBoxSelectionModule.checkAllParent=null,this.notify("selectAll",{})}},t.prototype.initDraggable=function(){var e=this;this.ulElement&&(this.ulElement.id=this.element.id+"_parent"),this.allowDragAndDrop&&new o.Sortable(this.ulElement,{scope:this.scope,itemClass:"e-list-item",dragStart:this.triggerDragStart.bind(this),drag:this.triggerDrag.bind(this),beforeDrop:this.beforeDragEnd.bind(this),drop:this.dragEnd.bind(this),placeHolder:function(){return e.createElement("span",{className:"e-placeholder"})},helper:function(t){var s=e.list.cloneNode(),l=t.sender.cloneNode(!0);s.appendChild(l);var n=e.getItems()[0];return s.style.width=n.offsetWidth+"px",s.style.height=n.offsetHeight+"px",(e.value&&e.value.length)>1&&e.isSelected(l)&&l.appendChild(e.createElement("span",{className:"e-list-badge",innerHTML:e.value.length+""})),s.style.zIndex=i.i(a.getZindexPartial)(e.element)+"",s}})},t.prototype.updateActionCompleteData=function(e,t,i){this.jsonData.splice(i,0,t)},t.prototype.initToolbar=function(){var e=this.toolbarSettings.position,t=this.element.getAttribute("data-value");if(this.toolbarSettings.items.length){var s=this.createElement("div",{className:"e-listbox-tool",attrs:{role:"toolbar"}}),l=this.createElement("div",{className:"e-listboxtool-wrapper e-lib e-"+e.toLowerCase()});this.list.parentElement.insertBefore(l,this.list),l.appendChild("Right"===e?this.list:s),l.appendChild("Right"===e?s:this.list),this.createButtons(s),this.element.id||(this.element.id=i.i(n.getUniqueID)("e-"+this.getModuleName())),this.scope?document.querySelector(this.scope).setAttribute("data-value",this.element.id):this.updateToolBarState()}var o=this.element.getAttribute("data-value");t&&o&&t!==o?(this.tBListBox=i.i(n.getComponent)(document.getElementById(t),this.getModuleName()),this.tBListBox.updateToolBarState()):o&&(this.tBListBox=i.i(n.getComponent)(document.getElementById(o),this.getModuleName()),this.tBListBox.updateToolBarState())},t.prototype.createButtons=function(e){var t,i,s,l=this,o=new n.L10n(this.getModuleName(),{moveUp:"Move Up",moveDown:"Move Down",moveTo:"Move To",moveFrom:"Move From",moveAllTo:"Move All To",moveAllFrom:"Move All From"},this.locale);this.toolbarSettings.items.forEach(function(n){s=o.getConstant(n),i=l.createElement("button",{attrs:{type:"button","data-value":n,title:s,"aria-label":s}}),e.appendChild(i),t=new r.Button({iconCss:"e-icons e-"+n.toLowerCase()},i),t.createElement=l.createElement})},t.prototype.validationAttribute=function(t,i){this.inputFormName&&t.setAttribute("name",this.inputFormName),e.prototype.validationAttribute.call(this,t,i),i.required=t.required,t.required=!1},t.prototype.setHeight=function(){(this.toolbarSettings.items.length?this.list.parentElement:this.list).style.height=i.i(n.formatUnit)(this.height),this.allowFiltering&&this.height.toString().indexOf("%")<0?i.i(n.addClass)([this.list],"e-filter-list"):i.i(n.removeClass)([this.list],"e-filter-list")},t.prototype.setCssClass=function(){var e=this.toolbarSettings.items.length?this.list.parentElement:this.list;this.cssClass&&i.i(n.addClass)([e],this.cssClass.replace(/\s+/g," ").trim().split(" ")),this.enableRtl&&i.i(n.addClass)([this.list],"e-rtl")},t.prototype.setEnable=function(){var e=this.toolbarSettings.items.length?this.list.parentElement:this.list;this.enabled?i.i(n.removeClass)([e],o.cssClass.disabled):i.i(n.addClass)([e],o.cssClass.disabled)},t.prototype.showSpinner=function(){this.spinner||(this.spinner=this.createElement("div",{className:"e-listbox-wrapper"})),this.spinner.style.height=i.i(n.formatUnit)(this.height),this.element.parentElement.insertBefore(this.spinner,this.element.nextSibling),i.i(a.createSpinner)({target:this.spinner},this.createElement),i.i(a.showSpinner)(this.spinner)},t.prototype.hideSpinner=function(){this.spinner.querySelector(".e-spinner-pane")&&i.i(a.hideSpinner)(this.spinner),this.spinner.parentElement&&i.i(n.detach)(this.spinner)},t.prototype.onInput=function(){this.isDataSourceUpdate=!1,this.keyDownStatus?this.isValidKey=!0:this.isValidKey=!1,this.keyDownStatus=!1,this.refreshClearIcon()},t.prototype.clearText=function(){this.filterInput.value="",this.refreshClearIcon();var e=document.createEvent("KeyboardEvent");this.isValidKey=!0,this.KeyUp(e)},t.prototype.refreshClearIcon=function(){if(this.filterInput.parentElement.querySelector("."+f.clearIcon)){this.filterInput.parentElement.querySelector("."+f.clearIcon).style.visibility=""===this.filterInput.value?"hidden":"visible"}},t.prototype.onActionComplete=function(t,s,l){var o,r,a;if(this.allowFiltering&&this.list.getElementsByClassName("e-filter-parent")[0]&&(o=this.list.getElementsByClassName("e-filter-parent")[0].cloneNode(!0)),0===s.length){var h=t.childNodes[0];h&&t.removeChild(h)}if(this.allowFiltering&&(r=this.list.getElementsByClassName("e-input-filter")[0])&&(a=r.selectionStart),e.prototype.onActionComplete.call(this,t,s,l),this.allowFiltering&&!i.i(n.isNullOrUndefined)(o)){this.list.insertBefore(o,this.list.firstElementChild),this.filterParent=this.list.getElementsByClassName("e-filter-parent")[0],this.filterWireEvents(o);var p=o.querySelector(".e-input-filter");p&&(p.addEventListener("focus",function(){o.childNodes[0].classList.contains("e-input-focus")||o.childNodes[0].classList.add("e-input-focus")}),p.addEventListener("blur",function(){o.childNodes[0].classList.contains("e-input-focus")&&o.childNodes[0].classList.remove("e-input-focus")}))}if(this.initWrapper(),this.setSelection(),this.initDraggable(),this.mainList=this.ulElement,this.initLoad?(this.jsonData=[],i.i(n.extend)(this.jsonData,s,[]),this.initToolbarAndStyles(),this.wireEvents(),this.showCheckbox&&this.setCheckboxPosition(),this.allowFiltering&&this.setFiltering()):(this.isDataSourceUpdate&&(this.jsonData=[],i.i(n.extend)(this.jsonData,s,[]),this.isDataSourceUpdate=!1),this.allowFiltering&&(r=this.list.getElementsByClassName("e-input-filter")[0],r.selectionStart=a,r.selectionEnd=a,r.focus())),this.toolbarSettings.items.length&&this.scope&&this.scope.indexOf("#")>-1&&!i.i(n.isNullOrUndefined)(l)){var u=this.scope.replace("#","");i.i(n.getComponent)(document.getElementById(u),this.getModuleName()).initToolbar()}this.initLoad=!1},t.prototype.initToolbarAndStyles=function(){this.initToolbar(),this.setCssClass(),this.setEnable(),this.setHeight()},t.prototype.triggerDragStart=function(e){var t,s=this;e=i.i(n.extend)(this.getDragArgs(e),{dragSelected:!0}),n.Browser.isIos&&(this.list.style.overflow="hidden"),this.trigger("dragStart",e,function(e){s.allowDragAll=e.dragSelected,s.allowDragAll||(t=s.ulElement.getElementsByClassName("e-list-badge")[0])&&i.i(n.detach)(t)})},t.prototype.triggerDrag=function(e){var t,i,s=this,l=10;if(this.itemTemplate&&e.target)if(e.target&&e.target.closest(".e-list-item"))l=e.target.closest(".e-list-item").scrollHeight;else{var n=e.element.querySelector(".e-list-item");n&&(l=n.scrollHeight)}var o,r=e.event;this.stopTimer(),e.target&&(e.target.classList.contains("e-listbox-wrapper")||e.target.classList.contains("e-list-item")||e.target.classList.contains("e-filter-parent")||e.target.classList.contains("e-input-group")||e.target.closest(".e-list-item"))&&(o=e.target.classList.contains("e-list-item")||e.target.classList.contains("e-filter-parent")||e.target.classList.contains("e-input-group")||e.target.closest(".e-list-item")?e.target.closest(".e-listbox-wrapper"):e.target,t=this.allowFiltering?o.querySelector(".e-list-parent"):o,i=t.getBoundingClientRect(),i.y+t.offsetHeight-(r.clientY+36)<1?this.timer=window.setInterval(function(){s.setScrollDown(t,l,!0)},70):r.clientY-36-i.y<1&&(this.timer=window.setInterval(function(){s.setScrollDown(t,l,!1)},70))),null!==e.target&&this.trigger("drag",this.getDragArgs(e))},t.prototype.setScrollDown=function(e,t,i){e.scrollTop=i?e.scrollTop+t:e.scrollTop-t},t.prototype.stopTimer=function(){window.clearInterval(this.timer)},t.prototype.beforeDragEnd=function(e){this.stopTimer();var t=[];this.dragValue=this.getFormattedValue(e.droppedElement.getAttribute("data-value")),this.value.indexOf(this.dragValue)>-1?e.items=this.getDataByValues(this.value):e.items=this.getDataByValues([this.dragValue]),i.i(n.extend)(t,e.items),this.trigger("beforeDrop",e),e.items!==t&&(this.customDraggedItem=e.items)},t.prototype.dragEnd=function(e){var t,s,l,o,r,a,h=this,p=this.getFormattedValue(e.droppedElement.getAttribute("data-value")),u=this.getComponent(e.droppedElement),c=this.getDragArgs({target:e.droppedElement},!0),d={previousData:this.dataSource},m={previousData:u.dataSource},f=i.i(n.extend)({},c,{target:e.target,source:{previousData:this.dataSource},previousIndex:e.previousIndex,currentIndex:e.currentIndex});if(u!==this){var v=i.i(n.extend)(d,{currentData:this.listData});f=i.i(n.extend)(f,{source:v,destination:m})}n.Browser.isIos&&(this.list.style.overflow="");var g=this.getComponent(e.target);if(g&&0===g.listData.length){var y=g.ulElement.childNodes[0];y&&g.ulElement.removeChild(y)}if(u===this){var C=this.ulElement;t=[].slice.call(this.listData),s=[].slice.call(this.liCollections),l=[].slice.call(this.jsonData),a=[].slice.call(this.sortedData);var b=e.currentIndex,E=e.currentIndex=this.getCurIdx(this,e.currentIndex),S=t.indexOf(this.getDataByValue(p)),x=l.indexOf(this.getDataByValue(p)),I=a.indexOf(this.getDataByValue(p));t.splice(E,0,t.splice(S,1)[0]),a.splice(b,0,a.splice(I,1)[0]),l.splice(E,0,l.splice(x,1)[0]),s.splice(E,0,s.splice(S,1)[0]),this.allowDragAll&&(r=this.value&&Array.prototype.indexOf.call(this.value,p)>-1?this.value:[p],i.i(n.isNullOrUndefined)(this.customDraggedItem)||(r=[],this.customDraggedItem.forEach(function(e){r.push(i.i(n.getValue)(h.fields.value,e))})),r.forEach(function(e){if(e!==p){var i=t.indexOf(h.getDataByValue(e)),n=l.indexOf(h.getDataByValue(e)),o=a.indexOf(h.getDataByValue(e));i>E&&E++,l.splice(E,0,l.splice(n,1)[0]),t.splice(E,0,t.splice(i,1)[0]),a.splice(b,0,a.splice(o,1)[0]),s.splice(E,0,s.splice(i,1)[0]),C.insertBefore(h.getItems()[h.getIndexByValue(e)],C.getElementsByClassName("e-placeholder")[0])}})),this.listData=t,this.jsonData=l,this.sortedData=a,this.liCollections=s}else{var w,O=[].slice.call(this.liCollections),A=e.currentIndex=this.getCurIdx(u,e.currentIndex),k=u.ulElement;t=[].slice.call(u.listData),s=[].slice.call(u.liCollections),l=[].slice.call(u.jsonData),a=[].slice.call(u.sortedData),r=this.value&&Array.prototype.indexOf.call(this.value,p)>-1&&this.allowDragAll?this.value:[p],i.i(n.isNullOrUndefined)(this.customDraggedItem)||(r=[],this.customDraggedItem.forEach(function(e){r.push(i.i(n.getValue)(h.fields.value,e))}));var D=[].slice.call(this.listData),N=[].slice.call(this.sortedData);if(r.forEach(function(i,n){o=h.getDataByValue(i);var r=h.listData.indexOf(o),u=h.jsonData.indexOf(o),c=h.sortedData.indexOf(o);D.splice(r,1),h.jsonData.splice(u,1),N.splice(c,1),h.listData=D,h.sortedData=N;var d=i===p?e.currentIndex:A;if(t.splice(d,0,o),l.splice(d,0,o),a.splice(d,0,o),s.splice(d,0,O.splice(r,1)[0]),i)w=h.getItems()[h.getIndexByValue(i)];else for(var m=h.getItems(),f=0;f<m.length;f++)if(null===m[f].getAttribute("data-value")&&m[f].classList.contains("e-list-item")){w=m[f];break}w||(w=e.helper),h.removeSelected(h,i===p?[e.droppedElement]:[w]),k.insertBefore(w,k.getElementsByClassName("e-placeholder")[0]),A++}),this.fields.groupBy){var L=this.renderItems(this.listData,this.fields);this.updateListItems(L,this.ulElement),this.setSelection()}if("None"!==u.sortOrder||this.selectionSettings.showCheckbox!==u.selectionSettings.showCheckbox||u.fields.groupBy||u.itemTemplate||this.itemTemplate){var T=i.i(n.getComponent)(k,"sortable"),L=u.renderItems(t,u.fields);u.updateListItems(L,k),this.setSelection(),T.placeHolderElement&&k.appendChild(T.placeHolderElement),k.appendChild(e.helper),u.setSelection()}this.liCollections=O,u.liCollections=s,u.jsonData=i.i(n.extend)([],[],l,!1),u.listData=i.i(n.extend)([],[],t,!1),u.sortedData=i.i(n.extend)([],[],a,!1),0===this.listData.length&&this.l10nUpdate()}if(this===u){var v=i.i(n.extend)(d,{currentData:t});f=i.i(n.extend)(f,{source:v})}else{var B=i.i(n.extend)(m,{currentData:t});f=i.i(n.extend)(f,{destination:B})}i.i(n.isNullOrUndefined)(this.customDraggedItem)||(f.items=this.customDraggedItem),this.trigger("drop",f);var P=f.elements;if(P.length)for(var V=0;V<P.length;V++)P[V].classList.remove("e-grabbed")},t.prototype.updateListItems=function(e,t){for(t.innerHTML="";0<e.childNodes.length;)t.appendChild(e.childNodes[0])},t.prototype.removeSelected=function(e,t){e.selectionSettings.showCheckbox?t.forEach(function(e){e.getElementsByClassName("e-frame")[0].classList.remove("e-check")}):i.i(n.removeClass)(t,o.cssClass.selected)},t.prototype.getCurIdx=function(e,t){return e.fields.groupBy&&(t-=[].slice.call(e.ulElement.children).slice(0,t).filter(function(e){return e.classList.contains(o.cssClass.group)}).length),t},t.prototype.getComponent=function(e){var t,s="EJS-LISTBOX"===this.element.tagName?i.i(n.closest)(e,".e-listbox"):i.i(n.closest)(e,".e-listbox-wrapper")&&i.i(n.closest)(e,".e-listbox-wrapper").querySelector(".e-listbox");return s&&(t=i.i(n.getComponent)(s,this.getModuleName())),t},t.prototype.setEnabled=function(){this.element.setAttribute("aria-disabled",this.enabled?"false":"true")},t.prototype.listOption=function(t,s){return this.listCurrentOptions=e.prototype.listOption.call(this,t,s),this.listCurrentOptions=i.i(n.extend)({},this.listCurrentOptions,{itemCreated:this.triggerBeforeItemRender.bind(this)},!0),this.notify("listoption",{module:"CheckBoxSelection"}),this.listCurrentOptions},t.prototype.triggerBeforeItemRender=function(e){e.item.setAttribute("tabindex","-1"),this.trigger("beforeItemRender",{element:e.item,item:e.curData})},t.prototype.requiredModules=function(){var e=[];return this.selectionSettings.showCheckbox&&e.push({member:"CheckBoxSelection",args:[this]}),e},t.prototype.enableItems=function(e,t,s){var l=this;void 0===t&&(t=!0);var r;e.forEach(function(e){var a=e;(r=l.findListElement(l.list,"li","data-value",s?a:l.getValueByText(a)))&&(t?(i.i(n.removeClass)([r],o.cssClass.disabled),r.removeAttribute("aria-disabled")):(i.i(n.addClass)([r],o.cssClass.disabled),r.setAttribute("aria-disabled","true")))})},t.prototype.selectItems=function(e,t,s){void 0===t&&(t=!0),t&&!this.selectionSettings.showCheckbox&&"Single"===this.selectionSettings.mode&&this.getSelectedItems().forEach(function(e){e.classList.remove("e-active"),e.removeAttribute("aria-selected"),i.i(n.removeClass)([e],o.cssClass.selected)}),this.setSelection(e,t,!s),this.updateSelectedOptions();for(var l=[],r=0;r<e.length;r++)for(var a=this.list.querySelectorAll('[aria-selected="true"]'),h=0;h<a.length;h++)e[r]===this.getFormattedValue(a[h].getAttribute("data-value"))&&l.push(a[h]);this.triggerChange(l,null)},t.prototype.selectAll=function(e){void 0===e&&(e=!0),this.selectAllItems(e)},t.prototype.addItems=function(t,i){e.prototype.addItem.call(this,t,i)},t.prototype.removeItems=function(e,t){this.removeItem(e,t)},t.prototype.removeItem=function(e,t){var s=[],o=this.list.querySelectorAll("."+l.a.li);if(e){e=e instanceof Array?e:[e];var r=this.fields,a=void 0,h=[],p=void 0;i.i(n.extend)(h,[],this.jsonData);for(var u=[],c=[],d=0;d<e.length;d++){a=e[d]instanceof Object?i.i(n.getValue)(r.value,e[d]):e[d].toString();for(var m=0,f=h.length;m<f;m++)if((h[m]instanceof Object?i.i(n.getValue)(r.value,h[m]):h[m].toString())===a){p=this.getIndexByValue(a);var v=p===m?p:m;s.push(o[v]),u.push(v),c.push(v)}}for(var g=u.length-1;g>=0;g--)this.listData.splice(u[g],1);for(var g=u.length-1;g>=0;g--)this.jsonData.splice(u[g],1);for(var g=c.length-1;g>=0;g--)this.updateLiCollection(c[g])}else t=t||0,s.push(o[t]),this.listData.splice(t,1),this.jsonData.splice(t,1),this.updateLiCollection(t);for(var m=0;m<s.length;m++)this.ulElement.removeChild(s[m]);0===this.listData.length&&this.l10nUpdate(),this.value=[],this.updateToolBarState()},t.prototype.getDataByValues=function(e){for(var t=[],i=0;i<e.length;i++)t.push(this.getDataByValue(e[i]));return t},t.prototype.moveUp=function(e){var t=e?this.getElemByValue(e):this.getSelectedItems();this.moveUpDown(!0,!1,t)},t.prototype.moveDown=function(e){var t=e?this.getElemByValue(e):this.getSelectedItems();this.moveUpDown(!1,!1,t)},t.prototype.moveTop=function(e){var t=e?this.getElemByValue(e):this.getSelectedItems();this.moveUpDown(null,!1,t,!0)},t.prototype.moveBottom=function(e){var t=e?this.getElemByValue(e):this.getSelectedItems();this.moveUpDown(!0,!1,t,!1,!0)},t.prototype.moveTo=function(e,t,s){var l=e?this.getElemByValue(e):this.getSelectedItems(),o=s?i.i(n.getComponent)(s,m):this.getScopedListBox();this.moveData(this,o,!1,l,t)},t.prototype.moveAllTo=function(e,t){if(this.listData.length>0){var s=e?i.i(n.getComponent)(e,m):this.getScopedListBox();this.moveAllData(this,s,!1,t)}},t.prototype.getDataList=function(){return this.jsonData},t.prototype.getSortedList=function(){var e,t;if(e=t=this.sortedData,this.fields.groupBy){e=[];for(var i=0;i<t.length;i++)t[i].isHeader||e.push(t[i])}return e},t.prototype.getElemByValue=function(e){for(var t=[],i=0;i<e.length;i++)t.push(this.ulElement.querySelector('[data-value ="'+e[i]+'"]'));return t},t.prototype.updateLiCollection=function(e){var t=[].slice.call(this.liCollections);t.splice(e,1),this.liCollections=t},t.prototype.selectAllItems=function(e,t){var i=this;if([].slice.call(this.getItems()).forEach(function(t){if(!t.classList.contains(o.cssClass.disabled))if(i.selectionSettings.showCheckbox){var s=t.getElementsByClassName("e-check")[0];(!s&&e||s&&!e)&&(i.notify("updatelist",{li:t,module:"listbox"}),i.maximumSelectionLength>=i.list.querySelectorAll(".e-list-item span.e-check").length&&i.checkMaxSelection())}else e?t.classList.add(o.cssClass.selected):t.classList.remove(o.cssClass.selected)}),this.updateSelectedOptions(),this.allowFiltering&&this.selectionSettings.showCheckbox){var s=this.list.getElementsByTagName("li"),l=0;if(e){var n=this;for(l=0;l<s.length;l++)!function(){var e=n.getFormattedValue(s[l].getAttribute("data-value"));n.value.some(function(t){return t===e})||n.value.push(n.getFormattedValue(s[l].getAttribute("data-value")))}()}else{var r=this;for(l=0;l<s.length;l++)!function(){var e=r.getFormattedValue(s[l].getAttribute("data-value"));r.value=r.value.filter(function(t){return t!==e})}()}document.querySelectorAll("ul").length<2&&this.updateMainList()}this.triggerChange(this.getSelectedItems(),t)},t.prototype.updateMainList=function(){var e=this.mainList.querySelectorAll(".e-list-item"),t=this.ulElement.querySelectorAll(".e-list-item"),i=e.length,s=t.length;if(this.selectionSettings.showCheckbox||document.querySelectorAll("ul").length>1||i!==s){var l=0,n=0,o=0;for(l;l<i;){if(this.value)for(n;n<this.value.length;n++)e[l].getAttribute("data-value")===this.value[n]&&o++;!o&&this.selectionSettings.showCheckbox&&e[l].getElementsByClassName("e-frame")[0].classList.remove("e-check"),document.querySelectorAll("ul").length>1&&o&&i!==s?(this.mainList.removeChild(this.mainList.getElementsByTagName("li")[l]),l=0):l++,o=0,n=0}}},t.prototype.wireEvents=function(){var e=i.i(n.closest)(this.element,"form"),t="EJS-LISTBOX"===this.element.tagName?this.element:this.list;n.EventHandler.add(this.list,"click",this.clickHandler,this),n.EventHandler.add(t,"keydown",this.keyDownHandler,this),n.EventHandler.add(t,"focusout",this.focusOutHandler,this),this.wireToolbarEvent(),this.selectionSettings.showCheckbox&&n.EventHandler.remove(document,"mousedown",this.checkBoxSelectionModule.onDocumentClick),(this.fields.groupBy||this.element.querySelector("select>optgroup"))&&n.EventHandler.remove(this.list,"scroll",this.setFloatingHeader),e&&n.EventHandler.add(e,"reset",this.formResetHandler,this)},t.prototype.wireToolbarEvent=function(){this.toolbarSettings.items.length&&n.EventHandler.add(this.getToolElem(),"click",this.toolbarClickHandler,this)},t.prototype.unwireEvents=function(){var e=i.i(n.closest)(this.element,"form"),t="EJS-LISTBOX"===this.element.tagName?this.element:this.list;n.EventHandler.remove(this.list,"click",this.clickHandler),n.EventHandler.remove(t,"keydown",this.keyDownHandler),n.EventHandler.remove(t,"focusout",this.focusOutHandler),this.allowFiltering&&this.clearFilterIconElem&&n.EventHandler.remove(this.clearFilterIconElem,"click",this.clearText),this.toolbarSettings.items.length&&n.EventHandler.remove(this.getToolElem(),"click",this.toolbarClickHandler),e&&n.EventHandler.remove(e,"reset",this.formResetHandler)},t.prototype.clickHandler=function(e){this.selectHandler(e)},t.prototype.checkSelectAll=function(){for(var e=0,t=this.list.querySelectorAll("li."+l.a.li),i=0;i<t.length;i++)t[i].classList.contains("e-disabled")||e++;var s=this.getSelectedItems().length;this.showSelectAll&&e&&this.notify("checkSelectAll",{module:"CheckBoxSelection",value:e===s?"check":0===s?"uncheck":"indeterminate"})},t.prototype.getQuery=function(e){var t=e?e.clone():this.query?this.query.clone():new h.Query;if(this.allowFiltering){var i=""===this.inputString?"contains":this.filterType,s=this.typeOfData(this.dataSource).typeof;if(null===s&&(s=this.typeOfData(this.jsonData).typeof),(this.dataSource instanceof h.DataManager||"string"!==s)&&"number"!==s){var l=this.fields.text?this.fields.text:"";t.where(l,i,this.inputString,this.ignoreCase,this.ignoreAccent)}else t.where("",i,this.inputString,this.ignoreCase,this.ignoreAccent)}else t=e||(this.query?this.query:new h.Query);return t},t.prototype.setFiltering=function(){var e;if(this.initLoad||i.i(n.isNullOrUndefined)(this.filterParent))return this.filterParent=this.createElement("span",{className:f.filterParent}),this.filterInput=this.createElement("input",{attrs:{type:"text"},className:f.filterInput}),this.element.parentNode.insertBefore(this.filterInput,this.element),e=s.Input.createInput({element:this.filterInput,buttons:[f.filterBarClearIcon],properties:{placeholder:this.filterBarPlaceholder}},this.createElement),i.i(n.append)([e.container],this.filterParent),i.i(n.prepend)([this.filterParent],this.list),i.i(n.attributes)(this.filterInput,{"aria-disabled":"false","aria-label":"search list item",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false",role:"textbox"}),this.height.toString().indexOf("%")<0&&i.i(n.addClass)([this.list],"e-filter-list"),this.inputString=this.filterInput.value,this.filterWireEvents(),e},t.prototype.filterWireEvents=function(e){e&&(this.filterInput=e.querySelector(".e-input-filter")),this.clearFilterIconElem=this.filterInput.parentElement.querySelector("."+f.clearIcon),this.clearFilterIconElem&&(n.EventHandler.add(this.clearFilterIconElem,"click",this.clearText,this),e||(this.clearFilterIconElem.style.visibility="hidden")),n.EventHandler.add(this.filterInput,"input",this.onInput,this),n.EventHandler.add(this.filterInput,"keyup",this.KeyUp,this),n.EventHandler.add(this.filterInput,"keydown",this.onKeyDown,this)},t.prototype.selectHandler=function(e,t){var s,l=!0,r=i.i(n.closest)(e.target,".e-list-item"),a=[r];if(r&&r.parentElement){if(s=[].slice.call(r.parentElement.children).indexOf(r),this.selectionSettings.showCheckbox?l=!r.getElementsByClassName("e-frame")[0].classList.contains("e-check"):(e.ctrlKey||e.metaKey||n.Browser.isDevice)&&this.isSelected(r)?(r.classList.remove(o.cssClass.selected),r.removeAttribute("aria-selected"),l=!1):"Multiple"===this.selectionSettings.mode&&(e.ctrlKey||e.metaKey||n.Browser.isDevice)||(this.getSelectedItems().forEach(function(e){e.removeAttribute("aria-selected")}),i.i(n.removeClass)(this.getSelectedItems(),o.cssClass.selected)),e.shiftKey&&!this.selectionSettings.showCheckbox&&"Single"!==this.selectionSettings.mode?a=[].slice.call(r.parentElement.children).slice(Math.min(s,this.prevSelIdx),Math.max(s,this.prevSelIdx)+1).filter(function(e){return e.classList.contains("e-list-item")}):this.prevSelIdx=[].slice.call(r.parentElement.children).indexOf(r),l?(this.selectionSettings.showCheckbox||i.i(n.addClass)(a,o.cssClass.selected),a.forEach(function(e){e.setAttribute("aria-selected","true")}),this.list.setAttribute("aria-activedescendant",r.id)):a.forEach(function(e){e.setAttribute("aria-selected","false")}),t||!(this.maximumSelectionLength>(this.value&&this.value.length))&&l||!(this.maximumSelectionLength>=(this.value&&this.value.length))&&l||this.maximumSelectionLength<(this.value&&this.value.length)||this.notify("updatelist",{li:r,e:e,module:"listbox"}),this.allowFiltering&&!t){var h=this.getFormattedValue(r.getAttribute("data-value"));if(l){var p=[];i.i(n.extend)(p,this.value),p.push(h),this.value=p}else this.value=this.value.filter(function(e){return e!==h});document.querySelectorAll("ul").length<2&&this.updateMainList()}this.updateSelectedOptions(),this.triggerChange(this.getSelectedItems(),e),this.list&&this.checkMaxSelection()}},t.prototype.triggerChange=function(e,t){this.trigger("change",{elements:e,items:this.getDataByElements(e),value:this.value,event:t})},t.prototype.getDataByElems=function(e){for(var t=[],i=0,s=e.length;i<s;i++)t.push(this.getDataByValue(this.getFormattedValue(e[i].getAttribute("data-value"))));return t},t.prototype.getDataByElements=function(e){var t,s=[],l=0;if(!i.i(n.isNullOrUndefined)(this.listData)){var o=this.typeOfData(this.listData).typeof;if("string"===o||"number"===o||"boolean"===o)for(var r=0,a=this.listData;r<a.length;r++){for(var h=a[r],p=l,u=e.length;p<u;p++)if(t=this.getFormattedValue(e[p].getAttribute("data-value")),!i.i(n.isNullOrUndefined)(h)&&h===t){l=p,s.push(h);break}if(e.length===s.length)break}else for(var c=0,d=this.listData;c<d.length;c++){for(var h=d[c],p=l,u=e.length;p<u;p++)if(t=this.getFormattedValue(e[p].getAttribute("data-value")),!i.i(n.isNullOrUndefined)(h)&&i.i(n.getValue)(this.fields.value?this.fields.value:"value",h)===t){l=p,s.push(h);break}if(e.length===s.length)break}return s}return null},t.prototype.checkMaxSelection=function(){var e=this.list.querySelectorAll(".e-list-item span.e-check").length;if(this.selectionSettings.showCheckbox){var t=0,i=this.list.getElementsByClassName("e-list-item");for(t;t<i.length;t++)i[t].querySelector(".e-frame.e-check")||(e===this.maximumSelectionLength?i[t].classList.add("e-disable"):i[t].classList.contains("e-disable")&&i[t].classList.remove("e-disable"))}},t.prototype.toolbarClickHandler=function(e){var t=i.i(n.closest)(e.target,"button");if(t){if(this.toolbarAction=t.getAttribute("data-value"),t.disabled)return;switch(this.toolbarAction){case"moveUp":this.moveUpDown(!0);break;case"moveDown":this.moveUpDown();break;case"moveTo":this.moveItemTo();break;case"moveFrom":this.moveItemFrom();break;case"moveAllTo":this.moveAllItemTo();break;case"moveAllFrom":this.moveAllItemFrom();break;default:this.trigger("actionBegin",{cancel:!1,items:this.getDataByElems(this.getSelectedItems()),eventName:this.toolbarAction})}}},t.prototype.moveUpDown=function(e,t,s,l,n){var r=this,a=this.getSelectedItems();if(s&&(a=s),!(e&&this.isSelected(this.ulElement.firstElementChild)||!e&&this.isSelected(this.ulElement.lastElementChild))||s){var h=this.getDataByElems(a),p={cancel:!1,items:h,eventName:this.toolbarAction};this.trigger("actionBegin",p),p.cancel||((e?a:a.reverse()).forEach(function(t){var s=Array.prototype.indexOf.call(r.ulElement.querySelectorAll(".e-list-item"),t),a=Array.prototype.indexOf.call(r.ulElement.children,t);l?(i.i(o.moveTo)(r.ulElement,r.ulElement,[a],0),r.changeData(a,0,s,t)):n?(i.i(o.moveTo)(r.ulElement,r.ulElement,[a],r.ulElement.querySelectorAll(".e-list-item").length),r.changeData(a,r.ulElement.querySelectorAll(".e-list-item").length,s,t)):(i.i(o.moveTo)(r.ulElement,r.ulElement,[a],e?a-1:a+2),r.changeData(a,e?a-1:a+1,e?s-1:s+1,t))}),this.trigger("actionComplete",{items:h,eventName:this.toolbarAction}),a[0].focus(),!t&&this.toolbarSettings.items.length&&this.getToolElem().querySelector("[data-value="+(e?"moveUp":"moveDown")+"]").focus(),this.updateToolBarState())}},t.prototype.moveItemTo=function(){this.moveData(this,this.getScopedListBox())},t.prototype.moveItemFrom=function(){this.moveData(this.getScopedListBox(),this)},t.prototype.moveData=function(e,t,s,l,r){var a=[],h=[],p=[],u=[],c=[].slice.call(e.listData),d=[].slice.call(t.listData),m=[].slice.call(e.sortedData),f=[].slice.call(t.sortedData),v=[].slice.call(e.liCollections),g=[],y=[].slice.call(t.liCollections),C=[],b=[],E=e.getSelectedItems();l&&(E=l);var S="None"!==t.sortOrder||t.selectionSettings.showCheckbox!==e.selectionSettings.showCheckbox||t.fields.groupBy||t.itemTemplate||e.itemTemplate;if(e.value=[],E.length){this.removeSelected(e,E),E.forEach(function(t){a.push(Array.prototype.indexOf.call(e.ulElement.children,t)),g.push(Array.prototype.indexOf.call(e.ulElement.querySelectorAll(".e-list-item"),t)),h.push(Array.prototype.indexOf.call(e.listData,e.getDataByElems([t])[0])),u.push(Array.prototype.indexOf.call(e.sortedData,e.getDataByElems([t])[0])),p.push(Array.prototype.indexOf.call(e.jsonData,e.getDataByElems([t])[0]))}),"None"!==this.sortOrder?u.forEach(function(t){C.push(e.sortedData[t])}):p.forEach(function(t){C.push(e.jsonData[t])});var x={cancel:!1,items:C,eventName:this.toolbarAction};if(e.trigger("actionBegin",x),x.cancel)return;var I=[];if(g.sort(function(e,t){return e-t}).reverse().forEach(function(e){I.push(v.splice(e,1)[0])}),e.liCollections=v,r){var w=y.splice(0,r);t.liCollections=w.concat(I.reverse()).concat(y)}else t.liCollections=y.concat(I.reverse());if(0===t.listData.length){var O=t.ulElement.childNodes[0];O&&t.ulElement.removeChild(O)}if(h.sort(function(e,t){return t-e}).forEach(function(e){c.splice(e,1)[0]}),u.sort(function(e,t){return t-e}).forEach(function(e){m.splice(e,1)[0]}),p.slice().reverse().forEach(function(t){b.push(e.jsonData.splice(t,1)[0])}),S)if(e.fields.groupBy){var A=e.renderItems(c,e.fields);e.updateListItems(A,e.ulElement)}else E.forEach(function(e){i.i(n.detach)(e)});else i.i(o.moveTo)(e.ulElement,t.ulElement,a,r),e.trigger("actionComplete",{items:C,eventName:this.toolbarAction});t.mainList.childElementCount!==t.jsonData.length&&(t.mainList=t.ulElement);var k=[].slice.call(t.jsonData);f=[].slice.call(t.sortedData),this.selectNextList(E,g,h,e),s&&this.list.focus(),e.listData=c,e.sortedData=m,r=r||d.length;for(var D=C.length-1;D>=0;D--)d.splice(r,0,C[D]),k.splice(r,0,C[D]),f.splice(r,0,C[D]);if(t.listData=d,t.jsonData=k,t.sortedData=f,S){var A=t.renderItems(d,t.fields);t.updateListItems(A,t.ulElement),t.setSelection(),e.trigger("actionComplete",{items:C,eventName:this.toolbarAction})}e.updateSelectedOptions(),0===e.listData.length&&e.l10nUpdate()}1===e.value.length&&e.getSelectedItems().length&&(e.value[0]=e.getFormattedValue(e.getSelectedItems()[0].getAttribute("data-value")))},t.prototype.selectNextList=function(e,t,i,s){var l,n,r=s.ulElement.querySelectorAll(".e-list-item").length,a=-1;1===e.length&&r&&!s.selectionSettings.showCheckbox&&(n=r<=t[0]?r-1:t[0],l=s.ulElement.querySelectorAll(".e-list-item")[n],(a=s.getValidIndex(l,n,r===i[0]?38:40))>-1&&s.ulElement.querySelectorAll(".e-list-item")[a].classList.add(o.cssClass.selected))},t.prototype.moveAllItemTo=function(){this.moveAllData(this,this.getScopedListBox())},t.prototype.moveAllItemFrom=function(){this.moveAllData(this.getScopedListBox(),this)},t.prototype.moveAllData=function(e,t,s,l){var n=[].slice.call(t.listData),r=[].slice.call(t.jsonData),a="None"!==t.sortOrder||t.selectionSettings.showCheckbox!==e.selectionSettings.showCheckbox||t.fields.groupBy||t.itemTemplate||e.itemTemplate;this.removeSelected(e,e.getSelectedItems());var h=[].slice.call(e.listData),p={cancel:!1,items:h,eventName:this.toolbarAction};if(e.trigger("actionBegin",p),!p.cancel){if(0===t.listData.length){var u=t.ulElement.childNodes[0];u&&t.ulElement.removeChild(u)}if(a){var u=e.ulElement.childNodes[0];u&&e.ulElement.removeChild(u)}i.i(o.moveTo)(e.ulElement,t.ulElement,Array.apply(null,{length:e.ulElement.childElementCount}).map(Number.call,Number),l),this.trigger("actionComplete",{items:h,eventName:this.toolbarAction}),s&&this.list.focus(),l=l||n.length;for(var c=0;c<e.listData.length;c++)n.splice(l+c,0,e.listData[c]);for(var c=0;c<e.jsonData.length;c++)r.splice(l+c,0,e.jsonData[c]);var d=[].slice.call(e.liCollections),m=[].slice.call(t.liCollections);if(e.liCollections=[],l){var f=m.splice(0,l);t.liCollections=f.concat(d).concat(m)}else t.liCollections=m.concat(d);e.value=[],n=n.filter(function(e){return!0!==e.isHeader});for(var v=n.filter(function(e){return-1===t.jsonData.indexOf(e)}),c=0;c<v.length;c++)t.jsonData.splice(l+c,0,v[c]);if(t.listData=n,e.listData.length===e.jsonData.length)e.listData=e.sortedData=e.jsonData=[];else if(e.allowFiltering){for(var c=0;c<e.listData.length;c++)for(var g=0;g<e.jsonData.length;g++)e.listData[c]===e.jsonData[g]&&e.jsonData.splice(g,1);e.listData=e.sortedData=[]}if(a){var y=t.renderItems(n,t.fields);t.updateListItems(y,t.ulElement),this.trigger("actionComplete",{items:h,eventName:this.toolbarAction})}else t.sortedData=n;e.updateSelectedOptions(),0===e.listData.length&&e.l10nUpdate()}},t.prototype.changeData=function(e,t,i,s){var l=[].slice.call(this.listData),n=[].slice.call(this.jsonData),o=[].slice.call(this.sortedData),r=Array.prototype.indexOf.call(this.jsonData,this.getDataByElems([s])[0]),a=Array.prototype.indexOf.call(this.sortedData,this.getDataByElems([s])[0]),h=[].slice.call(this.liCollections);l.splice(t,0,l.splice(e,1)[0]),n.splice(i,0,n.splice(r,1)[0]),o.splice(t,0,o.splice(a,1)[0]),h.splice(t,0,h.splice(e,1)[0]),this.listData=l,this.jsonData=n,this.liCollections=h,this.sortedData=o},t.prototype.getSelectedItems=function(){var e=[];return this.selectionSettings.showCheckbox?[].slice.call(this.ulElement.getElementsByClassName("e-check")).forEach(function(t){e.push(i.i(n.closest)(t,".e-list-item"))}):e=[].slice.call(this.ulElement.getElementsByClassName(o.cssClass.selected)),e},t.prototype.getScopedListBox=function(){var e,t=this;return this.scope&&[].slice.call(document.querySelectorAll(this.scope)).forEach(function(s){i.i(n.getComponent)(s,t.getModuleName())&&(e=i.i(n.getComponent)(s,t.getModuleName()))}),e},t.prototype.getGrabbedItems=function(e){for(var t=!1,i=0;i<this.value.length;i++)if(this.value[i]===this.getFormattedValue(e.target.getAttribute("data-value"))){t=!0;break}if(t)for(var i=0;i<this.value.length;i++)for(var s=this.list.querySelectorAll('[aria-selected="true"]'),l=0;l<s.length;l++)this.value[i]===this.getFormattedValue(s[l].getAttribute("data-value"))&&s[l].classList.add("e-grabbed");return this.isAngular?Array.prototype.slice.call(this.element.getElementsByClassName("e-list-parent")[0].querySelectorAll(".e-grabbed")):Array.prototype.slice.call(this.element.nextElementSibling.querySelectorAll(".e-grabbed"))},t.prototype.getDragArgs=function(e,t){var i=this.getGrabbedItems(e);return i.length?t&&i.push(e.target):i=[e.target],{elements:i,items:this.getDataByElems(i)}},t.prototype.onKeyDown=function(e){this.keyDownHandler(e),e.stopPropagation()},t.prototype.keyDownHandler=function(e){if([32,35,36,37,38,39,40,65].indexOf(e.keyCode)>-1&&(!this.allowFiltering||this.allowFiltering&&e.target!==this.filterInput)){if(e.target&&e.target.className.indexOf("e-edit-template")>-1)return;if(e.preventDefault(),32===e.keyCode&&this.ulElement.children.length)this.selectHandler({target:this.ulElement.getElementsByClassName("e-focused")[0],ctrlKey:e.ctrlKey,shiftKey:e.shiftKey});else if(65===e.keyCode&&e.ctrlKey)this.selectAll();else if((38===e.keyCode||40===e.keyCode)&&e.ctrlKey&&e.shiftKey)this.moveUpDown(38===e.keyCode,!0);else if(!this.toolbarSettings.items.length&&!this.tBListBox||39!==e.keyCode&&37!==e.keyCode||!e.ctrlKey)37!==e.keyCode&&39!==e.keyCode&&"KeyA"!==e.code&&this.upDownKeyHandler(e);else{var t=this.tBListBox||this.getScopedListBox();39===e.keyCode?e.shiftKey?this.moveAllData(this,t,!0):this.moveData(this,t,!0):e.shiftKey?this.moveAllData(t,this,!0):this.moveData(t,this,!0)}}else this.allowFiltering&&(40!==e.keyCode&&38!==e.keyCode||this.upDownKeyHandler(e))},t.prototype.upDownKeyHandler=function(e){var t=this.ulElement,s=40===e.keyCode||36===e.keyCode?0:t.childElementCount-1,l=s,r=t.getElementsByClassName("e-focused")[0]||t.getElementsByClassName(o.cssClass.selected)[0];if(r){if(35!==e.keyCode&&36!==e.keyCode&&(l=Array.prototype.indexOf.call(t.children,r),40===e.keyCode?l++:l--,l<0||l>t.childElementCount-1))return;i.i(n.removeClass)([r],"e-focused")}var a=t.children[l];if(a){if(-1===(l=this.getValidIndex(a,l,e.keyCode)))return void i.i(n.addClass)([r],"e-focused");if(t.children[l].focus(),t.children[l].classList.add("e-focused"),e.ctrlKey&&(this.selectionSettings.showCheckbox||!e.shiftKey||36!==e.keyCode&&35!==e.keyCode)||this.selectHandler({target:t.children[l],ctrlKey:e.ctrlKey,shiftKey:e.shiftKey},!0),this.selectionSettings.showCheckbox&&e.ctrlKey&&e.shiftKey&&(36===e.keyCode||35===e.keyCode))for(var h=Array.prototype.indexOf.call(t.children,r),p="Home"===e.code?0:h,u="Home"===e.code?h:t.children.length-1,c=p;c<=u;c++){var d=t.children[c];this.notify("updatelist",{li:d,e:{target:this.ulElement.getElementsByClassName("e-focused")[0],ctrlKey:e.ctrlKey,shiftKey:e.shiftKey},module:"listbox"})}}},t.prototype.KeyUp=function(e){var t=this;if(this.allowFiltering&&e.ctrlKey&&65===e.keyCode)return void e.preventDefault();var s=String.fromCharCode(e.keyCode),l=s.match(/\w/);if(i.i(n.isNullOrUndefined)(l)||(this.isValidKey=!0),this.isValidKey=8===e.keyCode||46===e.keyCode||this.isValidKey,this.isValidKey&&(this.isValidKey=!1,e.keyCode,this.allowFiltering)){var o={preventDefaultAction:!1,text:this.targetElement(),updateData:function(e,i,s){o.cancel||(t.isFiltered=!0,t.remoteFilterAction=!0,t.dataUpdater(e,i,s))},event:e,cancel:!1};this.trigger("filtering",o,function(e){t.isDataFetched=!1,e.cancel||""!==t.filterInput.value&&t.isFiltered||(e.cancel||t.isCustomFiltering||e.preventDefaultAction||(t.inputString=t.filterInput.value,t.filteringAction(t.jsonData,new h.Query,t.fields)),t.isFiltered||t.isCustomFiltering||e.preventDefaultAction||t.dataUpdater(t.jsonData,new h.Query,t.fields))})}},t.prototype.filter=function(e,t,i){this.isCustomFiltering=!0,this.filteringAction(e,t,i)},t.prototype.filteringAction=function(e,t,i){this.resetList(e,i,t)},t.prototype.targetElement=function(){return this.targetInputElement=this.list.getElementsByClassName("e-input-filter")[0],this.targetInputElement.value},t.prototype.dataUpdater=function(e,t,i){this.isDataFetched=!1;if(""===this.targetElement().trim()){var s=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.remoteCustomValue=!1,this.isAngular&&this.itemTemplate&&(s=this.renderItems(this.listData,i)),this.onActionComplete(s,this.jsonData),this.notify("reOrder",{module:"CheckBoxSelection",enable:this.selectionSettings.showCheckbox,e:this})}else this.resetList(e,i,t)},t.prototype.focusOutHandler=function(){var e=this.list.getElementsByClassName("e-focused")[0];e&&e.classList.remove("e-focused"),this.allowFiltering&&this.refreshClearIcon()},t.prototype.getValidIndex=function(e,t,i){var s=this.ulElement;return(e.classList.contains("e-disabled")||e.classList.contains(o.cssClass.group))&&(40===i||36===i?t++:t--),t<0||t===s.childElementCount?-1:(e=s.childNodes[t],(e.classList.contains("e-disabled")||e.classList.contains(o.cssClass.group))&&(t=this.getValidIndex(e,t,i)),t)},t.prototype.updateSelectedOptions=function(){var e=this,t=[],s=[];if(i.i(n.extend)(s,this.value),this.getSelectedItems().forEach(function(i){i.classList.contains("e-grabbed")||t.push(e.getFormattedValue(i.getAttribute("data-value")))}),this.mainList.childElementCount===this.ulElement.childElementCount)if(this.allowFiltering&&this.selectionSettings.showCheckbox){for(var l=0;l<t.length;l++)s.indexOf(t[l])>-1||s.push(t[l]);this.setProperties({value:s},!0)}else this.setProperties({value:t},!0);this.updateSelectTag(),this.updateToolBarState(),this.tBListBox&&this.tBListBox.updateToolBarState()},t.prototype.clearSelection=function(e){var t=this;if(void 0===e&&(e=this.value),this.selectionSettings.showCheckbox){var i;this.getSelectedItems().forEach(function(s){i=t.getFormattedValue(s.getAttribute("data-value")),e.indexOf(i)<0&&(s.getElementsByClassName("e-check")[0].classList.remove("e-check"),s.removeAttribute("aria-selected"))})}},t.prototype.setSelection=function(e,t,i){var s=this;void 0===e&&(e=this.value),void 0===t&&(t=!0),void 0===i&&(i=!1);var l,n;e&&e.forEach(function(e){var r;r=i?s.getValueByText(e):e,"string"==typeof r?(r=r.split("\\").join("\\\\"),l=s.list.querySelector('[data-value="'+r.replace(/"/g,'\\"')+'"]')):l=s.list.querySelector('[data-value="'+r+'"]'),l&&(n=s.selectionSettings.showCheckbox?l.getElementsByClassName("e-frame")[0].classList.contains("e-check"):l.classList.contains("e-selected"),(!t&&n||t&&!n&&l)&&(s.selectionSettings.showCheckbox?(s.notify("updatelist",{li:l,module:"listbox"}),l.focus()):t?(l.classList.add(o.cssClass.selected),l.setAttribute("aria-selected","true"),l.focus()):(l.classList.remove(o.cssClass.selected),l.removeAttribute("aria-selected"))))}),this.updateSelectTag()},t.prototype.updateSelectTag=function(){var e=this.getSelectTag(),t="";if(e.innerHTML="",this.value){for(var i=0,s=this.value.length;i<s;i++)t+="<option selected>"+this.value[i]+"</option>";e.innerHTML+=t;for(var i=0,s=e.childNodes.length;i<s;i++)e.childNodes[i].setAttribute("value",this.value[i].toString())}this.checkSelectAll()},t.prototype.checkDisabledState=function(e){return 0===e.ulElement.querySelectorAll("."+o.cssClass.li).length},t.prototype.updateToolBarState=function(){var e=this;if(this.toolbarSettings.items.length){var t=this.getScopedListBox(),i=this.list.parentElement.getElementsByClassName("e-listbox-tool")[0];this.toolbarSettings.items.forEach(function(s){var l=i.querySelector('[data-value="'+s+'"]');switch(s){case"moveAllTo":l.disabled=e.checkDisabledState(e);break;case"moveAllFrom":l.disabled=e.checkDisabledState(t);break;case"moveFrom":l.disabled=!t.value||!t.value.length;break;case"moveUp":l.disabled=!(e.value&&e.value.length&&!e.isSelected(e.ulElement.children[0]));break;case"moveDown":l.disabled=!(e.value&&e.value.length&&!e.isSelected(e.ulElement.children[e.ulElement.childElementCount-1]));break;default:l.disabled=!e.value||!e.value.length}})}},t.prototype.setCheckboxPosition=function(){var e=this.list;this.initLoad||"Left"!==this.selectionSettings.checkboxPosition||e.classList.remove("e-right"),"Right"===this.selectionSettings.checkboxPosition&&e.classList.add("e-right")},t.prototype.showCheckbox=function(e){var t=0,i=this.list.lastElementChild.querySelectorAll("li"),s=this.list.lastElementChild.getElementsByClassName("e-list-item").length;if(e){if(this.ulElement=this.renderItems(this.listData,this.fields),this.mainList=this.ulElement,this.list.removeChild(this.list.getElementsByTagName("ul")[0]),this.list.appendChild(this.ulElement),this.selectionSettings.showSelectAll&&!this.list.getElementsByClassName("e-selectall-parent")[0]){var l=new n.L10n(this.getModuleName(),{selectAllText:"Select All",unSelectAllText:"Unselect All"},this.locale);this.showSelectAll=!0,this.selectAllText=l.getConstant("selectAllText"),this.unSelectAllText=l.getConstant("unSelectAllText"),this.popupWrapper=this.list,this.checkBoxSelectionModule.checkAllParent=null,this.notify("selectAll",{}),this.checkSelectAll()}}else{for(this.list.getElementsByClassName("e-selectall-parent")[0]&&this.list.removeChild(this.list.getElementsByClassName("e-selectall-parent")[0]),t;t<s;t++)i[t].classList.contains("e-list-item")&&i[t].removeChild(i[t].getElementsByClassName("e-checkbox-wrapper")[0]),i[t].hasAttribute("aria-selected")&&i[t].removeAttribute("aria-selected");this.mainList=this.ulElement}this.value=[]},t.prototype.isSelected=function(e){return!i.i(n.isNullOrUndefined)(e)&&(e.classList.contains(o.cssClass.selected)||null!==e.querySelector(".e-check"))},t.prototype.getSelectTag=function(){return this.list.getElementsByClassName("e-hidden-select")[0]},t.prototype.getToolElem=function(){return this.list.parentElement.getElementsByClassName("e-listbox-tool")[0]},t.prototype.formResetHandler=function(){this.value=this.initialSelectedOptions},t.prototype.getModuleName=function(){return"listbox"},t.prototype.getPersistData=function(){return this.addOnPersist(["value"])},t.prototype.getLocaleName=function(){return"listbox"},t.prototype.destroy=function(){this.unwireEvents(),"EJS-LISTBOX"===this.element.tagName?this.element.innerHTML="":(this.element.style.display="inline-block",this.toolbarSettings.items.length&&(this.list.parentElement.parentElement.insertBefore(this.list,this.list.parentElement),i.i(n.detach)(this.list.nextElementSibling)),this.list.parentElement.insertBefore(this.element,this.list)),e.prototype.destroy.call(this),this.enableRtlElements=[],this.liCollections=null,this.list=null,this.ulElement=null,this.mainList=null,this.spinner=null,this.rippleFun=null,this.itemTemplate&&this.clearTemplate()},t.prototype.onPropertyChanged=function(t,l){var r=this.toolbarSettings.items.length?this.list.parentElement:this.list;e.prototype.onPropertyChanged.call(this,t,l),this.setUpdateInitial(["fields","query","dataSource"],t);for(var a=0,h=Object.keys(t);a<h.length;a++){switch(h[a]){case"cssClass":l.cssClass&&i.i(n.removeClass)([r],l.cssClass.split(" ")),t.cssClass&&i.i(n.addClass)([r],t.cssClass.replace(/\s+/g," ").trim().split(" "));break;case"enableRtl":t.enableRtl?this.list.classList.add("e-rtl"):this.list.classList.remove("e-rtl");break;case"value":i.i(n.removeClass)(this.list.querySelectorAll("."+o.cssClass.selected),o.cssClass.selected),this.clearSelection(this.value),this.setSelection();break;case"height":this.setHeight();break;case"enabled":this.setEnable();break;case"allowDragAndDrop":t.allowDragAndDrop?this.initDraggable():i.i(n.getComponent)(this.ulElement,"sortable").destroy();break;case"allowFiltering":this.allowFiltering?this.setFiltering():(this.list.removeChild(this.list.getElementsByClassName("e-filter-parent")[0]),this.filterParent=null,i.i(n.removeClass)([this.list],"e-filter-list"));break;case"filterBarPlaceholder":this.allowFiltering&&this.filterInput&&s.Input.setPlaceholder(t.filterBarPlaceholder,this.filterInput);break;case"scope":this.allowDragAndDrop&&(i.i(n.getComponent)(this.ulElement,"sortable").scope=t.scope),this.toolbarSettings.items.length&&(l.scope&&(i.i(n.getComponent)(document.querySelector(l.scope),this.getModuleName()).tBListBox=null),t.scope&&(i.i(n.getComponent)(document.querySelector(t.scope),this.getModuleName()).tBListBox=this));break;case"toolbarSettings":var p=void 0,u=t.toolbarSettings.position,c=this.getToolElem();u&&(i.i(n.removeClass)([r],["e-right","e-left"]),r.classList.add("e-"+u.toLowerCase()),"Left"===u?r.insertBefore(c,this.list):r.appendChild(c)),t.toolbarSettings.items&&(l.toolbarSettings&&l.toolbarSettings.items.length&&(p=this.list.parentElement,p.parentElement.insertBefore(this.list,p),i.i(n.detach)(p)),this.initToolbarAndStyles(),this.wireToolbarEvent());break;case"selectionSettings":var d=t.selectionSettings.showSelectAll,m=t.selectionSettings.showCheckbox;if(!i.i(n.isNullOrUndefined)(d)){if(this.showSelectAll=d,this.showSelectAll){var f=new n.L10n(this.getModuleName(),{selectAllText:"Select All",unSelectAllText:"Unselect All"},this.locale);this.checkBoxSelectionModule.checkAllParent=null,this.showSelectAll=!0,this.selectAllText=f.getConstant("selectAllText"),this.unSelectAllText=f.getConstant("selectAllText"),this.popupWrapper=this.list}this.notify("selectAll",{}),this.checkSelectAll()}i.i(n.isNullOrUndefined)(m)||this.showCheckbox(m),this.selectionSettings.showCheckbox&&this.setCheckboxPosition();break;case"dataSource":this.isDataSourceUpdate=!0,this.jsonData=[].slice.call(this.dataSource)}}};var m;return u([i.i(n.Property)("")],t.prototype,"cssClass",void 0),u([i.i(n.Property)([])],t.prototype,"value",void 0),u([i.i(n.Property)("")],t.prototype,"height",void 0),u([i.i(n.Property)(!0)],t.prototype,"enabled",void 0),u([i.i(n.Property)(!1)],t.prototype,"enablePersistence",void 0),u([i.i(n.Property)(!1)],t.prototype,"allowDragAndDrop",void 0),u([i.i(n.Property)(1e3)],t.prototype,"maximumSelectionLength",void 0),u([i.i(n.Property)(!1)],t.prototype,"allowFiltering",void 0),u([i.i(n.Property)("")],t.prototype,"scope",void 0),u([i.i(n.Property)(!0)],t.prototype,"ignoreCase",void 0),u([i.i(n.Property)(null)],t.prototype,"filterBarPlaceholder",void 0),u([i.i(n.Event)()],t.prototype,"beforeItemRender",void 0),u([i.i(n.Event)()],t.prototype,"filtering",void 0),u([i.i(n.Event)()],t.prototype,"select",void 0),u([i.i(n.Event)()],t.prototype,"change",void 0),u([i.i(n.Event)()],t.prototype,"beforeDrop",void 0),u([i.i(n.Event)()],t.prototype,"dragStart",void 0),u([i.i(n.Event)()],t.prototype,"drag",void 0),u([i.i(n.Event)()],t.prototype,"drop",void 0),u([i.i(n.Event)()],t.prototype,"dataBound",void 0),u([i.i(n.Property)(null)],t.prototype,"groupTemplate",void 0),u([i.i(n.Property)("Request failed")],t.prototype,"actionFailureTemplate",void 0),u([i.i(n.Property)(1e3)],t.prototype,"zIndex",void 0),u([i.i(n.Property)(!1)],t.prototype,"ignoreAccent",void 0),u([i.i(n.Complex)({},d)],t.prototype,"toolbarSettings",void 0),u([i.i(n.Complex)({},c)],t.prototype,"selectionSettings",void 0),t=m=u([n.NotifyPropertyChanges],t)}(l.c),f={backIcon:"e-input-group-icon e-back-icon e-icons",filterBarClearIcon:"e-input-group-icon e-clear-icon e-icons",filterInput:"e-input-filter",filterParent:"e-filter-parent",clearIcon:"e-clear-icon"}},function(e,t,i){"use strict";i.d(t,"a",function(){return p});var s=i(0),l=(i.n(s),i(1)),n=i(2),o=(i.n(n),i(4)),r=(i.n(o),i(6)),a=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),h=this&&this.__decorate||function(e,t,i,s){var l,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var r=e.length-1;r>=0;r--)(l=e[r])&&(o=(n<3?l(o):n>3?l(t,i,o):l(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},p=function(e){function t(t,i){return e.call(this,t,i)||this}return a(t,e),t.prototype.onPropertyChanged=function(e,t){for(var i=0,s=Object.keys(e);i<s.length;i++){switch(s[i]){case"minLength":this.minLength=e.minLength;break;case"suffixText":this.suffixText=e.suffixText;break;case"allowSpaces":this.allowSpaces=e.allowSpaces;break;case"mentionChar":this.mentionChar=e.mentionChar;break;case"showMentionChar":this.showMentionChar=e.showMentionChar;break;case"cssClass":this.updateCssClass(e.cssClass,t.cssClass)}}},t.prototype.updateCssClass=function(e,t){i.i(s.isNullOrUndefined)(t)||(t=t.replace(/\s+/g," ").trim()),i.i(s.isNullOrUndefined)(e)||(e=e.replace(/\s+/g," ").trim()),this.setCssClass(e,[this.inputElement],t),this.popupObj&&this.setCssClass(e,[this.popupObj.element],t)},t.prototype.setCssClass=function(e,t,l){i.i(s.isNullOrUndefined)(l)||""===l||i.i(s.removeClass)(t,l.split(" ")),i.i(s.isNullOrUndefined)(e)||""===e||i.i(s.addClass)(t,e.split(" "))},t.prototype.initializeData=function(){this.isSelected=!1,this.isFiltered=!1,this.beforePopupOpen=!1,this.initRemoteRender=!1,this.isListResetted=!1,this.isPopupOpen=!1,this.isCollided=!1,this.lineBreak=!1},t.prototype.preRender=function(){this.initializeData(),e.prototype.preRender.call(this)},t.prototype.render=function(){var e="string"==typeof this.target;this.inputElement=i.i(s.isNullOrUndefined)(this.target)?this.element:this.checkAndUpdateInternalComponent(e?document.querySelector(this.target):this.target),this.isContentEditable(this.inputElement)&&(this.inputElement.setAttribute("contenteditable","true"),i.i(s.addClass)([this.inputElement],["e-mention"]),i.i(s.isNullOrUndefined)(this.target)&&i.i(s.addClass)([this.inputElement],["e-editable-element"])),this.inputElement.setAttribute("role","textbox"),this.inputElement.setAttribute("aria-label","mention"),this.queryString=this.elementValue(),this.wireEvent()},t.prototype.wireEvent=function(){s.EventHandler.add(this.inputElement,"keyup",this.onKeyUp,this),this.bindCommonEvent()},t.prototype.unWireEvent=function(){s.EventHandler.remove(this.inputElement,"keyup",this.onKeyUp),this.unBindCommonEvent()},t.prototype.bindCommonEvent=function(){s.Browser.isDevice||this.inputElement.addEventListener("keydown",this.keyDownHandler.bind(this),!0)},t.prototype.hideSpinner=function(){this.hideWaitingSpinner()},t.prototype.hideWaitingSpinner=function(){i.i(s.isNullOrUndefined)(this.spinnerElement)||i.i(o.hideSpinner)(this.spinnerElement),i.i(s.isNullOrUndefined)(this.spinnerTemplate)||i.i(s.isNullOrUndefined)(this.spinnerTemplateElement)||i.i(s.detach)(this.spinnerTemplateElement)},t.prototype.checkAndUpdateInternalComponent=function(e){if(!this.isVue&&e.classList.contains("e-richtexteditor"))return e.querySelector(".e-content");if(this.isVue&&"TEXTAREA"===e.nodeName&&e.classList.contains("e-rte-hidden")){var t=e.parentElement;if(t&&t.classList.contains("e-richtexteditor"))return t.querySelector(".e-content")}return e},t.prototype.showWaitingSpinner=function(){i.i(s.isNullOrUndefined)(this.popupObj)||(i.i(s.isNullOrUndefined)(this.spinnerTemplate)&&i.i(s.isNullOrUndefined)(this.spinnerElement)&&(this.spinnerElement=this.popupObj.element,i.i(o.createSpinner)({target:this.spinnerElement,width:s.Browser.isDevice?"16px":"14px"},this.createElement),i.i(o.showSpinner)(this.spinnerElement)),i.i(s.isNullOrUndefined)(this.spinnerTemplate)||this.setSpinnerTemplate())},t.prototype.keyDownHandler=function(e){var t=!0;switch(e.keyCode){case 38:e.action=e.altKey?"hide":"up";break;case 40:e.action=e.altKey?"open":"down";break;case 33:e.action="pageUp";break;case 34:e.action="pageDown";break;case 36:e.action="home";break;case 35:e.action="end";break;case 9:e.action=e.shiftKey?"close":"tab";break;case 27:e.action="escape";break;case 32:e.action="space";break;case 13:e.action="enter";break;default:t=!1}t&&this.keyActionHandler(e)},t.prototype.keyActionHandler=function(e){var t="down"===e.action||"up"===e.action||"pageUp"===e.action||"pageDown"===e.action||"home"===e.action||"end"===e.action,n="tab"===e.action||"close"===e.action;if(void 0!==this.list||this.isRequested||n||"escape"===e.action||"space"===e.action||this.renderList(),!(i.i(s.isNullOrUndefined)(this.list)||!i.i(s.isNullOrUndefined)(this.liCollections)&&t&&0===this.liCollections.length||this.isRequested))switch("escape"===e.action&&e.preventDefault(),this.isSelected="escape"!==e.action&&this.isSelected,e.action){case"down":case"up":this.isUpDownKey=!0,this.updateUpDownAction(e);break;case"tab":if(this.isPopupOpen){e.preventDefault();var o=this.list.querySelector("."+l.a.selected);o&&this.setSelection(o,e),this.isPopupOpen&&this.hidePopup(e)}break;case"enter":this.isPopupOpen&&(e.preventDefault(),this.popupObj&&this.popupObj.element.contains(this.selectedLI)&&this.updateSelectedItem(this.selectedLI,e,!1,!0));break;case"escape":this.isPopupOpen&&this.hidePopup(e)}},t.prototype.updateUpDownAction=function(e){var t=this.list.querySelector("."+l.a.focus);if(this.isSelectFocusItem(t))this.setSelection(t,e);else if(!i.i(s.isNullOrUndefined)(this.liCollections)){var n=this.list.querySelector("."+l.a.selected);if(!i.i(s.isNullOrUndefined)(n)){var o=this.getFormattedValue(n.getAttribute("data-value"));this.activeIndex=this.getIndexByValue(o)}var r="down"===e.action?this.activeIndex+1:this.activeIndex-1,a=0;a="down"===e.action&&i.i(s.isNullOrUndefined)(this.activeIndex)?0:this.liCollections.length-1,r=r<0?this.liCollections.length-1:r===this.liCollections.length?0:r;var h=i.i(s.isNullOrUndefined)(this.activeIndex)?this.liCollections[a]:this.liCollections[r];i.i(s.isNullOrUndefined)(h)||this.setSelection(h,e)}this.isPopupOpen&&e.preventDefault()},t.prototype.isSelectFocusItem=function(e){return!i.i(s.isNullOrUndefined)(e)},t.prototype.unBindCommonEvent=function(){s.Browser.isDevice||this.inputElement.removeEventListener("keydown",this.keyDownHandler.bind(this),!0)},t.prototype.onKeyUp=function(e){var t;if(this.isUpDownKey&&this.isPopupOpen&&229===e.keyCode)return void(this.isUpDownKey=!1);this.isTyped="Enter"!==e.code&&"Space"!==e.code&&"ArrowDown"!==e.code&&"ArrowUp"!==e.code;var l=!(!document.activeElement.parentElement||!document.activeElement.parentElement.querySelector(".e-rte-image"));document.activeElement==this.inputElement||l||this.inputElement.focus(),this.isContentEditable(this.inputElement)&&(this.range=this.getCurrentRange(),t=this.range.startContainer.textContent.split(""));var n=this.getTextRange(),o=this.getLastLetter(n),r=this.mentionChar.toString()+this.mentionChar.toString(),a=new RegExp(this.mentionChar.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),h=new RegExp("[a-zA-Z]","g");if("Shift"!==e.key&&37!==e.keyCode&&39!==e.keyCode){if(this.beforePopupOpen&&this.isPopupOpen&&o==r)return void this.hidePopup();if(!n||!o||"Enter"===e.code||27===e.keyCode||o.match(a)&&o.match(a).length>1||this.isContentEditable(this.inputElement)&&this.range.startContainer&&this.range.startContainer.previousElementSibling&&"BR"!==this.range.startContainer.previousElementSibling.tagName&&this.range.startContainer.textContent.split("").length>0&&(1===t.length||-1===t[t.length-2].indexOf("")||1===this.range.startContainer.nodeType))return void(this.isPopupOpen&&this.allowSpaces&&n&&""!==n.trim()&&h.test(n)&&-1!==n.indexOf(this.mentionChar)&&!this.isMatchedText()&&n.length>1&&" "!==n.replace(/\u00A0/g," ").charAt(n.length-2)&&this.list&&this.list.querySelectorAll("ul").length>0?(this.queryString=n.substring(n.lastIndexOf(this.mentionChar)+1).replace(""," "),this.searchLists(e)):!this.isPopupOpen||this.allowSpaces&&o||"ArrowDown"===e.code||"ArrowUp"===e.code||(this.hidePopup(),this.lineBreak=!0));o.includes(this.mentionChar)&&(this.queryString=o.replace(this.mentionChar,"")),this.mentionChar.charCodeAt(0)!==o.charCodeAt(0)||""===this.queryString||38===e.keyCode||40===e.keyCode||this.lineBreak?0===o.indexOf(this.mentionChar)&&!this.isPopupOpen&&8!==e.keyCode&&(!this.popupObj||i.i(s.isNullOrUndefined)(this.target)&&!document.body.contains(this.popupObj.element)||!i.i(s.isNullOrUndefined)(this.target)&&document.body.contains(this.popupObj.element))?(this.initRemoteRender&&this.list&&this.list.classList.contains("e-nodata")&&this.searchLists(e),this.resetList(this.dataSource,this.fields),i.i(s.isNullOrUndefined)(this.list)&&this.initValue(),!this.isPopupOpen&&38!==e.keyCode&&40!==e.keyCode&&this.queryString.length>=this.minLength&&(this.didPopupOpenByTypingInitialChar=!0,this.showPopup(),this.initRemoteRender&&0===this.list.querySelectorAll("li").length&&this.showWaitingSpinner(),this.lineBreak=!1)):this.allowSpaces&&""!==this.queryString&&n&&""!==n.trim()&&n.replace(""," ").lastIndexOf(" ")<n.length-1&&38!==e.keyCode&&40!==e.keyCode&&8!==e.keyCode&&this.mentionChar.charCodeAt(0)===o.charCodeAt(0)?(this.queryString=n.substring(n.lastIndexOf(this.mentionChar)+1).replace(""," "),this.searchLists(e)):""===this.queryString&&this.isPopupOpen&&38!==e.keyCode&&40!==e.keyCode&&this.mentionChar.charCodeAt(0)===o.charCodeAt(0)&&(this.searchLists(e),this.isListResetted||this.resetList(this.dataSource,this.fields)):(this.searchLists(e),!this.isPopupOpen&&this.queryString.length>=this.minLength&&(this.isContentEditable(this.inputElement)?this.isContentEditable(this.inputElement)&&this.range&&this.range.startContainer!==this.inputElement&&9!==e.keyCode&&this.showPopup():this.showPopup())),this.isListResetted=!1}},t.prototype.isMatchedText=function(){for(var e=!1,t=0;t<(this.liCollections&&this.liCollections.length);t++)this.getTextRange()&&this.getTextRange().substring(this.getTextRange().lastIndexOf(this.mentionChar)+1).replace(""," ").trim()===this.liCollections[t].getAttribute("data-value").toLowerCase()&&(e=!0);return e},t.prototype.getCurrentRange=function(){return this.range=this.inputElement.ownerDocument.getSelection().getRangeAt(0),this.range},t.prototype.searchLists=function(t){var l=this;if(this.isDataFetched=!1,i.i(s.isNullOrUndefined)(this.list)&&(e.prototype.render.call(this),this.unWireListEvents(),this.wireListEvents()),"mousedown"!==t.type&&(40===t.keyCode||38===t.keyCode))return this.queryString=""===this.queryString?null:this.queryString,this.beforePopupOpen=!0,void this.resetList(this.dataSource,this.fields);this.isSelected=!1,this.activeIndex=null;var n={preventDefaultAction:!1,text:this.queryString,updateData:function(e,t,i){n.cancel||(l.isFiltered=!0,l.filterAction(e,t,i))},cancel:!1};this.trigger("filtering",n,function(e){e.cancel||l.isFiltered||e.preventDefaultAction||l.filterAction(l.dataSource,null,l.fields)})},t.prototype.filterAction=function(e,t,i){this.beforePopupOpen=!0,this.queryString.length>=this.minLength?(this.resetList(e,i,t),this.isListResetted=!0):(this.isPopupOpen&&this.hidePopup(),this.beforePopupOpen=!1),this.setDataIndex(),this.renderReactTemplates()},t.prototype.onActionComplete=function(t,n,o,r){if(e.prototype.onActionComplete.call(this,t,n,o),this.isActive){i.i(s.isNullOrUndefined)(t)||i.i(s.attributes)(t,{id:this.inputElement.id+"_options",role:"listbox","aria-hidden":"false"});var a=t.querySelector("."+l.a.li);if(a){a.classList.add(l.a.selected),this.selectedLI=a;var h=this.getFormattedValue(a.getAttribute("data-value"));this.selectEventCallback(a,this.getDataByValue(h),h,!0)}this.beforePopupOpen&&this.isPopupOpen&&(i.i(s.isNullOrUndefined)(this.popupObj.element)||this.popupObj.element.remove(),this.renderPopup())}},t.prototype.setDataIndex=function(){for(var e=0;this.liCollections&&e<this.liCollections.length;e++)this.liCollections[e].setAttribute("data-index",e.toString())},t.prototype.listOption=function(t,l){var n=this,o=e.prototype.listOption.call(this,t,l);if(i.i(s.isNullOrUndefined)(o.itemCreated))o.itemCreated=function(e){n.highlight&&(n.inputElement.tagName===n.getNgDirective()&&n.itemTemplate?setTimeout(function(){i.i(r.a)(e.item,n.queryString,n.ignoreCase,n.filterType)},0):i.i(r.a)(e.item,n.queryString,n.ignoreCase,n.filterType))};else{var a=o.itemCreated;o.itemCreated=function(e){n.highlight&&i.i(r.a)(e.item,n.queryString,n.ignoreCase,n.filterType),a.apply(n,[e])}}return o},t.prototype.elementValue=function(){return this.isContentEditable(this.inputElement)?this.inputElement.textContent.replace(this.mentionChar,""):this.inputElement.value.replace(this.mentionChar,"")},t.prototype.getQuery=function(e){var t=e?e.clone():this.query?this.query.clone():new n.Query,l=""!==this.queryString||i.i(s.isNullOrUndefined)(this.elementValue())?this.filterType:"equal",o=""!==this.queryString||i.i(s.isNullOrUndefined)(this.elementValue())?this.queryString:this.elementValue();if(this.isFiltered)return t;if(null!==this.queryString&&""!==this.queryString){var r=this.typeOfData(this.dataSource).typeof;if((this.dataSource instanceof n.DataManager||"string"!==r)&&"number"!==r){var a=i.i(s.isNullOrUndefined)(this.fields.text)?"":this.fields.text;t.where(a,l,o,this.ignoreCase,this.ignoreAccent)}else t.where("",l,o,this.ignoreCase,this.ignoreAccent)}if(!i.i(s.isNullOrUndefined)(this.suggestionCount)){if(25!==this.suggestionCount)for(var h=0;h<t.queries.length;h++)"onTake"===t.queries[h].fn&&t.queries.splice(h,1);t.take(this.suggestionCount)}return t},t.prototype.renderHightSearch=function(){if(this.highlight)for(var e=0;e<this.liCollections.length;e++){var t=this.ulElement.querySelector(".e-active");t||(i.i(r.b)(this.liCollections[e]),i.i(r.a)(this.liCollections[e],this.queryString,this.ignoreCase,this.filterType))}},t.prototype.getTextRange=function(){var e;if(this.isContentEditable(this.inputElement)){if(this.range){var t=this.range.startContainer;if(!i.i(s.isNullOrUndefined)(t)){var l=t.textContent,n=this.range.startOffset;l&&n>=0&&(e=l.substring(0,n))}}}else{var o=this.inputElement;if(!i.i(s.isNullOrUndefined)(o)){var r=o.selectionStart;o.value&&r>=0&&(e=o.value.substring(0,r))}}return e},t.prototype.getLastLetter=function(e){if(i.i(s.isNullOrUndefined)(e))return"";var t=e.replace(/\u00A0/g," "),l=t.split(/\s+/);return l[l.length-1].trim()},t.prototype.isContentEditable=function(e){return e&&"INPUT"!==e.nodeName&&"TEXTAREA"!==e.nodeName},t.prototype.showPopup=function(){this.beforePopupOpen=!0,document.activeElement!=this.inputElement&&this.inputElement.focus(),this.queryString=this.didPopupOpenByTypingInitialChar?this.queryString:"",this.didPopupOpenByTypingInitialChar=!1,this.isContentEditable(this.inputElement)&&(this.range=this.getCurrentRange()),this.isTyped||this.resetList(this.dataSource,this.fields),i.i(s.isNullOrUndefined)(this.list)&&this.initValue(),this.renderPopup(),i.i(s.attributes)(this.inputElement,{"aria-activedescendant":this.selectedElementID}),null==this.selectedElementID&&this.inputElement.removeAttribute("aria-activedescendant")},t.prototype.hidePopup=function(e){this.removeSelection(),this.closePopup(0,e)},t.prototype.closePopup=function(e,t){var i=this;if(this.popupObj&&document.body.contains(this.popupObj.element)&&this.beforePopupOpen){s.EventHandler.remove(document,"mousedown",this.onDocumentClick),this.inputElement.removeAttribute("aria-owns"),this.inputElement.removeAttribute("aria-activedescendant"),this.beforePopupOpen=!1;var l={name:"FadeOut",duration:100,delay:e||0},n=this.popupObj,o={popup:n,cancel:!1,animation:l,event:t||null};this.trigger("closed",o,function(e){!e.cancel&&i.popupObj&&(i.isPopupOpen?i.popupObj.hide(new s.Animation(e.animation)):i.destroyPopup())})}},t.prototype.renderPopup=function(){var e=this,t={cancel:!1};this.trigger("beforeOpen",t,function(t){if(t.cancel)e.beforePopupOpen=!1;else{var n;if(i.i(s.isNullOrUndefined)(e.target)?n=e.createElement("div",{id:e.inputElement.id+"_popup",className:"e-mention e-popup "+(null!=e.cssClass?e.cssClass:"")}):(n=e.element,null!=e.cssClass&&i.i(s.addClass)([n],e.cssClass.split(" "))),i.i(s.isNullOrUndefined)(e.target)||(n.id=e.inputElement.id+"_popup"),e.listHeight=i.i(s.formatUnit)(e.popupHeight),!i.i(s.isNullOrUndefined)(e.list.querySelector("li"))&&!e.initRemoteRender){var r=e.list.querySelector("."+l.a.focus);if(!i.i(s.isNullOrUndefined)(r)){e.selectedLI=r;var a=e.getFormattedValue(r.getAttribute("data-value"));e.selectEventCallback(r,e.getDataByValue(a),a,!0)}}i.i(s.append)([e.list],n),e.inputElement.parentElement&&e.inputElement.parentElement.parentElement&&e.inputElement.parentElement.parentElement.classList.contains("e-richtexteditor")&&n.firstElementChild&&n.firstElementChild.childElementCount>0&&(n.firstElementChild.setAttribute("aria-owns",e.inputElement.parentElement.parentElement.id),i.i(s.addClass)([n],"e-rte-elements")),e.popupObj&&document.body.contains(e.popupObj.element)&&(document.contains(n)||!i.i(s.isNullOrUndefined)(e.target))||document.body.appendChild(n);var h;n.style.visibility="hidden",e.setHeight(n);e.initializePopup(n,0,0),e.checkCollision(n),n.style.visibility="visible";var p=n.parentElement.offsetWidth-n.offsetWidth,u=n.offsetHeight;i.i(s.addClass)([n],["e-mention","e-popup","e-popup-close"]),i.i(s.isNullOrUndefined)(e.list)||(e.unWireListEvents(),e.wireListEvents()),e.selectedElementID=e.selectedLI?e.selectedLI.id:null,i.i(s.attributes)(e.inputElement,{"aria-owns":e.inputElement.id+"_options","aria-activedescendant":e.selectedElementID}),null==e.selectedElementID&&e.inputElement.removeAttribute("aria-activedescendant");var c={name:"FadeIn",duration:100};e.beforePopupOpen=!0;var d=e.popupObj,m={popup:d,cancel:!1,animation:c};e.trigger("opened",m,function(t){if(t.cancel)e.beforePopupOpen=!1,e.destroyPopup();else{if(e.renderReactTemplates(),e.popupObj&&e.popupObj.show(new s.Animation(t.animation),1e3===e.zIndex?e.inputElement:null),i.i(s.isNullOrUndefined)(e.getTriggerCharPosition()))return;h=e.getCoordinates(e.inputElement,e.getTriggerCharPosition()),e.isCollided?(e.collision.length>0&&e.collision.indexOf("right")>-1&&-1===e.collision.indexOf("bottom")?n.style.cssText="top: ".concat(h.top.toString(),"px;\n left: ").concat(p.toString(),"px;\nposition: absolute;\n display: block;"):e.collision&&e.collision.length>0&&e.collision.indexOf("bottom")>-1&&-1===e.collision.indexOf("right")?(n.style.left=i.i(s.formatUnit)(h.left),n.style.top=i.i(s.formatUnit)(h.top-parseInt(u.toString()))):e.collision&&e.collision.length>0&&e.collision.indexOf("bottom")>-1&&e.collision.indexOf("right")>-1?(n.style.left=i.i(s.formatUnit)(p),n.style.top=i.i(s.formatUnit)(h.top-parseInt(u.toString()))):(n.style.left=i.i(s.formatUnit)(h.left),n.style.top=i.i(s.formatUnit)(h.top-parseInt(e.popupHeight.toString()))),e.isCollided=!1,e.collision=[]):n.style.cssText="top: ".concat(h.top.toString(),"px;\n left: ").concat(h.left.toString(),"px;\nposition: absolute;\n display: block;"),n.style.width="100%"===e.popupWidth||i.i(s.isNullOrUndefined)(e.popupWidth)?"auto":i.i(s.formatUnit)(e.popupWidth),e.setHeight(n),n.style.zIndex=1e3===e.zIndex?i.i(o.getZindexPartial)(n).toString():e.zIndex.toString()}})}})},t.prototype.setHeight=function(e){"auto"!==this.popupHeight&&this.list?(this.list.style.maxHeight=(parseInt(this.listHeight,10)-2).toString()+"px",e.style.maxHeight=i.i(s.formatUnit)(this.popupHeight)):e.style.height="auto"},t.prototype.checkCollision=function(e){if(!s.Browser.isDevice||s.Browser.isDevice&&"mention"!==this.getModuleName()){var t=this.getCoordinates(this.inputElement,this.getTriggerCharPosition());this.collision=i.i(o.isCollide)(e,null,t.left,t.top),this.collision.length>0&&(e.style.marginTop=-parseInt(getComputedStyle(e).marginTop,10)+"px",this.isCollided=!0),this.popupObj.resolveCollision()}},t.prototype.getTriggerCharPosition=function(){var e,t=this.getTextRange();if(void 0!==t&&null!==t){e=0;var i=t.lastIndexOf(this.mentionChar);i>=e&&(e=i)}return e||0},t.prototype.initializePopup=function(e,t,i){var l=this;this.popupObj=new o.Popup(e,{width:this.setWidth(),targetType:"relative",relateTo:this.inputElement,collision:{X:"flip",Y:"flip"},offsetY:t,enableRtl:this.enableRtl,offsetX:i,position:{X:"left",Y:"bottom"},actionOnScroll:"hide",zIndex:this.zIndex,close:function(){l.destroyPopup()},open:function(){s.EventHandler.add(document,"mousedown",l.onDocumentClick,l),l.isPopupOpen=!0,l.setDataIndex()}})},t.prototype.setWidth=function(){var e=i.i(s.formatUnit)(this.popupWidth);if(e.indexOf("%")>-1){e=(this.inputElement.offsetWidth*parseFloat(e)/100).toString()+"px"}return e},t.prototype.destroyPopup=function(){this.isPopupOpen=!1,this.popupObj.destroy(),i.i(s.isNullOrUndefined)(this.target)?i.i(s.detach)(this.popupObj.element):(this.popupObj.element.innerHTML="",this.popupObj.element.removeAttribute("style"),this.popupObj.element.removeAttribute("aria-disabled")),this.list.classList.contains("e-nodata")&&(this.list=null)},t.prototype.onDocumentClick=function(e){var t=e.target;!i.i(s.isNullOrUndefined)(this.popupObj)&&i.i(s.closest)(t,"#"+this.popupObj.element.id)||this.hidePopup(e)},t.prototype.getCoordinates=function(e,t){var l,n,o,r,a,h,p,u=["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing"];if(this.isContentEditable(this.inputElement)){var c=this.getTriggerCharPosition();r=this.range,o=document.createRange(),this.getTextRange()&&-1!==this.getTextRange().lastIndexOf(this.mentionChar)?(o.setStart(r.startContainer,c),o.setEnd(r.startContainer,c)):(o.setStart(r.startContainer,r.startOffset),o.setEnd(r.startContainer,r.endOffset)),this.isTyped=!1,o.collapse(!1),p=0===o.getBoundingClientRect().top?o.startContainer.getClientRects()[0]:o.getBoundingClientRect()}else l=this.createElement("div",{className:"e-form-mirror-div"}),document.body.appendChild(l),h=getComputedStyle(e),l.style.position="absolute",l.style.visibility="hidden",u.forEach(function(e){l.style[e]=h[e]}),l.textContent=e.value.substring(0,t),"INPUT"===this.inputElement.nodeName&&(l.textContent=l.textContent.replace(/\s/g,"")),n=this.createElement("span"),n.textContent=e.value.substring(t)||".",l.appendChild(n),p=e.getBoundingClientRect();var d=p.top,m=p.left,f=document.querySelectorAll("iframe");if(f.length>0)for(var v=0;v<f.length;v++){var g=f[v];if(g.contentDocument&&g.contentDocument.contains(e)){var y=g.getBoundingClientRect();d+=y.top,m+=y.left}}var C=document.documentElement,b=(window.pageXOffset||C.scrollLeft)-(C.clientLeft||0),E=(window.pageYOffset||C.scrollTop)-(C.clientTop||0),S=0;if(!i.i(s.isNullOrUndefined)(o)&&0===o.getBoundingClientRect().top)for(var v=0;v<this.range.startContainer.childNodes.length;v++)if(this.range.startContainer.childNodes[v].nodeType!==Node.TEXT_NODE&&""!==this.range.startContainer.childNodes[v].textContent.trim())S+=this.range.startContainer.childNodes[v].getClientRects()[0].width;else if(""!==this.range.startContainer.childNodes[v].textContent){var x=document.createElement("span");x.innerHTML=this.range.startContainer.childNodes[v].nodeValue,document.body.appendChild(x);var I=x.offsetWidth;document.body.removeChild(x),S+=I}return this.isContentEditable(this.inputElement)?a=this.collision&&this.collision.length>0&&this.collision.indexOf("right")>-1&&-1===this.collision.indexOf("bottom")?{top:d+E+parseInt(getComputedStyle(this.inputElement).fontSize,10),left:m+b+S}:{top:d+E+parseInt(getComputedStyle(this.inputElement).fontSize,10)-(this.isCollided?10:0),left:m+b+S}:(a={top:d+E+n.offsetTop+parseInt(h.borderTopWidth,10)+parseInt(h.fontSize,10)+3-e.scrollTop-(this.isCollided?10:0),left:m+b+n.offsetLeft+parseInt(h.borderLeftWidth,10)},document.body.removeChild(l)),a},t.prototype.initValue=function(){this.isDataFetched=!1,this.renderList(),this.dataSource instanceof n.DataManager?this.initRemoteRender=!0:this.updateValues()},t.prototype.updateValues=function(){var e=this.list.querySelector("."+l.a.focus);i.i(s.isNullOrUndefined)(e)||this.setSelection(e,null)},t.prototype.renderList=function(){e.prototype.render.call(this),this.unWireListEvents(),this.wireListEvents()},t.prototype.wireListEvents=function(){s.EventHandler.add(this.list,"mousedown",this.onMouseClick,this),s.EventHandler.add(this.list,"mouseover",this.onMouseOver,this),s.EventHandler.add(this.list,"mouseout",this.onMouseLeave,this)},t.prototype.unWireListEvents=function(){s.EventHandler.remove(this.list,"mousedown",this.onMouseClick),s.EventHandler.remove(this.list,"mouseover",this.onMouseOver),s.EventHandler.remove(this.list,"mouseout",this.onMouseLeave)},t.prototype.onMouseClick=function(e){var t=e.target,n=i.i(s.closest)(t,"."+l.a.li);if(this.isValidLI(n)){this.isSelected=!0,this.setSelection(n,e);this.closePopup(100,e),this.inputElement.focus(),e.preventDefault()}},t.prototype.updateSelectedItem=function(e,t,n,o){var r=this;this.removeSelection(),e.classList.add(l.a.selected),this.removeHover();var a=this.getFormattedValue(e.getAttribute("data-value")),h=this.getDataByValue(a);if(n||i.i(s.isNullOrUndefined)(t)||"down"===t.action||"up"===t.action)this.selectEventCallback(e,h,a),o&&this.setSelectOptions(e,t);else{var p=this.detachChanges(h);this.isSelected=!0;var u={e:t,item:e,itemData:p,isInteracted:!!t,cancel:!1};this.trigger("select",u,function(i){i.cancel?(e.classList.remove(l.a.selected),r.isSelected=!1,r.isSelectCancel=!0):(r.selectEventCallback(e,h,a),o&&r.setSelectOptions(e,t))})}},t.prototype.setSelection=function(e,t){this.isValidLI(e)&&(!e.classList.contains(l.a.selected)||this.isPopupOpen&&this.isSelected&&e.classList.contains(l.a.selected))?this.updateSelectedItem(e,t,!1,!0):this.setSelectOptions(e,t)},t.prototype.setSelectOptions=function(e,t){this.list&&this.removeHover(),this.previousSelectedLI=i.i(s.isNullOrUndefined)(this.selectedLI)?null:this.selectedLI,this.selectedLI=e,this.isPopupOpen&&!i.i(s.isNullOrUndefined)(this.selectedLI)&&this.setScrollPosition(t),(!t||38!==t.keyCode&&40!==t.keyCode)&&(i.i(s.isNullOrUndefined)(t)||this.setValue(t))},t.prototype.setScrollPosition=function(e){if(i.i(s.isNullOrUndefined)(e))this.scrollBottom(!0);else switch(e.action){case"pageDown":case"down":case"end":this.scrollBottom();break;default:this.scrollTop()}},t.prototype.scrollBottom=function(e){if(!i.i(s.isNullOrUndefined)(this.selectedLI)){var t=this.list.offsetHeight,l=this.selectedLI.offsetTop+this.selectedLI.offsetHeight-this.list.scrollTop,n=this.list.scrollTop+l-t;n=e?n+2*parseInt(getComputedStyle(this.list).paddingTop,10):n;var o=this.selectedLI.offsetTop+this.selectedLI.offsetHeight-this.list.scrollTop;0===this.activeIndex?this.list.scrollTop=0:(l>t||!(o>0&&this.list.offsetHeight>o))&&(this.list.scrollTop=n)}},t.prototype.scrollTop=function(){if(!i.i(s.isNullOrUndefined)(this.selectedLI)){var e=this.selectedLI.offsetTop-this.list.scrollTop;e=this.fields.groupBy&&e;var t=this.selectedLI.offsetTop+this.selectedLI.offsetHeight-this.list.scrollTop;0===this.activeIndex?this.list.scrollTop=0:e<0?this.list.scrollTop=this.list.scrollTop+e:t>0&&this.list.offsetHeight>t||(this.list.scrollTop=this.selectedLI.offsetTop)}},t.prototype.selectEventCallback=function(e,t,n,o){this.previousItemData=i.i(s.isNullOrUndefined)(this.itemData)?null:this.itemData,this.item=e,this.itemData=t;var r=this.list.querySelector("."+l.a.focus);r&&i.i(s.removeClass)([r],l.a.focus),o&&i.i(s.addClass)([e],l.a.selected),e.setAttribute("aria-selected","true"),this.activeIndex=this.getIndexByValue(n)},t.prototype.detachChanges=function(e){return"string"==typeof e||"boolean"==typeof e||"number"==typeof e?Object.defineProperties({},{value:{value:e,enumerable:!0},text:{value:e,enumerable:!0}}):e},t.prototype.setValue=function(e){return this.isReact?(i.i(s.isNullOrUndefined)(this.displayTemplate)?this.updateMentionValue(e):this.setDisplayTemplate(e),!0):(i.i(s.isNullOrUndefined)(this.displayTemplate)||this.setDisplayTemplate(),this.updateMentionValue(e),!0)},t.prototype.updateMentionValue=function(e){var t,l,n,o,r,a=this.getItemData(),h=this.inputElement.ownerDocument.getSelection(),p=this.getTriggerCharPosition();if(t="string"==typeof this.suffixText?this.suffixText:"",this.isSelectCancel)return void(this.isSelectCancel=!1);if(null!==a.text&&(l=this.mentionVal(a.text)),this.isContentEditable(this.inputElement)){n=this.getTriggerCharPosition()+this.mentionChar.length,this.range&&this.range.startContainer.textContent.trim()!==this.mentionChar&&(n=this.range.endOffset),r=this.range,o=document.createRange(),this.getTextRange()&&-1!==this.getTextRange().lastIndexOf(this.mentionChar)||this.getTextRange()&&this.getTextRange().trim()===this.mentionChar?(o.setStart(r.startContainer,p),o.setEnd(r.startContainer,n)):""!==r.commonAncestorContainer.textContent.trim()&&!i.i(s.isNullOrUndefined)(r.commonAncestorContainer.textContent.trim())&&this.getTextRange()&&-1!==this.getTextRange().lastIndexOf(this.mentionChar)?(o.setStart(r.startContainer,r.startOffset-1),o.setEnd(r.startContainer,r.endOffset-1)):(o.setStart(r.startContainer,r.startOffset),o.setEnd(r.startContainer,r.endOffset)),this.isTyped=!1,o.deleteContents();var u=this.createElement("div");u.innerHTML=l;for(var c=document.createDocumentFragment(),d=void 0,m=void 0;d=u.firstChild;)m=c.appendChild(d);if(o.insertNode(c),m&&(o=o.cloneRange(),o.setStartAfter(m),o.collapse(!0),h.removeAllRanges(),h.addRange(o)),this.isPopupOpen&&this.hidePopup(),!i.i(s.isNullOrUndefined)(e.pointerType)&&"mouse"===e.pointerType){var f=new CustomEvent("content-changed",{detail:{click:!0}});this.inputElement.dispatchEvent(f)}this.onChangeEvent(e)}else{var v=this.inputElement,g=this.getTextRange().substring(p+this.mentionChar.length,this.getTextRange().length);l+=t,n=p+this.mentionChar.length,n+=g.length,v.value=v.value.substring(0,p)+l+v.value.substring(n,v.value.length),v.selectionStart=p+l.length,v.selectionEnd=p+l.length,this.isPopupOpen&&this.hidePopup(),this.onChangeEvent(e)}},t.prototype.mentionVal=function(e){var t=this.showMentionChar?this.mentionChar:"";return i.i(s.isNullOrUndefined)(this.displayTemplate)||i.i(s.isNullOrUndefined)(this.displayTempElement)||(e=this.displayTempElement.innerHTML),this.isContentEditable(this.inputElement)?s.Browser.isAndroid?'<span contenteditable="true" class="e-mention-chip">'+t+e+"</span>".concat("string"==typeof this.suffixText?this.suffixText:" "):'<span contenteditable="false" class="e-mention-chip">'+t+e+"</span>".concat("string"==typeof this.suffixText?this.suffixText:" "):t+e},t.prototype.setDisplayTemplate=function(e){var t,l=this;this.isReact&&(this.clearTemplate(["displayTemplate"]),this.displayTempElement&&(i.i(s.detach)(this.displayTempElement),this.displayTempElement=null)),this.displayTempElement||(this.displayTempElement=this.createElement("div")),this.isReact||(this.displayTempElement.innerHTML=""),t=i.i(s.compile)(this.displayTemplate);var n=t(this.itemData,this,"displayTemplate",this.displayTemplateId,this.isStringTemplate,null,this.displayTempElement);n&&n.length>0&&i.i(s.append)(n,this.displayTempElement),this.isReact?this.renderTemplates(function(){l.updateMentionValue(e)}):this.renderTemplates()},t.prototype.renderTemplates=function(e){this.renderReactTemplates(e)},t.prototype.setSpinnerTemplate=function(){var e,t=this;this.isReact&&(this.clearTemplate(["spinnerTemplate"]),this.spinnerTemplateElement&&(i.i(s.detach)(this.spinnerTemplateElement),this.spinnerTemplateElement=null)),this.spinnerTemplateElement||(this.spinnerTemplateElement=this.createElement("div")),this.isReact||(this.spinnerTemplateElement.innerHTML=""),e=i.i(s.compile)(this.spinnerTemplate);var l=e(null,this,"spinnerTemplate",this.spinnerTemplateId,this.isStringTemplate,null,this.spinnerTemplateElement);if(l&&l.length>0)for(var n=0;n<l.length;n++)this.spinnerTemplateElement.appendChild(l[n]);this.isReact?this.renderTemplates(function(){t.popupObj.element.appendChild(t.spinnerTemplateElement)}):(this.renderTemplates(),this.popupObj.element.appendChild(this.spinnerTemplateElement))},t.prototype.onChangeEvent=function(e){this.isSelected=!1;var t,i=this.detachMentionChanges(this.itemData);t="string"==typeof this.previousItemData||"boolean"==typeof this.previousItemData||"number"==typeof this.previousItemData?Object.defineProperties({},{value:{value:this.previousItemData,enumerable:!0},text:{value:this.previousItemData,enumerable:!0}}):this.previousItemData;var s={e:e,item:this.item,itemData:i,previousItem:this.previousSelectedLI,previousItemData:t,isInteracted:!!e,value:this.item.innerHTML,element:this.inputElement};this.trigger("change",s)},t.prototype.detachMentionChanges=function(e){return"string"==typeof e||"boolean"==typeof e||"number"==typeof e?Object.defineProperties({},{value:{value:e,enumerable:!0},text:{value:e,enumerable:!0}}):e},t.prototype.getItemData=function(){var e=this.fields,t=null;t=this.itemData;var l,n;return i.i(s.isNullOrUndefined)(t)||(l=i.i(s.getValue)(e.value,t),n=i.i(s.getValue)(e.text,t)),{value:i.i(s.isNullOrUndefined)(t)||i.i(s.isUndefined)(l)?t:l,text:i.i(s.isNullOrUndefined)(t)||i.i(s.isUndefined)(l)?t:n}},t.prototype.removeSelection=function(){if(this.list){var e=this.list.querySelectorAll("."+l.a.selected);e.length&&(i.i(s.removeClass)(e,l.a.selected),e[0].removeAttribute("aria-selected"))}},t.prototype.onMouseOver=function(e){var t=i.i(s.closest)(e.target,"."+l.a.li);this.setHover(t)},t.prototype.setHover=function(e){this.isValidLI(e)&&!e.classList.contains(l.a.hover)&&(this.removeHover(),i.i(s.addClass)([e],l.a.hover))},t.prototype.removeHover=function(){if(this.list){var e=this.list.querySelectorAll("."+l.a.hover);e&&e.length&&i.i(s.removeClass)(e,l.a.hover)}},t.prototype.isValidLI=function(e){return e&&e.hasAttribute("role")&&"option"===e.getAttribute("role")},t.prototype.onMouseLeave=function(){this.removeHover()},t.prototype.search=function(e,t,l){this.isContentEditable(this.inputElement)&&(this.range=this.getCurrentRange());var n=this.getTextRange(),o=this.getLastLetter(n);if((!this.ignoreCase||e!==o&&e!==o.toLowerCase())&&(this.ignoreCase||e!==o))return void(this.isPopupOpen&&this.hidePopup());this.resetList(this.dataSource,this.fields),i.i(s.isNullOrUndefined)(this.list)?(this.renderList(),this.renderPopup()):this.showPopup(),this.popupObj.element.style.left=i.i(s.formatUnit)(t),this.popupObj.element.style.top=i.i(s.formatUnit)(l)},t.prototype.destroy=function(){this.hidePopup(),this.unWireEvent(),this.list&&this.unWireListEvents(),this.inputElement&&!this.inputElement.classList.contains("e-"+this.getModuleName())||(this.previousSelectedLI=null,this.item=null,this.selectedLI=null,this.popupObj=null,e.prototype.destroy.call(this))},t.prototype.getLocaleName=function(){return"mention"},t.prototype.getNgDirective=function(){return"EJS-MENTION"},t.prototype.getModuleName=function(){return"mention"},h([i.i(s.Property)(null)],t.prototype,"cssClass",void 0),h([i.i(s.Property)("@")],t.prototype,"mentionChar",void 0),h([i.i(s.Property)(!1)],t.prototype,"showMentionChar",void 0),h([i.i(s.Property)(!1)],t.prototype,"allowSpaces",void 0),h([i.i(s.Property)(null)],t.prototype,"suffixText",void 0),h([i.i(s.Property)(25)],t.prototype,"suggestionCount",void 0),h([i.i(s.Property)(0)],t.prototype,"minLength",void 0),h([i.i(s.Property)("None")],t.prototype,"sortOrder",void 0),h([i.i(s.Property)(!0)],t.prototype,"ignoreCase",void 0),h([i.i(s.Property)(!1)],t.prototype,"highlight",void 0),h([i.i(s.Property)()],t.prototype,"locale",void 0),h([i.i(s.Property)("auto")],t.prototype,"popupWidth",void 0),h([i.i(s.Property)("300px")],t.prototype,"popupHeight",void 0),h([i.i(s.Property)(null)],t.prototype,"displayTemplate",void 0),h([i.i(s.Property)(null)],t.prototype,"itemTemplate",void 0),h([i.i(s.Property)("No records found")],t.prototype,"noRecordsTemplate",void 0),h([i.i(s.Property)(null)],t.prototype,"spinnerTemplate",void 0),h([i.i(s.Property)()],t.prototype,"target",void 0),h([i.i(s.Property)([])],t.prototype,"dataSource",void 0),h([i.i(s.Property)(null)],t.prototype,"query",void 0),h([i.i(s.Property)("Contains")],t.prototype,"filterType",void 0),h([i.i(s.Complex)({text:null,value:null,iconCss:null,groupBy:null},l.b)],t.prototype,"fields",void 0),h([i.i(s.Event)()],t.prototype,"actionBegin",void 0),h([i.i(s.Event)()],t.prototype,"actionComplete",void 0),h([i.i(s.Event)()],t.prototype,"actionFailure",void 0),h([i.i(s.Event)()],t.prototype,"change",void 0),h([i.i(s.Event)()],t.prototype,"beforeOpen",void 0),h([i.i(s.Event)()],t.prototype,"opened",void 0),h([i.i(s.Event)()],t.prototype,"closed",void 0),h([i.i(s.Event)()],t.prototype,"select",void 0),h([i.i(s.Event)()],t.prototype,"filtering",void 0),h([i.i(s.Event)()],t.prototype,"created",void 0),h([i.i(s.Event)()],t.prototype,"destroyed",void 0),t=h([s.NotifyPropertyChanges],t)}(l.c)},function(e,t,i){"use strict";i.d(t,"a",function(){return a});var s=i(8),l=(i.n(s),i(3)),n=(i.n(l),i(0)),o=(i.n(n),i(1)),r="e-check",a=function(){function e(e){this.activeLi=[],this.activeEle=[],this.parent=e,this.removeEventListener(),this.addEventListener()}return e.prototype.getModuleName=function(){return"CheckBoxSelection"},e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on("updatelist",this.listSelection,this),this.parent.on("listoption",this.listOption,this),this.parent.on("selectAll",this.setSelectAll,this),this.parent.on("checkSelectAll",this.checkSelectAll,this),this.parent.on("searchBox",this.setSearchBox,this),this.parent.on("blur",this.onBlurHandler,this),this.parent.on("targetElement",this.targetElement,this),this.parent.on("deviceSearchBox",this.setDeviceSearchBox,this),this.parent.on("inputFocus",this.getFocus,this),this.parent.on("reOrder",this.setReorder,this),this.parent.on("activeList",this.getActiveList,this),this.parent.on("selectAllText",this.setLocale,this),this.parent.on("filterBarPlaceholder",this.setPlaceholder,this),n.EventHandler.add(document,"mousedown",this.onDocumentClick,this),this.parent.on("addItem",this.checboxCreate,this),this.parent.on("popupFullScreen",this.setPopupFullScreen,this))},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off("updatelist",this.listSelection),this.parent.off("listoption",this.listOption),this.parent.off("selectAll",this.setSelectAll),this.parent.off("checkSelectAll",this.checkSelectAll),this.parent.off("searchBox",this.setSearchBox),this.parent.off("blur",this.onBlurHandler),this.parent.off("targetElement",this.targetElement),this.parent.off("deviceSearchBox",this.setDeviceSearchBox),this.parent.off("inputFocus",this.getFocus),this.parent.off("reOrder",this.setReorder),this.parent.off("activeList",this.getActiveList),this.parent.off("selectAllText",this.setLocale),this.parent.off("filterBarPlaceholder",this.setPlaceholder),this.parent.off("addItem",this.checboxCreate),this.parent.off("popupFullScreen",this.setPopupFullScreen))},e.prototype.listOption=function(e){var t=this;if(i.i(n.isNullOrUndefined)(this.parent.listCurrentOptions.itemCreated))this.parent.listCurrentOptions.itemCreated=function(e){t.checboxCreate(e)};else{var s=this.parent.listCurrentOptions.itemCreated;this.parent.listCurrentOptions.itemCreated=function(e){t.checboxCreate(e),s.apply(t,[e])}}},e.prototype.setPlaceholder=function(e){l.Input.setPlaceholder(e.filterBarPlaceholder,this.filterInput)},e.prototype.checboxCreate=function(e){var t;if(t=i.i(n.isNullOrUndefined)(e.item)?e:e.item,this.parent.enableGroupCheckBox||"e-list-group-item "!==t.className&&"e-list-group-item"!==t.className){var l=i.i(s.createCheckBox)(this.parent.createElement,!0),o=i.i(n.select)("div.e-icons",t);return t.insertBefore(l,t.childNodes[i.i(n.isNullOrUndefined)(o)?0:1]),i.i(n.select)(".e-frame",l),this.parent.enableGroupCheckBox&&this.parent.popupWrapper.classList.add("e-multiselect-group"),t}return t},e.prototype.setSelectAll=function(){this.parent.showSelectAll?(i.i(n.isNullOrUndefined)(this.checkAllParent)&&(this.checkAllParent=this.parent.createElement("div",{className:"e-selectall-parent"}),this.selectAllSpan=this.parent.createElement("span",{className:"e-all-text"}),this.selectAllSpan.textContent="",this.checkAllParent.appendChild(this.selectAllSpan),this.setLocale(),this.checboxCreate(this.checkAllParent),this.parent.headerTemplate&&(i.i(n.isNullOrUndefined)(this.parent.filterParent)?i.i(n.append)([this.checkAllParent],this.parent.popupWrapper):i.i(n.append)([this.checkAllParent],this.parent.filterParent)),this.parent.headerTemplate||(i.i(n.isNullOrUndefined)(this.parent.filterParent)?i.i(n.prepend)([this.checkAllParent],this.parent.popupWrapper):this.parent.filterParent.parentNode.insertBefore(this.checkAllParent,this.parent.filterParent.nextSibling)),n.EventHandler.add(this.checkAllParent,"mousedown",this.clickHandler,this)),this.parent.list.classList.contains("e-nodata")||this.parent.listData&&this.parent.listData.length<=1&&!this.parent.isDynamicDataChange||this.parent.isDynamicDataChange&&this.parent.listData&&this.parent.listData.length<=1?this.checkAllParent.style.display="none":this.checkAllParent.style.display="block",this.parent.selectAllHeight=this.checkAllParent.getBoundingClientRect().height):i.i(n.isNullOrUndefined)(this.checkAllParent)||(this.checkAllParent.parentElement.removeChild(this.checkAllParent),this.checkAllParent=null)},e.prototype.destroy=function(){this.removeEventListener(),n.EventHandler.remove(document,"mousedown",this.onDocumentClick),this.checkAllParent=null,this.clearIconElement=null,this.filterInput=null,this.filterInputObj=null,this.checkWrapper=null,this.selectAllSpan=null},e.prototype.listSelection=function(e){var t;if(i.i(n.isNullOrUndefined)(e.e)){var s=e.li.querySelector(".e-checkbox-wrapper");t=s?s.childNodes[1]:e.li.lastElementChild.childNodes[1]}else{e.li.querySelector(".e-checkbox-wrapper .e-frame");t=i.i(n.isNullOrUndefined)(e.e.target)?e.li.querySelector(".e-checkbox-wrapper").childNodes[1]:e.e.target.classList.contains("e-frame")&&(!this.parent.showSelectAll||this.checkAllParent&&!this.checkAllParent.contains(e.e.target))?e.e.target:e.li.querySelector(".e-checkbox-wrapper").childNodes[1]}if((this.parent.itemTemplate||this.parent.enableGroupCheckBox)&&(t=e.li.firstElementChild.childNodes[1]),i.i(n.isNullOrUndefined)(t)||(this.checkWrapper=i.i(n.closest)(t,".e-checkbox-wrapper")),!i.i(n.isNullOrUndefined)(this.checkWrapper)){var l=i.i(n.select)(".e-frame",this.checkWrapper);this.validateCheckNode(this.checkWrapper,l.classList.contains(r),e.li,e.e,!1)}},e.prototype.validateCheckNode=function(e,t,i,s,l){this.changeState(e,t?"uncheck":"check",s,!0,l)},e.prototype.clickHandler=function(e){var t;t=e.currentTarget.classList.contains(this.checkAllParent.className)||e.currentTarget.classList.value===this.checkAllParent.className?e.currentTarget.firstElementChild.lastElementChild:e.currentTarget,this.checkWrapper=i.i(n.closest)(t,".e-checkbox-wrapper");if(!i.i(n.isNullOrUndefined)(this.checkWrapper)){var s=i.i(n.select)(".e-frame",this.checkWrapper);this.validateCheckNode(this.checkWrapper,s.classList.contains(r),null,e,!0)}e.preventDefault()},e.prototype.changeState=function(e,t,s,l,o){var a=e.getElementsByClassName("e-frame")[0];"check"!==t||a.classList.contains(r)?"uncheck"===t&&(a.classList.contains(r)||a.classList.contains("e-stop"))?(i.i(n.removeClass)([a],[r,"e-stop"]),"false",o&&(this.parent.selectAllItems(!1,s),this.setLocale())):"indeterminate"!==t||a.classList.contains("e-stop")||(i.i(n.removeClass)([a],[r]),a.classList.add("e-stop"),"false",o&&(this.parent.selectAllItems(!1,s),this.setLocale())):(a.classList.remove("e-stop"),a.classList.add(r),"true",o&&(this.parent.selectAllItems(!0,s),this.setLocale(!0)))},e.prototype.setSearchBox=function(e){if(i.i(n.isNullOrUndefined)(this.parent.filterParent)){this.parent.filterParent=this.parent.createElement("span",{className:"e-filter-parent"}),this.filterInput=this.parent.createElement("input",{attrs:{type:"text"},className:"e-input-filter"}),this.parent.element.parentNode.insertBefore(this.filterInput,this.parent.element);var t=!1;return n.Browser.isDevice&&(t=!0,this.parent.mobFilter=!1),this.filterInputObj=l.Input.createInput({element:this.filterInput,buttons:t?["e-input-group-icon e-back-icon e-icons","e-input-group-icon e-clear-icon e-icons"]:["e-input-group-icon e-clear-icon e-icons"],properties:{placeholder:this.parent.filterBarPlaceholder}},this.parent.createElement),i.i(n.isNullOrUndefined)(this.parent.cssClass)||(-1!==this.parent.cssClass.split(" ").indexOf("e-outline")?i.i(n.addClass)([this.filterInputObj.container],"e-outline"):-1!==this.parent.cssClass.split(" ").indexOf("e-filled")&&i.i(n.addClass)([this.filterInputObj.container],"e-filled")),i.i(n.append)([this.filterInputObj.container],this.parent.filterParent),i.i(n.prepend)([this.parent.filterParent],e.popupElement),i.i(n.attributes)(this.filterInput,{"aria-disabled":"false",role:"combobox",autocomplete:"off",autocapitalize:"off",spellcheck:"false","aria-label":"multiselect","aria-expanded":"true","aria-controls":e.popupElement.id}),this.clearIconElement=this.filterInput.parentElement.querySelector(".e-clear-icon"),!n.Browser.isDevice&&this.clearIconElement&&(n.EventHandler.add(this.clearIconElement,"mousedown",this.clearText,this),this.clearIconElement.style.visibility="hidden"),n.EventHandler.add(this.filterInput,"input",this.parent.onInput,this.parent),n.EventHandler.add(this.filterInput,"keyup",this.parent.keyUp,this.parent),n.EventHandler.add(this.filterInput,"keydown",this.parent.onKeyDown,this.parent),n.EventHandler.add(this.filterInput,"blur",this.onBlurHandler,this),n.EventHandler.add(this.filterInput,"paste",this.parent.pasteHandler,this.parent),this.parent.searchBoxHeight=this.filterInputObj.container.parentElement.getBoundingClientRect().height,this.filterInputObj}},e.prototype.clickOnBackIcon=function(e){this.parent.hidePopup(),i.i(n.removeClass)([document.body,this.parent.popupObj.element],"e-popup-full-page"),this.parent.inputElement.focus()},e.prototype.clearText=function(e){this.parent.targetInputElement.value="",this.parent.allowFiltering&&""===this.parent.targetInputElement.value&&this.parent.search(null),this.parent.refreshPopup(),this.parent.refreshListItems(null),this.clearIconElement.style.visibility="hidden",this.filterInput.focus(),this.setReorder(e),e.preventDefault()},e.prototype.setDeviceSearchBox=function(){this.parent.popupObj.element.classList.add("e-ddl-device"),this.parent.popupObj.element.classList.add("e-ddl-device-filter"),this.parent.popupObj.position={X:0,Y:0},this.parent.popupObj.dataBind(),this.setSearchBoxPosition(),this.backIconElement=this.filterInputObj.container.querySelector(".e-back-icon"),this.clearIconElement=this.filterInputObj.container.querySelector(".e-clear-icon"),this.clearIconElement.style.visibility="hidden",n.EventHandler.add(this.backIconElement,"click",this.clickOnBackIcon,this),n.EventHandler.add(this.clearIconElement,"click",this.clearText,this)},e.prototype.setSearchBoxPosition=function(){var e=this.filterInput.parentElement.getBoundingClientRect().height,t=0;this.checkAllParent&&(t=this.checkAllParent.getBoundingClientRect().height),this.parent.popupObj.element.style.maxHeight="100%",this.parent.popupObj.element.style.width="100%",this.parent.list.style.maxHeight=window.innerHeight-e-t+"px",this.parent.list.style.height=window.innerHeight-e-t+"px";var s=this.filterInput.parentElement.querySelector(".e-clear-icon");i.i(n.detach)(this.filterInput),s.parentElement.insertBefore(this.filterInput,s)},e.prototype.setPopupFullScreen=function(){this.parent&&this.parent.popupObj&&(i.i(n.attributes)(this.parent.popupObj.element,{style:"left:0px;right:0px;top:0px;bottom:0px;"}),i.i(n.addClass)([document.body,this.parent.popupObj.element],"e-popup-full-page"),this.parent.popupObj.element.style.maxHeight="100%",this.parent.popupObj.element.style.width="100%")},e.prototype.targetElement=function(){return i.i(n.isNullOrUndefined)(this.clearIconElement)||(this.parent.targetInputElement=this.filterInput,this.clearIconElement.style.visibility=""===this.parent.targetInputElement.value?"hidden":"visible"),this.parent.targetInputElement.value},e.prototype.onBlurHandler=function(e){if(!this.parent.element.classList.contains("e-listbox")){var t=void 0;if(this.parent.keyAction)return;if(n.Browser.isIE&&(t=!i.i(n.isNullOrUndefined)(e)&&e.target),n.Browser.isIE||(t=!i.i(n.isNullOrUndefined)(e)&&e.relatedTarget),this.parent.popupObj&&document.body.contains(this.parent.popupObj.element)&&this.parent.popupObj.element.contains(t)&&!n.Browser.isIE&&this.filterInput)return void this.filterInput.focus();if(this.parent.scrollFocusStatus&&this.filterInput)return e.preventDefault(),this.filterInput.focus(),void(this.parent.scrollFocusStatus=!1);this.parent.popupObj&&document.body.contains(this.parent.popupObj.element)&&!this.parent.popupObj.element.classList.contains("e-popup-close")&&(this.parent.inputFocus=!1,this.parent.updateValueState(e,this.parent.value,this.parent.tempValues),this.parent.dispatchEvent(this.parent.hiddenElement,"change")),this.parent.popupObj&&document.body.contains(this.parent.popupObj.element)&&!this.parent.popupObj.element.classList.contains("e-popup-close")&&(this.parent.inputFocus=!1,this.parent.overAllWrapper.classList.remove("e-input-focus"),this.parent.trigger("blur"),this.parent.focused=!0),this.parent.popupObj&&document.body.contains(this.parent.popupObj.element)&&!this.parent.popupObj.element.classList.contains("e-popup-close")&&!n.Browser.isDevice&&this.parent.hidePopup()}},e.prototype.onDocumentClick=function(e){if("listbox"!==this.parent.getLocaleName()){var t=e.target;!i.i(n.isNullOrUndefined)(this.parent.popupObj)&&i.i(n.closest)(t,'[id="'+this.parent.popupObj.element.id+'"]')&&(this.filterInput&&""!==this.filterInput.value||e.preventDefault()),!i.i(n.isNullOrUndefined)(this.parent.popupObj)&&i.i(n.closest)(t,'[id="'+this.parent.popupObj.element.id+'"]')||i.i(n.isNullOrUndefined)(this.parent.overAllWrapper)||this.parent.overAllWrapper.contains(e.target)?this.parent.scrollFocusStatus=(n.Browser.isIE||"edge"===n.Browser.info.name)&&document.activeElement===this.filterInput:(this.parent.overAllWrapper.classList.contains(o.a.focus)||this.parent.isPopupOpen())&&(this.parent.inputFocus=!1,this.parent.scrollFocusStatus=!1,this.parent.hidePopup(),this.parent.onBlurHandler(e,!0),this.parent.focused=!0),i.i(n.isNullOrUndefined)(this.parent.overAllWrapper)||this.parent.overAllWrapper.contains(e.target)||!this.parent.overAllWrapper.classList.contains("e-input-focus")||this.parent.isPopupOpen()||(n.Browser.isIE?this.parent.onBlurHandler():this.parent.onBlurHandler(e)),this.filterInput===t&&this.filterInput.focus()}},e.prototype.getFocus=function(e){if(this.parent.overAllWrapper.classList.remove("e-input-focus"),this.parent.keyAction&&"clear"!==e.value&&"focus"!==e.value)return void(this.parent.keyAction=!1);"focus"===e.value&&(this.filterInput.focus(),this.parent.removeFocus(),n.EventHandler.remove(this.parent.list,"keydown",this.parent.onKeyDown)),"clear"===e.value&&(this.filterInput.value="",this.clearIconElement.style.visibility="hidden")},e.prototype.checkSelectAll=function(e){"check"===e.value&&(this.changeState(this.checkAllParent,e.value,null,null,!1),this.setLocale(!0)),"uncheck"===e.value&&(this.changeState(this.checkAllParent,e.value,null,null,!1),this.setLocale()),"indeterminate"===e.value&&(this.changeState(this.checkAllParent,e.value,null,null,!1),this.setLocale())},e.prototype.setLocale=function(e){if("Select All"!==this.parent.selectAllText||"Unselect All"!==this.parent.unSelectAllText){var t=e?this.parent.unSelectAllText:this.parent.selectAllText;this.selectAllSpan.textContent="";for(var s=i.i(n.compile)(t),l=e?"unSelectAllText":"selectAllText",o=0,r=s({},this.parent,l,null,!this.parent.isStringTemplate);o<r.length;o++){var a=r[o];this.selectAllSpan.textContent=a.textContent}}else{var h={selectAllText:"Select All",unSelectAllText:"Unselect All"},p=new n.L10n(this.parent.getLocaleName(),{},this.parent.locale);""===p.getConstant("selectAllText")&&(p=new n.L10n("dropdowns",h,this.parent.locale)),this.selectAllSpan.textContent=e?p.getConstant("unSelectAllText"):p.getConstant("selectAllText")}},e.prototype.getActiveList=function(e){e.li.classList.contains("e-active")?this.activeLi.push(e.li.cloneNode(!0)):this.activeLi.splice(e.index,1)},e.prototype.setReorder=function(e){if(this.parent.enableSelectionOrder&&!i.i(n.isNullOrUndefined)(this.parent.value)){var t=this.parent.ulElement.querySelectorAll("li.e-active").length,s=void 0,l=this.parent.createElement("ul",{className:"e-list-parent e-ul e-reorder"});if(t>0){this.parent.ulElement.querySelectorAll("li.e-active").forEach(function(e){l.appendChild(e)}),s=this.parent.ulElement.querySelectorAll("li.e-active"),i.i(n.addClass)(s,"e-reorder-hide"),i.i(n.prepend)([l],this.parent.list)}this.parent.focusAtFirstListItem()}},e}()},function(e,t,i){"use strict";i.d(t,"a",function(){return v});var s=i(1),l=i(4),n=(i.n(l),i(3)),o=(i.n(n),i(0)),r=(i.n(o),i(5)),a=i(2),h=(i.n(a),i(11)),p=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),u=this&&this.__decorate||function(e,t,i,s){var l,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var r=e.length-1;r>=0;r--)(l=e[r])&&(o=(n<3?l(o):n>3?l(t,i,o):l(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},c="e-input-focus",d="e-hide-listitem",m="e-chips",f="e-chips-close",v=function(e){function t(t,i){var s=e.call(this,t,i)||this;return s.clearIconWidth=0,s.previousFilterText="",s.isValidKey=!1,s.selectAllEventData=[],s.selectAllEventEle=[],s.resetMainList=null,s.resetFilteredData=!1,s.scrollFocusStatus=!1,s.keyDownStatus=!1,s}return p(t,e),t.prototype.enableRTL=function(e){e?this.overAllWrapper.classList.add("e-rtl"):this.overAllWrapper.classList.remove("e-rtl"),this.popupObj&&(this.popupObj.enableRtl=e,this.popupObj.dataBind())},t.prototype.requiredModules=function(){var e=[];if("CheckBox"===this.mode){if(this.isGroupChecking=this.enableGroupCheckBox,this.enableGroupCheckBox){var t=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.enableSelectionOrder=!1,this.isProtectedOnChange=t}this.allowCustomValue=!1,this.hideSelectedItem=!1,this.closePopupOnSelect=!1,e.push({member:"CheckBoxSelection",args:[this]})}return e},t.prototype.updateHTMLAttribute=function(){if(Object.keys(this.htmlAttributes).length)for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var s=t[e];switch(s){case"class":var l=this.htmlAttributes[""+s].replace(/\s+/g," ").trim();""!==l&&(i.i(o.addClass)([this.overAllWrapper],l.split(" ")),i.i(o.addClass)([this.popupWrapper],l.split(" ")));break;case"disabled":this.enable(!1);break;case"placeholder":this.placeholder||(this.inputElement.setAttribute(s,this.htmlAttributes[""+s]),this.setProperties({placeholder:this.inputElement.placeholder},!0),this.refreshPlaceHolder());break;default:var n=["id"],r=["name","required","aria-required","form"],a=["title","role","style","class"];n.indexOf(s)>-1?this.element.setAttribute(s,this.htmlAttributes[""+s]):0===s.indexOf("data")||r.indexOf(s)>-1?this.hiddenElement.setAttribute(s,this.htmlAttributes[""+s]):a.indexOf(s)>-1?this.overAllWrapper.setAttribute(s,this.htmlAttributes[""+s]):"size"===s||i.i(o.isNullOrUndefined)(this.inputElement)||this.inputElement.setAttribute(s,this.htmlAttributes[""+s])}}},t.prototype.updateReadonly=function(e){i.i(o.isNullOrUndefined)(this.inputElement)||(e||"CheckBox"===this.mode?this.inputElement.setAttribute("readonly","true"):this.inputElement.removeAttribute("readonly"))},t.prototype.updateClearButton=function(e){e?(this.overAllClear.parentNode?this.overAllClear.style.display="":this.componentWrapper.appendChild(this.overAllClear),this.componentWrapper.classList.remove("e-close-icon-hide")):(this.overAllClear.style.display="none",this.componentWrapper.classList.add("e-close-icon-hide"))},t.prototype.updateCssClass=function(){if(!i.i(o.isNullOrUndefined)(this.cssClass)&&""!==this.cssClass){var e=this.cssClass;e=this.cssClass.replace(/\s+/g," ").trim(),""!==e&&(i.i(o.addClass)([this.overAllWrapper],e.split(" ")),i.i(o.addClass)([this.popupWrapper],e.split(" ")))}},t.prototype.updateOldPropCssClass=function(e){i.i(o.isNullOrUndefined)(e)||""===e||""!==(e=e.replace(/\s+/g," ").trim())&&(i.i(o.removeClass)([this.overAllWrapper],e.split(" ")),i.i(o.removeClass)([this.popupWrapper],e.split(" ")))},t.prototype.onPopupShown=function(e){var t=this;if(o.Browser.isDevice&&"CheckBox"===this.mode&&this.allowFiltering){var s=this;window.onpopstate=function(){s.hidePopup(),s.inputElement.focus()},history.pushState({},"")}var l={name:"FadeIn",duration:100},n={popup:this.popupObj,event:e,cancel:!1,animation:l};this.trigger("open",n,function(e){e.cancel||(t.focusAtFirstListItem(),t.popupObj&&document.body.appendChild(t.popupObj.element),"CheckBox"===t.mode&&t.enableGroupCheckBox&&!i.i(o.isNullOrUndefined)(t.fields.groupBy)&&t.updateListItems(t.list.querySelectorAll("li.e-list-item"),t.mainList.querySelectorAll("li.e-list-item")),("CheckBox"===t.mode||t.showDropDownIcon)&&i.i(o.addClass)([t.overAllWrapper],["e-icon-anim"]),t.refreshPopup(),t.renderReactTemplates(),t.popupObj&&t.popupObj.show(e.animation,1e3===t.zIndex?t.element:null),i.i(o.attributes)(t.inputElement,{"aria-expanded":"true","aria-owns":t.element.id+"_popup","aria-controls":t.element.id}),t.updateAriaActiveDescendant(),t.isFirstClick&&t.loadTemplate(),"CheckBox"===t.mode&&t.showSelectAll&&o.EventHandler.add(t.popupObj.element,"click",t.clickHandler,t))})},t.prototype.updateListItems=function(e,t){for(var i=0;i<e.length;i++)this.findGroupStart(e[i]),this.findGroupStart(t[i]);this.deselectHeader()},t.prototype.loadTemplate=function(){this.refreshListItems(null),"CheckBox"===this.mode&&this.removeFocus(),this.notify("reOrder",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,e:this})},t.prototype.setScrollPosition=function(){if((!this.hideSelectedItem&&"CheckBox"!==this.mode||"CheckBox"===this.mode&&!this.enableSelectionOrder)&&!i.i(o.isNullOrUndefined)(this.value)&&this.value.length>0){var e=this.findListElement(this.hideSelectedItem?this.ulElement:this.list,"li","data-value",this.value[this.value.length-1]);i.i(o.isNullOrUndefined)(e)||this.scrollBottom(e)}},t.prototype.focusAtFirstListItem=function(){if(this.ulElement&&this.ulElement.querySelector("li."+s.a.li)){var e=void 0;if("CheckBox"===this.mode)return void this.removeFocus();e=this.ulElement.querySelector("li."+s.a.li+":not(."+d+")"),null!==e&&(this.removeFocus(),this.addListFocus(e))}},t.prototype.focusAtLastListItem=function(e){var t;e?t=i.i(r.a)(e,this.liCollections,"StartsWith",this.ignoreCase):this.value&&this.value.length?i.i(r.a)(this.value[this.value.length-1],this.liCollections,"StartsWith",this.ignoreCase):t=null,t&&null!==t.item&&(this.addListFocus(t.item),((this.allowCustomValue||this.allowFiltering)&&this.isPopupOpen()&&this.closePopupOnSelect||this.closePopupOnSelect)&&this.scrollBottom(t.item,t.index))},t.prototype.getAriaAttributes=function(){return{"aria-disabled":"false",role:"combobox","aria-expanded":"false"}},t.prototype.updateListARIA=function(){i.i(o.isNullOrUndefined)(this.ulElement)||i.i(o.attributes)(this.ulElement,{id:this.element.id+"_options",role:"listbox","aria-hidden":"false","aria-label":"list"});var e=!(i.i(o.isNullOrUndefined)(this.inputElement)||!this.inputElement.disabled);this.isPopupOpen()||i.i(o.isNullOrUndefined)(this.inputElement)||i.i(o.attributes)(this.inputElement,this.getAriaAttributes()),e&&i.i(o.attributes)(this.inputElement,{"aria-disabled":"true"}),this.ensureAriaDisabled(e?"true":"false")},t.prototype.ensureAriaDisabled=function(e){if(this.htmlAttributes&&this.htmlAttributes["aria-disabled"]){var t=this.htmlAttributes;i.i(o.extend)(t,{"aria-disabled":e},t),this.setProperties({htmlAttributes:t},!0)}},t.prototype.removelastSelection=function(e){if(null!==this.chipCollectionWrapper.querySelector("span.e-chip-selected"))return void this.removeSelectedChip(e);var t=this.chipCollectionWrapper.querySelectorAll("span."+m),s=t[t.length-1].getAttribute("data-value");i.i(o.isNullOrUndefined)(this.value)||(this.tempValues=this.value.slice());var l=this.getFormattedValue(s);this.allowCustomValue&&("false"!==s&&!1===l||!i.i(o.isNullOrUndefined)(l)&&"NaN"===l.toString())&&(l=s),this.removeValue(l,e),this.removeChipSelection(),this.updateDelimeter(this.delimiterChar,e),this.makeTextBoxEmpty(),this.mainList&&this.listData&&this.refreshSelection(),this.checkPlaceholderSize()},t.prototype.onActionFailure=function(t){e.prototype.onActionFailure.call(this,t),this.renderPopup(),this.onPopupShown()},t.prototype.targetElement=function(){return this.targetInputElement=this.inputElement,"CheckBox"===this.mode&&this.allowFiltering&&this.notify("targetElement",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode}),this.targetInputElement.value},t.prototype.getForQuery=function(e){for(var t,s=i.i(o.isNullOrUndefined)(this.fields.value)?this.fields.text:this.fields.value,l=0;l<e.length;l++)t=0===l?new a.Predicate(s,"equal",e[l]):t.or(s,"equal",e[l]);return this.dataSource instanceof a.DataManager&&this.dataSource.adaptor instanceof a.JsonAdaptor?(new a.Query).where(t):this.getQuery(this.query).clone().where(t)},t.prototype.onActionComplete=function(t,s,l,n){e.prototype.onActionComplete.call(this,t,s,l),this.updateSelectElementData(this.allowFiltering);var r=this;if(!i.i(o.isNullOrUndefined)(this.value)&&!this.allowCustomValue)for(var h=0;h<this.value.length;h++){var p=this.findListElement(this.allowFiltering&&!i.i(o.isNullOrUndefined)(this.mainList)?this.mainList:t,"li","data-value",r.value[h]);p||this.dataSource instanceof a.DataManager||(this.value.splice(h,1),h-=1)}var u=[];if(i.i(o.isNullOrUndefined)(this.value)||(u=this.presentItemValue(this.ulElement)),u.length>0&&this.dataSource instanceof a.DataManager&&!i.i(o.isNullOrUndefined)(this.value)&&null!=this.listData?this.addNonPresentItems(u,this.ulElement,this.listData):this.updateActionList(t,s,l),this.dataSource instanceof a.DataManager&&this.allowCustomValue&&!this.isCustomRendered&&this.inputElement.value&&""!==this.inputElement.value){var c=new a.Query;c=this.allowFiltering?c.where(this.fields.text,"startswith",this.inputElement.value,this.ignoreCase,this.ignoreAccent):c,this.checkForCustomValue(c,this.fields),this.isCustomRendered=!0}this.dataSource instanceof a.DataManager&&"CheckBox"===this.mode&&this.allowFiltering&&this.removeFocus()},t.prototype.updateActionList=function(e,t,s,l){"CheckBox"===this.mode&&this.showSelectAll&&this.notify("selectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode}),this.mainList||this.mainData?(i.i(o.isNullOrUndefined)(this.mainData)||0===this.mainData.length)&&(this.mainData=t):(this.mainList=e.cloneNode?e.cloneNode(!0):e,this.mainData=t,this.mainListCollection=this.liCollections),(this.remoteCustomValue||t.length<=0)&&this.allowCustomValue&&this.inputFocus&&this.allowFiltering&&this.inputElement.value&&""!==this.inputElement.value&&(this.checkForCustomValue(this.tempQuery,this.fields),this.isCustomRendered)||(this.value&&this.value.length&&("CheckBox"!==this.mode&&!i.i(o.isNullOrUndefined)(this.inputElement)&&""!==this.inputElement.value.trim()||"CheckBox"===this.mode||(8===this.keyCode||46===this.keyCode)&&this.allowFiltering&&this.allowCustomValue&&this.dataSource instanceof a.DataManager&&""===this.inputElement.value)&&this.refreshSelection(),this.updateListARIA(),this.unwireListEvents(),this.wireListEvents(),i.i(o.isNullOrUndefined)(this.setInitialValue)||this.setInitialValue(),i.i(o.isNullOrUndefined)(this.selectAllAction)||this.selectAllAction(),this.setDynValue&&(i.i(o.isNullOrUndefined)(this.text)||!i.i(o.isNullOrUndefined)(this.value)&&0!==this.value.length||this.initialTextUpdate(),this.initialValueUpdate(),this.initialUpdate(),this.refreshPlaceHolder(),"CheckBox"!==this.mode&&this.changeOnBlur&&this.updateValueState(null,this.value,null)),this.renderPopup(),this.beforePopupOpen&&(this.beforePopupOpen=!1,this.onPopupShown(s)))},t.prototype.refreshSelection=function(){var e,t,l=this.hideSelectedItem?d:s.a.selected;if(!i.i(o.isNullOrUndefined)(this.value))for(var n=0;!i.i(o.isNullOrUndefined)(this.value[n]);n++)if(e=this.value[n],t=this.findListElement(this.list,"li","data-value",e)){if(i.i(o.addClass)([t],l),this.hideSelectedItem&&t.previousSibling&&t.previousElementSibling.classList.contains(s.a.group)&&(!t.nextElementSibling||t.nextElementSibling.classList.contains(s.a.group))&&i.i(o.addClass)([t.previousElementSibling],l),this.hideSelectedItem&&this.fields.groupBy&&!t.previousElementSibling.classList.contains(d)&&this.hideGroupItem(e),this.hideSelectedItem&&t.classList.contains(s.a.focus)){i.i(o.removeClass)([t],s.a.focus);var r=t.parentElement.querySelectorAll("."+s.a.li+":not(."+d+")");r.length>0?(i.i(o.addClass)([r[0]],s.a.focus),this.updateAriaActiveDescendant()):this.list&&this.list.querySelectorAll("."+s.a.li).length>0||(this.l10nUpdate(),i.i(o.addClass)([this.list],s.a.noData))}if(t.setAttribute("aria-selected","true"),"CheckBox"===this.mode&&t.classList.contains("e-active")){var a=t.getElementsByClassName("e-check").length;if(0===a){var h={module:"CheckBoxSelection",enable:"CheckBox"===this.mode,li:t,e:null};this.notify("updatelist",h)}}}this.checkSelectAll(),this.checkMaxSelection()},t.prototype.hideGroupItem=function(e){var t,l,n=this.hideSelectedItem?d:s.a.selected;l=t=this.findListElement(this.ulElement,"li","data-value",e);var r=0,a=0,h=!0,p=!0;do{t&&t.previousElementSibling&&!t.previousElementSibling.classList.contains(d)&&t.previousElementSibling.classList.contains(s.a.li)&&(h=!1),!h||!t||t.previousElementSibling&&t.previousElementSibling.classList.contains(s.a.group)?r=10:t=t.previousElementSibling,l&&l.nextElementSibling&&!l.nextElementSibling.classList.contains(d)&&l.nextElementSibling.classList.contains(s.a.li)&&(p=!1),!p||!l||l.nextElementSibling&&l.nextElementSibling.classList.contains(s.a.group)?a=10:l=l.nextElementSibling}while(r<10||a<10);h&&p&&!t.previousElementSibling.classList.contains(d)?i.i(o.addClass)([t.previousElementSibling],n):h&&p&&t.previousElementSibling.classList.contains(d)&&i.i(o.removeClass)([t.previousElementSibling],n)},t.prototype.getValidLi=function(){var e=this.ulElement.querySelector("li."+s.a.li+":not(."+d+")");return i.i(o.isNullOrUndefined)(e)?this.liCollections[0]:e},t.prototype.checkSelectAll=function(){var e=this.list.querySelectorAll("li.e-list-group-item.e-active").length,t=this.list.querySelectorAll("li.e-list-item"),l=this.list.querySelectorAll("li."+s.a.li).length,n=this.list.querySelectorAll("li."+s.a.selected).length;if(this.enableGroupCheckBox&&!i.i(o.isNullOrUndefined)(this.fields.groupBy)&&(n-=e),l!==n&&n!==this.maximumSelectionLength||"CheckBox"!==this.mode||!this.showSelectAll?l!==n&&"CheckBox"===this.mode&&this.showSelectAll&&this.notify("checkSelectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:"uncheck"}):this.notify("checkSelectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:"check"}),this.enableGroupCheckBox&&this.fields.groupBy&&!this.enableSelectionOrder){for(var r=0;r<t.length;r++)this.findGroupStart(t[r]);this.deselectHeader()}},t.prototype.openClick=function(e){this.openOnClick||"CheckBox"===this.mode||this.isPopupOpen()?this.openOnClick||"CheckBox"!==this.mode||this.isPopupOpen()||this.showPopup():""!==this.targetElement()?this.showPopup():this.hidePopup(e)},t.prototype.keyUp=function(e){if("CheckBox"===this.mode&&!this.openOnClick){var t=String.fromCharCode(e.keyCode),s=t.match(/\w/);i.i(o.isNullOrUndefined)(s)||(this.isValidKey=!0)}this.isValidKey=this.isPopupOpen()&&8===e.keyCode||this.isValidKey,this.isValidKey=(!e.ctrlKey||86!==e.keyCode)&&this.isValidKey,this.isValidKey&&(this.isValidKey=!1,this.expandTextbox(),this.showOverAllClear(),e.keyCode,this.search(e))},t.prototype.filter=function(e,t,i){this.isFiltered=!0,this.remoteFilterAction=!0,this.dataUpdater(e,t,i)},t.prototype.getQuery=function(e){var t=e?e.clone():this.query?this.query.clone():new a.Query;if(this.isFiltered)return t;if(this.filterAction){if(null!==this.targetElement()){var s=this.typeOfData(this.dataSource).typeof;if((this.dataSource instanceof a.DataManager||"string"!==s)&&"number"!==s){var l=this.fields;t.where(i.i(o.isNullOrUndefined)(l.text)?"":l.text,this.filterType,this.targetElement(),this.ignoreCase,this.ignoreAccent)}else t.where("",this.filterType,this.targetElement(),this.ignoreCase,this.ignoreAccent)}return t}return e||(this.query?this.query:new a.Query)},t.prototype.dataUpdater=function(e,t,i){if(this.isDataFetched=!1,""===this.targetElement().trim()){var s=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.backCommand&&(this.remoteCustomValue=!1,this.allowCustomValue&&0==s.querySelectorAll("li").length&&this.mainData.length>0&&(this.mainData=[]),this.onActionComplete(s,this.mainData),this.value&&this.value.length&&this.refreshSelection(),8!==this.keyCode&&this.focusAtFirstListItem(),this.notify("reOrder",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,e:this}))}else this.resetList(e,i,t),this.allowCustomValue&&(e instanceof a.DataManager?(this.remoteCustomValue=!0,this.tempQuery=t):this.checkForCustomValue(t,i));this.refreshPopup(),"CheckBox"===this.mode&&this.removeFocus()},t.prototype.checkForCustomValue=function(e,t){var l=!this.getValueByText(this.inputElement.value,this.ignoreCase),n=t||this.fields;if(this.allowCustomValue&&l){var a=this.inputElement.value,h=!i.i(o.isNullOrUndefined)(this.mainData)&&this.mainData.length>0?this.mainData[0]:this.mainData;if(h&&"string"!=typeof h&&"number"!=typeof h&&"boolean"!=typeof h){var p={};i.i(o.setValue)(n.text,a,p),"number"==typeof i.i(o.getValue)(this.fields.value?this.fields.value:"value",h)?i.i(o.setValue)(n.value,Math.random(),p):i.i(o.setValue)(n.value,a,p);var u=JSON.parse(JSON.stringify(this.listData));u.splice(0,0,p),this.resetList(u,n,e)}else if(this.listData){var u=JSON.parse(JSON.stringify(this.listData));u.splice(0,0,this.inputElement.value),u[0]="number"!=typeof h||isNaN(parseFloat(u[0]))?u[0]:parseFloat(u[0]),u[0]="boolean"==typeof h?"true"===u[0]||"false"!==u[0]&&u[0]:u[0],this.resetList(u,n)}}else if(this.listData&&this.mainData&&!l&&this.allowCustomValue)if(this.allowFiltering&&this.isRemoteSelection&&this.remoteCustomValue)this.isRemoteSelection=!1,this.resetList(this.listData,n,e);else if(!this.allowFiltering&&this.list){var c=this.list.querySelectorAll("li."+s.a.li+":not(.e-hide-listitem)"),d=i.i(r.a)(this.targetElement(),c,"StartsWith",this.ignoreCase);d&&null!==d.item&&this.addListFocus(d.item)}this.value&&this.value.length&&this.refreshSelection()},t.prototype.getNgDirective=function(){return"EJS-MULTISELECT"},t.prototype.wrapperClick=function(e){if(this.setDynValue=!1,this.enabled){if(e.target===this.overAllClear)return void e.preventDefault();if(this.inputFocus||this.inputElement.focus(),!this.readonly){if(e.target&&-1!==e.target.classList.toString().indexOf(f))return void(this.isPopupOpen()&&this.refreshPopup());!this.isPopupOpen()&&(this.openOnClick||this.showDropDownIcon&&e.target&&"e-input-group-icon e-ddl-icon"===e.target.className)?this.showPopup(e):(this.hidePopup(e),"CheckBox"===this.mode&&(this.showOverAllClear(),this.inputFocus=!0,this.overAllWrapper.classList.contains(c)||this.overAllWrapper.classList.add(c)))}this.targetElement()&&""!==this.targetElement()||e.preventDefault()}},t.prototype.enable=function(e){e?(this.overAllWrapper.classList.remove("e-disabled"),this.inputElement.removeAttribute("disabled"),i.i(o.attributes)(this.inputElement,{"aria-disabled":"false"}),this.ensureAriaDisabled("false")):(this.overAllWrapper.classList.add("e-disabled"),this.inputElement.setAttribute("disabled","true"),i.i(o.attributes)(this.inputElement,{"aria-disabled":"true"}),this.ensureAriaDisabled("true")),this.enabled!==e&&(this.enabled=e),this.hidePopup()},t.prototype.onBlurHandler=function(e,t){var l;if(i.i(o.isNullOrUndefined)(e)||(l=e.relatedTarget),this.popupObj&&document.body.contains(this.popupObj.element)&&this.popupObj.element.contains(l))return void("CheckBox"!==this.mode?this.inputElement.focus():"Auto"===this.floatLabelType&&(this.overAllWrapper.classList.contains("e-outline")||this.overAllWrapper.classList.contains("e-filled"))&&i.i(o.addClass)([this.overAllWrapper],"e-valid-input"));if("Auto"===this.floatLabelType&&this.overAllWrapper.classList.contains("e-outline")&&"CheckBox"===this.mode&&(i.i(o.isNullOrUndefined)(this.value)||0===this.value.length)&&i.i(o.removeClass)([this.overAllWrapper],"e-valid-input"),"CheckBox"===this.mode&&o.Browser.isIE&&!i.i(o.isNullOrUndefined)(e)&&!t)return this.inputFocus=!1,void this.overAllWrapper.classList.remove(c);if(this.scrollFocusStatus)return i.i(o.isNullOrUndefined)(e)||e.preventDefault(),this.inputElement.focus(),void(this.scrollFocusStatus=!1);if(this.inputFocus=!1,this.overAllWrapper.classList.remove(c),this.addTagOnBlur){var r=this.getValueByText(this.inputElement.value,this.ignoreCase,this.ignoreAccent),a=this.findListElement(this.list,"li","data-value",r),p=this.hideSelectedItem?d:s.a.selected;!(!a||a.classList.contains(p))&&(this.updateListSelection(a,e),"Delimiter"===this.mode&&this.updateDelimeter(this.delimiterChar))}this.updateDataList(),this.resetMainList&&(this.mainList=this.resetMainList,this.resetMainList=null),this.refreshListItems(null),"Box"!==this.mode&&"CheckBox"!==this.mode&&this.updateDelimView(),this.changeOnBlur&&(this.updateValueState(e,this.value,this.tempValues),this.dispatchEvent(this.hiddenElement,"change")),this.overAllClear.style.display="none",this.isPopupOpen()&&this.hidePopup(e),this.makeTextBoxEmpty(),this.trigger("blur"),this.focused=!0,o.Browser.isDevice&&"Delimiter"!==this.mode&&"CheckBox"!==this.mode&&this.removeChipFocus(),this.removeChipSelection(),this.refreshInputHight(),i.i(h.f)(this.overAllWrapper,this.componentWrapper,this.value,this.floatLabelType,this.placeholder),this.refreshPlaceHolder(),(this.allowFiltering||!0===this.enableSelectionOrder&&"CheckBox"===this.mode)&&!i.i(o.isNullOrUndefined)(this.mainList)&&(this.ulElement=this.mainList),this.checkPlaceholderSize(),n.Input.createSpanElement(this.overAllWrapper,this.createElement),this.calculateWidth(),i.i(o.isNullOrUndefined)(this.overAllWrapper)||i.i(o.isNullOrUndefined)(this.overAllWrapper.getElementsByClassName("e-ddl-icon")[0]&&this.overAllWrapper.getElementsByClassName("e-float-text-content")[0]&&"Never"!==this.floatLabelType)||this.overAllWrapper.getElementsByClassName("e-float-text-content")[0].classList.add("e-icon")},t.prototype.calculateWidth=function(){var e;if(this.overAllWrapper){if(!this.showDropDownIcon||this.overAllWrapper.querySelector(".e-label-top"))e=this.overAllWrapper.clientWidth-2*parseInt(getComputedStyle(this.inputElement).paddingRight);else{var t=this.dropIcon.offsetWidth+parseInt(getComputedStyle(this.dropIcon).marginRight);e=this.overAllWrapper.clientWidth-(t+2*parseInt(getComputedStyle(this.inputElement).paddingRight))}"Auto"===this.floatLabelType&&n.Input.calculateWidth(e,this.overAllWrapper,this.getModuleName())}},t.prototype.checkPlaceholderSize=function(){if(this.showDropDownIcon){var e=this.dropIcon.offsetWidth+parseInt(window.getComputedStyle(this.dropIcon).marginRight,10);this.setPlaceholderSize(e)}else i.i(o.isNullOrUndefined)(this.dropIcon)||this.setPlaceholderSize(this.showDropDownIcon?this.dropIcon.offsetWidth:0)},t.prototype.setPlaceholderSize=function(e){i.i(o.isNullOrUndefined)(this.value)||0===this.value.length?0!==this.dropIcon.offsetWidth?this.searchWrapper.style.width="calc(100% - "+(e+10)+"px":i.i(o.addClass)([this.searchWrapper],"e-search-custom-width"):i.i(o.isNullOrUndefined)(this.value)||(this.searchWrapper.removeAttribute("style"),i.i(o.removeClass)([this.searchWrapper],"e-search-custom-width"))},t.prototype.refreshInputHight=function(){i.i(o.isNullOrUndefined)(this.searchWrapper)||(this.value&&this.value.length||!i.i(o.isNullOrUndefined)(this.text)&&""!==this.text?this.searchWrapper.classList.add("e-zero-size"):this.searchWrapper.classList.remove("e-zero-size"))},t.prototype.validateValues=function(e,t){return JSON.stringify(e.slice().sort())!==JSON.stringify(t.slice().sort())},t.prototype.updateValueState=function(e,t,i){var s=t||[],l=i||[];if(this.initStatus&&this.validateValues(s,l)){var n={e:e,oldValue:i,value:t,isInteracted:!!e,element:this.element,event:e};this.isAngular&&this.preventChange?this.preventChange=!1:this.trigger("change",n),this.updateTempValue(),this.changeOnBlur||this.dispatchEvent(this.hiddenElement,"change")}},t.prototype.updateTempValue=function(){this.value?this.tempValues=this.value.slice():this.tempValues=this.value},t.prototype.updateAriaActiveDescendant=function(){i.i(o.isNullOrUndefined)(this.ulElement)||i.i(o.isNullOrUndefined)(this.ulElement.getElementsByClassName("e-item-focus")[0])||i.i(o.attributes)(this.inputElement,{"aria-activedescendant":this.ulElement.getElementsByClassName("e-item-focus")[0].id})},t.prototype.getPagingCount=function(){var e=this.list.classList.contains(s.a.noData)?null:getComputedStyle(this.getItems()[0],null).getPropertyValue("height");return Math.round(this.list.offsetHeight/parseInt(e,10))},t.prototype.pageUpSelection=function(e){var t=this.list.querySelectorAll("li."+s.a.li+":not(."+d+"):not(.e-reorder-hide)"),i=e>=0?t[e+1]:t[0];this.addListFocus(i),this.scrollBottom(i,this.getIndexByValue(i.getAttribute("data-value")))},t.prototype.pageDownSelection=function(e){var t=(this.getItems(),this.list.querySelectorAll("li."+s.a.li+":not(."+d+"):not(.e-reorder-hide)")),i=e<=t.length?t[e-1]:t[t.length-1];this.addListFocus(i),this.scrollBottom(i,this.getIndexByValue(i.getAttribute("data-value")))},t.prototype.getItems=function(){return this.list||e.prototype.render.call(this),this.ulElement&&this.ulElement.querySelectorAll("."+s.a.li).length>0?this.ulElement.querySelectorAll("."+s.a.li+":not(."+d+")"):[]},t.prototype.focusInHandler=function(e){var t=this;if(this.enabled){if(this.showOverAllClear(),this.inputFocus=!0,this.value&&this.value.length&&("Delimiter"!==this.mode&&"CheckBox"!==this.mode?this.chipCollectionWrapper.style.display="":this.showDelimWrapper(),"CheckBox"!==this.mode&&(this.viewWrapper.style.display="none")),"CheckBox"!==this.mode&&this.searchWrapper.classList.remove("e-zero-size"),this.checkPlaceholderSize(),this.focused){var s={isInteracted:!!e,event:e};this.trigger("focus",s),this.focused=!1}return this.overAllWrapper.classList.contains(c)||this.overAllWrapper.classList.add(c),i.i(h.e)(this.overAllWrapper,this.componentWrapper),this.isPopupOpen()&&this.refreshPopup(),setTimeout(function(){t.calculateWidth()},150),!0}return!1},t.prototype.showDelimWrapper=function(){"CheckBox"===this.mode?this.viewWrapper.style.display="":this.delimiterWrapper.style.display="",this.componentWrapper.classList.add("e-delimiter")},t.prototype.hideDelimWrapper=function(){this.delimiterWrapper.style.display="none",this.componentWrapper.classList.remove("e-delimiter")},t.prototype.expandTextbox=function(){var e=5;this.placeholder&&(e=e>this.inputElement.placeholder.length?e:this.inputElement.placeholder.length),this.inputElement.value.length>e?this.inputElement.size=this.inputElement.value.length:this.inputElement.size=e},t.prototype.isPopupOpen=function(){return null!==this.popupWrapper&&null!==this.popupWrapper.parentElement},t.prototype.refreshPopup=function(){this.popupObj&&this.mobFilter&&(this.popupObj.setProperties({width:this.calcPopupWidth()}),this.popupObj.refreshPosition(this.overAllWrapper),this.popupObj.resolveCollision())},t.prototype.checkTextLength=function(){return this.targetElement().length<1},t.prototype.popupKeyActions=function(e){switch(e.keyCode){case 38:this.hidePopup(e),"CheckBox"===this.mode&&this.inputElement.focus(),e.preventDefault();break;case 40:this.isPopupOpen()||(this.showPopup(e),e.preventDefault())}},t.prototype.updateAriaAttribute=function(){var e=this.list.querySelector("."+s.a.focus);if(!i.i(o.isNullOrUndefined)(e))if(this.inputElement.setAttribute("aria-activedescendant",e.id),this.allowFiltering){var t=this.popupWrapper.querySelector(".e-input-filter");t&&t.setAttribute("aria-activedescendant",e.id)}else"CheckBox"==this.mode&&this.overAllWrapper.setAttribute("aria-activedescendant",e.id)},t.prototype.homeNavigation=function(e){this.removeFocus();var t=this.ulElement.querySelectorAll("li."+s.a.li+":not(."+d+"):not(.e-reorder-hide)");if(t.length>0){var i=t[e?0:t.length-1];i.classList.add(s.a.focus),this.scrollBottom(i),this.updateAriaActiveDescendant()}},t.prototype.onKeyDown=function(e){if(!this.readonly&&(this.enabled||"CheckBox"===this.mode)&&(this.keyCode=e.keyCode,this.keyDownStatus=!0,!(e.keyCode>111&&e.keyCode<124))){if(e.altKey)return void this.popupKeyActions(e);if(this.isPopupOpen()){var t=this.list.querySelector("."+s.a.focus);switch(e.keyCode){case 36:case 35:this.homeNavigation(36===e.keyCode);break;case 33:return e.preventDefault(),void(t&&(this.getIndexByValue(t.getAttribute("data-value")),this.pageUpSelection(void 0-this.getPagingCount()),this.updateAriaAttribute()));case 34:return e.preventDefault(),void(t&&(this.getIndexByValue(t.getAttribute("data-value")),this.pageDownSelection(void 0+this.getPagingCount()),this.updateAriaAttribute()));case 38:this.arrowUp(e);break;case 40:this.arrowDown(e);break;case 27:return e.preventDefault(),this.hidePopup(e),void("CheckBox"===this.mode&&this.inputElement.focus());case 13:return e.preventDefault(),"CheckBox"!==this.mode&&this.selectByKey(e),void this.checkPlaceholderSize();case 32:return void this.spaceKeySelection(e);case 9:e.preventDefault(),this.hidePopup(e),this.inputElement.focus(),this.overAllWrapper.classList.add(c)}}else switch(e.keyCode){case 13:case 9:case 16:case 17:case 20:return;case 40:this.openOnClick&&this.showPopup();break;case 27:return e.preventDefault(),void this.escapeAction()}this.checkTextLength()&&this.keyNavigation(e),"CheckBox"===this.mode&&this.enableSelectionOrder&&(this.allowFiltering&&(this.previousFilterText=this.targetElement()),this.checkBackCommand(e)),this.expandTextbox(),"CheckBox"===this.mode&&this.showSelectAll||this.refreshPopup()}},t.prototype.arrowDown=function(e){e.preventDefault(),this.moveByList(1),this.keyAction=!0,(document.activeElement.classList.contains("e-input-filter")||"CheckBox"===this.mode&&!this.allowFiltering&&document.activeElement!==this.list)&&o.EventHandler.add(this.list,"keydown",this.onKeyDown,this),this.updateAriaAttribute()},t.prototype.arrowUp=function(e){e.preventDefault(),this.keyAction=!0;var t=this.list.querySelectorAll("li."+s.a.li+":not(."+d+"):not(.e-reorder-hide)");this.enableGroupCheckBox&&"CheckBox"===this.mode&&!i.i(o.isNullOrUndefined)(this.fields.groupBy)&&(t=this.list.querySelectorAll("li."+s.a.li+",li."+s.a.group+":not(."+d+"):not(.e-reorder-hide)"));var l=this.list.querySelector("li."+s.a.focus);this.focusFirstListItem=!i.i(o.isNullOrUndefined)(this.liCollections[0])&&this.liCollections[0].classList.contains("e-item-focus"),Array.prototype.slice.call(t).indexOf(l)<=0&&"CheckBox"===this.mode&&this.allowFiltering&&(this.keyAction=!1,this.notify("inputFocus",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:"focus"})),this.moveByList(-1),this.updateAriaAttribute()},t.prototype.spaceKeySelection=function(e){if("CheckBox"===this.mode){var t=this.list.querySelector("li."+s.a.focus),l=document.getElementsByClassName("e-selectall-parent")[0];if((!i.i(o.isNullOrUndefined)(t)||l&&l.classList.contains("e-item-focus"))&&(e.preventDefault(),this.keyAction=!0),this.selectByKey(e),this.keyAction){var n=this.list.querySelector("li."+s.a.focus);!i.i(o.isNullOrUndefined)(n)&&l&&l.classList.contains("e-item-focus")&&n.classList.remove("e-item-focus")}}this.checkPlaceholderSize()},t.prototype.checkBackCommand=function(e){(8===e.keyCode&&this.allowFiltering?this.targetElement()!==this.previousFilterText:""===this.targetElement())?this.backCommand=!1:this.backCommand=!0},t.prototype.keyNavigation=function(e){if("Delimiter"!==this.mode&&"CheckBox"!==this.mode&&this.value&&this.value.length)switch(e.keyCode){case 37:e.preventDefault(),this.moveBy(-1,e);break;case 39:e.preventDefault(),this.moveBy(1,e);break;case 8:this.removelastSelection(e);break;case 46:this.removeSelectedChip(e)}else if(8===e.keyCode&&"Delimiter"===this.mode&&this.value&&this.value.length){e.preventDefault();var t=this.value[this.value.length-1];this.removeValue(t,e),this.updateDelimeter(this.delimiterChar,e),this.focusAtLastListItem(t)}},t.prototype.selectByKey=function(e){this.removeChipSelection(),this.selectListByKey(e),this.hideSelectedItem&&this.focusAtFirstListItem()},t.prototype.escapeAction=function(){var e=this.tempValues?this.tempValues.slice():[];this.value&&this.validateValues(this.value,e)&&("CheckBox"!==this.mode&&(this.value=e,this.initialValueUpdate()),"Delimiter"!==this.mode&&"CheckBox"!==this.mode?this.chipCollectionWrapper.style.display="":this.showDelimWrapper(),this.refreshPlaceHolder(),this.value.length?this.showOverAllClear():this.hideOverAllClear()),this.makeTextBoxEmpty()},t.prototype.scrollBottom=function(e,t){var s=this.list.offsetHeight,l=e.offsetTop+e.offsetHeight-this.list.scrollTop,n=this.list.scrollTop+l-s,r=e.offsetTop+e.offsetHeight-this.list.scrollTop;r=this.fields.groupBy&&!i.i(o.isNullOrUndefined)(this.fixedHeaderElement)?r-this.fixedHeaderElement.offsetHeight:r,0===t?this.list.scrollTop=0:l>s?this.list.scrollTop=n:r>0&&this.list.offsetHeight>r||(this.list.scrollTop=n)},t.prototype.scrollTop=function(e,t){var s=e.offsetTop-this.list.scrollTop;s=this.fields.groupBy&&!i.i(o.isUndefined)(this.fixedHeaderElement)?s-this.fixedHeaderElement.offsetHeight:s;var l=e.offsetTop+e.offsetHeight-this.list.scrollTop;0===t?this.list.scrollTop=0:s<0?this.list.scrollTop=this.list.scrollTop+s:l>0&&this.list.offsetHeight>l||(this.list.scrollTop=e.offsetTop-(this.fields.groupBy&&!i.i(o.isUndefined)(this.fixedHeaderElement)?this.fixedHeaderElement.offsetHeight:0))},t.prototype.selectListByKey=function(e){var t,l=this.list.querySelector("li."+s.a.focus),n=this.value&&this.value.length?this.value.length:0;null!==l&&(e.preventDefault(),l.classList.contains("e-active")&&(n-=1),this.isValidLI(l)&&n<this.maximumSelectionLength?(this.updateListSelection(l,e),this.addListFocus(l),"CheckBox"===this.mode?(this.updateDelimView(),this.updateDelimeter(this.delimiterChar,e),this.refreshInputHight(),this.checkPlaceholderSize(),this.enableGroupCheckBox&&!i.i(o.isNullOrUndefined)(this.fields.groupBy)&&(t=l.firstElementChild.lastElementChild,this.findGroupStart(t),this.deselectHeader())):this.updateDelimeter(this.delimiterChar,e),this.makeTextBoxEmpty(),"CheckBox"!==this.mode&&this.refreshListItems(l.textContent),this.changeOnBlur||this.updateValueState(e,this.value,this.tempValues),this.refreshPopup()):!this.isValidLI(l)&&n<this.maximumSelectionLength&&(t=l.firstElementChild.lastElementChild,t.classList.contains("e-check")?this.selectAllItem(!1,e,l):this.selectAllItem(!0,e,l)),this.refreshSelection(),this.closePopupOnSelect&&this.hidePopup(e));var r=document.getElementsByClassName("e-selectall-parent")[0];if(r&&r.classList.contains("e-item-focus")){var a=r.childNodes[0];if(a.classList.contains("e-check")){a.classList.remove("e-check");var h={module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:"check",name:"checkSelectAll"};this.notify("checkSelectAll",h),this.selectAllItem(!1,e,l)}else{a.classList.add("e-check");var h={module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:"check",name:"checkSelectAll"};this.notify("checkSelectAll",h),this.selectAllItem(!0,e,l)}}this.refreshPlaceHolder()},t.prototype.refreshListItems=function(e){if((this.allowFiltering||"CheckBox"===this.mode&&!0===this.enableSelectionOrder||this.allowCustomValue)&&this.mainList&&this.listData){var t=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.onActionComplete(t,this.mainData),this.focusAtLastListItem(e),this.value&&this.value.length&&this.refreshSelection()}else!i.i(o.isNullOrUndefined)(this.fields.groupBy)&&this.value&&this.value.length&&this.refreshSelection()},t.prototype.removeSelectedChip=function(e){var t,s=this.chipCollectionWrapper.querySelector("span.e-chip-selected");null!==s&&(i.i(o.isNullOrUndefined)(this.value)||(this.tempValues=this.value.slice()),t=s.nextElementSibling,null!==t&&(this.removeChipSelection(),this.addChipSelection(t,e)),this.removeValue(s.getAttribute("data-value"),e),this.makeTextBoxEmpty()),this.closePopupOnSelect&&this.hidePopup(e),this.checkPlaceholderSize()},t.prototype.moveByTop=function(e){var t,i=this.list.querySelectorAll("li."+s.a.li);i.length>1&&(this.removeFocus(),t=e?0:i.length-1,this.addListFocus(i[t]),this.scrollBottom(i[t],t)),this.updateAriaAttribute()},t.prototype.clickHandler=function(e){var t=e.target,i=t.className,s=document.getElementsByClassName("e-selectall-parent")[0];"e-input-filter e-input"!==i&&"e-input-group e-control-wrapper e-input-focus"!==i||!s.classList.contains("e-item-focus")||s.classList.remove("e-item-focus")},t.prototype.moveByList=function(e){if(this.list){var t=this.list.querySelectorAll("li."+s.a.li+":not(."+d+"):not(.e-reorder-hide)");"CheckBox"===this.mode&&this.enableGroupCheckBox&&!i.i(o.isNullOrUndefined)(this.fields.groupBy)&&(t=this.list.querySelectorAll("li."+s.a.li+",li."+s.a.group+":not(."+d+"):not(.e-reorder-hide)"));var l=this.list.querySelector("li."+s.a.focus),n=-1,r=document.getElementsByClassName("e-selectall-parent")[0];if("CheckBox"===this.mode&&this.showSelectAll&&1==e&&!i.i(o.isNullOrUndefined)(r)&&!r.classList.contains("e-item-focus")&&0==this.list.getElementsByClassName("e-item-focus").length&&this.liCollections.length>1)!this.focusFirstListItem&&r.classList.contains("e-item-focus")?r.classList.remove("e-item-focus"):r.classList.contains("e-item-focus")||r.classList.add("e-item-focus");else if(t.length){"CheckBox"===this.mode&&this.showSelectAll&&!i.i(o.isNullOrUndefined)(r&&-1==e)&&(!this.focusFirstListItem&&r.classList.contains("e-item-focus")?r.classList.remove("e-item-focus"):this.focusFirstListItem&&!r.classList.contains("e-item-focus")&&r.classList.add("e-item-focus"));for(var a=0;a<t.length;a++)if(t[a]===l){n=a;break}e>0?n<t.length-1&&(this.removeFocus(),this.addListFocus(t[++n]),this.updateCheck(t[n]),this.scrollBottom(t[n],n)):n>0&&(this.removeFocus(),this.addListFocus(t[--n]),this.updateCheck(t[n]),this.scrollTop(t[n],n))}}},t.prototype.updateCheck=function(e){if("CheckBox"===this.mode&&this.enableGroupCheckBox&&!i.i(o.isNullOrUndefined)(this.fields.groupBy)){e.firstElementChild.lastElementChild.classList.contains("e-check")?e.classList.add("e-active"):e.classList.remove("e-active")}},t.prototype.moveBy=function(e,t){var i,s=this.chipCollectionWrapper.querySelectorAll("span."+m),l=this.chipCollectionWrapper.querySelector("span.e-chip-selected");null===l?e<0&&this.addChipSelection(s[s.length-1],t):e<0?null!==(i=l.previousElementSibling)&&(this.removeChipSelection(),this.addChipSelection(i,t)):(i=l.nextElementSibling,this.removeChipSelection(),null!==i&&this.addChipSelection(i,t))},t.prototype.chipClick=function(e){if(this.enabled){var t=i.i(o.closest)(e.target,"."+m);this.removeChipSelection(),this.addChipSelection(t,e)}},t.prototype.removeChipSelection=function(){this.chipCollectionWrapper&&this.removeChipFocus()},t.prototype.addChipSelection=function(e,t){i.i(o.addClass)([e],"e-chip-selected"),this.trigger("chipSelection",t)},t.prototype.onChipRemove=function(e){if(3!==e.which&&2!==e.button&&this.enabled&&!this.readonly){var t=e.target.parentElement,s=t.getAttribute("data-value"),l=this.getFormattedValue(s);if(this.allowCustomValue&&("false"!==s&&!1===l||!i.i(o.isNullOrUndefined)(l)&&"NaN"===l.toString())&&(l=s),this.isPopupOpen()&&"CheckBox"!==this.mode&&this.hidePopup(e),this.inputFocus||this.inputElement.focus(),this.removeValue(l,e),i.i(o.isNullOrUndefined)(this.findListElement(this.list,"li","data-value",l))&&this.mainList&&this.listData){var n=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.onActionComplete(n,this.mainData)}this.updateDelimeter(this.delimiterChar,e),this.placeholder&&"Never"===this.floatLabelType?(this.makeTextBoxEmpty(),this.checkPlaceholderSize()):this.inputElement.value="",e.preventDefault()}},t.prototype.makeTextBoxEmpty=function(){this.inputElement.value="",this.refreshPlaceHolder()},t.prototype.refreshPlaceHolder=function(){this.placeholder&&"Never"===this.floatLabelType?this.value&&this.value.length||!i.i(o.isNullOrUndefined)(this.text)&&""!==this.text?this.inputElement.placeholder="":this.inputElement.placeholder=i.i(h.g)(this.placeholder):this.setFloatLabelType(),this.expandTextbox()},t.prototype.removeAllItems=function(e,t,l,n,r){var a=this.value.indexOf(e),h=this.value.slice(0);h.splice(a,1),this.setProperties({value:[].concat([],h)},!0),n.setAttribute("aria-selected","false");var p=this.hideSelectedItem?d:s.a.selected;i.i(o.removeClass)([n],p),this.notify("activeList",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,li:n,e:this,index:a}),this.invokeCheckboxSelection(n,t,l),this.updateMainList(!0,e,r),this.updateChipStatus()},t.prototype.invokeCheckboxSelection=function(e,t,i){this.notify("updatelist",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,li:e,e:t}),this.updateAriaActiveDescendant(),this.value&&this.value.length!==this.mainData.length&&"CheckBox"===this.mode&&this.showSelectAll&&!this.isSelectAll&&!i&&this.notify("checkSelectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:"uncheck"})},t.prototype.removeValue=function(t,l,n,r){var a=this,h=this.value.indexOf(this.getFormattedValue(t));-1===h&&this.allowCustomValue&&!i.i(o.isNullOrUndefined)(t)&&(h=this.value.indexOf(t.toString()));var p=l&&l.target;r=!!(r||p&&p.classList.contains("e-close-hooker"))||null;var u=this.hideSelectedItem?d:s.a.selected;if(-1!==h){var c=this.findListElement(this.list,"li","data-value",t),m=this.getDataByValue(t),f={e:l,item:c,itemData:m,isInteracted:!!l,cancel:!1};this.trigger("removing",f,function(p){if(p.cancel)a.removeIndex++;else{var d=a.value.slice(0);if(d.splice(h,1),a.setProperties({value:[].concat([],d)},!0),null!==c){var f=a.findListElement(a.mainList,"li","data-value",t);c.setAttribute("aria-selected","false"),i.i(o.removeClass)([c],u),f&&(f.setAttribute("aria-selected","false"),i.i(o.removeClass)([c,f],u)),a.notify("activeList",{module:"CheckBoxSelection",enable:"CheckBox"===a.mode,li:c,e:a,index:h}),a.invokeCheckboxSelection(c,l,r)}a.hideSelectedItem&&a.fields.groupBy&&c&&a.hideGroupItem(t),a.hideSelectedItem&&a.fixedHeaderElement&&a.fields.groupBy&&"CheckBox"!==a.mode&&a.isPopupOpen()&&e.prototype.scrollStop.call(a),a.updateMainList(!0,t),a.removeChip(t),a.updateChipStatus();if((a.value&&a.value.length?a.value.length:0)<a.maximumSelectionLength){var v=a.list.querySelectorAll("li."+s.a.li+":not(.e-active)");i.i(o.removeClass)(v,"e-disable")}a.trigger("removed",p);var g=l&&l.currentTarget,y=!(!g||!g.classList.contains("e-selectall-parent"))||null;if(!a.changeOnBlur&&!r&&l&&n&&!y&&a.isSelectAllTarget&&a.updateValueState(l,a.value,a.tempValues),n&&(a.selectAllEventData.push(m),a.selectAllEventEle.push(c)),1===n){a.changeOnBlur||a.updateValueState(l,a.value,a.tempValues);var C={event:l,items:a.selectAllEventEle,itemData:a.selectAllEventData,isInteracted:!!l,isChecked:!1};a.trigger("selectedAll",C),a.selectAllEventData=[],a.selectAllEventEle=[]}!r||1!==n&&null!==n||a.clearAllCallback(l,r)}})}},t.prototype.updateMainList=function(e,t,l){if(this.allowFiltering||"CheckBox"===this.mode){var n=l||this.findListElement(this.mainList,"li","data-value",t);n&&(e?(n.setAttribute("aria-selected","false"),i.i(o.removeClass)([n],this.hideSelectedItem?d:s.a.selected),"CheckBox"===this.mode&&i.i(o.removeClass)([n.firstElementChild.lastElementChild],"e-check")):(n.setAttribute("aria-selected","true"),i.i(o.addClass)([n],this.hideSelectedItem?d:s.a.selected),"CheckBox"===this.mode&&i.i(o.addClass)([n.firstElementChild.lastElementChild],"e-check")))}},t.prototype.removeChip=function(e){if(this.chipCollectionWrapper){var t=this.findListElement(this.chipCollectionWrapper,"span","data-value",e);t&&i.i(o.remove)(t)}},t.prototype.setWidth=function(e){i.i(o.isNullOrUndefined)(e)||("number"==typeof e?this.overAllWrapper.style.width=i.i(o.formatUnit)(e):"string"==typeof e&&(this.overAllWrapper.style.width=e.match(/px|%|em/)?e:i.i(o.formatUnit)(e)))},t.prototype.updateChipStatus=function(){this.value&&this.value.length?(i.i(o.isNullOrUndefined)(this.chipCollectionWrapper)||(this.chipCollectionWrapper.style.display=""),"Delimiter"!==this.mode&&"CheckBox"!==this.mode||this.showDelimWrapper(),this.showOverAllClear()):(i.i(o.isNullOrUndefined)(this.chipCollectionWrapper)||(this.chipCollectionWrapper.style.display="none"),i.i(o.isNullOrUndefined)(this.delimiterWrapper)||(this.delimiterWrapper.style.display="none"),this.hideOverAllClear())},t.prototype.addValue=function(e,t,i){this.value||(this.value=[]),this.value.indexOf(e)<0&&this.setProperties({value:[].concat([],this.value,[e])},!0);var s=this.findListElement(this.list,"li","data-value",e);this.removeFocus(),s&&(this.addListFocus(s),this.addListSelection(s)),"Delimiter"!==this.mode&&"CheckBox"!==this.mode&&this.addChip(t,e,i),this.hideSelectedItem&&this.fields.groupBy&&this.hideGroupItem(e),this.updateChipStatus(),this.checkMaxSelection()},t.prototype.checkMaxSelection=function(){if((this.value&&this.value.length?this.value.length:0)===this.maximumSelectionLength){var e=this.list.querySelectorAll("li."+s.a.li+":not(.e-active)");i.i(o.addClass)(e,"e-disable")}},t.prototype.dispatchSelect=function(t,i,s,l,n){var o=this,r=this.listData;if(this.initStatus&&!l){var a=this.getDataByValue(t),h={e:i,item:s,itemData:a,isInteracted:!!i,cancel:!1};this.trigger("select",h,function(l){if(!l.cancel){if(n&&(o.selectAllEventData.push(a),o.selectAllEventEle.push(s)),1===n){var h={event:i,items:o.selectAllEventEle,itemData:o.selectAllEventData,isInteracted:!!i,isChecked:!0};o.trigger("selectedAll",h),o.selectAllEventData=[]}o.allowCustomValue&&o.isServerRendered&&o.listData!==r&&(o.listData=r),o.updateListSelectEventCallback(t,s,i),o.hideSelectedItem&&o.fixedHeaderElement&&o.fields.groupBy&&"CheckBox"!==o.mode&&e.prototype.scrollStop.call(o)}})}},t.prototype.addChip=function(e,t,i){this.chipCollectionWrapper&&this.getChip(e,t,i)},t.prototype.removeChipFocus=function(){var e=this.chipCollectionWrapper.querySelectorAll("span.e-chips.e-chip-selected");if(i.i(o.removeClass)(e,"e-chip-selected"),o.Browser.isDevice)for(var t=this.chipCollectionWrapper.querySelectorAll("span."+f.split(" ")[0]),s=0;s<t.length;s++)t[s].style.display="none"},t.prototype.onMobileChipInteraction=function(e){var t=i.i(o.closest)(e.target,"."+m),s=t.querySelector("span."+f.split(" ")[0]);this.enabled&&!this.readonly&&(t.classList.contains("e-chip-selected")||(this.removeChipFocus(),s.style.display="",t.classList.add("e-chip-selected")),this.refreshPopup(),e.preventDefault())},t.prototype.multiCompiler=function(e){var t=!1;if("function"!=typeof e&&e)try{t=!!i.i(o.selectAll)(e,document).length}catch(e){t=!1}return t},t.prototype.encodeHtmlEntities=function(e){return e.replace(/[\u00A0-\u9999<>&]/g,function(e){return"&#"+e.charCodeAt(0)+";"})},t.prototype.getChip=function(e,t,s){var l,n=this,r={text:t,value:t},a=this.createElement("span",{className:m,attrs:{"data-value":t,title:e}}),h=this.createElement("span",{className:"e-chipcontent"}),p=this.createElement("span",{className:f});if(this.mainData&&(r=this.getDataByValue(t)),this.valueTemplate&&!i.i(o.isNullOrUndefined)(r)){var u=this.multiCompiler(this.valueTemplate);l="function"!=typeof this.valueTemplate&&u?i.i(o.compile)(i.i(o.select)(this.valueTemplate,document).innerHTML.trim()):i.i(o.compile)(this.valueTemplate);var c=l(r,this,"valueTemplate",this.valueTemplateId,this.isStringTemplate,null,h);c&&c.length>0&&i.i(o.append)(c,h),this.renderReactTemplates()}else this.enableHtmlSanitizer?h.innerText=e:h.innerHTML=this.encodeHtmlEntities(e);a.appendChild(h);var d={isInteracted:!!s,itemData:r,e:s,setClass:function(e){i.i(o.addClass)([a],e)},cancel:!1};this.isPreventChange=this.isAngular&&this.preventChange,this.trigger("tagging",d,function(e){e.cancel||(o.Browser.isDevice?(a.classList.add("e-mob-chip"),i.i(o.append)([p],a),p.style.display="none",o.EventHandler.add(a,"click",n.onMobileChipInteraction,n)):(o.EventHandler.add(a,"mousedown",n.chipClick,n),n.showClearButton&&a.appendChild(p)),o.EventHandler.add(p,"mousedown",n.onChipRemove,n),n.chipCollectionWrapper.appendChild(a),!n.changeOnBlur&&s&&n.updateValueState(s,n.value,n.tempValues))})},t.prototype.calcPopupWidth=function(){var e=i.i(o.formatUnit)(this.popupWidth);if(e.indexOf("%")>-1){e=(this.componentWrapper.offsetWidth*parseFloat(e)/100).toString()+"px"}return e},t.prototype.mouseIn=function(){this.enabled&&!this.readonly&&this.showOverAllClear()},t.prototype.mouseOut=function(){this.inputFocus||(this.overAllClear.style.display="none")},t.prototype.listOption=function(e,t){var s=!i.i(o.isNullOrUndefined)(t.iconCss),l=i.i(o.isNullOrUndefined)(t.properties)?t:t.properties;return this.listCurrentOptions=null!==t.text||null!==t.value?{fields:l,showIcon:s,ariaAttributes:{groupItemRole:"presentation"}}:{fields:{value:"text"}},i.i(o.extend)(this.listCurrentOptions,this.listCurrentOptions,t,!0),"CheckBox"===this.mode&&this.notify("listoption",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,dataSource:e,fieldProperty:l}),this.listCurrentOptions},t.prototype.renderPopup=function(){var t=this;if(this.list||e.prototype.render.call(this),!this.popupObj&&!i.i(o.isNullOrUndefined)(this.popupWrapper)){document.body.appendChild(this.popupWrapper);var s=this.popupWrapper.querySelector(".e-filter-parent");"CheckBox"===this.mode&&!this.allowFiltering&&s&&this.filterParent&&(s.remove(),this.filterParent=null);var n=parseInt(this.popupHeight,10);if(this.popupWrapper.style.visibility="hidden",this.headerTemplate&&(this.setHeaderTemplate(),n-=this.header.offsetHeight),i.i(o.append)([this.list],this.popupWrapper),this.footerTemplate&&(this.setFooterTemplate(),n-=this.footer.offsetHeight),"CheckBox"===this.mode&&this.showSelectAll?(this.notify("selectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode}),n-=this.selectAllHeight):"CheckBox"!==this.mode||this.showSelectAll||this.headerTemplate||this.footerTemplate?"CheckBox"!==this.mode||this.showSelectAll||(this.notify("selectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode}),n=parseInt(this.popupHeight,10),this.headerTemplate&&this.header&&(n-=this.header.offsetHeight),this.footerTemplate&&this.footer&&(n-=this.footer.offsetHeight)):(this.notify("selectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode}),n=parseInt(this.popupHeight,10)),"CheckBox"===this.mode){var r={module:"CheckBoxSelection",enable:"CheckBox"===this.mode,popupElement:this.popupWrapper};this.allowFiltering&&(this.notify("searchBox",r),n-=this.searchBoxHeight),i.i(o.addClass)([this.popupWrapper],"e-checkbox")}"auto"!==this.popupHeight?(this.list.style.maxHeight=i.i(o.formatUnit)(n),this.popupWrapper.style.maxHeight=i.i(o.formatUnit)(this.popupHeight)):this.list.style.maxHeight=i.i(o.formatUnit)(this.popupHeight),this.popupObj=new l.Popup(this.popupWrapper,{width:this.calcPopupWidth(),targetType:"relative",position:this.enableRtl?{X:"right",Y:"bottom"}:{X:"left",Y:"bottom"},relateTo:this.overAllWrapper,collision:this.enableRtl?{X:"fit",Y:"flip"}:{X:"flip",Y:"flip"},offsetY:1,enableRtl:this.enableRtl,zIndex:this.zIndex,close:function(){if(t.popupObj.element.parentElement){t.popupObj.unwireScrollEvents();var e=t.popupWrapper.querySelector(".e-input-filter");"CheckBox"===t.mode&&e&&document.activeElement===e&&e.blur(),i.i(o.detach)(t.popupObj.element)}},open:function(){if(t.popupObj.resolveCollision(),!t.isFirstClick){var e=t.list.querySelector("ul");e&&("CheckBox"!==t.mode&&(t.allowFiltering||t.allowCustomValue)&&""!==t.targetElement().trim()||(t.mainList=e.cloneNode?e.cloneNode(!0):e)),t.isFirstClick=!0}t.popupObj.wireScrollEvents(),"CheckBox"!==t.mode&&(t.allowFiltering||t.allowCustomValue)&&""!==t.targetElement().trim()||t.loadTemplate(),t.setScrollPosition(),t.allowFiltering&&t.notify("inputFocus",{module:"CheckBoxSelection",enable:"CheckBox"===t.mode,value:"focus"})},targetExitViewport:function(){o.Browser.isDevice||t.hidePopup()}}),"CheckBox"===this.mode&&o.Browser.isDevice&&this.allowFiltering&&this.notify("deviceSearchBox",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode}),this.popupObj.close(),this.popupWrapper.style.visibility=""}},t.prototype.setHeaderTemplate=function(){var e;this.header&&this.header.remove(),this.header=this.createElement("div"),i.i(o.addClass)([this.header],"e-ddl-header");var t=this.multiCompiler(this.headerTemplate);e="function"!=typeof this.headerTemplate&&t?i.i(o.compile)(i.i(o.select)(this.headerTemplate,document).innerHTML.trim()):i.i(o.compile)(this.headerTemplate);var s=e({},this,"headerTemplate",this.headerTemplateId,this.isStringTemplate,null,this.header);s&&s.length>0&&i.i(o.append)(s,this.header),"CheckBox"===this.mode&&this.showSelectAll?i.i(o.prepend)([this.header],this.popupWrapper):i.i(o.append)([this.header],this.popupWrapper),o.EventHandler.add(this.header,"mousedown",this.onListMouseDown,this)},t.prototype.setFooterTemplate=function(){var e;this.footer&&this.footer.remove(),this.footer=this.createElement("div"),i.i(o.addClass)([this.footer],"e-ddl-footer");var t=this.multiCompiler(this.footerTemplate);e="function"!=typeof this.footerTemplate&&t?i.i(o.compile)(i.i(o.select)(this.footerTemplate,document).innerHTML.trim()):i.i(o.compile)(this.footerTemplate);var s=e({},this,"footerTemplate",this.footerTemplateId,this.isStringTemplate,null,this.footer);s&&s.length>0&&i.i(o.append)(s,this.footer),i.i(o.append)([this.footer],this.popupWrapper),o.EventHandler.add(this.footer,"mousedown",this.onListMouseDown,this)},t.prototype.clearAll=function(e){if(this.enabled&&!this.readonly){var t=void 0;if(this.value&&this.value.length>0){var i=this.list&&this.list.querySelectorAll("li.e-list-item");if(i&&i.length>0)this.selectAllItems(!1,e);else for(this.removeIndex=0,t=this.value[this.removeIndex];this.removeIndex<this.value.length;t=this.value[this.removeIndex])this.removeValue(t,e,null,!0);this.selectedElementID=null,this.inputElement.removeAttribute("aria-activedescendant")}else this.clearAllCallback(e)}},t.prototype.clearAllCallback=function(e,t){var s=this.value?this.value.slice():[];if(this.mainList&&this.listData&&(this.allowFiltering&&"CheckBox"!==this.mode||this.allowCustomValue)){var l=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.onActionComplete(l,this.mainData)}this.focusAtFirstListItem(),this.updateDelimeter(this.delimiterChar,e),"Box"===this.mode||this.inputFocus&&"CheckBox"!==this.mode||this.updateDelimView(),""!==this.inputElement.value&&(this.makeTextBoxEmpty(),this.search(null)),this.checkPlaceholderSize(),this.isPopupOpen()&&this.refreshPopup(),this.inputFocus||(this.changeOnBlur&&this.updateValueState(e,this.value,s),"CheckBox"!==this.mode&&this.inputElement.focus()),"CheckBox"===this.mode&&(this.refreshPlaceHolder(),this.refreshInputHight(),this.changeOnBlur&&t&&(i.i(o.isNullOrUndefined)(this.value)||0===this.value.length)&&this.updateValueState(e,this.value,this.tempValues)),this.changeOnBlur||!t||!i.i(o.isNullOrUndefined)(this.value)&&0!==this.value.length||this.updateValueState(e,this.value,this.tempValues),"CheckBox"===this.mode&&this.enableGroupCheckBox&&!i.i(o.isNullOrUndefined)(this.fields.groupBy)&&this.updateListItems(this.list.querySelectorAll("li.e-list-item"),this.mainList.querySelectorAll("li.e-list-item")),e.preventDefault()},t.prototype.windowResize=function(){this.refreshPopup(),this.inputFocus&&"CheckBox"!==this.mode||!this.viewWrapper||!this.viewWrapper.parentElement||this.updateDelimView()},t.prototype.resetValueHandler=function(e){var t=i.i(o.closest)(this.inputElement,"form");if(t&&e.target===t){var s=this.element.tagName===this.getNgDirective()?null:this.element.getAttribute("data-initial-value");this.text=s}},t.prototype.wireEvent=function(){o.EventHandler.add(this.componentWrapper,"mousedown",this.wrapperClick,this),o.EventHandler.add(window,"resize",this.windowResize,this),o.EventHandler.add(this.inputElement,"focus",this.focusInHandler,this),o.EventHandler.add(this.inputElement,"keydown",this.onKeyDown,this),o.EventHandler.add(this.inputElement,"keyup",this.keyUp,this),"CheckBox"!==this.mode&&o.EventHandler.add(this.inputElement,"input",this.onInput,this),o.EventHandler.add(this.inputElement,"blur",this.onBlurHandler,this),o.EventHandler.add(this.componentWrapper,"mouseover",this.mouseIn,this);var e=i.i(o.closest)(this.inputElement,"form");e&&o.EventHandler.add(e,"reset",this.resetValueHandler,this),o.EventHandler.add(this.componentWrapper,"mouseout",this.mouseOut,this),o.EventHandler.add(this.overAllClear,"mouseup",this.clearAll,this),o.EventHandler.add(this.inputElement,"paste",this.pasteHandler,this)},t.prototype.onInput=function(e){this.keyDownStatus?this.isValidKey=!0:this.isValidKey=!1,this.keyDownStatus=!1,o.Browser.isDevice&&"mozilla"===o.Browser.info.name&&this.search(e)},t.prototype.pasteHandler=function(e){var t=this;setTimeout(function(){t.expandTextbox(),t.search(e)})},t.prototype.search=function(e){var t=this;if(this.resetFilteredData=!0,i.i(o.isNullOrUndefined)(e)||(this.keyCode=e.keyCode),!this.isPopupOpen()&&this.openOnClick&&this.showPopup(e),this.openClick(e),!this.checkTextLength()||this.allowFiltering||i.i(o.isNullOrUndefined)(e)||8===e.keyCode){var l=this.targetElement();if(this.allowFiltering){this.allowCustomValue&&(this.isRemoteSelection=!0);var n={preventDefaultAction:!1,text:this.targetElement(),updateData:function(e,i,s){n.cancel||(t.isFiltered=!0,t.remoteFilterAction=!0,t.dataUpdater(e,i,s))},event:e,cancel:!1};this.trigger("filtering",n,function(e){e.cancel||t.isFiltered||e.preventDefaultAction||(t.filterAction=!0,t.dataUpdater(t.dataSource,null,t.fields))})}else if(this.allowCustomValue){var h=new a.Query;h=this.allowFiltering&&""!==l?h.where(this.fields.text,"startswith",l,this.ignoreCase,this.ignoreAccent):h,this.dataUpdater(this.mainData,h,this.fields)}else{var p=this.list.querySelectorAll("li."+s.a.li+":not(.e-hide-listitem)"),u=i.i(r.a)(this.targetElement(),p,"StartsWith",this.ignoreCase);u&&null!==u.item?(this.addListFocus(u.item),this.list.scrollTop=u.item.offsetHeight*u.index):""!==this.targetElement()?this.removeFocus():this.focusAtFirstListItem()}}else this.focusAtFirstListItem()},t.prototype.preRender=function(){null===this.allowFiltering&&(this.allowFiltering="CheckBox"===this.mode),this.initializeData(),this.updateDataAttribute(this.htmlAttributes),e.prototype.preRender.call(this)},t.prototype.getLocaleName=function(){return"multi-select"},t.prototype.initializeData=function(){this.mainListCollection=[],this.beforePopupOpen=!1,this.filterAction=!1,this.remoteFilterAction=!1,this.isFirstClick=!1,this.mobFilter=!0,this.isFiltered=!1,this.focused=!0,this.initial=!0,this.backCommand=!0,this.isCustomRendered=!1,this.isRemoteSelection=!1,this.isSelectAllTarget=!0},t.prototype.updateData=function(e,t){var s,l="",n="Delimiter"===this.mode||"CheckBox"===this.mode,r=[],a=this.listData;if(this.listData=this.mainData,i.i(o.isNullOrUndefined)(this.hiddenElement)||(this.hiddenElement.innerHTML=""),!i.i(o.isNullOrUndefined)(this.value)){for(var h=this.value.length,p="",u=0;u<h;u++){var c=this.value[u],d=this.findListElement(i.i(o.isNullOrUndefined)(this.mainList)?this.ulElement:this.mainList,"li","data-value",c);i.i(o.isNullOrUndefined)(d)&&!this.allowCustomValue?(this.value.splice(u,1),u-=1,h-=1):(s=this.listData?this.getTextByValue(c):c,l+=s+e+" ",r.push(s)),p+='<option selected value="'+c+'">'+u+"</option>"}i.i(o.isNullOrUndefined)(this.hiddenElement)||(this.hiddenElement.innerHTML=p)}this.setProperties({text:r.toString()},!0),n&&(this.updateWrapperText(this.delimiterWrapper,l),this.delimiterWrapper.setAttribute("id",i.i(o.getUniqueID)("delim_val")),this.inputElement.setAttribute("aria-describedby",this.delimiterWrapper.id));var m=t&&t.target,f=!(!m||!m.classList.contains("e-close-hooker"))||null;(!this.changeOnBlur&&t&&!f||this.isSelectAll)&&(this.isSelectAll=!1,this.updateValueState(t,this.value,this.tempValues)),this.listData=a,this.addValidInputClass()},t.prototype.initialTextUpdate=function(){if(i.i(o.isNullOrUndefined)(this.text))this.setProperties({value:null},!0);else{for(var e=this.text.split(this.delimiterChar),t=[],s=0;e.length>s;s++){var l=this.getValueByText(e[s]);i.i(o.isNullOrUndefined)(l)?this.allowCustomValue&&t.push(e[s]):t.push(l)}t&&t.length&&this.setProperties({value:t},!0)}},t.prototype.renderList=function(t){!t&&this.allowCustomValue&&this.list&&(this.list.textContent===this.noRecordsTemplate||this.list.querySelector(".e-ul")&&0===this.list.querySelector(".e-ul").childElementCount)&&(t=!0),e.prototype.render.call(this,null,t),this.unwireListEvents(),this.wireListEvents()},t.prototype.initialValueUpdate=function(){if(this.list){var e=void 0,t=void 0,l=void 0;if(this.chipCollectionWrapper&&(this.chipCollectionWrapper.innerHTML=""),this.removeListSelection(),!i.i(o.isNullOrUndefined)(this.value))for(var n=0;!i.i(o.isNullOrUndefined)(this.value[n]);n++)if(l=this.value[n],t=this.findListElement(this.hideSelectedItem?this.ulElement:this.list,"li","data-value",l),e=this.getTextByValue(l),t&&"true"!==t.getAttribute("aria-selected")||t&&"true"===t.getAttribute("aria-selected")&&this.hideSelectedItem&&("Box"===this.mode||"Default"===this.mode))this.addChip(e,l),this.addListSelection(t);else if(l&&this.allowCustomValue){var r=this.listData.length,a={};i.i(o.setValue)(this.fields.text,l,a),i.i(o.setValue)(this.fields.value,l,a);var h=this.popupWrapper.querySelector("."+s.a.noData);this.addItem(a,r),t=t||this.findListElement(this.hideSelectedItem?this.ulElement:this.list,"li","data-value",l),this.popupWrapper.contains(h)&&(this.list.setAttribute("style",h.getAttribute("style")),this.popupWrapper.replaceChild(this.list,h),this.wireListEvents()),this.addChip(e,l),this.addListSelection(t)}"CheckBox"===this.mode?(this.updateDelimView(),this.changeOnBlur&&this.updateValueState(null,this.value,this.tempValues),this.updateDelimeter(this.delimiterChar),this.refreshInputHight()):this.updateDelimeter(this.delimiterChar),"CheckBox"!==this.mode||!this.showSelectAll||!i.i(o.isNullOrUndefined)(this.value)&&this.value.length||this.notify("checkSelectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:"uncheck"}),"Box"===this.mode||"Default"===this.mode&&this.inputFocus?this.chipCollectionWrapper.style.display="":"Delimiter"!==this.mode&&"CheckBox"!==this.mode||this.showDelimWrapper()}},t.prototype.updateActionCompleteData=function(e,t){this.value&&this.value.indexOf(e.getAttribute("data-value"))>-1&&(this.mainList=this.ulElement,this.hideSelectedItem&&i.i(o.addClass)([e],d))},t.prototype.updateAddItemList=function(e,t){this.popupObj&&this.popupObj.element&&this.popupObj.element.querySelector("."+s.a.noData)&&e?(this.list=e,this.mainList=this.ulElement=e.querySelector("ul"),i.i(o.remove)(this.popupWrapper.querySelector(".e-content")),this.popupObj=null,this.renderPopup()):this.allowCustomValue&&(this.list=e,this.mainList=this.ulElement=e.querySelector("ul"))},t.prototype.updateDataList=function(){if(this.mainList&&this.ulElement&&!(this.isFiltered||this.filterAction||this.targetElement().trim())){var e=this.mainList.childElementCount<this.ulElement.childElementCount,t=this.ulElement.childElementCount>0&&this.ulElement.children[0].childElementCount>0&&this.mainList.children[0]&&this.mainList.children[0].childElementCount<this.ulElement.children[0].childElementCount,i=this.itemTemplate&&this.ulElement.childElementCount>0&&!(this.ulElement.childElementCount<this.mainList.childElementCount)&&(this.ulElement.children[0].childElementCount>0||this.fields.groupBy&&this.ulElement.children[1]&&this.ulElement.children[1].childElementCount>0);(e||t||i)&&(this.mainList=this.ulElement)}},t.prototype.isValidLI=function(e){return e&&!e.classList.contains(s.a.disabled)&&!e.classList.contains(s.a.group)&&e.classList.contains(s.a.li)},t.prototype.updateListSelection=function(e,t,s){var l=e.getAttribute("data-value"),n=this.getFormattedValue(l);this.allowCustomValue&&("false"!==l&&!1===n||!i.i(o.isNullOrUndefined)(n)&&"NaN"===n.toString())&&(n=l),this.removeHover(),this.value&&-1!==this.value.indexOf(n)?this.removeValue(n,t,s):this.dispatchSelect(n,t,e,"true"===e.getAttribute("aria-selected"),s)},t.prototype.updateListSelectEventCallback=function(e,t,s){var l=this,n=this.getTextByValue(e);if(!this.allowCustomValue&&!this.allowFiltering||this.findListElement(this.mainList,"li","data-value",e))this.remoteCustomValue=!1,this.addValue(e,n,s);else{var r=t.cloneNode(!0),a=this.fields.value?this.fields.value:"value";this.allowCustomValue&&this.mainData.length&&"number"==typeof i.i(o.getValue)(a,this.mainData[0])&&(e=isNaN(parseFloat(e.toString()))?e:parseFloat(e.toString()));var h=this.getDataByValue(e),p={newData:h,cancel:!1};this.trigger("customValueSelection",p,function(t){t.cancel||(i.i(o.append)([r],l.mainList),l.mainData.push(h),l.remoteCustomValue=!1,l.addValue(e,n,s))})}},t.prototype.removeListSelection=function(){var e=this.hideSelectedItem?d:s.a.selected,t=this.list.querySelectorAll("."+e),l=t.length;if(t&&t.length)for(i.i(o.removeClass)(t,e);l>0;)t[l-1].setAttribute("aria-selected","false"),l--;if(!i.i(o.isNullOrUndefined)(this.mainList)){var n=this.mainList.querySelectorAll("."+e),r=n.length;if(n&&n.length)for(i.i(o.removeClass)(n,e);r>0;)n[r-1].setAttribute("aria-selected","false"),"CheckBox"===this.mode&&(t&&t.length>r-1&&i.i(o.removeClass)([t[r-1].firstElementChild.lastElementChild],"e-check"),i.i(o.removeClass)([n[r-1].firstElementChild.lastElementChild],"e-check")),r--}},t.prototype.removeHover=function(){var e=this.list.querySelectorAll("."+s.a.hover);e&&e.length&&i.i(o.removeClass)(e,s.a.hover)},t.prototype.removeFocus=function(){if(this.list&&this.mainList){var e=this.list.querySelectorAll("."+s.a.focus),t=this.mainList.querySelectorAll("."+s.a.focus);e&&e.length&&(i.i(o.removeClass)(e,s.a.focus),i.i(o.removeClass)(t,s.a.focus))}},t.prototype.addListHover=function(e){this.enabled&&this.isValidLI(e)?(this.removeHover(),i.i(o.addClass)([e],s.a.hover)):null!==e&&e.classList.contains("e-list-group-item")&&this.enableGroupCheckBox&&"CheckBox"===this.mode&&!i.i(o.isNullOrUndefined)(this.fields.groupBy)&&(this.removeHover(),i.i(o.addClass)([e],s.a.hover))},t.prototype.addListFocus=function(e){this.enabled&&this.isValidLI(e)?(this.removeFocus(),i.i(o.addClass)([e],s.a.focus),this.updateAriaActiveDescendant()):this.enableGroupCheckBox&&"CheckBox"===this.mode&&!i.i(o.isNullOrUndefined)(this.fields.groupBy)&&(i.i(o.addClass)([e],s.a.focus),this.updateAriaActiveDescendant())},t.prototype.addListSelection=function(e,t){var l=this.hideSelectedItem?d:s.a.selected;if(this.isValidLI(e)&&!e.classList.contains(s.a.hover)){if(i.i(o.addClass)([e],l),this.updateMainList(!1,e.getAttribute("data-value"),t),e.setAttribute("aria-selected","true"),"CheckBox"===this.mode&&e.classList.contains("e-active")){0===e.getElementsByClassName("e-check").length&&this.notify("updatelist",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,li:e,e:this})}this.notify("activeList",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,li:e,e:this}),this.chipCollectionWrapper&&this.removeChipSelection(),this.selectedElementID=e.id}},t.prototype.updateDelimeter=function(e,t){this.updateData(e,t)},t.prototype.onMouseClick=function(e){var t=this;this.keyCode=null,this.scrollFocusStatus=!1;var l=e.target,n=i.i(o.closest)(l,"."+s.a.li);if(i.i(o.closest)(l,"."+s.a.group)&&this.enableGroupCheckBox&&"CheckBox"===this.mode&&this.fields.groupBy)l=l.classList.contains("e-list-group-item")?l.firstElementChild.lastElementChild:e.target,l.classList.contains("e-check")?(this.selectAllItem(!1,e),l.classList.remove("e-check"),l.classList.remove("e-stop"),i.i(o.closest)(l,".e-list-group-item").classList.remove("e-active"),l.setAttribute("aria-selected","false")):(this.selectAllItem(!0,e),l.classList.remove("e-stop"),l.classList.add("e-check"),i.i(o.closest)(l,".e-list-group-item").classList.add("e-active"),l.setAttribute("aria-selected","true")),this.refreshSelection(),this.checkSelectAll();else{if(this.isValidLI(n)){var r=this.value&&this.value.length?this.value.length:0;n.classList.contains("e-active")&&(r-=1),r<this.maximumSelectionLength&&(this.updateListSelection(n,e),this.checkPlaceholderSize(),this.addListFocus(n),(this.allowCustomValue||this.allowFiltering)&&this.mainList&&this.listData?"CheckBox"!==this.mode&&(this.focusAtLastListItem(n.getAttribute("data-value")),this.refreshSelection()):this.makeTextBoxEmpty()),"CheckBox"===this.mode?(this.updateDelimView(),this.value&&this.value.length>50?setTimeout(function(){t.updateDelimeter(t.delimiterChar,e)},0):this.updateDelimeter(this.delimiterChar,e),this.refreshInputHight()):this.updateDelimeter(this.delimiterChar,e),this.checkSelectAll(),this.refreshPopup(),this.hideSelectedItem&&this.focusAtFirstListItem(),this.closePopupOnSelect?this.hidePopup(e):e.preventDefault(),this.makeTextBoxEmpty(),this.findGroupStart(l),"CheckBox"!==this.mode&&this.refreshListItems(i.i(o.isNullOrUndefined)(n)?null:n.textContent)}else e.preventDefault();this.refreshPlaceHolder(),this.deselectHeader()}},t.prototype.findGroupStart=function(e){if(this.enableGroupCheckBox&&"CheckBox"===this.mode&&!i.i(o.isNullOrUndefined)(this.fields.groupBy)){var t=void 0;if(this.itemTemplate&&!e.getElementsByClassName("e-frame").length)for(;!e.getElementsByClassName("e-frame").length;)e=e.parentElement;for(e.classList.contains("e-frame")&&(e=e.parentElement.parentElement),t=this.findGroupAttrtibutes(e,0,0,0,0),t=this.findGroupAttrtibutes(e,t[0],t[1],t[2],1);!e.classList.contains("e-list-group-item")&&(e.classList.contains("e-list-icon")&&(e=e.parentElement),null!=(e=e.previousElementSibling)););this.updateCheckBox(e,t[0],t[1],t[2])}},t.prototype.findGroupAttrtibutes=function(e,t,i,s,l){for(;!e.classList.contains("e-list-group-item")&&(e.classList.contains("e-list-icon")&&(e=e.parentElement),e.getElementsByClassName("e-frame")[0].classList.contains("e-check")&&e.classList.contains("e-list-item")?t++:e.classList.contains("e-list-item")&&i++,s++,null!=(e=l?e.nextElementSibling:e.previousElementSibling)););return[t,i,s]},t.prototype.updateCheckBox=function(e,t,s,l){if(null!==e){var n=e.getElementsByClassName("e-frame")[0];l===t?(n.classList.remove("e-stop"),n.classList.add("e-check"),i.i(o.closest)(n,".e-list-group-item").classList.add("e-active"),e.setAttribute("aria-selected","true")):l===s?(n.classList.remove("e-check"),n.classList.remove("e-stop"),i.i(o.closest)(n,".e-list-group-item").classList.remove("e-active"),e.setAttribute("aria-selected","false")):this.maximumSelectionLength===t-1?(n.classList.remove("e-stop"),e.setAttribute("aria-selected","true"),i.i(o.closest)(n,".e-list-group-item").classList.add("e-active"),n.classList.add("e-check")):(n.classList.remove("e-check"),n.classList.add("e-stop"),i.i(o.closest)(n,".e-list-group-item").classList.add("e-active"),e.setAttribute("aria-selected","false"))}},t.prototype.deselectHeader=function(){var e=this.value&&this.value.length?this.value.length:0,t=this.list.querySelectorAll("li.e-list-group-item:not(.e-active)");e<this.maximumSelectionLength&&i.i(o.removeClass)(t,"e-disable"),e===this.maximumSelectionLength&&i.i(o.addClass)(t,"e-disable")},t.prototype.onMouseOver=function(e){var t=i.i(o.closest)(e.target,"."+s.a.li);null===t&&"CheckBox"===this.mode&&!i.i(o.isNullOrUndefined)(this.fields.groupBy)&&this.enableGroupCheckBox&&(t=i.i(o.closest)(e.target,"."+s.a.group)),this.addListHover(t)},t.prototype.onMouseLeave=function(){this.removeHover()},t.prototype.onListMouseDown=function(e){e.preventDefault(),this.scrollFocusStatus=!0},t.prototype.onDocumentClick=function(e){if("CheckBox"!==this.mode){var t=e.target;!i.i(o.isNullOrUndefined)(this.popupObj)&&i.i(o.closest)(t,'[id="'+this.popupObj.element.id+'"]')||this.overAllWrapper.contains(e.target)?this.scrollFocusStatus=(o.Browser.isIE||"edge"===o.Browser.info.name)&&document.activeElement===this.inputElement:this.scrollFocusStatus=!1}},t.prototype.wireListEvents=function(){i.i(o.isNullOrUndefined)(this.list)||(o.EventHandler.add(document,"mousedown",this.onDocumentClick,this),o.EventHandler.add(this.list,"mousedown",this.onListMouseDown,this),o.EventHandler.add(this.list,"mouseup",this.onMouseClick,this),o.EventHandler.add(this.list,"mouseover",this.onMouseOver,this),o.EventHandler.add(this.list,"mouseout",this.onMouseLeave,this))},t.prototype.unwireListEvents=function(){o.EventHandler.remove(document,"mousedown",this.onDocumentClick),this.list&&(o.EventHandler.remove(this.list,"mousedown",this.onListMouseDown),o.EventHandler.remove(this.list,"mouseup",this.onMouseClick),o.EventHandler.remove(this.list,"mouseover",this.onMouseOver),o.EventHandler.remove(this.list,"mouseout",this.onMouseLeave))},t.prototype.hideOverAllClear=function(){this.value&&this.value.length&&""!==this.inputElement.value||(this.overAllClear.style.display="none")},t.prototype.showOverAllClear=function(){(this.value&&this.value.length||""!==this.inputElement.value)&&this.showClearButton&&!0!==this.readonly?this.overAllClear.style.display="":this.overAllClear.style.display="none"},t.prototype.focusIn=function(){document.activeElement!==this.inputElement&&this.enabled&&this.inputElement.focus()},t.prototype.focusOut=function(){document.activeElement===this.inputElement&&this.enabled&&this.inputElement.blur()},t.prototype.showSpinner=function(){if(i.i(o.isNullOrUndefined)(this.spinnerElement)){var e=this.filterParent&&this.filterParent.querySelector(".e-clear-icon.e-icons");"none"!==this.overAllClear.style.display||e?this.spinnerElement=e||this.overAllClear:(this.spinnerElement=this.createElement("span",{className:"e-chips-close e-close-hooker e-ms-spinner-icon"}),this.componentWrapper.appendChild(this.spinnerElement)),i.i(l.createSpinner)({target:this.spinnerElement,width:o.Browser.isDevice?"16px":"14px"},this.createElement),i.i(o.addClass)([this.spinnerElement],"e-ddl-disable-icon"),i.i(l.showSpinner)(this.spinnerElement)}},t.prototype.hideSpinner=function(){i.i(o.isNullOrUndefined)(this.spinnerElement)||(i.i(l.hideSpinner)(this.spinnerElement),i.i(o.removeClass)([this.spinnerElement],"e-ddl-disable-icon"),this.spinnerElement.classList.contains("e-ms-spinner-icon")?i.i(o.detach)(this.spinnerElement):this.spinnerElement.innerHTML="",this.spinnerElement=null)},t.prototype.updateWrapperText=function(e,t){this.valueTemplate||!this.enableHtmlSanitizer?e.innerHTML=this.encodeHtmlEntities(t):e.innerText=t},t.prototype.updateDelimView=function(){if(this.delimiterWrapper&&this.hideDelimWrapper(),this.chipCollectionWrapper&&(this.chipCollectionWrapper.style.display="none"),i.i(o.isNullOrUndefined)(this.viewWrapper)||(this.viewWrapper.style.display="",this.viewWrapper.style.width="",this.viewWrapper.classList.remove("e-delim-total")),this.value&&this.value.length){var e="",t=void 0,s=void 0,l=1,n=void 0,r=void 0,a=0,h=void 0;this.updateWrapperText(this.viewWrapper,e);var p={noRecordsTemplate:"No records found",actionFailureTemplate:"Request failed",overflowCountTemplate:"+${count} more..",totalCountTemplate:"${count} selected"},u=new o.L10n(this.getLocaleName(),p,this.locale);""===u.getConstant("actionFailureTemplate")&&(u=new o.L10n("dropdowns",p,this.locale)),""===u.getConstant("noRecordsTemplate")&&(u=new o.L10n("dropdowns",p,this.locale));var c=u.getConstant("overflowCountTemplate"),d=u.getConstant("totalCountTemplate"),m=this.createElement("span",{className:"e-remain"}),f=c.replace("${count}",this.value.length.toString());m.innerText=f,this.viewWrapper.appendChild(m),this.renderReactTemplates();var v=m.offsetWidth;if(i.i(o.remove)(m),this.showDropDownIcon&&(a=this.dropIcon.offsetWidth+parseInt(window.getComputedStyle(this.dropIcon).marginRight,10)),this.checkClearIconWidth(),!i.i(o.isNullOrUndefined)(this.value))for(var g=0;!i.i(o.isNullOrUndefined)(this.value[g]);g++){if(e+=0===g?"":this.delimiterChar+" ",t=this.getOverflowVal(g),e+=t,t=this.viewWrapper.innerHTML,this.updateWrapperText(this.viewWrapper,e),n=this.viewWrapper.offsetWidth+parseInt(window.getComputedStyle(this.viewWrapper).paddingRight,10),h=this.componentWrapper.offsetWidth-parseInt(window.getComputedStyle(this.componentWrapper).paddingLeft,10)-parseInt(window.getComputedStyle(this.componentWrapper).paddingRight,10),n+a+this.clearIconWidth>h){for(void 0!==s&&""!==s&&(t=s,g=l+1),this.updateWrapperText(this.viewWrapper,t),r=this.value.length-g,n=this.viewWrapper.offsetWidth+parseInt(window.getComputedStyle(this.viewWrapper).paddingRight,10);n+v+a+this.clearIconWidth>h&&0!==n&&""!==this.viewWrapper.innerHTML;){var y=[];this.viewWrapper.innerHTML=y.join(this.delimiterChar),r=this.value.length,n=this.viewWrapper.offsetWidth+parseInt(window.getComputedStyle(this.viewWrapper).paddingRight,10)}break}n+v+a+this.clearIconWidth<=h?(s=e,l=g):0===g&&(s="",l=-1)}if(r>0){var C=h-a-this.clearIconWidth;this.viewWrapper.appendChild(this.updateRemainTemplate(m,this.viewWrapper,r,c,d,C)),this.updateRemainWidth(this.viewWrapper,C),this.updateRemainingText(m,a,r,c,d)}}else i.i(o.isNullOrUndefined)(this.viewWrapper)||(this.viewWrapper.innerHTML="",this.viewWrapper.style.display="none")},t.prototype.checkClearIconWidth=function(){this.showClearButton&&(this.clearIconWidth=this.overAllClear.offsetWidth)},t.prototype.updateRemainWidth=function(e,t){e.classList.contains("e-delim-total")&&t<e.offsetWidth+parseInt(window.getComputedStyle(e).paddingLeft,10)+parseInt(window.getComputedStyle(e).paddingLeft,10)&&(e.style.width=t+"px")},t.prototype.updateRemainTemplate=function(e,t,i,s,l,n){t.firstChild&&3===t.firstChild.nodeType&&""===t.firstChild.nodeValue&&t.removeChild(t.firstChild),e.innerHTML="";var o=s.replace("${count}",i.toString()),r=l.replace("${count}",i.toString());return e.innerText=t.firstChild&&3===t.firstChild.nodeType?o:r,t.firstChild&&3===t.firstChild.nodeType?t.classList.remove("e-delim-total"):(t.classList.add("e-delim-total"),this.updateRemainWidth(t,n)),e},t.prototype.updateRemainingText=function(e,t,i,s,l){var n=this.componentWrapper.offsetWidth-parseInt(window.getComputedStyle(this.componentWrapper).paddingLeft,10)-parseInt(window.getComputedStyle(this.componentWrapper).paddingRight,10),o=this.viewWrapper.offsetWidth+parseInt(window.getComputedStyle(this.viewWrapper).paddingRight,10);if(o+t>=n&&0!==o&&this.viewWrapper.firstChild&&3===this.viewWrapper.firstChild.nodeType){for(;o+t>n&&0!==o&&this.viewWrapper.firstChild&&3===this.viewWrapper.firstChild.nodeType;){var r=this.viewWrapper.firstChild.nodeValue.split(this.delimiterChar);r.pop(),this.viewWrapper.firstChild.nodeValue=r.join(this.delimiterChar),""===this.viewWrapper.firstChild.nodeValue&&this.viewWrapper.removeChild(this.viewWrapper.firstChild),i++,o=this.viewWrapper.offsetWidth}var a=n-t;this.updateRemainTemplate(e,this.viewWrapper,i,s,l,a)}},t.prototype.getOverflowVal=function(e){var t;if(this.mainData&&this.mainData.length)if("CheckBox"===this.mode){var i=this.listData;this.listData=this.mainData,t=this.getTextByValue(this.value[e]),this.listData=i}else t=this.getTextByValue(this.value[e]);else t=this.value[e];return t},t.prototype.unWireEvent=function(){if(i.i(o.isNullOrUndefined)(this.componentWrapper)||o.EventHandler.remove(this.componentWrapper,"mousedown",this.wrapperClick),o.EventHandler.remove(window,"resize",this.windowResize),!i.i(o.isNullOrUndefined)(this.inputElement)){o.EventHandler.remove(this.inputElement,"focus",this.focusInHandler),o.EventHandler.remove(this.inputElement,"keydown",this.onKeyDown),"CheckBox"!==this.mode&&o.EventHandler.remove(this.inputElement,"input",this.onInput),o.EventHandler.remove(this.inputElement,"keyup",this.keyUp);var e=i.i(o.closest)(this.inputElement,"form");e&&o.EventHandler.remove(e,"reset",this.resetValueHandler),o.EventHandler.remove(this.inputElement,"blur",this.onBlurHandler)}i.i(o.isNullOrUndefined)(this.componentWrapper)||(o.EventHandler.remove(this.componentWrapper,"mouseover",this.mouseIn),o.EventHandler.remove(this.componentWrapper,"mouseout",this.mouseOut)),i.i(o.isNullOrUndefined)(this.overAllClear)||o.EventHandler.remove(this.overAllClear,"mousedown",this.clearAll),i.i(o.isNullOrUndefined)(this.inputElement)||o.EventHandler.remove(this.inputElement,"paste",this.pasteHandler)},t.prototype.selectAllItem=function(e,t,s){var l;if(i.i(o.isNullOrUndefined)(this.list)||(l=this.list.querySelectorAll(e?'li.e-list-item:not([aria-selected="true"]):not(.e-reorder-hide)':'li.e-list-item[aria-selected="true"]:not(.e-reorder-hide)')),this.value&&this.value.length&&t&&t.target&&i.i(o.closest)(t.target,".e-close-hooker")&&this.allowFiltering&&(l=this.mainList.querySelectorAll(e?'li.e-list-item:not([aria-selected="true"]):not(.e-reorder-hide)':'li.e-list-item[aria-selected="true"]:not(.e-reorder-hide)')),this.enableGroupCheckBox&&"CheckBox"===this.mode&&!i.i(o.isNullOrUndefined)(this.fields.groupBy)){var n=t?this.groupTemplate?i.i(o.closest)(t.target,".e-list-group-item"):t.target:null;if(n=t&&32===t.keyCode?s:n,(n=n&&n.classList.contains("e-frame")?n.parentElement.parentElement:n)&&n.classList.contains("e-list-group-item")){var r=n.nextElementSibling;if(i.i(o.isNullOrUndefined)(r))return;for(;r.classList.contains("e-list-item");){if(e){if(!r.firstElementChild.lastElementChild.classList.contains("e-check")){var a=this.value&&this.value.length?this.value.length:0;r.classList.contains("e-active")&&(a-=1),a<this.maximumSelectionLength&&this.updateListSelection(r,t)}}else r.firstElementChild.lastElementChild.classList.contains("e-check")&&this.updateListSelection(r,t);if(null==(r=r.nextElementSibling))break}if(n.classList.contains("e-list-group-item")){var h=this.list.getElementsByClassName("e-item-focus")[0];h&&h.classList.remove("e-item-focus"),e?n.classList.add("e-active"):n.classList.remove("e-active"),n.classList.add("e-item-focus"),this.updateAriaActiveDescendant()}this.textboxValueUpdate(),this.checkPlaceholderSize(),!this.changeOnBlur&&t&&this.updateValueState(t,this.value,this.tempValues)}else this.updateValue(t,l,e)}else this.updateValue(t,l,e);this.addValidInputClass()},t.prototype.updateValue=function(e,t,l){var n=this,r=t.length,a={event:e,items:l?t:[],itemData:l?this.listData:[],isInteracted:!!e,isChecked:l,preventSelectEvent:!1};if(this.trigger("beforeSelectAll",a),t&&t.length){var h=0,p=0;if(p=this.enableGroupCheckBox?l?this.maximumSelectionLength-(this.value?this.value.length:0):t.length:l?this.maximumSelectionLength-(this.value?this.value.length:0):this.maximumSelectionLength,a.preventSelectEvent){for(var u=0;u<t.length&&u<p;u++){this.removeHover();var c=t[u].getAttribute("data-value"),d=this.getFormattedValue(c),m=this.mainList?this.mainList.querySelectorAll(l?'li.e-list-item:not([aria-selected="true"]):not(.e-reorder-hide)':'li.e-list-item[aria-selected="true"]:not(.e-reorder-hide)')[u]:null;l?(this.value=this.value?this.value:[],this.value.indexOf(d)<0&&this.setProperties({value:[].concat([],this.value,[d])},!0),this.removeFocus(),this.addListSelection(t[u],m),this.updateChipStatus(),this.checkMaxSelection()):this.removeAllItems(d,e,!1,t[u],m),this.enableGroupCheckBox&&this.findGroupStart(t[u])}if(!l){if((this.value&&this.value.length?this.value.length:0)<this.maximumSelectionLength){var f=this.list.querySelectorAll("li."+s.a.li+":not(.e-active)");i.i(o.removeClass)(f,"e-disable")}}var v={event:e,items:l?t:[],itemData:l?this.listData:[],isInteracted:!!e,isChecked:l};this.trigger("selectedAll",v)}else{for(this.isSelectAllTarget=r===h+1;h<r&&h<=50&&h<p;)this.updateListSelection(t[h],e,r-h),this.enableGroupCheckBox&&this.findGroupStart(t[h]),h++;r>50&&setTimeout(function(){for(;h<r&&h<p;)n.isSelectAllTarget=r===h+1,n.updateListSelection(t[h],e,r-h),n.enableGroupCheckBox&&n.findGroupStart(t[h]),h++;if(n.updatedataValueItems(e),n.changeOnBlur||(n.updateValueState(e,n.value,n.tempValues),n.isSelectAll=n.isSelectAll?!n.isSelectAll:n.isSelectAll),n.updateHiddenElement(),n.popupWrapper&&t[h-1].classList.contains("e-item-focus")){var i=document.getElementsByClassName("e-selectall-parent")[0];i&&i.classList.contains("e-item-focus")&&t[h-1].classList.remove("e-item-focus")}},0)}}this.updatedataValueItems(e),this.checkPlaceholderSize(),r<=50&&!a.preventSelectEvent&&(this.changeOnBlur||(this.updateValueState(e,this.value,this.tempValues),this.isSelectAll=this.isSelectAll?!this.isSelectAll:this.isSelectAll),this.updateHiddenElement())},t.prototype.updateHiddenElement=function(){var e=this,t="",s="",l="",n=[];"CheckBox"===this.mode&&(this.value.map(function(i,o){t+='<option selected value ="'+i+'">'+o+"</option>",l=e.listData?e.getTextByValue(i):i,s+=l+e.delimiterChar+" ",n.push(l)}),this.hiddenElement.innerHTML=t,this.updateWrapperText(this.delimiterWrapper,s),this.delimiterWrapper.setAttribute("id",i.i(o.getUniqueID)("delim_val")),this.inputElement.setAttribute("aria-describedby",this.delimiterWrapper.id),this.setProperties({text:n.toString()},!0),this.refreshInputHight(),this.refreshPlaceHolder())},t.prototype.updatedataValueItems=function(e){this.deselectHeader(),this.textboxValueUpdate(e)},t.prototype.textboxValueUpdate=function(e){var t=e&&e.target&&(i.i(o.closest)(e.target,".e-selectall-parent")||i.i(o.closest)(e.target,".e-close-hooker"));"Box"===this.mode||this.isPopupOpen()||"CheckBox"===this.mode&&(this.isSelectAll||t)?this.searchWrapper.classList.remove("e-zero-size"):this.updateDelimView(),"CheckBox"===this.mode?(this.updateDelimView(),t||this.isSelectAll||!this.isSelectAllTarget||this.updateDelimeter(this.delimiterChar,e),this.refreshInputHight()):this.updateDelimeter(this.delimiterChar,e),this.refreshPlaceHolder()},t.prototype.setZIndex=function(){this.popupObj&&this.popupObj.setProperties({zIndex:this.zIndex})},t.prototype.updateDataSource=function(e){i.i(o.isNullOrUndefined)(this.list)?this.renderPopup():this.resetList(this.dataSource),this.value&&this.value.length&&(this.setProperties({value:this.value}),this.refreshSelection())},t.prototype.onLoadSelect=function(){this.setDynValue=!0,this.renderPopup()},t.prototype.selectAllItems=function(t,s){var l=this;if(i.i(o.isNullOrUndefined)(this.list))this.selectAllAction=function(){if("CheckBox"===l.mode&&l.showSelectAll){var e={module:"CheckBoxSelection",enable:"CheckBox"===l.mode,value:t?"check":"uncheck"};l.notify("checkSelectAll",e)}l.selectAllItem(t,s),l.selectAllAction=null},e.prototype.render.call(this);else{if(this.selectAllAction=null,"CheckBox"===this.mode&&this.showSelectAll){var n={value:t?"check":"uncheck",enable:"CheckBox"===this.mode,module:"CheckBoxSelection"};this.notify("checkSelectAll",n)}this.selectAllItem(t,s)}},t.prototype.getPersistData=function(){return this.addOnPersist(["value"])},t.prototype.onPropertyChanged=function(t,s){(t.dataSource&&!i.i(o.isNullOrUndefined)(Object.keys(t.dataSource))||t.query&&!i.i(o.isNullOrUndefined)(Object.keys(t.query)))&&(this.resetFilteredData&&(this.resetMainList=this.resetMainList?this.resetMainList:this.mainList,this.resetFilteredData=!1),this.mainList=null,this.mainData=null,this.isFirstClick=!1,this.isDynamicDataChange=!0),"multiselect"===this.getModuleName()&&(this.filterAction=!1,this.setUpdateInitial(["fields","query","dataSource"],t));for(var l=0,r=Object.keys(t);l<r.length;l++){var a=r[l];switch(a){case"query":case"dataSource":"CheckBox"===this.mode&&this.showSelectAll&&(i.i(o.isNullOrUndefined)(this.popupObj)||(this.popupObj.destroy(),this.popupObj=null),this.renderPopup());break;case"htmlAttributes":this.updateHTMLAttribute();break;case"showClearButton":this.updateClearButton(t.showClearButton);break;case"text":this.updateVal(this.value,this.value,"text");break;case"value":this.updateVal(this.value,s.value,"value"),this.addValidInputClass(),!this.closePopupOnSelect&&this.isPopupOpen()&&this.refreshPopup(),this.preventChange=this.isAngular&&this.preventChange?!this.preventChange:this.preventChange;break;case"width":this.setWidth(t.width),this.popupObj.setProperties({width:this.calcPopupWidth()});break;case"placeholder":this.refreshPlaceHolder();break;case"filterBarPlaceholder":this.allowFiltering&&this.notify("filterBarPlaceholder",{filterBarPlaceholder:t.filterBarPlaceholder});break;case"delimiterChar":"Box"!==this.mode&&this.updateDelimView(),this.updateData(t.delimiterChar);break;case"cssClass":this.updateOldPropCssClass(s.cssClass),this.updateCssClass(),this.calculateWidth();break;case"enableRtl":this.enableRTL(t.enableRtl),e.prototype.onPropertyChanged.call(this,t,s);break;case"readonly":this.updateReadonly(t.readonly),this.hidePopup();break;case"enabled":this.hidePopup(),this.enable(t.enabled);break;case"showSelectAll":this.popupObj&&(this.popupObj.destroy(),this.popupObj=null),this.renderPopup();break;case"showDropDownIcon":this.dropDownIcon();break;case"floatLabelType":this.setFloatLabelType(),this.addValidInputClass(),n.Input.createSpanElement(this.overAllWrapper,this.createElement),this.calculateWidth(),i.i(o.isNullOrUndefined)(this.overAllWrapper)||i.i(o.isNullOrUndefined)(this.overAllWrapper.getElementsByClassName("e-ddl-icon")[0]&&this.overAllWrapper.getElementsByClassName("e-float-text-content")[0]&&"Never"!==this.floatLabelType)||this.overAllWrapper.getElementsByClassName("e-float-text-content")[0].classList.add("e-icon");break;case"enableSelectionOrder":break;case"selectAllText":this.notify("selectAllText",!1);break;case"popupHeight":if(this.popupObj){var h=parseInt(this.popupHeight,10);"auto"!==this.popupHeight?(this.list.style.maxHeight=i.i(o.formatUnit)(h),this.popupWrapper.style.maxHeight=i.i(o.formatUnit)(this.popupHeight)):this.list.style.maxHeight=i.i(o.formatUnit)(this.popupHeight)}break;case"headerTemplate":case"footerTemplate":this.reInitializePoup();break;case"allowFiltering":"CheckBox"===this.mode&&this.popupObj&&this.reInitializePoup(),this.updateSelectElementData(this.allowFiltering);break;case"fields":i.i(o.isNullOrUndefined)(this.fields.groupBy)&&this.removeScrollEvent();break;default:var p=this.getPropObject(a,t,s);e.prototype.onPropertyChanged.call(this,p.newProperty,p.oldProperty)}}},t.prototype.reInitializePoup=function(){this.popupObj&&(this.popupObj.destroy(),this.popupObj=null),this.renderPopup()},t.prototype.presentItemValue=function(e){for(var t=[],s=0;s<this.value.length;s++){this.findListElement(this.allowFiltering&&!i.i(o.isNullOrUndefined)(this.mainList)?this.mainList:e,"li","data-value",this.value[s])||t.push(this.value[s])}return t},t.prototype.addNonPresentItems=function(e,t,i,s){var l=this;this.dataSource.executeQuery(this.getForQuery(e)).then(function(e){e.result.length>0&&l.addItem(e.result,i.length),l.updateActionList(t,i,s)})},t.prototype.updateVal=function(e,t,s){if(this.list)if(!(this.dataSource instanceof a.DataManager)||this.listData&&this.mainList&&this.mainData){var l=[];if(i.i(o.isNullOrUndefined)(this.value)||this.allowCustomValue||(l=this.presentItemValue(this.ulElement)),"value"==s&&l.length>0&&this.dataSource instanceof a.DataManager&&!i.i(o.isNullOrUndefined)(this.value)&&null!=this.listData)this.mainData=null,this.setDynValue=!0,this.addNonPresentItems(l,this.ulElement,this.listData);else{if("text"===s&&(this.initialTextUpdate(),e=this.value),(i.i(o.isNullOrUndefined)(this.value)||0===this.value.length)&&(this.tempValues=t),this.allowCustomValue&&("Default"===this.mode||"Box"===this.mode)&&this.isReact&&this.inputFocus&&this.isPopupOpen()&&this.mainData!==this.listData){var n=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.onActionComplete(n,this.mainData)}this.initialValueUpdate(),"Box"===this.mode||this.inputFocus||this.updateDelimView(),this.inputFocus||this.refreshInputHight(),this.refreshPlaceHolder(),"CheckBox"!==this.mode&&this.changeOnBlur&&this.updateValueState(null,e,t),this.checkPlaceholderSize()}}else this.onLoadSelect();else this.onLoadSelect();this.changeOnBlur||this.updateValueState(null,e,t)},t.prototype.addItem=function(t,i){e.prototype.addItem.call(this,t,i)},t.prototype.hidePopup=function(e){var t=this;if(this.isPopupOpen()){var s={name:"FadeOut",duration:100,delay:100},l={popup:this.popupObj,cancel:!1,animation:s,event:e||null};this.trigger("close",l,function(e){e.cancel||(t.fields.groupBy&&"CheckBox"!==t.mode&&t.fixedHeaderElement&&(i.i(o.remove)(t.fixedHeaderElement),t.fixedHeaderElement=null),t.beforePopupOpen=!1,t.overAllWrapper.classList.remove("e-icon-anim"),t.popupObj.hide(new o.Animation(e.animation)),i.i(o.attributes)(t.inputElement,{"aria-expanded":"false"}),t.inputElement.removeAttribute("aria-owns"),t.inputElement.removeAttribute("aria-activedescendant"),t.allowFiltering&&t.notify("inputFocus",{module:"CheckBoxSelection",enable:"CheckBox"===t.mode,value:"clear"}),t.popupObj.hide(),i.i(o.removeClass)([document.body,t.popupObj.element],"e-popup-full-page"),o.EventHandler.remove(t.list,"keydown",t.onKeyDown),"CheckBox"===t.mode&&t.showSelectAll&&o.EventHandler.remove(t.popupObj.element,"click",t.clickHandler))})}},t.prototype.showPopup=function(t){var i=this;if(this.enabled){var l={cancel:!1};this.trigger("beforeOpen",l,function(l){if(!l.cancel){if(!i.ulElement)return i.beforePopupOpen=!0,"CheckBox"===i.mode&&o.Browser.isDevice&&i.allowFiltering&&i.notify("popupFullScreen",{module:"CheckBoxSelection",enable:"CheckBox"===i.mode}),void e.prototype.render.call(i,t);"CheckBox"===i.mode&&o.Browser.isDevice&&i.allowFiltering&&i.notify("popupFullScreen",{module:"CheckBoxSelection",enable:"CheckBox"===i.mode});var n=i.ulElement.querySelectorAll("li.e-list-item").length,r=i.ulElement.querySelectorAll("li."+s.a.li+"."+d).length;if(n>0&&n===r&&r===i.mainData.length&&(""===i.targetElement()||!i.allowCustomValue))return void(i.beforePopupOpen=!1);i.onPopupShown(t)}})}},t.prototype.selectAll=function(e){this.isSelectAll=!0,this.selectAllItems(e)},t.prototype.getModuleName=function(){return"multiselect"},t.prototype.clear=function(){var e=this;this.selectAll(!1),this.value&&this.value.length?setTimeout(function(){e.setProperties({value:null},!0)},0):this.setProperties({value:null},!0)},t.prototype.render=function(){i.i(o.isNullOrUndefined)(this.value)||(this.value=this.value.slice()),this.setDynValue=this.initStatus=!1,this.isSelectAll=!1,this.selectAllEventEle=[],this.searchWrapper=this.createElement("span",{className:"e-searcher "+("Box"===this.mode?"e-multiselect-box":"")}),this.viewWrapper=this.createElement("span",{className:"e-delim-view e-delim-values",styles:"display:none;"}),this.overAllClear=this.createElement("span",{className:"e-chips-close e-close-hooker",styles:"display:none;"}),this.componentWrapper=this.createElement("div",{className:"e-multi-select-wrapper"}),this.overAllWrapper=this.createElement("div",{className:"e-multiselect e-input-group e-control-wrapper"}),"CheckBox"===this.mode&&i.i(o.addClass)([this.overAllWrapper],"e-checkbox"),o.Browser.isDevice&&this.componentWrapper.classList.add("e-mob-wrapper"),this.setWidth(this.width),this.overAllWrapper.appendChild(this.componentWrapper),this.popupWrapper=this.createElement("div",{id:this.element.id+"_popup",className:"e-ddl e-popup e-multi-select-list-wrapper"}),this.popupWrapper.setAttribute("aria-label",this.element.id),this.popupWrapper.setAttribute("role","dialog"),"Delimiter"===this.mode||"CheckBox"===this.mode?(this.delimiterWrapper=this.createElement("span",{className:"e-delim-values",styles:"display:none"}),this.componentWrapper.appendChild(this.delimiterWrapper)):(this.chipCollectionWrapper=this.createElement("span",{className:"e-chips-collection",styles:"display:none"}),"Default"===this.mode?this.chipCollectionWrapper.setAttribute("id",i.i(o.getUniqueID)("chip_default")):"Box"===this.mode&&this.chipCollectionWrapper.setAttribute("id",i.i(o.getUniqueID)("chip_box")),this.componentWrapper.appendChild(this.chipCollectionWrapper)),"Box"!==this.mode&&this.componentWrapper.appendChild(this.viewWrapper),this.componentWrapper.appendChild(this.searchWrapper),this.showClearButton&&!o.Browser.isDevice?this.componentWrapper.appendChild(this.overAllClear):this.componentWrapper.classList.add("e-close-icon-hide"),this.dropDownIcon(),this.inputElement=this.createElement("input",{className:"e-dropdownbase",attrs:{spellcheck:"false",type:"text",autocomplete:"off",tabindex:"0",role:"combobox"}}),"Default"!==this.mode&&"Box"!==this.mode||this.inputElement.setAttribute("aria-describedby",this.chipCollectionWrapper.id),this.element.tagName!==this.getNgDirective()&&(this.element.style.display="none"),this.element.tagName===this.getNgDirective()?(this.element.appendChild(this.overAllWrapper),this.searchWrapper.appendChild(this.inputElement)):(this.element.parentElement.insertBefore(this.overAllWrapper,this.element),this.searchWrapper.appendChild(this.inputElement),this.searchWrapper.appendChild(this.element),this.element.removeAttribute("tabindex")),"Never"!==this.floatLabelType?i.i(h.a)(this.overAllWrapper,this.searchWrapper,this.element,this.inputElement,this.value,this.floatLabelType,this.placeholder):"Never"===this.floatLabelType&&this.refreshPlaceHolder(),this.addValidInputClass(),this.element.style.opacity="";var e=this.element.getAttribute("id")?this.element.getAttribute("id"):i.i(o.getUniqueID)("ej2_dropdownlist");this.element.id=e,this.hiddenElement=this.createElement("select",{attrs:{"aria-hidden":"true",class:"e-multi-hidden",tabindex:"-1",multiple:""}}),this.componentWrapper.appendChild(this.hiddenElement),this.validationAttribute(this.element,this.hiddenElement),"CheckBox"!==this.mode&&this.hideOverAllClear(),!i.i(o.isNullOrUndefined)(i.i(o.closest)(this.element,"fieldset"))&&i.i(o.closest)(this.element,"fieldset").disabled&&(this.enabled=!1),this.wireEvent(),this.enable(this.enabled),this.enableRTL(this.enableRtl),this.checkInitialValue(),this.element.hasAttribute("data-val")&&this.element.setAttribute("data-val","false"),n.Input.createSpanElement(this.overAllWrapper,this.createElement),this.calculateWidth(),i.i(o.isNullOrUndefined)(this.overAllWrapper)||i.i(o.isNullOrUndefined)(this.overAllWrapper.getElementsByClassName("e-ddl-icon")[0]&&this.overAllWrapper.getElementsByClassName("e-float-text-content")[0]&&"Never"!==this.floatLabelType)||this.overAllWrapper.getElementsByClassName("e-float-text-content")[0].classList.add("e-icon"),this.renderComplete()},t.prototype.checkInitialValue=function(){var t=this,s=this.dataSource instanceof Array?this.dataSource.length>0:!i.i(o.isNullOrUndefined)(this.dataSource);if((!this.value||!this.value.length)&&i.i(o.isNullOrUndefined)(this.text)&&!s&&"SELECT"===this.element.tagName&&this.element.options.length>0){for(var l=this.element.options,n=[],r="",h=0,p=l.length;h<p;h++){var u=l[h];i.i(o.isNullOrUndefined)(u.getAttribute("selected"))||(u.getAttribute("value")?n.push(u.getAttribute("value")):r+=u.text+this.delimiterChar)}n.length>0?this.setProperties({value:n},!0):""!==r&&this.setProperties({text:r},!0),(n.length>0||""!==r)&&(this.refreshInputHight(),this.refreshPlaceHolder())}(this.value&&this.value.length||!i.i(o.isNullOrUndefined)(this.text))&&(this.list||e.prototype.render.call(this)),i.i(o.isNullOrUndefined)(this.text)||!i.i(o.isNullOrUndefined)(this.value)&&0!==this.value.length||this.initialTextUpdate(),this.value&&this.value.length?(this.dataSource instanceof a.DataManager?this.setInitialValue=function(){t.initStatus=!1,t.initialValueUpdate(),t.initialUpdate(),t.setInitialValue=null,t.initStatus=!0}:(this.initialValueUpdate(),this.initialUpdate()),this.updateTempValue()):this.initialUpdate(),this.initStatus=!0,this.checkAutoFocus(),i.i(o.isNullOrUndefined)(this.text)||this.element.setAttribute("data-initial-value",this.text)},t.prototype.checkAutoFocus=function(){this.element.hasAttribute("autofocus")&&this.inputElement.focus()},t.prototype.setFloatLabelType=function(){i.i(h.c)(this.overAllWrapper,this.componentWrapper,this.searchWrapper,this.inputElement,this.value,this.floatLabelType,this.placeholder),"Never"!==this.floatLabelType&&i.i(h.a)(this.overAllWrapper,this.searchWrapper,this.element,this.inputElement,this.value,this.floatLabelType,this.placeholder)},t.prototype.addValidInputClass=function(){i.i(o.isNullOrUndefined)(this.overAllWrapper)||(!i.i(o.isNullOrUndefined)(this.value)&&this.value.length||"Always"===this.floatLabelType?i.i(o.addClass)([this.overAllWrapper],"e-valid-input"):i.i(o.removeClass)([this.overAllWrapper],"e-valid-input"))},t.prototype.dropDownIcon=function(){this.showDropDownIcon?(this.dropIcon=this.createElement("span",{className:"e-input-group-icon e-ddl-icon"}),this.componentWrapper.appendChild(this.dropIcon),i.i(o.addClass)([this.componentWrapper],["e-down-icon"])):i.i(o.isNullOrUndefined)(this.dropIcon)||(this.dropIcon.parentElement.removeChild(this.dropIcon),i.i(o.removeClass)([this.componentWrapper],["e-down-icon"]))},t.prototype.initialUpdate=function(){"Box"===this.mode||this.setDynValue&&"Default"===this.mode&&this.inputFocus||this.updateDelimView(),this.updateCssClass(),this.updateHTMLAttribute(),this.updateReadonly(this.readonly),this.refreshInputHight(),this.checkPlaceholderSize()},t.prototype.destroy=function(){this.isReact&&this.clearTemplate(),this.popupObj&&this.popupObj.hide(),this.notify("destroy",{}),this.unwireListEvents(),this.unWireEvent(),this.list=null,this.popupObj=null,this.mainList=null,this.mainData=null,this.filterParent=null,this.ulElement=null,this.mainListCollection=null,e.prototype.destroy.call(this);var t=["readonly","aria-disabled","placeholder"],s=t.length;if(!i.i(o.isNullOrUndefined)(this.inputElement))for(;s>0;)this.inputElement.removeAttribute(t[s-1]),s--;i.i(o.isNullOrUndefined)(this.element)||(this.element.removeAttribute("data-initial-value"),this.element.style.display="block"),this.overAllWrapper&&this.overAllWrapper.parentElement&&(this.overAllWrapper.parentElement.tagName===this.getNgDirective()?i.i(o.remove)(this.overAllWrapper):(this.overAllWrapper.parentElement.insertBefore(this.element,this.overAllWrapper),i.i(o.remove)(this.overAllWrapper))),this.componentWrapper=null,this.overAllClear=null,this.overAllWrapper=null,this.hiddenElement=null,this.searchWrapper=null,this.viewWrapper=null,this.chipCollectionWrapper=null,this.targetInputElement=null,this.popupWrapper=null,this.inputElement=null,this.delimiterWrapper=null,this.popupObj=null,this.popupWrapper=null,this.liCollections=null,this.header=null,this.mainList=null,this.mainListCollection=null,this.footer=null,this.selectAllEventEle=null},u([i.i(o.Complex)({text:null,value:null,iconCss:null,groupBy:null},s.b)],t.prototype,"fields",void 0),u([i.i(o.Property)(!1)],t.prototype,"enablePersistence",void 0),u([i.i(o.Property)(null)],t.prototype,"groupTemplate",void 0),u([i.i(o.Property)("No records found")],t.prototype,"noRecordsTemplate",void 0),u([i.i(o.Property)("Request failed")],t.prototype,"actionFailureTemplate",void 0),u([i.i(o.Property)("None")],t.prototype,"sortOrder",void 0),u([i.i(o.Property)(!0)],t.prototype,"enabled",void 0),u([i.i(o.Property)(!0)],t.prototype,"enableHtmlSanitizer",void 0),u([i.i(o.Property)([])],t.prototype,"dataSource",void 0),u([i.i(o.Property)(null)],t.prototype,"query",void 0),u([i.i(o.Property)("StartsWith")],t.prototype,"filterType",void 0),u([i.i(o.Property)(1e3)],t.prototype,"zIndex",void 0),u([i.i(o.Property)(!1)],t.prototype,"ignoreAccent",void 0),u([i.i(o.Property)()],t.prototype,"locale",void 0),u([i.i(o.Property)(!1)],t.prototype,"enableGroupCheckBox",void 0),u([i.i(o.Property)(null)],t.prototype,"cssClass",void 0),u([i.i(o.Property)("100%")],t.prototype,"width",void 0),u([i.i(o.Property)("300px")],t.prototype,"popupHeight",void 0),u([i.i(o.Property)("100%")],t.prototype,"popupWidth",void 0),u([i.i(o.Property)(null)],t.prototype,"placeholder",void 0),u([i.i(o.Property)(null)],t.prototype,"filterBarPlaceholder",void 0),u([i.i(o.Property)({})],t.prototype,"htmlAttributes",void 0),u([i.i(o.Property)(null)],t.prototype,"valueTemplate",void 0),u([i.i(o.Property)(null)],t.prototype,"headerTemplate",void 0),u([i.i(o.Property)(null)],t.prototype,"footerTemplate",void 0),u([i.i(o.Property)(null)],t.prototype,"itemTemplate",void 0),u([i.i(o.Property)(null)],t.prototype,"allowFiltering",void 0),u([i.i(o.Property)(!0)],t.prototype,"changeOnBlur",void 0),u([i.i(o.Property)(!1)],t.prototype,"allowCustomValue",void 0),u([i.i(o.Property)(!0)],t.prototype,"showClearButton",void 0),u([i.i(o.Property)(1e3)],t.prototype,"maximumSelectionLength",void 0),u([i.i(o.Property)(!1)],t.prototype,"readonly",void 0),u([i.i(o.Property)(null)],t.prototype,"text",void 0),u([i.i(o.Property)(null)],t.prototype,"value",void 0),u([i.i(o.Property)(!0)],t.prototype,"hideSelectedItem",void 0),u([i.i(o.Property)(!0)],t.prototype,"closePopupOnSelect",void 0),u([i.i(o.Property)("Default")],t.prototype,"mode",void 0),u([i.i(o.Property)(",")],t.prototype,"delimiterChar",void 0),u([i.i(o.Property)(!0)],t.prototype,"ignoreCase",void 0),u([i.i(o.Property)(!1)],t.prototype,"showDropDownIcon",void 0),u([i.i(o.Property)("Never")],t.prototype,"floatLabelType",void 0),u([i.i(o.Property)(!1)],t.prototype,"showSelectAll",void 0),u([i.i(o.Property)("Select All")],t.prototype,"selectAllText",void 0),u([i.i(o.Property)("Unselect All")],t.prototype,"unSelectAllText",void 0),u([i.i(o.Property)(!0)],t.prototype,"enableSelectionOrder",void 0),u([i.i(o.Property)(!0)],t.prototype,"openOnClick",void 0),u([i.i(o.Property)(!1)],t.prototype,"addTagOnBlur",void 0),u([i.i(o.Event)()],t.prototype,"change",void 0),u([i.i(o.Event)()],t.prototype,"removing",void 0),u([i.i(o.Event)()],t.prototype,"removed",void 0),u([i.i(o.Event)()],t.prototype,"beforeSelectAll",void 0),u([i.i(o.Event)()],t.prototype,"selectedAll",void 0),u([i.i(o.Event)()],t.prototype,"beforeOpen",void 0),u([i.i(o.Event)()],t.prototype,"open",void 0),u([i.i(o.Event)()],t.prototype,"close",void 0),u([i.i(o.Event)()],t.prototype,"blur",void 0),u([i.i(o.Event)()],t.prototype,"focus",void 0),u([i.i(o.Event)()],t.prototype,"chipSelection",void 0),u([i.i(o.Event)()],t.prototype,"filtering",void 0),u([i.i(o.Event)()],t.prototype,"tagging",void 0),u([i.i(o.Event)()],t.prototype,"customValueSelection",void 0),t=u([o.NotifyPropertyChanges],t)}(s.c)},function(e,t){e.exports=o},function(e,t){e.exports=r}])});